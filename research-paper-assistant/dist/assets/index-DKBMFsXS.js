const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-DEBoOHuL.js","assets/react-vendor-D_pzOYKI.js","assets/firebase-vendor-BeduN6kg.js"])))=>i.map(i=>d[i]);
var Ch=Object.defineProperty;var uu=St=>{throw TypeError(St)};var Th=(St,t,xe)=>t in St?Ch(St,t,{enumerable:!0,configurable:!0,writable:!0,value:xe}):St[t]=xe;var oi=(St,t,xe)=>Th(St,typeof t!="symbol"?t+"":t,xe),tc=(St,t,xe)=>t.has(St)||uu("Cannot "+xe);var Je=(St,t,xe)=>(tc(St,t,"read from private field"),xe?xe.call(St):t.get(St)),er=(St,t,xe)=>t.has(St)?uu("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(St):t.set(St,xe),rr=(St,t,xe,e)=>(tc(St,t,"write to private field"),e?e.call(St,xe):t.set(St,xe),xe),Vn=(St,t,xe)=>(tc(St,t,"access private method"),xe);var Za=(St,t,xe,e)=>({set _(_e){rr(St,t,_e,xe)},get _(){return Je(St,t,e)}});import{r as reactExports,a as reactDomExports,u as useNavigate,L as Link,g as getAugmentedNamespace,b as getDefaultExportFromCjs,R as React,c as useParams,B as BrowserRouter,d as Routes,e as Route,N as Navigate}from"./react-vendor-D_pzOYKI.js";import{i as initializeApp,g as getAuth,a as getFirestore,d as doc,s as setDoc,b as deleteDoc,c as getDocs,e as collection,o as onAuthStateChanged,f as signOut,h as createUserWithEmailAndPassword,j as signInWithEmailAndPassword,T as Timestamp,u as updateDoc,k as getDoc,F as FirestoreError,l as arrayUnion}from"./firebase-vendor-BeduN6kg.js";function _mergeNamespaces(St,t){for(var xe=0;xe<t.length;xe++){const e=t[xe];if(typeof e!="string"&&!Array.isArray(e)){for(const _e in e)if(_e!=="default"&&!(_e in St)){const Se=Object.getOwnPropertyDescriptor(e,_e);Se&&Object.defineProperty(St,_e,Se.get?Se:{enumerable:!0,get:()=>e[_e]})}}}return Object.freeze(Object.defineProperty(St,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const _e of document.querySelectorAll('link[rel="modulepreload"]'))e(_e);new MutationObserver(_e=>{for(const Se of _e)if(Se.type==="childList")for(const Ee of Se.addedNodes)Ee.tagName==="LINK"&&Ee.rel==="modulepreload"&&e(Ee)}).observe(document,{childList:!0,subtree:!0});function xe(_e){const Se={};return _e.integrity&&(Se.integrity=_e.integrity),_e.referrerPolicy&&(Se.referrerPolicy=_e.referrerPolicy),_e.crossOrigin==="use-credentials"?Se.credentials="include":_e.crossOrigin==="anonymous"?Se.credentials="omit":Se.credentials="same-origin",Se}function e(_e){if(_e.ep)return;_e.ep=!0;const Se=xe(_e);fetch(_e.href,Se)}})();var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q$1(St,t,xe){var e,_e={},Se=null,Ee=null;xe!==void 0&&(Se=""+xe),t.key!==void 0&&(Se=""+t.key),t.ref!==void 0&&(Ee=t.ref);for(e in t)m$2.call(t,e)&&!p$1.hasOwnProperty(e)&&(_e[e]=t[e]);if(St&&St.defaultProps)for(e in t=St.defaultProps,t)_e[e]===void 0&&(_e[e]=t[e]);return{$$typeof:k$1,type:St,key:Se,ref:Ee,props:_e,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;const firebaseConfig={apiKey:"AIzaSyDwf-0BMhN4sZmRC0GGNoFTVChH3-3oOfc",authDomain:"papercraft-ai.firebaseapp.com",projectId:"papercraft-ai",storageBucket:"papercraft-ai.appspot.com",messagingSenderId:"308398619926",appId:"1:308398619926:web:572b091304129d8a60e437"};console.log("Firebase Config Details:",{apiKey:firebaseConfig.apiKey?"Set":"Missing",authDomain:firebaseConfig.authDomain?"Set":"Missing",projectId:firebaseConfig.projectId?"Set":"Missing",storageBucket:firebaseConfig.storageBucket?"Set":"Missing",messagingSenderId:firebaseConfig.messagingSenderId?"Set":"Missing",appId:firebaseConfig.appId?"Set":"Missing"});if(!firebaseConfig.apiKey||!firebaseConfig.authDomain||!firebaseConfig.projectId)throw new Error("Missing required Firebase configuration. Please check your environment variables.");let app;try{app=initializeApp(firebaseConfig),console.log("Firebase initialized successfully")}catch(St){throw console.error("Error initializing Firebase:",St),St}let auth,db,isInitialized=!1;const initializeFirebaseServices=async()=>{if(!isInitialized)try{auth=getAuth(app),console.log("Firebase Auth initialized successfully"),await new Promise((t,xe)=>{const e=auth.onAuthStateChanged(_e=>{console.log("Initial auth state:",_e?`User logged in: ${_e.email}`:"No user"),e(),t()},_e=>{console.error("Auth state initialization error:",_e),xe(_e)})}),db=getFirestore(app),console.log("Firestore initialized successfully");const St=doc(db,"_test","connectivity");try{await setDoc(St,{timestamp:new Date,test:"connectivity"}),console.log("Successfully wrote test document to Firestore"),await deleteDoc(St),console.log("Successfully cleaned up test document")}catch(t){throw console.error("Firestore connectivity test failed:",t),t}isInitialized=!0,console.log("Firebase services fully initialized")}catch(St){throw console.error("Firebase services initialization error:",St),new Error("Failed to initialize Firebase services. Please check your configuration and network connection.")}},checkFirestoreRules=async()=>{try{const St=await getDocs(collection(db,"papers"));console.log("Firestore read test:",St.empty?"Empty collection":"Collection accessible");const t=doc(collection(db,"_test_rules"));return await setDoc(t,{test:!0}),await deleteDoc(t),console.log("Firestore write test passed"),!0}catch(St){return console.error("Firestore rules test failed:",St),!1}};initializeFirebaseServices().then(()=>checkFirestoreRules()).then(St=>{St||console.error("Firestore rules check failed - permissions might be misconfigured")}).catch(console.error);const AuthContext=reactExports.createContext(void 0),useAuth=()=>{const St=reactExports.useContext(AuthContext);if(!St)throw new Error("useAuth must be used within an AuthProvider");return St},AuthProvider=({children:St})=>{const[t,xe]=reactExports.useState(null),[e,_e]=reactExports.useState(!0),[Se,Ee]=reactExports.useState(null);console.log("AuthProvider render",{loading:e,user:t==null?void 0:t.email});const Re=async(Me,Ue)=>{try{Ee(null),console.log("Starting sign in process...");const He=await signInWithEmailAndPassword(auth,Me,Ue);console.log("Firebase Auth sign in successful");const Te=doc(db,`_test_auth/${Me}`);try{await setDoc(Te,{lastSignIn:new Date,email:Me,uid:He.user.uid}),console.log("Firestore write test successful"),await deleteDoc(Te)}catch(Ve){throw console.error("Firestore access test failed:",Ve),await signOut(auth),new Error("Authentication successful but database access failed. Please check your connection and try again.")}}catch(He){throw console.error("Sign in error:",He),Ee(He.message||"Failed to sign in"),He}},Ce=async(Me,Ue)=>{try{Ee(null),console.log("Starting sign up process...");const He=await createUserWithEmailAndPassword(auth,Me,Ue);console.log("Firebase Auth sign up successful");const Te=doc(db,`_test_auth/${Me}`);try{await setDoc(Te,{createdAt:new Date,email:Me,uid:He.user.uid}),console.log("Firestore write test successful"),await deleteDoc(Te)}catch(Ve){throw console.error("Firestore access test failed:",Ve),await signOut(auth),new Error("Account created but database access failed. Please try signing in again.")}}catch(He){throw console.error("Sign up error:",He),Ee(He.message||"Failed to sign up"),He}},De=async()=>{try{Ee(null),await signOut(auth),console.log("Sign out successful")}catch(Me){throw console.error("Sign out error:",Me),Ee(Me.message||"Failed to sign out"),Me}};return reactExports.useEffect(()=>{console.log("Setting up auth state listener");let Me=!0;const Ue=onAuthStateChanged(auth,async He=>{if(Me){if(console.log("Auth state changed:",{user:He==null?void 0:He.email,authenticated:!!He}),He)try{const Te=doc(db,`_test_auth/${He.email}`);await setDoc(Te,{lastActive:new Date,email:He.email}),await deleteDoc(Te),console.log("Firestore access verified on auth state change")}catch(Te){console.error("Firestore access failed on auth state change:",Te),Ee("Lost database access. Please sign in again."),await signOut(auth);return}xe(He),_e(!1)}},He=>{Me&&(console.error("Auth state change error:",He),Ee(He.message),_e(!1))});return()=>{Me=!1,console.log("Cleaning up auth state listener"),Ue()}},[]),jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:t,loading:e,error:Se,signIn:Re,signUp:Ce,signOutUser:De},children:e?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Initializing authentication..."}),Se&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm",children:Se})]})}):St})},initialState={isProcessing:!1,suggestions:[],currentTask:null,error:null},agentReducer=(St,t)=>{switch(t.type){case"START_PROCESSING":return{...St,isProcessing:!0,currentTask:t.task,error:null};case"STOP_PROCESSING":return{...St,isProcessing:!1,currentTask:null};case"ADD_SUGGESTION":return{...St,suggestions:[...St.suggestions,t.suggestion]};case"CLEAR_SUGGESTIONS":return{...St,suggestions:[]};case"SET_ERROR":return{...St,error:t.error,isProcessing:!1};case"CLEAR_ERROR":return{...St,error:null};default:return St}},AgentContext=reactExports.createContext(void 0),AgentProvider=({children:St})=>{const[t,xe]=reactExports.useReducer(agentReducer,initialState),e={state:t,startProcessing:_e=>xe({type:"START_PROCESSING",task:_e}),stopProcessing:()=>xe({type:"STOP_PROCESSING"}),addSuggestion:_e=>xe({type:"ADD_SUGGESTION",suggestion:_e}),clearSuggestions:()=>xe({type:"CLEAR_SUGGESTIONS"}),setError:_e=>xe({type:"SET_ERROR",error:_e}),clearError:()=>xe({type:"CLEAR_ERROR"})};return jsxRuntimeExports.jsx(AgentContext.Provider,{value:e,children:St})};function AcademicCapIcon({title:St,titleId:t,...xe},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":t},xe),St?reactExports.createElement("title",{id:t},St):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const ForwardRef$4=reactExports.forwardRef(AcademicCapIcon);function ArrowRightIcon({title:St,titleId:t,...xe},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":t},xe),St?reactExports.createElement("title",{id:t},St):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const ForwardRef$3=reactExports.forwardRef(ArrowRightIcon);function DocumentTextIcon({title:St,titleId:t,...xe},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":t},xe),St?reactExports.createElement("title",{id:t},St):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const ForwardRef$2=reactExports.forwardRef(DocumentTextIcon);function TrashIcon({title:St,titleId:t,...xe},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":t},xe),St?reactExports.createElement("title",{id:t},St):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const ForwardRef$1=reactExports.forwardRef(TrashIcon);function XMarkIcon({title:St,titleId:t,...xe},e){return reactExports.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":t},xe),St?reactExports.createElement("title",{id:t},St):null,reactExports.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ForwardRef=reactExports.forwardRef(XMarkIcon);let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let St=0;St<256;++St)byteToHex.push((St+256).toString(16).slice(1));function unsafeStringify(St,t=0){return byteToHex[St[t+0]]+byteToHex[St[t+1]]+byteToHex[St[t+2]]+byteToHex[St[t+3]]+"-"+byteToHex[St[t+4]]+byteToHex[St[t+5]]+"-"+byteToHex[St[t+6]]+byteToHex[St[t+7]]+"-"+byteToHex[St[t+8]]+byteToHex[St[t+9]]+"-"+byteToHex[St[t+10]]+byteToHex[St[t+11]]+byteToHex[St[t+12]]+byteToHex[St[t+13]]+byteToHex[St[t+14]]+byteToHex[St[t+15]]}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(St,t,xe){if(native.randomUUID&&!St)return native.randomUUID();St=St||{};const e=St.random||(St.rng||rng)();return e[6]=e[6]&15|64,e[8]=e[8]&63|128,unsafeStringify(e)}const createErrorMessage=St=>St instanceof FirestoreError?`Database error: ${St.message}`:St instanceof Error?St.message:"An unknown error occurred",convertToPaper=St=>({...St,createdAt:St.createdAt.toDate(),lastModified:St.lastModified.toDate()}),usePaper=()=>{const[St,t]=reactExports.useState(null),[xe,e]=reactExports.useState(!1),[_e,Se]=reactExports.useState(null),{user:Ee}=useAuth(),Re=reactExports.useCallback(Xe=>{if(!Ee)throw new Error("User must be authenticated");return doc(db,"users",Ee.uid,"papers",Xe)},[Ee]),Ce=async Xe=>{e(!0),Se(null);try{return await Xe()}catch(en){const We=createErrorMessage(en);throw Se(We),new Error(We)}finally{e(!1)}},De=reactExports.useCallback(async(Xe,en)=>{if(!Ee)throw new Error("User must be authenticated to create a paper");return Ce(async()=>{const We=v4(),ze=Timestamp.now(),Qe={id:We,title:Xe,abstract:en,sections:[],citations:[],lastModified:ze,createdAt:ze,userId:Ee.uid},gn=Re(We);await setDoc(gn,Qe);const ke=convertToPaper(Qe);return t(ke),ke})},[Ee,Re]),Me=reactExports.useCallback(async Xe=>{if(!St)throw new Error("No paper selected");return Ce(async()=>{const en=Timestamp.now(),We={...Xe,lastModified:en},ze=Re(St.id);await updateDoc(ze,We);const Qe={...St,...Xe,lastModified:en.toDate()};t(Qe)})},[St,Re]),Ue=reactExports.useCallback(async Xe=>{if(!St)throw new Error("No paper selected");const en=Timestamp.now(),We=Re(St.id);await updateDoc(We,{sections:Xe,lastModified:en}),t({...St,sections:Xe,lastModified:en.toDate()})},[St,Re]),He=reactExports.useCallback(async Xe=>Ce(async()=>{const en={...Xe,id:v4()};return await Ue([...(St==null?void 0:St.sections)||[],en]),en}),[St,Ue]),Te=reactExports.useCallback(async(Xe,en)=>Ce(async()=>{if(!St)throw new Error("No paper selected");const We=St.sections.map(ze=>ze.id===Xe?{...ze,...en}:ze);await Ue(We)}),[St,Ue]),Ve=reactExports.useCallback(async Xe=>Ce(async()=>{if(!St)throw new Error("No paper selected");const en=St.sections.filter(We=>We.id!==Xe);await Ue(en)}),[St,Ue]),$e=reactExports.useCallback(async Xe=>{if(!St)throw new Error("No paper selected");const en=Timestamp.now(),We=Re(St.id);await updateDoc(We,{citations:Xe,lastModified:en}),t({...St,citations:Xe,lastModified:en.toDate()})},[St,Re]),Ke=reactExports.useCallback(async Xe=>Ce(async()=>{const en={...Xe,id:v4()};await $e([...(St==null?void 0:St.citations)||[],en])}),[St,$e]),Be=reactExports.useCallback(async(Xe,en)=>Ce(async()=>{if(!St)throw new Error("No paper selected");const We=St.citations.map(ze=>ze.id===Xe?{...ze,...en}:ze);await $e(We)}),[St,$e]),Ye=reactExports.useCallback(async Xe=>Ce(async()=>{if(!St)throw new Error("No paper selected");const en=St.citations.filter(We=>We.id!==Xe);await $e(en)}),[St,$e]),an=reactExports.useCallback(async Xe=>Ce(async()=>{if(!Ee)throw new Error("User must be authenticated");const en=Re(Xe),We=await getDoc(en);if(!We.exists())throw new Error("Paper not found");const ze=We.data();t(convertToPaper(ze))}),[Ee,Re]),rn=reactExports.useCallback(async()=>{if(!Ee)throw new Error("User must be authenticated to list papers");return Ce(async()=>{const Xe=collection(db,"users",Ee.uid,"papers");return(await getDocs(Xe)).docs.map(We=>{const ze=We.data();return convertToPaper(ze)})})},[Ee]);return{paper:St,loading:xe,error:_e,createPaper:De,updatePaper:Me,addSection:He,updateSection:Te,deleteSection:Ve,addCitation:Ke,updateCitation:Be,deleteCitation:Ye,loadPaper:an,getUserPapers:rn}};class ApiService{constructor(){oi(this,"baseUrl");this.baseUrl="http://localhost:3001"}async request(t,xe={}){const e=await fetch(`${this.baseUrl}${t}`,{...xe,headers:{"Content-Type":"application/json",...xe.headers}}),_e=await e.json();if(!e.ok)throw new Error(_e.error||"API request failed");return _e}async post(t,xe){return this.request(t,{method:"POST",body:JSON.stringify(xe)})}async generatePaper(t){const xe=`Generate a comprehensive research paper on "${t}" with the following structure and requirements:
    
    - Abstract (approximately 250 words): A concise summary of the research
    - Introduction (approximately 350 words): Background and research objectives
    - Literature Review (approximately 450 words): Comprehensive review of existing research
    - Methodology (approximately 500 words): Include detailed methodology with tables and figures where appropriate
    - Results: Present findings with supporting data
    - Discussion: Analyze results in context of existing literature
    - Conclusion: Summarize key findings and implications
    - References: Include relevant academic citations
    
    Please ensure proper academic formatting, spacing, and professional presentation.`;return(await this.post("/generate-paper",{topic:t,prompt:xe})).paper}async fetchCitations(t){return(await this.post("/fetch-citations",{topic:t})).citations}async formatPaper(t,xe){return(await this.post("/format-paper",{paper:t,style:xe})).formattedPaper}async generateTitle(t,xe){return(await this.post("/ai/generate-title",{topic:t,keywords:xe})).title}async generateAbstract(t,xe){return(await this.post("/ai/generate-abstract",{title:t,mainPoints:xe})).abstract}async analyzeParagraph(t){return await this.post("/ai/analyze",{content:t})}async generateOutline(t,xe){return await this.post("/ai/generate-outline",{title:t,keywords:xe})}async improveWriting(t,xe,e){return await this.post("/api/ai/improve-writing",{prompt:t,aspect:xe,context:e})}}const apiService=new ApiService,PAPER_SECTIONS=["Abstract","Introduction","Literature Review","Methodology","Results","Discussion","Conclusion","References"],Home=()=>{const[St,t]=reactExports.useState([]),[xe,e]=reactExports.useState(!1),[_e,Se]=reactExports.useState(""),[Ee,Re]=reactExports.useState(""),[Ce,De]=reactExports.useState("APA"),[Me,Ue]=reactExports.useState(null),[He,Te]=reactExports.useState(!1),[Ve,$e]=reactExports.useState(null),[Ke,Be]=reactExports.useState([]),{user:Ye}=useAuth(),{createPaper:an,getUserPapers:rn}=usePaper(),Xe=useNavigate();reactExports.useEffect(()=>{Ye&&(async()=>{try{const ze=await rn();t(ze)}catch(ze){console.error("Error loading papers:",ze)}})()},[Ye,rn]);const en=async()=>{try{if(!_e.trim())return;if(!Ye)throw new Error("You must be logged in to generate a paper");Te(!0),Ue(null),Be([]),$e("Starting generation...");const We=await apiService.generatePaper(_e);if(Be(ke=>[...ke,"Starting generation"]),!(We!=null&&We.Abstract))throw new Error("Failed to generate paper abstract");$e("Creating paper structure..."),Be(ke=>[...ke,"Paper structure"]);const ze=await an(Ee||_e,We.Abstract);if(!We.Abstract)throw new Error("Failed to generate abstract");$e("Adding Abstract..."),Be(ke=>[...ke,"Abstract"]);const Qe=PAPER_SECTIONS.filter(ke=>ke!=="Abstract").map(ke=>{const Ge=We[ke];if(!Ge)throw new Error(`Failed to generate content for section: ${ke}`);return{key:ke,title:ke,content:Ge}});for(const ke of Qe){$e(`Adding ${ke.title}...`);try{await updateDoc(doc(db,"users",Ye.uid,"papers",ze.id),{sections:arrayUnion({id:v4(),title:ke.title,content:ke.content,order:PAPER_SECTIONS.indexOf(ke.title)})}),Be(Ge=>[...Ge,ke.title])}catch(Ge){throw console.error(`Error adding section ${ke.title}:`,Ge),new Error(`Failed to add section: ${ke.title}`)}}$e("Adding citations..."),Be(ke=>[...ke,"Citations"]);const gn=await apiService.fetchCitations(_e);await updateDoc(doc(db,"users",Ye.uid,"papers",ze.id),{citations:gn.map(ke=>({...ke,id:v4()}))}),e(!1),Se(""),De("APA"),Xe(`/editor/${ze.id}`)}catch(We){const ze=We instanceof Error?We.message:"Failed to generate paper";console.error("Error generating paper:",We),Ue(ze),Be([])}finally{Te(!1),$e(null)}};return Ye?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Research Papers"}),jsxRuntimeExports.jsxs("button",{onClick:()=>e(!0),className:"flex items-center bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:[jsxRuntimeExports.jsx(ForwardRef$4,{className:"h-5 w-5 mr-2"}),"Generate Paper"]})]}),St.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[jsxRuntimeExports.jsx(ForwardRef$2,{className:"mx-auto h-12 w-12 text-gray-400"}),jsxRuntimeExports.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No papers"}),jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by generating a new research paper"}),jsxRuntimeExports.jsx("div",{className:"mt-6",children:jsxRuntimeExports.jsxs("button",{onClick:()=>e(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:[jsxRuntimeExports.jsx(ForwardRef$4,{className:"h-5 w-5 mr-2"}),"Generate Paper"]})})]}):jsxRuntimeExports.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:St.map(We=>jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:We.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:We.abstract}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:new Date(We.lastModified).toLocaleDateString()}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-3",children:[jsxRuntimeExports.jsx("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this paper?")&&Ye)try{await deleteDoc(doc(db,"users",Ye.uid,"papers",We.id)),t(ze=>ze.filter(Qe=>Qe.id!==We.id))}catch(ze){console.error("Error deleting paper:",ze)}},className:"text-red-600 hover:text-red-700",children:"Delete"}),jsxRuntimeExports.jsxs("button",{onClick:()=>Xe(`/editor/${We.id}`),className:"flex items-center text-blue-600 hover:text-blue-700",children:["Open",jsxRuntimeExports.jsx(ForwardRef$3,{className:"h-4 w-4 ml-1"})]})]})]})]})},We.id))})]}),xe&&jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 flex z-50",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 bg-black bg-opacity-50 p-4 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full",children:[Me&&jsxRuntimeExports.jsx("div",{className:"mb-4 bg-red-50 p-4 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex",children:[jsxRuntimeExports.jsx("div",{className:"flex-shrink-0",children:jsxRuntimeExports.jsx(ForwardRef,{className:"h-5 w-5 text-red-400"})}),jsxRuntimeExports.jsx("div",{className:"ml-3",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-800",children:Me})})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center mb-6",children:[jsxRuntimeExports.jsx(ForwardRef$4,{className:"h-8 w-8 text-green-600 mr-3"}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"Generate Research Paper"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"paperTitle",className:"block text-sm font-medium text-gray-700",children:"Paper Title"}),jsxRuntimeExports.jsx("input",{type:"text",id:"paperTitle",value:Ee,onChange:We=>Re(We.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",placeholder:"Enter the title for your paper"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"researchTopic",className:"block text-sm font-medium text-gray-700",children:"Research Topic"}),jsxRuntimeExports.jsx("textarea",{id:"researchTopic",value:_e,onChange:We=>Se(We.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",placeholder:"Enter your prompt to add more details..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"citationStyle",className:"block text-sm font-medium text-gray-700",children:"Citation Style"}),jsxRuntimeExports.jsxs("select",{id:"citationStyle",value:Ce,onChange:We=>De(We.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",children:[jsxRuntimeExports.jsx("option",{value:"APA",children:"APA"}),jsxRuntimeExports.jsx("option",{value:"MLA",children:"MLA"}),jsxRuntimeExports.jsx("option",{value:"Chicago",children:"Chicago"}),jsxRuntimeExports.jsx("option",{value:"IEEE",children:"IEEE"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{e(!1),Se(""),Re(""),De("APA"),Be([])},className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:en,disabled:!_e.trim()||!Ee.trim()||He,className:`px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center ${He||!_e.trim()||!Ee.trim()?"opacity-50 cursor-not-allowed":""}`,children:He?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):"Generate Paper"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"w-1/3 bg-gray-900 p-8 overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold text-white",children:"Generation Progress"}),jsxRuntimeExports.jsx("button",{onClick:()=>{e(!1),Se(""),Re(""),De("APA")},className:"text-white bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded",children:"Back"})]}),Ve&&jsxRuntimeExports.jsx("div",{className:"space-y-4",children:PAPER_SECTIONS.map(We=>{const ze=Ke.includes(We)||(Ve==null?void 0:Ve.includes(We))&&!He,Qe=(Ve==null?void 0:Ve.includes(We))&&He;return jsxRuntimeExports.jsx("div",{className:`p-4 rounded-lg ${ze?"bg-green-600 text-white":Qe?"bg-blue-600 text-white":"bg-gray-800 text-gray-400"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"flex-1",children:We}),ze?jsxRuntimeExports.jsx("svg",{className:"h-5 w-5 text-white",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{d:"M5 13l4 4L19 7"})}):Qe?jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white"}):null]})},We)})})]})]})]}):jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Research Paper Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Please sign in to manage your research papers"}),jsxRuntimeExports.jsx("button",{onClick:()=>Xe("/login"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700",children:"Sign In"})]})})},Footer=()=>jsxRuntimeExports.jsx("footer",{className:"w-full bg-gray-900 text-white py-6 mt-auto",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium",children:"Developed by"}),jsxRuntimeExports.jsx("a",{href:"https://github.com/MoAftaab",target:"_blank",rel:"noopener noreferrer",className:"text-lg font-bold hover:text-blue-400 transition-colors",children:"MOHD AFTAAB"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center space-x-4",children:jsxRuntimeExports.jsx("a",{href:"https://github.com/MoAftaab",target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white transition-colors",children:jsxRuntimeExports.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z",clipRule:"evenodd"})})})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["Â© ",new Date().getFullYear()," All rights reserved"]})]})})}),AuthLayout=({children:St,title:t,subtitle:xe})=>jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md w-full space-y-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(ForwardRef$4,{className:"mx-auto h-12 w-12 text-blue-600"}),jsxRuntimeExports.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:t}),jsxRuntimeExports.jsx("p",{className:"mt-2 text-sm text-gray-600",children:xe})]}),St]})}),SignIn=()=>{const[St,t]=reactExports.useState(""),[xe,e]=reactExports.useState(""),[_e,Se]=reactExports.useState(null),[Ee,Re]=reactExports.useState(!1),{signIn:Ce}=useAuth(),De=useNavigate(),Me=async Ue=>{Ue.preventDefault(),Se(null),Re(!0);try{console.log("Starting sign in process..."),await Ce(St,xe),console.log("Sign in successful");const Te=getAuth().currentUser;console.log("Current user after sign in:",{exists:!!Te,email:Te==null?void 0:Te.email,emailVerified:Te==null?void 0:Te.emailVerified,uid:Te==null?void 0:Te.uid});try{const Ve=getFirestore(),$e=doc(Ve,`users/${Te==null?void 0:Te.uid}/test/connectivity`);await setDoc($e,{timestamp:new Date,email:Te==null?void 0:Te.email}),console.log("Firestore write test successful"),await deleteDoc($e)}catch(Ve){throw console.error("Firestore test failed:",Ve),new Error("Authentication successful but database access failed. Please try again.")}De("/")}catch(He){const Te=He instanceof Error?He.message:"Sign in failed";console.error("Sign in error:",He),Se(Te)}finally{Re(!1)}};return jsxRuntimeExports.jsx(AuthLayout,{title:"Sign in to your account",subtitle:"Start creating and managing your research papers",children:jsxRuntimeExports.jsxs("form",{className:"mt-8 space-y-6",onSubmit:Me,children:[_e&&jsxRuntimeExports.jsx("div",{className:"rounded-md bg-red-50 p-4",children:jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx("div",{className:"ml-3",children:jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-red-800",children:_e})})})}),jsxRuntimeExports.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),jsxRuntimeExports.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:St,onChange:Ue=>t(Ue.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),jsxRuntimeExports.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:xe,onChange:Ue=>e(Ue.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ee,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${Ee?"opacity-50 cursor-not-allowed":""}`,children:Ee?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):"Sign in"})}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Don't have an account? "}),jsxRuntimeExports.jsx(Link,{to:"/signup",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})]})]})})},SignUp=()=>{const[St,t]=reactExports.useState(""),[xe,e]=reactExports.useState(""),[_e,Se]=reactExports.useState(""),[Ee,Re]=reactExports.useState(null),[Ce,De]=reactExports.useState(!1),{signUp:Me}=useAuth(),Ue=useNavigate(),He=async Te=>{if(Te.preventDefault(),Re(null),xe!==_e){Re("Passwords do not match");return}if(xe.length<6){Re("Password must be at least 6 characters long");return}De(!0);try{await Me(St,xe),Ue("/")}catch(Ve){Re(Ve.message)}finally{De(!1)}};return jsxRuntimeExports.jsx(AuthLayout,{title:"Create your account",subtitle:"Join us and start writing better research papers",children:jsxRuntimeExports.jsxs("form",{className:"mt-8 space-y-6",onSubmit:He,children:[Ee&&jsxRuntimeExports.jsx("div",{className:"rounded-md bg-red-50 p-4",children:jsxRuntimeExports.jsx("div",{className:"flex",children:jsxRuntimeExports.jsx("div",{className:"ml-3",children:jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-red-800",children:Ee})})})}),jsxRuntimeExports.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email address"}),jsxRuntimeExports.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:St,onChange:Te=>t(Te.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),jsxRuntimeExports.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:xe,onChange:Te=>e(Te.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{htmlFor:"confirm-password",className:"sr-only",children:"Confirm Password"}),jsxRuntimeExports.jsx("input",{id:"confirm-password",name:"confirm-password",type:"password",autoComplete:"new-password",required:!0,value:_e,onChange:Te=>Se(Te.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirm password"})]})]}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("button",{type:"submit",disabled:Ce,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${Ce?"opacity-50 cursor-not-allowed":""}`,children:Ce?jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating account..."]}):"Sign up"})}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),jsxRuntimeExports.jsx(Link,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})]})})};function commonjsRequire(St){throw new Error('Could not dynamically require "'+St+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,xe){module.exports=t.pdfjsLib=xe()})(globalThis,()=>(()=>{var __webpack_modules__=[,(St,t)=>{var Vr;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=un,t.bytesToString=In,t.createValidAbsoluteUrl=Nn,t.getModificationDate=fr,t.getUuid=Rr,t.getVerbosityLevel=wn,t.info=Sn,t.isArrayBuffer=qn,t.isArrayEqual=pr,t.isNodeJS=void 0,t.normalizeUnicode=hr,t.objectFromMap=Dn,t.objectSize=Jn,t.setVerbosityLevel=dn,t.shadow=je,t.string32=Wn,t.stringToBytes=zn,t.stringToPDFString=Hn,t.stringToUTF8String=tr,t.unreachable=Pn,t.utf8StringToString=ir,t.warn=yn;const xe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=xe;const e=[1,0,0,1,0,0];t.IDENTITY_MATRIX=e;const _e=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=_e;const Se=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=Se;const Ee=1.35;t.LINE_FACTOR=Ee;const Re=.35;t.LINE_DESCENT_FACTOR=Re;const Ce=Re/Ee;t.BASELINE_FACTOR=Ce;const De={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=De;const Me={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=Me;const Ue="pdfjs_internal_editor_";t.AnnotationEditorPrefix=Ue;const He={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=He;const Te={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=Te;const Ve={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=Ve;const $e={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=$e;const Ke={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=Ke;const Be={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=Be;const Ye={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=Ye;const an={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=an;const rn={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=rn;const Xe={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=Xe;const en={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=en;const We={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=We;const ze={O:"PageOpen",C:"PageClose"};t.PageActionEventType=ze;const Qe={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=Qe;const gn={NONE:0,BINARY:1};t.CMapCompressionType=gn;const ke={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=ke;const Ge={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=Ge;let nn=Qe.WARNINGS;function dn(or){Number.isInteger(or)&&(nn=or)}function wn(){return nn}function Sn(or){nn>=Qe.INFOS&&console.log(`Info: ${or}`)}function yn(or){nn>=Qe.WARNINGS&&console.log(`Warning: ${or}`)}function Pn(or){throw new Error(or)}function un(or,Xn){or||Pn(Xn)}function _n(or){switch(or==null?void 0:or.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Nn(or,Xn=null,Qn=null){if(!or)return null;try{if(Qn&&typeof or=="string"){if(Qn.addDefaultProtocol&&or.startsWith("www.")){const Xr=or.match(/\./g);(Xr==null?void 0:Xr.length)>=2&&(or=`http://${or}`)}if(Qn.tryConvertEncoding)try{or=tr(or)}catch{}}const Sr=Xn?new URL(or,Xn):new URL(or);if(_n(Sr))return Sr}catch{}return null}function je(or,Xn,Qn,Sr=!1){return Object.defineProperty(or,Xn,{value:Qn,enumerable:!Sr,configurable:!0,writable:!1}),Qn}const Ie=function(){function Xn(Qn,Sr){this.constructor===Xn&&Pn("Cannot initialize BaseException."),this.message=Qn,this.name=Sr}return Xn.prototype=new Error,Xn.constructor=Xn,Xn}();t.BaseException=Ie;class Oe extends Ie{constructor(Xn,Qn){super(Xn,"PasswordException"),this.code=Qn}}t.PasswordException=Oe;class Ze extends Ie{constructor(Xn,Qn){super(Xn,"UnknownErrorException"),this.details=Qn}}t.UnknownErrorException=Ze;class sn extends Ie{constructor(Xn){super(Xn,"InvalidPDFException")}}t.InvalidPDFException=sn;class on extends Ie{constructor(Xn){super(Xn,"MissingPDFException")}}t.MissingPDFException=on;class hn extends Ie{constructor(Xn,Qn){super(Xn,"UnexpectedResponseException"),this.status=Qn}}t.UnexpectedResponseException=hn;class An extends Ie{constructor(Xn){super(Xn,"FormatError")}}t.FormatError=An;class Mn extends Ie{constructor(Xn){super(Xn,"AbortException")}}t.AbortException=Mn;function In(or){(typeof or!="object"||(or==null?void 0:or.length)===void 0)&&Pn("Invalid argument for bytesToString");const Xn=or.length,Qn=8192;if(Xn<Qn)return String.fromCharCode.apply(null,or);const Sr=[];for(let Xr=0;Xr<Xn;Xr+=Qn){const qr=Math.min(Xr+Qn,Xn),Fn=or.subarray(Xr,qr);Sr.push(String.fromCharCode.apply(null,Fn))}return Sr.join("")}function zn(or){typeof or!="string"&&Pn("Invalid argument for stringToBytes");const Xn=or.length,Qn=new Uint8Array(Xn);for(let Sr=0;Sr<Xn;++Sr)Qn[Sr]=or.charCodeAt(Sr)&255;return Qn}function Wn(or){return String.fromCharCode(or>>24&255,or>>16&255,or>>8&255,or&255)}function Jn(or){return Object.keys(or).length}function Dn(or){const Xn=Object.create(null);for(const[Qn,Sr]of or)Xn[Qn]=Sr;return Xn}function cn(){const or=new Uint8Array(4);return or[0]=1,new Uint32Array(or.buffer,0,1)[0]===1}function Bn(){try{return new Function(""),!0}catch{return!1}}class mn{static get isLittleEndian(){return je(this,"isLittleEndian",cn())}static get isEvalSupported(){return je(this,"isEvalSupported",Bn())}static get isOffscreenCanvasSupported(){return je(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?je(this,"platform",{isWin:!1,isMac:!1}):je(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var Xn,Qn;return je(this,"isCSSRoundSupported",(Qn=(Xn=globalThis.CSS)==null?void 0:Xn.supports)==null?void 0:Qn.call(Xn,"width: round(1.5px, 1px)"))}}t.FeatureTest=mn;const bn=[...Array(256).keys()].map(or=>or.toString(16).padStart(2,"0"));class Rn{static makeHexColor(Xn,Qn,Sr){return`#${bn[Xn]}${bn[Qn]}${bn[Sr]}`}static scaleMinMax(Xn,Qn){let Sr;Xn[0]?(Xn[0]<0&&(Sr=Qn[0],Qn[0]=Qn[1],Qn[1]=Sr),Qn[0]*=Xn[0],Qn[1]*=Xn[0],Xn[3]<0&&(Sr=Qn[2],Qn[2]=Qn[3],Qn[3]=Sr),Qn[2]*=Xn[3],Qn[3]*=Xn[3]):(Sr=Qn[0],Qn[0]=Qn[2],Qn[2]=Sr,Sr=Qn[1],Qn[1]=Qn[3],Qn[3]=Sr,Xn[1]<0&&(Sr=Qn[2],Qn[2]=Qn[3],Qn[3]=Sr),Qn[2]*=Xn[1],Qn[3]*=Xn[1],Xn[2]<0&&(Sr=Qn[0],Qn[0]=Qn[1],Qn[1]=Sr),Qn[0]*=Xn[2],Qn[1]*=Xn[2]),Qn[0]+=Xn[4],Qn[1]+=Xn[4],Qn[2]+=Xn[5],Qn[3]+=Xn[5]}static transform(Xn,Qn){return[Xn[0]*Qn[0]+Xn[2]*Qn[1],Xn[1]*Qn[0]+Xn[3]*Qn[1],Xn[0]*Qn[2]+Xn[2]*Qn[3],Xn[1]*Qn[2]+Xn[3]*Qn[3],Xn[0]*Qn[4]+Xn[2]*Qn[5]+Xn[4],Xn[1]*Qn[4]+Xn[3]*Qn[5]+Xn[5]]}static applyTransform(Xn,Qn){const Sr=Xn[0]*Qn[0]+Xn[1]*Qn[2]+Qn[4],Xr=Xn[0]*Qn[1]+Xn[1]*Qn[3]+Qn[5];return[Sr,Xr]}static applyInverseTransform(Xn,Qn){const Sr=Qn[0]*Qn[3]-Qn[1]*Qn[2],Xr=(Xn[0]*Qn[3]-Xn[1]*Qn[2]+Qn[2]*Qn[5]-Qn[4]*Qn[3])/Sr,qr=(-Xn[0]*Qn[1]+Xn[1]*Qn[0]+Qn[4]*Qn[1]-Qn[5]*Qn[0])/Sr;return[Xr,qr]}static getAxialAlignedBoundingBox(Xn,Qn){const Sr=this.applyTransform(Xn,Qn),Xr=this.applyTransform(Xn.slice(2,4),Qn),qr=this.applyTransform([Xn[0],Xn[3]],Qn),Fn=this.applyTransform([Xn[2],Xn[1]],Qn);return[Math.min(Sr[0],Xr[0],qr[0],Fn[0]),Math.min(Sr[1],Xr[1],qr[1],Fn[1]),Math.max(Sr[0],Xr[0],qr[0],Fn[0]),Math.max(Sr[1],Xr[1],qr[1],Fn[1])]}static inverseTransform(Xn){const Qn=Xn[0]*Xn[3]-Xn[1]*Xn[2];return[Xn[3]/Qn,-Xn[1]/Qn,-Xn[2]/Qn,Xn[0]/Qn,(Xn[2]*Xn[5]-Xn[4]*Xn[3])/Qn,(Xn[4]*Xn[1]-Xn[5]*Xn[0])/Qn]}static singularValueDecompose2dScale(Xn){const Qn=[Xn[0],Xn[2],Xn[1],Xn[3]],Sr=Xn[0]*Qn[0]+Xn[1]*Qn[2],Xr=Xn[0]*Qn[1]+Xn[1]*Qn[3],qr=Xn[2]*Qn[0]+Xn[3]*Qn[2],Fn=Xn[2]*Qn[1]+Xn[3]*Qn[3],ur=(Sr+Fn)/2,vr=Math.sqrt((Sr+Fn)**2-4*(Sr*Fn-qr*Xr))/2,yr=ur+vr||1,Lr=ur-vr||1;return[Math.sqrt(yr),Math.sqrt(Lr)]}static normalizeRect(Xn){const Qn=Xn.slice(0);return Xn[0]>Xn[2]&&(Qn[0]=Xn[2],Qn[2]=Xn[0]),Xn[1]>Xn[3]&&(Qn[1]=Xn[3],Qn[3]=Xn[1]),Qn}static intersect(Xn,Qn){const Sr=Math.max(Math.min(Xn[0],Xn[2]),Math.min(Qn[0],Qn[2])),Xr=Math.min(Math.max(Xn[0],Xn[2]),Math.max(Qn[0],Qn[2]));if(Sr>Xr)return null;const qr=Math.max(Math.min(Xn[1],Xn[3]),Math.min(Qn[1],Qn[3])),Fn=Math.min(Math.max(Xn[1],Xn[3]),Math.max(Qn[1],Qn[3]));return qr>Fn?null:[Sr,qr,Xr,Fn]}static bezierBoundingBox(Xn,Qn,Sr,Xr,qr,Fn,ur,vr){const yr=[],Lr=[[],[]];let kr,Tn,Ln,Un,Gn,sr,dr,gr;for(let Wr=0;Wr<2;++Wr){if(Wr===0?(Tn=6*Xn-12*Sr+6*qr,kr=-3*Xn+9*Sr-9*qr+3*ur,Ln=3*Sr-3*Xn):(Tn=6*Qn-12*Xr+6*Fn,kr=-3*Qn+9*Xr-9*Fn+3*vr,Ln=3*Xr-3*Qn),Math.abs(kr)<1e-12){if(Math.abs(Tn)<1e-12)continue;Un=-Ln/Tn,0<Un&&Un<1&&yr.push(Un);continue}dr=Tn*Tn-4*Ln*kr,gr=Math.sqrt(dr),!(dr<0)&&(Gn=(-Tn+gr)/(2*kr),0<Gn&&Gn<1&&yr.push(Gn),sr=(-Tn-gr)/(2*kr),0<sr&&sr<1&&yr.push(sr))}let Nr=yr.length,Tr;const Er=Nr;for(;Nr--;)Un=yr[Nr],Tr=1-Un,Lr[0][Nr]=Tr*Tr*Tr*Xn+3*Tr*Tr*Un*Sr+3*Tr*Un*Un*qr+Un*Un*Un*ur,Lr[1][Nr]=Tr*Tr*Tr*Qn+3*Tr*Tr*Un*Xr+3*Tr*Un*Un*Fn+Un*Un*Un*vr;return Lr[0][Er]=Xn,Lr[1][Er]=Qn,Lr[0][Er+1]=ur,Lr[1][Er+1]=vr,Lr[0].length=Lr[1].length=Er+2,[Math.min(...Lr[0]),Math.min(...Lr[1]),Math.max(...Lr[0]),Math.max(...Lr[1])]}}t.Util=Rn;const On=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Hn(or){if(or[0]>="Ã¯"){let Qn;if(or[0]==="Ã¾"&&or[1]==="Ã¿"?Qn="utf-16be":or[0]==="Ã¿"&&or[1]==="Ã¾"?Qn="utf-16le":or[0]==="Ã¯"&&or[1]==="Â»"&&or[2]==="Â¿"&&(Qn="utf-8"),Qn)try{const Sr=new TextDecoder(Qn,{fatal:!0}),Xr=zn(or);return Sr.decode(Xr)}catch(Sr){yn(`stringToPDFString: "${Sr}".`)}}const Xn=[];for(let Qn=0,Sr=or.length;Qn<Sr;Qn++){const Xr=On[or.charCodeAt(Qn)];Xn.push(Xr?String.fromCharCode(Xr):or.charAt(Qn))}return Xn.join("")}function tr(or){return decodeURIComponent(escape(or))}function ir(or){return unescape(encodeURIComponent(or))}function qn(or){return typeof or=="object"&&(or==null?void 0:or.byteLength)!==void 0}function pr(or,Xn){if(or.length!==Xn.length)return!1;for(let Qn=0,Sr=or.length;Qn<Sr;Qn++)if(or[Qn]!==Xn[Qn])return!1;return!0}function fr(or=new Date){return[or.getUTCFullYear().toString(),(or.getUTCMonth()+1).toString().padStart(2,"0"),or.getUTCDate().toString().padStart(2,"0"),or.getUTCHours().toString().padStart(2,"0"),or.getUTCMinutes().toString().padStart(2,"0"),or.getUTCSeconds().toString().padStart(2,"0")].join("")}class Mr{constructor(){er(this,Vr,!1);this.promise=new Promise((Xn,Qn)=>{this.resolve=Sr=>{rr(this,Vr,!0),Xn(Sr)},this.reject=Sr=>{rr(this,Vr,!0),Qn(Sr)}})}get settled(){return Je(this,Vr)}}Vr=new WeakMap,t.PromiseCapability=Mr;let _r=null,Ir=null;function hr(or){return _r||(_r=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ir=new Map([["ï¬","Å¿t"]])),or.replaceAll(_r,(Xn,Qn,Sr)=>Qn?Qn.normalize("NFKC"):Ir.get(Sr))}function Rr(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const or=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(or);else for(let Xn=0;Xn<32;Xn++)or[Xn]=Math.floor(Math.random()*255);return In(or)}const jr="pdfjs_internal_id_";t.AnnotationPrefix=jr},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var St,xe,e,_e,ma,Jo,Re,Ce,De,Me,Ue,He,Te,Ve,$e,Zo,Be,Ye,nc,rn,Xe;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(We){if(typeof We=="string"||We instanceof URL?We={url:We}:(0,_util.isArrayBuffer)(We)&&(We={data:We}),typeof We!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!We.url&&!We.data&&!We.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const ze=new PDFDocumentLoadingTask,{docId:Qe}=ze,gn=We.url?getUrlProp(We.url):null,ke=We.data?getDataProp(We.data):null,Ge=We.httpHeaders||null,nn=We.withCredentials===!0,dn=We.password??null,wn=We.range instanceof PDFDataRangeTransport?We.range:null,Sn=Number.isInteger(We.rangeChunkSize)&&We.rangeChunkSize>0?We.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let yn=We.worker instanceof PDFWorker?We.worker:null;const Pn=We.verbosity,un=typeof We.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(We.docBaseUrl)?We.docBaseUrl:null,_n=typeof We.cMapUrl=="string"?We.cMapUrl:null,Nn=We.cMapPacked!==!1,je=We.CMapReaderFactory||DefaultCMapReaderFactory,Ie=typeof We.standardFontDataUrl=="string"?We.standardFontDataUrl:null,Oe=We.StandardFontDataFactory||DefaultStandardFontDataFactory,Ze=We.stopAtErrors!==!0,sn=Number.isInteger(We.maxImageSize)&&We.maxImageSize>-1?We.maxImageSize:-1,on=We.isEvalSupported!==!1,hn=typeof We.isOffscreenCanvasSupported=="boolean"?We.isOffscreenCanvasSupported:!_util.isNodeJS,An=Number.isInteger(We.canvasMaxAreaInBytes)?We.canvasMaxAreaInBytes:-1,Mn=typeof We.disableFontFace=="boolean"?We.disableFontFace:_util.isNodeJS,In=We.fontExtraProperties===!0,zn=We.enableXfa===!0,Wn=We.ownerDocument||globalThis.document,Jn=We.disableRange===!0,Dn=We.disableStream===!0,cn=We.disableAutoFetch===!0,Bn=We.pdfBug===!0,mn=wn?wn.length:We.length??NaN,bn=typeof We.useSystemFonts=="boolean"?We.useSystemFonts:!_util.isNodeJS&&!Mn,Rn=typeof We.useWorkerFetch=="boolean"?We.useWorkerFetch:je===_display_utils.DOMCMapReaderFactory&&Oe===_display_utils.DOMStandardFontDataFactory&&_n&&Ie&&(0,_display_utils.isValidFetchUrl)(_n,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Ie,document.baseURI),On=We.canvasFactory||new DefaultCanvasFactory({ownerDocument:Wn}),Hn=We.filterFactory||new DefaultFilterFactory({docId:Qe,ownerDocument:Wn}),tr=null;(0,_util.setVerbosityLevel)(Pn);const ir={canvasFactory:On,filterFactory:Hn};if(Rn||(ir.cMapReaderFactory=new je({baseUrl:_n,isCompressed:Nn}),ir.standardFontDataFactory=new Oe({baseUrl:Ie})),!yn){const fr={verbosity:Pn,port:_worker_options.GlobalWorkerOptions.workerPort};yn=fr.port?PDFWorker.fromPort(fr):new PDFWorker(fr),ze._worker=yn}const qn={docId:Qe,apiVersion:"3.11.174",data:ke,password:dn,disableAutoFetch:cn,rangeChunkSize:Sn,length:mn,docBaseUrl:un,enableXfa:zn,evaluatorOptions:{maxImageSize:sn,disableFontFace:Mn,ignoreErrors:Ze,isEvalSupported:on,isOffscreenCanvasSupported:hn,canvasMaxAreaInBytes:An,fontExtraProperties:In,useSystemFonts:bn,cMapUrl:Rn?_n:null,standardFontDataUrl:Rn?Ie:null}},pr={ignoreErrors:Ze,isEvalSupported:on,disableFontFace:Mn,fontExtraProperties:In,enableXfa:zn,ownerDocument:Wn,disableAutoFetch:cn,pdfBug:Bn,styleElement:tr};return yn.promise.then(function(){if(ze.destroyed)throw new Error("Loading aborted");const fr=_fetchDocument(yn,qn),Mr=new Promise(function(_r){let Ir;wn?Ir=new _transport_stream.PDFDataTransportStream({length:mn,initialData:wn.initialData,progressiveDone:wn.progressiveDone,contentDispositionFilename:wn.contentDispositionFilename,disableRange:Jn,disableStream:Dn},wn):ke||(Ir=(Rr=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Rr):(0,_display_utils.isValidFetchUrl)(Rr.url)?new _displayFetch_stream.PDFFetchStream(Rr):new _displayNetwork.PDFNetworkStream(Rr))({url:gn,length:mn,httpHeaders:Ge,withCredentials:nn,rangeChunkSize:Sn,disableRange:Jn,disableStream:Dn})),_r(Ir)});return Promise.all([fr,Mr]).then(function([_r,Ir]){if(ze.destroyed)throw new Error("Loading aborted");const hr=new _message_handler.MessageHandler(Qe,_r,yn.port),Rr=new WorkerTransport(hr,ze,Ir,pr,ir);ze._transport=Rr,hr.send("Ready",null)})}).catch(ze._capability.reject),ze}async function _fetchDocument(We,ze){if(We.destroyed)throw new Error("Worker was destroyed");const Qe=await We.messageHandler.sendWithPromise("GetDocRequest",ze,ze.data?[ze.data.buffer]:null);if(We.destroyed)throw new Error("Worker was destroyed");return Qe}function getUrlProp(We){if(We instanceof URL)return We.href;try{return new URL(We,window.location).href}catch{if(_util.isNodeJS&&typeof We=="string")return We}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(We){if(_util.isNodeJS&&typeof Buffer<"u"&&We instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(We instanceof Uint8Array&&We.byteLength===We.buffer.byteLength)return We;if(typeof We=="string")return(0,_util.stringToBytes)(We);if(typeof We=="object"&&!isNaN(We==null?void 0:We.length)||(0,_util.isArrayBuffer)(We))return new Uint8Array(We);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Za(t,St)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var ze,Qe,gn;this.destroyed=!0;try{(ze=this._worker)!=null&&ze.port&&(this._worker._pendingDestroy=!0),await((Qe=this._transport)==null?void 0:Qe.destroy())}catch(ke){throw(gn=this._worker)!=null&&gn.port&&delete this._worker._pendingDestroy,ke}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};St=new WeakMap,er(t,St,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(ze,Qe,gn=!1,ke=null){this.length=ze,this.initialData=Qe,this.progressiveDone=gn,this.contentDispositionFilename=ke,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(ze){this._rangeListeners.push(ze)}addProgressListener(ze){this._progressListeners.push(ze)}addProgressiveReadListener(ze){this._progressiveReadListeners.push(ze)}addProgressiveDoneListener(ze){this._progressiveDoneListeners.push(ze)}onDataRange(ze,Qe){for(const gn of this._rangeListeners)gn(ze,Qe)}onDataProgress(ze,Qe){this._readyCapability.promise.then(()=>{for(const gn of this._progressListeners)gn(ze,Qe)})}onDataProgressiveRead(ze){this._readyCapability.promise.then(()=>{for(const Qe of this._progressiveReadListeners)Qe(ze)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const ze of this._progressiveDoneListeners)ze()})}transportReady(){this._readyCapability.resolve()}requestDataRange(ze,Qe){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(ze,Qe){this._pdfInfo=ze,this._transport=Qe,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(gn=>{if(!gn)return gn;const ke=[];for(const Ge in gn)ke.push(...gn[Ge]);return ke}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(ze){return this._transport.getPage(ze)}getPageIndex(ze){return this._transport.getPageIndex(ze)}getDestinations(){return this._transport.getDestinations()}getDestination(ze){return this._transport.getDestination(ze)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(ze=!1){return this._transport.startCleanup(ze||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(ze,Qe,gn,ke=!1){er(this,_e);er(this,xe,null);er(this,e,!1);this._pageIndex=ze,this._pageInfo=Qe,this._transport=gn,this._stats=ke?new _display_utils.StatTimer:null,this._pdfBug=ke,this.commonObjs=gn.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:ze,rotation:Qe=this.rotate,offsetX:gn=0,offsetY:ke=0,dontFlip:Ge=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:ze,rotation:Qe,offsetX:gn,offsetY:ke,dontFlip:Ge})}getAnnotations({intent:ze="display"}={}){const Qe=this._transport.getRenderingIntent(ze);return this._transport.getAnnotations(this._pageIndex,Qe.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var ze;return((ze=this._transport._htmlForXfa)==null?void 0:ze.children[this._pageIndex])||null}render({canvasContext:ze,viewport:Qe,intent:gn="display",annotationMode:ke=_util.AnnotationMode.ENABLE,transform:Ge=null,background:nn=null,optionalContentConfigPromise:dn=null,annotationCanvasMap:wn=null,pageColors:Sn=null,printAnnotationStorage:yn=null}){var Oe,Ze;(Oe=this._stats)==null||Oe.time("Overall");const Pn=this._transport.getRenderingIntent(gn,ke,yn);rr(this,e,!1),Vn(this,_e,Jo).call(this),dn||(dn=this._transport.getOptionalContentConfig());let un=this._intentStates.get(Pn.cacheKey);un||(un=Object.create(null),this._intentStates.set(Pn.cacheKey,un)),un.streamReaderCancelTimeout&&(clearTimeout(un.streamReaderCancelTimeout),un.streamReaderCancelTimeout=null);const _n=!!(Pn.renderingIntent&_util.RenderingIntentFlag.PRINT);un.displayReadyCapability||(un.displayReadyCapability=new _util.PromiseCapability,un.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ze=this._stats)==null||Ze.time("Page Request"),this._pumpOperatorList(Pn));const Nn=sn=>{var on,hn;un.renderTasks.delete(je),(this._maybeCleanupAfterRender||_n)&&rr(this,e,!0),Vn(this,_e,ma).call(this,!_n),sn?(je.capability.reject(sn),this._abortOperatorList({intentState:un,reason:sn instanceof Error?sn:new Error(sn)})):je.capability.resolve(),(on=this._stats)==null||on.timeEnd("Rendering"),(hn=this._stats)==null||hn.timeEnd("Overall")},je=new InternalRenderTask({callback:Nn,params:{canvasContext:ze,viewport:Qe,transform:Ge,background:nn},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:wn,operatorList:un.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_n,pdfBug:this._pdfBug,pageColors:Sn});(un.renderTasks||(un.renderTasks=new Set)).add(je);const Ie=je.task;return Promise.all([un.displayReadyCapability.promise,dn]).then(([sn,on])=>{var hn;if(this.destroyed){Nn();return}(hn=this._stats)==null||hn.time("Rendering"),je.initializeGraphics({transparency:sn,optionalContentConfig:on}),je.operatorListChanged()}).catch(Nn),Ie}getOperatorList({intent:ze="display",annotationMode:Qe=_util.AnnotationMode.ENABLE,printAnnotationStorage:gn=null}={}){var wn;function ke(){nn.operatorList.lastChunk&&(nn.opListReadCapability.resolve(nn.operatorList),nn.renderTasks.delete(dn))}const Ge=this._transport.getRenderingIntent(ze,Qe,gn,!0);let nn=this._intentStates.get(Ge.cacheKey);nn||(nn=Object.create(null),this._intentStates.set(Ge.cacheKey,nn));let dn;return nn.opListReadCapability||(dn=Object.create(null),dn.operatorListChanged=ke,nn.opListReadCapability=new _util.PromiseCapability,(nn.renderTasks||(nn.renderTasks=new Set)).add(dn),nn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(wn=this._stats)==null||wn.time("Page Request"),this._pumpOperatorList(Ge)),nn.opListReadCapability.promise}streamTextContent({includeMarkedContent:ze=!1,disableNormalization:Qe=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:ze===!0,disableNormalization:Qe===!0},{highWaterMark:100,size(ke){return ke.items.length}})}getTextContent(ze={}){if(this._transport._htmlForXfa)return this.getXfa().then(gn=>_xfa_text.XfaText.textContent(gn));const Qe=this.streamTextContent(ze);return new Promise(function(gn,ke){function Ge(){nn.read().then(function({value:wn,done:Sn}){if(Sn){gn(dn);return}Object.assign(dn.styles,wn.styles),dn.items.push(...wn.items),Ge()},ke)}const nn=Qe.getReader(),dn={items:[],styles:Object.create(null)};Ge()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const ze=[];for(const Qe of this._intentStates.values())if(this._abortOperatorList({intentState:Qe,reason:new Error("Page was destroyed."),force:!0}),!Qe.opListReadCapability)for(const gn of Qe.renderTasks)ze.push(gn.completed),gn.cancel();return this.objs.clear(),rr(this,e,!1),Vn(this,_e,Jo).call(this),Promise.all(ze)}cleanup(ze=!1){rr(this,e,!0);const Qe=Vn(this,_e,ma).call(this,!1);return ze&&Qe&&this._stats&&(this._stats=new _display_utils.StatTimer),Qe}_startRenderPage(ze,Qe){var ke,Ge;const gn=this._intentStates.get(Qe);gn&&((ke=this._stats)==null||ke.timeEnd("Page Request"),(Ge=gn.displayReadyCapability)==null||Ge.resolve(ze))}_renderPageChunk(ze,Qe){for(let gn=0,ke=ze.length;gn<ke;gn++)Qe.operatorList.fnArray.push(ze.fnArray[gn]),Qe.operatorList.argsArray.push(ze.argsArray[gn]);Qe.operatorList.lastChunk=ze.lastChunk,Qe.operatorList.separateAnnots=ze.separateAnnots;for(const gn of Qe.renderTasks)gn.operatorListChanged();ze.lastChunk&&Vn(this,_e,ma).call(this,!0)}_pumpOperatorList({renderingIntent:ze,cacheKey:Qe,annotationStorageSerializable:gn}){const{map:ke,transfers:Ge}=gn,dn=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:ze,cacheKey:Qe,annotationStorage:ke},Ge).getReader(),wn=this._intentStates.get(Qe);wn.streamReader=dn;const Sn=()=>{dn.read().then(({value:yn,done:Pn})=>{if(Pn){wn.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(yn,wn),Sn())},yn=>{if(wn.streamReader=null,!this._transport.destroyed){if(wn.operatorList){wn.operatorList.lastChunk=!0;for(const Pn of wn.renderTasks)Pn.operatorListChanged();Vn(this,_e,ma).call(this,!0)}if(wn.displayReadyCapability)wn.displayReadyCapability.reject(yn);else if(wn.opListReadCapability)wn.opListReadCapability.reject(yn);else throw yn}})};Sn()}_abortOperatorList({intentState:ze,reason:Qe,force:gn=!1}){if(ze.streamReader){if(ze.streamReaderCancelTimeout&&(clearTimeout(ze.streamReaderCancelTimeout),ze.streamReaderCancelTimeout=null),!gn){if(ze.renderTasks.size>0)return;if(Qe instanceof _display_utils.RenderingCancelledException){let ke=RENDERING_CANCELLED_TIMEOUT;Qe.extraDelay>0&&Qe.extraDelay<1e3&&(ke+=Qe.extraDelay),ze.streamReaderCancelTimeout=setTimeout(()=>{ze.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:ze,reason:Qe,force:!0})},ke);return}}if(ze.streamReader.cancel(new _util.AbortException(Qe.message)).catch(()=>{}),ze.streamReader=null,!this._transport.destroyed){for(const[ke,Ge]of this._intentStates)if(Ge===ze){this._intentStates.delete(ke);break}this.cleanup()}}}get stats(){return this._stats}}xe=new WeakMap,e=new WeakMap,_e=new WeakSet,ma=function(ze=!1){if(Vn(this,_e,Jo).call(this),!Je(this,e)||this.destroyed)return!1;if(ze)return rr(this,xe,setTimeout(()=>{rr(this,xe,null),Vn(this,_e,ma).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Qe,operatorList:gn}of this._intentStates.values())if(Qe.size>0||!gn.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),rr(this,e,!1),!0},Jo=function(){Je(this,xe)&&(clearTimeout(Je(this,xe)),rr(this,xe,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){er(this,Re,new Set);er(this,Ce,Promise.resolve())}postMessage(ze,Qe){const gn={data:structuredClone(ze,Qe?{transfer:Qe}:null)};Je(this,Ce).then(()=>{for(const ke of Je(this,Re))ke.call(this,gn)})}addEventListener(ze,Qe){Je(this,Re).add(Qe)}removeEventListener(ze,Qe){Je(this,Re).delete(Qe)}terminate(){Je(this,Re).clear()}}Re=new WeakMap,Ce=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const We=(De=document==null?void 0:document.currentScript)==null?void 0:De.src;We&&(PDFWorkerUtil.fallbackWorkerSrc=We.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(We,ze){let Qe;try{if(Qe=new URL(We),!Qe.origin||Qe.origin==="null")return!1}catch{return!1}const gn=new URL(ze,Qe);return Qe.origin===gn.origin},PDFWorkerUtil.createCDNWrapper=function(We){const ze=`importScripts("${We}");`;return URL.createObjectURL(new Blob([ze]))}}const _PDFWorker=class _PDFWorker{constructor({name:We=null,port:ze=null,verbosity:Qe=(0,_util.getVerbosityLevel)()}={}){var gn;if(this.name=We,this.destroyed=!1,this.verbosity=Qe,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,ze){if((gn=Je(_PDFWorker,Me))!=null&&gn.has(ze))throw new Error("Cannot use more than one PDFWorker per port.");(Je(_PDFWorker,Me)||rr(_PDFWorker,Me,new WeakMap)).set(ze,this),this._initializeFromPort(ze);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(We){this._port=We,this._messageHandler=new _message_handler.MessageHandler("main","worker",We),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:We}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,We)||(We=PDFWorkerUtil.createCDNWrapper(new URL(We,window.location).href));const ze=new Worker(We),Qe=new _message_handler.MessageHandler("main","worker",ze),gn=()=>{ze.removeEventListener("error",ke),Qe.destroy(),ze.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ke=()=>{this._webWorker||gn()};ze.addEventListener("error",ke),Qe.on("test",nn=>{if(ze.removeEventListener("error",ke),this.destroyed){gn();return}nn?(this._messageHandler=Qe,this._port=ze,this._webWorker=ze,this._readyCapability.resolve(),Qe.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Qe.destroy(),ze.terminate())}),Qe.on("ready",nn=>{if(ze.removeEventListener("error",ke),this.destroyed){gn();return}try{Ge()}catch{this._setupFakeWorker()}});const Ge=()=>{const nn=new Uint8Array;Qe.send("test",nn,[nn.buffer])};Ge();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(We=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const ze=new LoopbackPort;this._port=ze;const Qe=`fake${PDFWorkerUtil.fakeWorkerId++}`,gn=new _message_handler.MessageHandler(Qe+"_worker",Qe,ze);We.setup(gn,ze);const ke=new _message_handler.MessageHandler(Qe,Qe+"_worker",ze);this._messageHandler=ke,this._readyCapability.resolve(),ke.send("configure",{verbosity:this.verbosity})}).catch(We=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${We.message}".`))})}destroy(){var We;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(We=Je(_PDFWorker,Me))==null||We.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(We){var Qe;if(!(We!=null&&We.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const ze=(Qe=Je(this,Me))==null?void 0:Qe.get(We.port);if(ze){if(ze._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return ze}return new _PDFWorker(We)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var We;try{return((We=globalThis.pdfjsWorker)==null?void 0:We.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};Me=new WeakMap,er(_PDFWorker,Me);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(ze,Qe,gn,ke,Ge){er(this,$e);er(this,Ue,new Map);er(this,He,new Map);er(this,Te,new Map);er(this,Ve,null);this.messageHandler=ze,this.loadingTask=Qe,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:ke.ownerDocument,styleElement:ke.styleElement}),this._params=ke,this.canvasFactory=Ge.canvasFactory,this.filterFactory=Ge.filterFactory,this.cMapReaderFactory=Ge.cMapReaderFactory,this.standardFontDataFactory=Ge.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=gn,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(ze,Qe=_util.AnnotationMode.ENABLE,gn=null,ke=!1){let Ge=_util.RenderingIntentFlag.DISPLAY,nn=_annotation_storage.SerializableEmpty;switch(ze){case"any":Ge=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Ge=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${ze}`)}switch(Qe){case _util.AnnotationMode.DISABLE:Ge+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Ge+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Ge+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,nn=(Ge&_util.RenderingIntentFlag.PRINT&&gn instanceof _annotation_storage.PrintAnnotationStorage?gn:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Qe}`)}return ke&&(Ge+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Ge,cacheKey:`${Ge}_${nn.hash}`,annotationStorageSerializable:nn}}destroy(){var gn;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(gn=Je(this,Ve))==null||gn.reject(new Error("Worker was destroyed during onPassword callback"));const ze=[];for(const ke of Je(this,He).values())ze.push(ke._destroy());Je(this,He).clear(),Je(this,Te).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Qe=this.messageHandler.sendWithPromise("Terminate",null);return ze.push(Qe),Promise.all(ze).then(()=>{var ke;this.commonObjs.clear(),this.fontLoader.clear(),Je(this,Ue).clear(),this.filterFactory.destroy(),(ke=this._networkStream)==null||ke.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:ze,loadingTask:Qe}=this;ze.on("GetReader",(gn,ke)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Ge=>{this._lastProgress={loaded:Ge.loaded,total:Ge.total}},ke.onPull=()=>{this._fullReader.read().then(function({value:Ge,done:nn}){if(nn){ke.close();return}(0,_util.assert)(Ge instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ke.enqueue(new Uint8Array(Ge),1,[Ge])}).catch(Ge=>{ke.error(Ge)})},ke.onCancel=Ge=>{this._fullReader.cancel(Ge),ke.ready.catch(nn=>{if(!this.destroyed)throw nn})}}),ze.on("ReaderHeadersReady",gn=>{const ke=new _util.PromiseCapability,Ge=this._fullReader;return Ge.headersReady.then(()=>{var nn;(!Ge.isStreamingSupported||!Ge.isRangeSupported)&&(this._lastProgress&&((nn=Qe.onProgress)==null||nn.call(Qe,this._lastProgress)),Ge.onProgress=dn=>{var wn;(wn=Qe.onProgress)==null||wn.call(Qe,{loaded:dn.loaded,total:dn.total})}),ke.resolve({isStreamingSupported:Ge.isStreamingSupported,isRangeSupported:Ge.isRangeSupported,contentLength:Ge.contentLength})},ke.reject),ke.promise}),ze.on("GetRangeReader",(gn,ke)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Ge=this._networkStream.getRangeReader(gn.begin,gn.end);if(!Ge){ke.close();return}ke.onPull=()=>{Ge.read().then(function({value:nn,done:dn}){if(dn){ke.close();return}(0,_util.assert)(nn instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ke.enqueue(new Uint8Array(nn),1,[nn])}).catch(nn=>{ke.error(nn)})},ke.onCancel=nn=>{Ge.cancel(nn),ke.ready.catch(dn=>{if(!this.destroyed)throw dn})}}),ze.on("GetDoc",({pdfInfo:gn})=>{this._numPages=gn.numPages,this._htmlForXfa=gn.htmlForXfa,delete gn.htmlForXfa,Qe._capability.resolve(new PDFDocumentProxy(gn,this))}),ze.on("DocException",function(gn){let ke;switch(gn.name){case"PasswordException":ke=new _util.PasswordException(gn.message,gn.code);break;case"InvalidPDFException":ke=new _util.InvalidPDFException(gn.message);break;case"MissingPDFException":ke=new _util.MissingPDFException(gn.message);break;case"UnexpectedResponseException":ke=new _util.UnexpectedResponseException(gn.message,gn.status);break;case"UnknownErrorException":ke=new _util.UnknownErrorException(gn.message,gn.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Qe._capability.reject(ke)}),ze.on("PasswordRequest",gn=>{if(rr(this,Ve,new _util.PromiseCapability),Qe.onPassword){const ke=Ge=>{Ge instanceof Error?Je(this,Ve).reject(Ge):Je(this,Ve).resolve({password:Ge})};try{Qe.onPassword(ke,gn.code)}catch(Ge){Je(this,Ve).reject(Ge)}}else Je(this,Ve).reject(new _util.PasswordException(gn.message,gn.code));return Je(this,Ve).promise}),ze.on("DataLoaded",gn=>{var ke;(ke=Qe.onProgress)==null||ke.call(Qe,{loaded:gn.length,total:gn.length}),this.downloadInfoCapability.resolve(gn)}),ze.on("StartRenderPage",gn=>{if(this.destroyed)return;Je(this,He).get(gn.pageIndex)._startRenderPage(gn.transparency,gn.cacheKey)}),ze.on("commonobj",([gn,ke,Ge])=>{var nn;if(!this.destroyed&&!this.commonObjs.has(gn))switch(ke){case"Font":const dn=this._params;if("error"in Ge){const yn=Ge.error;(0,_util.warn)(`Error during font loading: ${yn}`),this.commonObjs.resolve(gn,yn);break}const wn=dn.pdfBug&&((nn=globalThis.FontInspector)!=null&&nn.enabled)?(yn,Pn)=>globalThis.FontInspector.fontAdded(yn,Pn):null,Sn=new _font_loader.FontFaceObject(Ge,{isEvalSupported:dn.isEvalSupported,disableFontFace:dn.disableFontFace,ignoreErrors:dn.ignoreErrors,inspectFont:wn});this.fontLoader.bind(Sn).catch(yn=>ze.sendWithPromise("FontFallback",{id:gn})).finally(()=>{!dn.fontExtraProperties&&Sn.data&&(Sn.data=null),this.commonObjs.resolve(gn,Sn)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(gn,Ge);break;default:throw new Error(`Got unknown common object type ${ke}`)}}),ze.on("obj",([gn,ke,Ge,nn])=>{var wn;if(this.destroyed)return;const dn=Je(this,He).get(ke);if(!dn.objs.has(gn))switch(Ge){case"Image":if(dn.objs.resolve(gn,nn),nn){let Sn;if(nn.bitmap){const{width:yn,height:Pn}=nn;Sn=yn*Pn*4}else Sn=((wn=nn.data)==null?void 0:wn.length)||0;Sn>_util.MAX_IMAGE_SIZE_TO_CACHE&&(dn._maybeCleanupAfterRender=!0)}break;case"Pattern":dn.objs.resolve(gn,nn);break;default:throw new Error(`Got unknown object type ${Ge}`)}}),ze.on("DocProgress",gn=>{var ke;this.destroyed||(ke=Qe.onProgress)==null||ke.call(Qe,{loaded:gn.loaded,total:gn.total})}),ze.on("FetchBuiltInCMap",gn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(gn):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),ze.on("FetchStandardFontData",gn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(gn):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var gn;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:ze,transfers:Qe}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:ze,filename:((gn=this._fullReader)==null?void 0:gn.filename)??null},Qe).finally(()=>{this.annotationStorage.resetModified()})}getPage(ze){if(!Number.isInteger(ze)||ze<=0||ze>this._numPages)return Promise.reject(new Error("Invalid page request."));const Qe=ze-1,gn=Je(this,Te).get(Qe);if(gn)return gn;const ke=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Qe}).then(Ge=>{if(this.destroyed)throw new Error("Transport destroyed");const nn=new PDFPageProxy(Qe,Ge,this,this._params.pdfBug);return Je(this,He).set(Qe,nn),nn});return Je(this,Te).set(Qe,ke),ke}getPageIndex(ze){return typeof ze!="object"||ze===null||!Number.isInteger(ze.num)||ze.num<0||!Number.isInteger(ze.gen)||ze.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ze.num,gen:ze.gen})}getAnnotations(ze,Qe){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:ze,intent:Qe})}getFieldObjects(){return Vn(this,$e,Zo).call(this,"GetFieldObjects")}hasJSActions(){return Vn(this,$e,Zo).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(ze){return typeof ze!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:ze})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Vn(this,$e,Zo).call(this,"GetDocJSActions")}getPageJSActions(ze){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:ze})}getStructTree(ze){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:ze})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(ze=>new _optional_content_config.OptionalContentConfig(ze))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const ze="GetMetadata",Qe=Je(this,Ue).get(ze);if(Qe)return Qe;const gn=this.messageHandler.sendWithPromise(ze,null).then(ke=>{var Ge,nn;return{info:ke[0],metadata:ke[1]?new _metadata.Metadata(ke[1]):null,contentDispositionFilename:((Ge=this._fullReader)==null?void 0:Ge.filename)??null,contentLength:((nn=this._fullReader)==null?void 0:nn.contentLength)??null}});return Je(this,Ue).set(ze,gn),gn}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(ze=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Qe of Je(this,He).values())if(!Qe.cleanup())throw new Error(`startCleanup: Page ${Qe.pageNumber} is currently rendering.`);this.commonObjs.clear(),ze||this.fontLoader.clear(),Je(this,Ue).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:ze,enableXfa:Qe}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:ze,enableXfa:Qe})}}Ue=new WeakMap,He=new WeakMap,Te=new WeakMap,Ve=new WeakMap,$e=new WeakSet,Zo=function(ze,Qe=null){const gn=Je(this,Ue).get(ze);if(gn)return gn;const ke=this.messageHandler.sendWithPromise(ze,Qe);return Je(this,Ue).set(ze,ke),ke};class PDFObjects{constructor(){er(this,Ye);er(this,Be,Object.create(null))}get(ze,Qe=null){if(Qe){const ke=Vn(this,Ye,nc).call(this,ze);return ke.capability.promise.then(()=>Qe(ke.data)),null}const gn=Je(this,Be)[ze];if(!(gn!=null&&gn.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${ze}.`);return gn.data}has(ze){const Qe=Je(this,Be)[ze];return(Qe==null?void 0:Qe.capability.settled)||!1}resolve(ze,Qe=null){const gn=Vn(this,Ye,nc).call(this,ze);gn.data=Qe,gn.capability.resolve()}clear(){var ze;for(const Qe in Je(this,Be)){const{data:gn}=Je(this,Be)[Qe];(ze=gn==null?void 0:gn.bitmap)==null||ze.close()}rr(this,Be,Object.create(null))}}Be=new WeakMap,Ye=new WeakSet,nc=function(ze){var Qe;return(Qe=Je(this,Be))[ze]||(Qe[ze]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(ze){er(this,rn,null);rr(this,rn,ze),this.onContinue=null}get promise(){return Je(this,rn).capability.promise}cancel(ze=0){Je(this,rn).cancel(null,ze)}get separateAnnots(){const{separateAnnots:ze}=Je(this,rn).operatorList;if(!ze)return!1;const{annotationCanvasMap:Qe}=Je(this,rn);return ze.form||ze.canvas&&(Qe==null?void 0:Qe.size)>0}}rn=new WeakMap,exports.RenderTask=RenderTask;const en=class en{constructor({callback:ze,params:Qe,objs:gn,commonObjs:ke,annotationCanvasMap:Ge,operatorList:nn,pageIndex:dn,canvasFactory:wn,filterFactory:Sn,useRequestAnimationFrame:yn=!1,pdfBug:Pn=!1,pageColors:un=null}){this.callback=ze,this.params=Qe,this.objs=gn,this.commonObjs=ke,this.annotationCanvasMap=Ge,this.operatorListIdx=null,this.operatorList=nn,this._pageIndex=dn,this.canvasFactory=wn,this.filterFactory=Sn,this._pdfBug=Pn,this.pageColors=un,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=yn===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Qe.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:ze=!1,optionalContentConfig:Qe}){var dn,wn;if(this.cancelled)return;if(this._canvas){if(Je(en,Xe).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Je(en,Xe).add(this._canvas)}this._pdfBug&&((dn=globalThis.StepperManager)!=null&&dn.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:gn,viewport:ke,transform:Ge,background:nn}=this.params;this.gfx=new _canvas.CanvasGraphics(gn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Qe},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Ge,viewport:ke,transparency:ze,background:nn}),this.operatorListIdx=0,this.graphicsReady=!0,(wn=this.graphicsReadyCallback)==null||wn.call(this)}cancel(ze=null,Qe=0){var gn;this.running=!1,this.cancelled=!0,(gn=this.gfx)==null||gn.endDrawing(),Je(en,Xe).delete(this._canvas),this.callback(ze||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Qe))}operatorListChanged(){var ze;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(ze=this.stepper)==null||ze.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Je(en,Xe).delete(this._canvas),this.callback())))}};Xe=new WeakMap,er(en,Xe,new WeakSet);let InternalRenderTask=en;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(St,t,xe)=>{var De,Me,Ue,hu,Te;Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var e=xe(1),_e=xe(4),Se=xe(8);const Ee=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=Ee;class Re{constructor(){er(this,Ue);er(this,De,!1);er(this,Me,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue($e,Ke){const Be=Je(this,Me).get($e);return Be===void 0?Ke:Object.assign(Ke,Be)}getRawValue($e){return Je(this,Me).get($e)}remove($e){if(Je(this,Me).delete($e),Je(this,Me).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Ke of Je(this,Me).values())if(Ke instanceof _e.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue($e,Ke){const Be=Je(this,Me).get($e);let Ye=!1;if(Be!==void 0)for(const[an,rn]of Object.entries(Ke))Be[an]!==rn&&(Ye=!0,Be[an]=rn);else Ye=!0,Je(this,Me).set($e,Ke);Ye&&Vn(this,Ue,hu).call(this),Ke instanceof _e.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Ke.constructor._type)}has($e){return Je(this,Me).has($e)}getAll(){return Je(this,Me).size>0?(0,e.objectFromMap)(Je(this,Me)):null}setAll($e){for(const[Ke,Be]of Object.entries($e))this.setValue(Ke,Be)}get size(){return Je(this,Me).size}resetModified(){Je(this,De)&&(rr(this,De,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ce(this)}get serializable(){if(Je(this,Me).size===0)return Ee;const $e=new Map,Ke=new Se.MurmurHash3_64,Be=[],Ye=Object.create(null);let an=!1;for(const[rn,Xe]of Je(this,Me)){const en=Xe instanceof _e.AnnotationEditor?Xe.serialize(!1,Ye):Xe;en&&($e.set(rn,en),Ke.update(`${rn}:${JSON.stringify(en)}`),an||(an=!!en.bitmap))}if(an)for(const rn of $e.values())rn.bitmap&&Be.push(rn.bitmap);return $e.size>0?{map:$e,hash:Ke.hexdigest(),transfers:Be}:Ee}}De=new WeakMap,Me=new WeakMap,Ue=new WeakSet,hu=function(){Je(this,De)||(rr(this,De,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=Re;class Ce extends Re{constructor(Ke){super();er(this,Te);const{map:Be,hash:Ye,transfers:an}=Ke.serializable,rn=structuredClone(Be,an?{transfer:an}:null);rr(this,Te,{map:rn,hash:Ye,transfers:an})}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return Je(this,Te)}}Te=new WeakMap,t.PrintAnnotationStorage=Ce},(St,t,xe)=>{var Ce,De,Me,Ue,He,Te,Ve,$e,Ke,Be,Ye,an,rn,Xe,en,rc,ic,Qe,sc,ac,du,fu,pu,oc,gu;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var e=xe(5),_e=xe(1),Se=xe(6);const yn=class yn{constructor(un){er(this,en);er(this,Ce,"");er(this,De,!1);er(this,Me,null);er(this,Ue,null);er(this,He,null);er(this,Te,!1);er(this,Ve,null);er(this,$e,this.focusin.bind(this));er(this,Ke,this.focusout.bind(this));er(this,Be,!1);er(this,Ye,!1);er(this,an,!1);oi(this,"_initialOptions",Object.create(null));oi(this,"_uiManager",null);oi(this,"_focusEventsAllowed",!0);oi(this,"_l10nPromise",null);er(this,rn,!1);er(this,Xe,yn._zIndex++);this.constructor===yn&&(0,_e.unreachable)("Cannot initialize AnnotationEditor."),this.parent=un.parent,this.id=un.id,this.width=this.height=null,this.pageIndex=un.parent.pageIndex,this.name=un.name,this.div=null,this._uiManager=un.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=un.isCentered,this._structTreeParentId=null;const{rotation:_n,rawDims:{pageWidth:Nn,pageHeight:je,pageX:Ie,pageY:Oe}}=this.parent.viewport;this.rotation=_n,this.pageRotation=(360+_n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Nn,je],this.pageTranslation=[Ie,Oe];const[Ze,sn]=this.parentDimensions;this.x=un.x/Ze,this.y=un.y/sn,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,_e.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(un){const _n=new Re({id:un.parent.getNextId(),parent:un.parent,uiManager:un._uiManager});_n.annotationElementId=un.annotationElementId,_n.deleted=!0,_n._uiManager.addToAnnotationStorage(_n)}static initialize(un,_n=null){if(yn._l10nPromise||(yn._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(je=>[je,un.get(je)]))),_n!=null&&_n.strings)for(const je of _n.strings)yn._l10nPromise.set(je,un.get(je));if(yn._borderLineWidth!==-1)return;const Nn=getComputedStyle(document.documentElement);yn._borderLineWidth=parseFloat(Nn.getPropertyValue("--outline-width"))||0}static updateDefaultParams(un,_n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(un){return!1}static paste(un,_n){(0,_e.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Je(this,rn)}set _isDraggable(un){var _n;rr(this,rn,un),(_n=this.div)==null||_n.classList.toggle("draggable",un)}center(){const[un,_n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*_n/(un*2),this.y+=this.width*un/(_n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*_n/(un*2),this.y-=this.width*un/(_n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(un){this._uiManager.addCommands(un)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Je(this,Xe)}setParent(un){un!==null&&(this.pageIndex=un.pageIndex,this.pageDimensions=un.pageDimensions),this.parent=un}focusin(un){this._focusEventsAllowed&&(Je(this,Be)?rr(this,Be,!1):this.parent.setSelected(this))}focusout(un){var Nn;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const _n=un.relatedTarget;_n!=null&&_n.closest(`#${this.id}`)||(un.preventDefault(),(Nn=this.parent)!=null&&Nn.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(un,_n,Nn,je){const[Ie,Oe]=this.parentDimensions;[Nn,je]=this.screenToPageTranslation(Nn,je),this.x=(un+Nn)/Ie,this.y=(_n+je)/Oe,this.fixAndSetPosition()}translate(un,_n){Vn(this,en,rc).call(this,this.parentDimensions,un,_n)}translateInPage(un,_n){Vn(this,en,rc).call(this,this.pageDimensions,un,_n),this.div.scrollIntoView({block:"nearest"})}drag(un,_n){const[Nn,je]=this.parentDimensions;if(this.x+=un/Nn,this.y+=_n/je,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:on,y:hn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,on,hn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Ie,y:Oe}=this;const[Ze,sn]=Vn(this,en,ic).call(this);Ie+=Ze,Oe+=sn,this.div.style.left=`${(100*Ie).toFixed(2)}%`,this.div.style.top=`${(100*Oe).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[un,_n]=this.pageDimensions;let{x:Nn,y:je,width:Ie,height:Oe}=this;switch(Ie*=un,Oe*=_n,Nn*=un,je*=_n,this.rotation){case 0:Nn=Math.max(0,Math.min(un-Ie,Nn)),je=Math.max(0,Math.min(_n-Oe,je));break;case 90:Nn=Math.max(0,Math.min(un-Oe,Nn)),je=Math.min(_n,Math.max(Ie,je));break;case 180:Nn=Math.min(un,Math.max(Ie,Nn)),je=Math.min(_n,Math.max(Oe,je));break;case 270:Nn=Math.min(un,Math.max(Oe,Nn)),je=Math.max(0,Math.min(_n-Ie,je));break}this.x=Nn/=un,this.y=je/=_n;const[Ze,sn]=Vn(this,en,ic).call(this);Nn+=Ze,je+=sn;const{style:on}=this.div;on.left=`${(100*Nn).toFixed(2)}%`,on.top=`${(100*je).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(un,_n){var Nn;return Vn(Nn=yn,Qe,sc).call(Nn,un,_n,this.parentRotation)}pageTranslationToScreen(un,_n){var Nn;return Vn(Nn=yn,Qe,sc).call(Nn,un,_n,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:un,pageDimensions:[_n,Nn]}=this,je=_n*un,Ie=Nn*un;return _e.FeatureTest.isCSSRoundSupported?[Math.round(je),Math.round(Ie)]:[je,Ie]}setDims(un,_n){var Ie;const[Nn,je]=this.parentDimensions;this.div.style.width=`${(100*un/Nn).toFixed(2)}%`,Je(this,Te)||(this.div.style.height=`${(100*_n/je).toFixed(2)}%`),(Ie=Je(this,Me))==null||Ie.classList.toggle("small",un<yn.SMALL_EDITOR_SIZE||_n<yn.SMALL_EDITOR_SIZE)}fixDims(){const{style:un}=this.div,{height:_n,width:Nn}=un,je=Nn.endsWith("%"),Ie=!Je(this,Te)&&_n.endsWith("%");if(je&&Ie)return;const[Oe,Ze]=this.parentDimensions;je||(un.width=`${(100*parseFloat(Nn)/Oe).toFixed(2)}%`),!Je(this,Te)&&!Ie&&(un.height=`${(100*parseFloat(_n)/Ze).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(Je(this,Me))return;const un=rr(this,Me,document.createElement("button"));un.className="altText";const _n=await yn._l10nPromise.get("editor_alt_text_button_label");un.textContent=_n,un.setAttribute("aria-label",_n),un.tabIndex="0",un.addEventListener("contextmenu",Se.noContextMenu),un.addEventListener("pointerdown",Nn=>Nn.stopPropagation()),un.addEventListener("click",Nn=>{Nn.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),un.addEventListener("keydown",Nn=>{Nn.target===un&&Nn.key==="Enter"&&(Nn.preventDefault(),this._uiManager.editAltText(this))}),Vn(this,en,oc).call(this),this.div.append(un),yn.SMALL_EDITOR_SIZE||(yn.SMALL_EDITOR_SIZE=Math.min(128,Math.round(un.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:Je(this,Ce),decorative:Je(this,De)}}set altTextData({altText:un,decorative:_n}){Je(this,Ce)===un&&Je(this,De)===_n||(rr(this,Ce,un),rr(this,De,_n),Vn(this,en,oc).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",Je(this,$e)),this.div.addEventListener("focusout",Je(this,Ke));const[un,_n]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*_n/un).toFixed(2)}%`,this.div.style.maxHeight=`${(100*un/_n).toFixed(2)}%`);const[Nn,je]=this.getInitialTranslation();return this.translate(Nn,je),(0,e.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(un){const{isMac:_n}=_e.FeatureTest.platform;if(un.button!==0||un.ctrlKey&&_n){un.preventDefault();return}rr(this,Be,!0),Vn(this,en,gu).call(this,un)}moveInDOM(){var un;(un=this.parent)==null||un.moveEditorInDOM(this)}_setParentAndPosition(un,_n,Nn){un.changeParent(this),this.x=_n,this.y=Nn,this.fixAndSetPosition()}getRect(un,_n){const Nn=this.parentScale,[je,Ie]=this.pageDimensions,[Oe,Ze]=this.pageTranslation,sn=un/Nn,on=_n/Nn,hn=this.x*je,An=this.y*Ie,Mn=this.width*je,In=this.height*Ie;switch(this.rotation){case 0:return[hn+sn+Oe,Ie-An-on-In+Ze,hn+sn+Mn+Oe,Ie-An-on+Ze];case 90:return[hn+on+Oe,Ie-An+sn+Ze,hn+on+In+Oe,Ie-An+sn+Mn+Ze];case 180:return[hn-sn-Mn+Oe,Ie-An+on+Ze,hn-sn+Oe,Ie-An+on+In+Ze];case 270:return[hn-on-In+Oe,Ie-An-sn-Mn+Ze,hn-on+Oe,Ie-An-sn+Ze];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(un,_n){const[Nn,je,Ie,Oe]=un,Ze=Ie-Nn,sn=Oe-je;switch(this.rotation){case 0:return[Nn,_n-Oe,Ze,sn];case 90:return[Nn,_n-je,sn,Ze];case 180:return[Ie,_n-je,Ze,sn];case 270:return[Ie,_n-Oe,sn,Ze];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rr(this,an,!0)}disableEditMode(){rr(this,an,!1)}isInEditMode(){return Je(this,an)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var un,_n;(un=this.div)==null||un.addEventListener("focusin",Je(this,$e)),(_n=this.div)==null||_n.addEventListener("focusout",Je(this,Ke))}serialize(un=!1,_n=null){(0,_e.unreachable)("An editor must be serializable")}static deserialize(un,_n,Nn){const je=new this.prototype.constructor({parent:_n,id:_n.getNextId(),uiManager:Nn});je.rotation=un.rotation;const[Ie,Oe]=je.pageDimensions,[Ze,sn,on,hn]=je.getRectInCurrentCoords(un.rect,Oe);return je.x=Ze/Ie,je.y=sn/Oe,je.width=on/Ie,je.height=hn/Oe,je}remove(){var un;this.div.removeEventListener("focusin",Je(this,$e)),this.div.removeEventListener("focusout",Je(this,Ke)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(un=Je(this,Me))==null||un.remove(),rr(this,Me,null),rr(this,Ue,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Vn(this,en,du).call(this),Je(this,Ve).classList.remove("hidden"))}select(){var un;this.makeResizable(),(un=this.div)==null||un.classList.add("selectedEditor")}unselect(){var un,_n,Nn;(un=Je(this,Ve))==null||un.classList.add("hidden"),(_n=this.div)==null||_n.classList.remove("selectedEditor"),(Nn=this.div)!=null&&Nn.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(un,_n){}disableEditing(){Je(this,Me)&&(Je(this,Me).hidden=!0)}enableEditing(){Je(this,Me)&&(Je(this,Me).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return Je(this,Ye)}set isEditing(un){rr(this,Ye,un),this.parent&&(un?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(un,_n){rr(this,Te,!0);const Nn=un/_n,{style:je}=this.div;je.aspectRatio=Nn,je.height="auto"}static get MIN_SIZE(){return 16}};Ce=new WeakMap,De=new WeakMap,Me=new WeakMap,Ue=new WeakMap,He=new WeakMap,Te=new WeakMap,Ve=new WeakMap,$e=new WeakMap,Ke=new WeakMap,Be=new WeakMap,Ye=new WeakMap,an=new WeakMap,rn=new WeakMap,Xe=new WeakMap,en=new WeakSet,rc=function([un,_n],Nn,je){[Nn,je]=this.screenToPageTranslation(Nn,je),this.x+=Nn/un,this.y+=je/_n,this.fixAndSetPosition()},ic=function(){const[un,_n]=this.parentDimensions,{_borderLineWidth:Nn}=yn,je=Nn/un,Ie=Nn/_n;switch(this.rotation){case 90:return[-je,Ie];case 180:return[je,Ie];case 270:return[je,-Ie];default:return[-je,-Ie]}},Qe=new WeakSet,sc=function(un,_n,Nn){switch(Nn){case 90:return[_n,-un];case 180:return[-un,-_n];case 270:return[-_n,un];default:return[un,_n]}},ac=function(un){switch(un){case 90:{const[_n,Nn]=this.pageDimensions;return[0,-_n/Nn,Nn/_n,0]}case 180:return[-1,0,0,-1];case 270:{const[_n,Nn]=this.pageDimensions;return[0,_n/Nn,-Nn/_n,0]}default:return[1,0,0,1]}},du=function(){if(Je(this,Ve))return;rr(this,Ve,document.createElement("div")),Je(this,Ve).classList.add("resizers");const un=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||un.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const _n of un){const Nn=document.createElement("div");Je(this,Ve).append(Nn),Nn.classList.add("resizer",_n),Nn.addEventListener("pointerdown",Vn(this,en,fu).bind(this,_n)),Nn.addEventListener("contextmenu",Se.noContextMenu)}this.div.prepend(Je(this,Ve))},fu=function(un,_n){_n.preventDefault();const{isMac:Nn}=_e.FeatureTest.platform;if(_n.button!==0||_n.ctrlKey&&Nn)return;const je=Vn(this,en,pu).bind(this,un),Ie=this._isDraggable;this._isDraggable=!1;const Oe={passive:!0,capture:!0};window.addEventListener("pointermove",je,Oe);const Ze=this.x,sn=this.y,on=this.width,hn=this.height,An=this.parent.div.style.cursor,Mn=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(_n.target).cursor;const In=()=>{this._isDraggable=Ie,window.removeEventListener("pointerup",In),window.removeEventListener("blur",In),window.removeEventListener("pointermove",je,Oe),this.parent.div.style.cursor=An,this.div.style.cursor=Mn;const zn=this.x,Wn=this.y,Jn=this.width,Dn=this.height;zn===Ze&&Wn===sn&&Jn===on&&Dn===hn||this.addCommands({cmd:()=>{this.width=Jn,this.height=Dn,this.x=zn,this.y=Wn;const[cn,Bn]=this.parentDimensions;this.setDims(cn*Jn,Bn*Dn),this.fixAndSetPosition()},undo:()=>{this.width=on,this.height=hn,this.x=Ze,this.y=sn;const[cn,Bn]=this.parentDimensions;this.setDims(cn*on,Bn*hn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",In),window.addEventListener("blur",In)},pu=function(un,_n){const[Nn,je]=this.parentDimensions,Ie=this.x,Oe=this.y,Ze=this.width,sn=this.height,on=yn.MIN_SIZE/Nn,hn=yn.MIN_SIZE/je,An=hr=>Math.round(hr*1e4)/1e4,Mn=Vn(this,en,ac).call(this,this.rotation),In=(hr,Rr)=>[Mn[0]*hr+Mn[2]*Rr,Mn[1]*hr+Mn[3]*Rr],zn=Vn(this,en,ac).call(this,360-this.rotation),Wn=(hr,Rr)=>[zn[0]*hr+zn[2]*Rr,zn[1]*hr+zn[3]*Rr];let Jn,Dn,cn=!1,Bn=!1;switch(un){case"topLeft":cn=!0,Jn=(hr,Rr)=>[0,0],Dn=(hr,Rr)=>[hr,Rr];break;case"topMiddle":Jn=(hr,Rr)=>[hr/2,0],Dn=(hr,Rr)=>[hr/2,Rr];break;case"topRight":cn=!0,Jn=(hr,Rr)=>[hr,0],Dn=(hr,Rr)=>[0,Rr];break;case"middleRight":Bn=!0,Jn=(hr,Rr)=>[hr,Rr/2],Dn=(hr,Rr)=>[0,Rr/2];break;case"bottomRight":cn=!0,Jn=(hr,Rr)=>[hr,Rr],Dn=(hr,Rr)=>[0,0];break;case"bottomMiddle":Jn=(hr,Rr)=>[hr/2,Rr],Dn=(hr,Rr)=>[hr/2,0];break;case"bottomLeft":cn=!0,Jn=(hr,Rr)=>[0,Rr],Dn=(hr,Rr)=>[hr,0];break;case"middleLeft":Bn=!0,Jn=(hr,Rr)=>[0,Rr/2],Dn=(hr,Rr)=>[hr,Rr/2];break}const mn=Jn(Ze,sn),bn=Dn(Ze,sn);let Rn=In(...bn);const On=An(Ie+Rn[0]),Hn=An(Oe+Rn[1]);let tr=1,ir=1,[qn,pr]=this.screenToPageTranslation(_n.movementX,_n.movementY);if([qn,pr]=Wn(qn/Nn,pr/je),cn){const hr=Math.hypot(Ze,sn);tr=ir=Math.max(Math.min(Math.hypot(bn[0]-mn[0]-qn,bn[1]-mn[1]-pr)/hr,1/Ze,1/sn),on/Ze,hn/sn)}else Bn?tr=Math.max(on,Math.min(1,Math.abs(bn[0]-mn[0]-qn)))/Ze:ir=Math.max(hn,Math.min(1,Math.abs(bn[1]-mn[1]-pr)))/sn;const fr=An(Ze*tr),Mr=An(sn*ir);Rn=In(...Dn(fr,Mr));const _r=On-Rn[0],Ir=Hn-Rn[1];this.width=fr,this.height=Mr,this.x=_r,this.y=Ir,this.setDims(Nn*fr,je*Mr),this.fixAndSetPosition()},oc=async function(){var Nn;const un=Je(this,Me);if(!un)return;if(!Je(this,Ce)&&!Je(this,De)){un.classList.remove("done"),(Nn=Je(this,Ue))==null||Nn.remove();return}yn._l10nPromise.get("editor_alt_text_edit_button_label").then(je=>{un.setAttribute("aria-label",je)});let _n=Je(this,Ue);if(!_n){rr(this,Ue,_n=document.createElement("span")),_n.className="tooltip",_n.setAttribute("role","tooltip");const je=_n.id=`alt-text-tooltip-${this.id}`;un.setAttribute("aria-describedby",je);const Ie=100;un.addEventListener("mouseenter",()=>{rr(this,He,setTimeout(()=>{rr(this,He,null),Je(this,Ue).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Ie))}),un.addEventListener("mouseleave",()=>{var Oe;clearTimeout(Je(this,He)),rr(this,He,null),(Oe=Je(this,Ue))==null||Oe.classList.remove("show")})}un.classList.add("done"),_n.innerText=Je(this,De)?await yn._l10nPromise.get("editor_alt_text_decorative_tooltip"):Je(this,Ce),_n.parentNode||un.append(_n)},gu=function(un){if(!this._isDraggable)return;const _n=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Nn,je;_n&&(Nn={passive:!0,capture:!0},je=Oe=>{const[Ze,sn]=this.screenToPageTranslation(Oe.movementX,Oe.movementY);this._uiManager.dragSelectedEditors(Ze,sn)},window.addEventListener("pointermove",je,Nn));const Ie=()=>{if(window.removeEventListener("pointerup",Ie),window.removeEventListener("blur",Ie),_n&&window.removeEventListener("pointermove",je,Nn),rr(this,Be,!1),!this._uiManager.endDragSession()){const{isMac:Oe}=_e.FeatureTest.platform;un.ctrlKey&&!Oe||un.shiftKey||un.metaKey&&Oe?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Ie),window.addEventListener("blur",Ie)},er(yn,Qe),oi(yn,"_borderLineWidth",-1),oi(yn,"_colorManager",new e.ColorManager),oi(yn,"_zIndex",1),oi(yn,"SMALL_EDITOR_SIZE",0);let Ee=yn;t.AnnotationEditor=Ee;class Re extends Ee{constructor(un){super(un),this.annotationElementId=un.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(St,t,xe)=>{var Te,Ve,$e,Ke,Be,cc,rn,Xe,en,We,ze,mu,ke,Ge,nn,dn,wn,Sn,yn,Pn,un,_n,Nn,je,Ie,Oe,Ze,sn,on,hn,An,Mn,In,zn,Wn,Jn,Dn,cn,Bn,mn,bn,Rn,On,Hn,tr,ir,qn,bu,uc,hc,Qo,dc,fc,ts,Qa,vu,yu,pc,to,gc;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=Se,t.opacityToHex=Ee;var e=xe(1),_e=xe(6);function Se(qr,Fn,ur){for(const vr of ur)Fn.addEventListener(vr,qr[vr].bind(qr))}function Ee(qr){return Math.round(Math.min(255,Math.max(1,255*qr))).toString(16).padStart(2,"0")}class Re{constructor(){er(this,Te,0)}getId(){return`${e.AnnotationEditorPrefix}${Za(this,Te)._++}`}}Te=new WeakMap;const an=class an{constructor(){er(this,Be);er(this,Ve,(0,e.getUuid)());er(this,$e,0);er(this,Ke,null)}static get _isSVGFittingCanvas(){const Fn='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',vr=new OffscreenCanvas(1,3).getContext("2d"),yr=new Image;yr.src=Fn;const Lr=yr.decode().then(()=>(vr.drawImage(yr,0,0,1,1,0,0,1,3),new Uint32Array(vr.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,e.shadow)(this,"_isSVGFittingCanvas",Lr)}async getFromFile(Fn){const{lastModified:ur,name:vr,size:yr,type:Lr}=Fn;return Vn(this,Be,cc).call(this,`${ur}_${vr}_${yr}_${Lr}`,Fn)}async getFromUrl(Fn){return Vn(this,Be,cc).call(this,Fn,Fn)}async getFromId(Fn){Je(this,Ke)||rr(this,Ke,new Map);const ur=Je(this,Ke).get(Fn);return ur?ur.bitmap?(ur.refCounter+=1,ur):ur.file?this.getFromFile(ur.file):this.getFromUrl(ur.url):null}getSvgUrl(Fn){const ur=Je(this,Ke).get(Fn);return ur!=null&&ur.isSvg?ur.svgUrl:null}deleteId(Fn){Je(this,Ke)||rr(this,Ke,new Map);const ur=Je(this,Ke).get(Fn);ur&&(ur.refCounter-=1,ur.refCounter===0&&(ur.bitmap=null))}isValidId(Fn){return Fn.startsWith(`image_${Je(this,Ve)}_`)}};Ve=new WeakMap,$e=new WeakMap,Ke=new WeakMap,Be=new WeakSet,cc=async function(Fn,ur){Je(this,Ke)||rr(this,Ke,new Map);let vr=Je(this,Ke).get(Fn);if(vr===null)return null;if(vr!=null&&vr.bitmap)return vr.refCounter+=1,vr;try{vr||(vr={bitmap:null,id:`image_${Je(this,Ve)}_${Za(this,$e)._++}`,refCounter:0,isSvg:!1});let yr;if(typeof ur=="string"){vr.url=ur;const Lr=await fetch(ur);if(!Lr.ok)throw new Error(Lr.statusText);yr=await Lr.blob()}else yr=vr.file=ur;if(yr.type==="image/svg+xml"){const Lr=an._isSVGFittingCanvas,kr=new FileReader,Tn=new Image,Ln=new Promise((Un,Gn)=>{Tn.onload=()=>{vr.bitmap=Tn,vr.isSvg=!0,Un()},kr.onload=async()=>{const sr=vr.svgUrl=kr.result;Tn.src=await Lr?`${sr}#svgView(preserveAspectRatio(none))`:sr},Tn.onerror=kr.onerror=Gn});kr.readAsDataURL(yr),await Ln}else vr.bitmap=await createImageBitmap(yr);vr.refCounter=1}catch(yr){console.error(yr),vr=null}return Je(this,Ke).set(Fn,vr),vr&&Je(this,Ke).set(vr.id,vr),vr};let Ce=an;class De{constructor(Fn=128){er(this,rn,[]);er(this,Xe,!1);er(this,en);er(this,We,-1);rr(this,en,Fn)}add({cmd:Fn,undo:ur,mustExec:vr,type:yr=NaN,overwriteIfSameType:Lr=!1,keepUndo:kr=!1}){if(vr&&Fn(),Je(this,Xe))return;const Tn={cmd:Fn,undo:ur,type:yr};if(Je(this,We)===-1){Je(this,rn).length>0&&(Je(this,rn).length=0),rr(this,We,0),Je(this,rn).push(Tn);return}if(Lr&&Je(this,rn)[Je(this,We)].type===yr){kr&&(Tn.undo=Je(this,rn)[Je(this,We)].undo),Je(this,rn)[Je(this,We)]=Tn;return}const Ln=Je(this,We)+1;Ln===Je(this,en)?Je(this,rn).splice(0,1):(rr(this,We,Ln),Ln<Je(this,rn).length&&Je(this,rn).splice(Ln)),Je(this,rn).push(Tn)}undo(){Je(this,We)!==-1&&(rr(this,Xe,!0),Je(this,rn)[Je(this,We)].undo(),rr(this,Xe,!1),rr(this,We,Je(this,We)-1))}redo(){Je(this,We)<Je(this,rn).length-1&&(rr(this,We,Je(this,We)+1),rr(this,Xe,!0),Je(this,rn)[Je(this,We)].cmd(),rr(this,Xe,!1))}hasSomethingToUndo(){return Je(this,We)!==-1}hasSomethingToRedo(){return Je(this,We)<Je(this,rn).length-1}destroy(){rr(this,rn,null)}}rn=new WeakMap,Xe=new WeakMap,en=new WeakMap,We=new WeakMap,t.CommandManager=De;class Me{constructor(Fn){er(this,ze);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:ur}=e.FeatureTest.platform;for(const[vr,yr,Lr={}]of Fn)for(const kr of vr){const Tn=kr.startsWith("mac+");ur&&Tn?(this.callbacks.set(kr.slice(4),{callback:yr,options:Lr}),this.allKeys.add(kr.split("+").at(-1))):!ur&&!Tn&&(this.callbacks.set(kr,{callback:yr,options:Lr}),this.allKeys.add(kr.split("+").at(-1)))}}exec(Fn,ur){if(!this.allKeys.has(ur.key))return;const vr=this.callbacks.get(Vn(this,ze,mu).call(this,ur));if(!vr)return;const{callback:yr,options:{bubbles:Lr=!1,args:kr=[],checker:Tn=null}}=vr;Tn&&!Tn(Fn,ur)||(yr.bind(Fn,...kr)(),Lr||(ur.stopPropagation(),ur.preventDefault()))}}ze=new WeakSet,mu=function(Fn){Fn.altKey&&this.buffer.push("alt"),Fn.ctrlKey&&this.buffer.push("ctrl"),Fn.metaKey&&this.buffer.push("meta"),Fn.shiftKey&&this.buffer.push("shift"),this.buffer.push(Fn.key);const ur=this.buffer.join("+");return this.buffer.length=0,ur},t.KeyboardManager=Me;const gn=class gn{get _colors(){const Fn=new Map([["CanvasText",null],["Canvas",null]]);return(0,_e.getColorValues)(Fn),(0,e.shadow)(this,"_colors",Fn)}convert(Fn){const ur=(0,_e.getRGB)(Fn);if(!window.matchMedia("(forced-colors: active)").matches)return ur;for(const[vr,yr]of this._colors)if(yr.every((Lr,kr)=>Lr===ur[kr]))return gn._colorsMapping.get(vr);return ur}getHexCode(Fn){const ur=this._colors.get(Fn);return ur?e.Util.makeHexColor(...ur):Fn}};oi(gn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ue=gn;t.ColorManager=Ue;const Xr=class Xr{constructor(Fn,ur,vr,yr,Lr,kr){er(this,qn);er(this,ke,null);er(this,Ge,new Map);er(this,nn,new Map);er(this,dn,null);er(this,wn,null);er(this,Sn,new De);er(this,yn,0);er(this,Pn,new Set);er(this,un,null);er(this,_n,null);er(this,Nn,new Set);er(this,je,null);er(this,Ie,new Re);er(this,Oe,!1);er(this,Ze,!1);er(this,sn,null);er(this,on,e.AnnotationEditorType.NONE);er(this,hn,new Set);er(this,An,null);er(this,Mn,this.blur.bind(this));er(this,In,this.focus.bind(this));er(this,zn,this.copy.bind(this));er(this,Wn,this.cut.bind(this));er(this,Jn,this.paste.bind(this));er(this,Dn,this.keydown.bind(this));er(this,cn,this.onEditingAction.bind(this));er(this,Bn,this.onPageChanging.bind(this));er(this,mn,this.onScaleChanging.bind(this));er(this,bn,this.onRotationChanging.bind(this));er(this,Rn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});er(this,On,[0,0]);er(this,Hn,null);er(this,tr,null);er(this,ir,null);rr(this,tr,Fn),rr(this,ir,ur),rr(this,dn,vr),this._eventBus=yr,this._eventBus._on("editingaction",Je(this,cn)),this._eventBus._on("pagechanging",Je(this,Bn)),this._eventBus._on("scalechanging",Je(this,mn)),this._eventBus._on("rotationchanging",Je(this,bn)),rr(this,wn,Lr.annotationStorage),rr(this,je,Lr.filterFactory),rr(this,An,kr),this.viewParameters={realScale:_e.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Fn=Xr.prototype,ur=Lr=>{const{activeElement:kr}=document;return kr&&Je(Lr,tr).contains(kr)&&Lr.hasSomethingToControl()},vr=this.TRANSLATE_SMALL,yr=this.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new Me([[["ctrl+a","mac+meta+a"],Fn.selectAll],[["ctrl+z","mac+meta+z"],Fn.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Fn.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Fn.delete],[["Escape","mac+Escape"],Fn.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Fn.translateSelectedEditors,{args:[-vr,0],checker:ur}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Fn.translateSelectedEditors,{args:[-yr,0],checker:ur}],[["ArrowRight","mac+ArrowRight"],Fn.translateSelectedEditors,{args:[vr,0],checker:ur}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Fn.translateSelectedEditors,{args:[yr,0],checker:ur}],[["ArrowUp","mac+ArrowUp"],Fn.translateSelectedEditors,{args:[0,-vr],checker:ur}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Fn.translateSelectedEditors,{args:[0,-yr],checker:ur}],[["ArrowDown","mac+ArrowDown"],Fn.translateSelectedEditors,{args:[0,vr],checker:ur}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Fn.translateSelectedEditors,{args:[0,yr],checker:ur}]]))}destroy(){Vn(this,qn,Qo).call(this),Vn(this,qn,uc).call(this),this._eventBus._off("editingaction",Je(this,cn)),this._eventBus._off("pagechanging",Je(this,Bn)),this._eventBus._off("scalechanging",Je(this,mn)),this._eventBus._off("rotationchanging",Je(this,bn));for(const Fn of Je(this,nn).values())Fn.destroy();Je(this,nn).clear(),Je(this,Ge).clear(),Je(this,Nn).clear(),rr(this,ke,null),Je(this,hn).clear(),Je(this,Sn).destroy(),Je(this,dn).destroy()}get hcmFilter(){return(0,e.shadow)(this,"hcmFilter",Je(this,An)?Je(this,je).addHCMFilter(Je(this,An).foreground,Je(this,An).background):"none")}get direction(){return(0,e.shadow)(this,"direction",getComputedStyle(Je(this,tr)).direction)}editAltText(Fn){var ur;(ur=Je(this,dn))==null||ur.editAltText(this,Fn)}onPageChanging({pageNumber:Fn}){rr(this,yn,Fn-1)}focusMainContainer(){Je(this,tr).focus()}findParent(Fn,ur){for(const vr of Je(this,nn).values()){const{x:yr,y:Lr,width:kr,height:Tn}=vr.div.getBoundingClientRect();if(Fn>=yr&&Fn<=yr+kr&&ur>=Lr&&ur<=Lr+Tn)return vr}return null}disableUserSelect(Fn=!1){Je(this,ir).classList.toggle("noUserSelect",Fn)}addShouldRescale(Fn){Je(this,Nn).add(Fn)}removeShouldRescale(Fn){Je(this,Nn).delete(Fn)}onScaleChanging({scale:Fn}){this.commitOrRemove(),this.viewParameters.realScale=Fn*_e.PixelsPerInch.PDF_TO_CSS_UNITS;for(const ur of Je(this,Nn))ur.onScaleChanging()}onRotationChanging({pagesRotation:Fn}){this.commitOrRemove(),this.viewParameters.rotation=Fn}addToAnnotationStorage(Fn){!Fn.isEmpty()&&Je(this,wn)&&!Je(this,wn).has(Fn.id)&&Je(this,wn).setValue(Fn.id,Fn)}blur(){if(!this.hasSelection)return;const{activeElement:Fn}=document;for(const ur of Je(this,hn))if(ur.div.contains(Fn)){rr(this,sn,[ur,Fn]),ur._focusEventsAllowed=!1;break}}focus(){if(!Je(this,sn))return;const[Fn,ur]=Je(this,sn);rr(this,sn,null),ur.addEventListener("focusin",()=>{Fn._focusEventsAllowed=!0},{once:!0}),ur.focus()}addEditListeners(){Vn(this,qn,hc).call(this),Vn(this,qn,dc).call(this)}removeEditListeners(){Vn(this,qn,Qo).call(this),Vn(this,qn,fc).call(this)}copy(Fn){var vr;if(Fn.preventDefault(),(vr=Je(this,ke))==null||vr.commitOrRemove(),!this.hasSelection)return;const ur=[];for(const yr of Je(this,hn)){const Lr=yr.serialize(!0);Lr&&ur.push(Lr)}ur.length!==0&&Fn.clipboardData.setData("application/pdfjs",JSON.stringify(ur))}cut(Fn){this.copy(Fn),this.delete()}paste(Fn){Fn.preventDefault();const{clipboardData:ur}=Fn;for(const Lr of ur.items)for(const kr of Je(this,_n))if(kr.isHandlingMimeForPasting(Lr.type)){kr.paste(Lr,this.currentLayer);return}let vr=ur.getData("application/pdfjs");if(!vr)return;try{vr=JSON.parse(vr)}catch(Lr){(0,e.warn)(`paste: "${Lr.message}".`);return}if(!Array.isArray(vr))return;this.unselectAll();const yr=this.currentLayer;try{const Lr=[];for(const Ln of vr){const Un=yr.deserialize(Ln);if(!Un)return;Lr.push(Un)}const kr=()=>{for(const Ln of Lr)Vn(this,qn,pc).call(this,Ln);Vn(this,qn,gc).call(this,Lr)},Tn=()=>{for(const Ln of Lr)Ln.remove()};this.addCommands({cmd:kr,undo:Tn,mustExec:!0})}catch(Lr){(0,e.warn)(`paste: "${Lr.message}".`)}}keydown(Fn){var ur;(ur=this.getActive())!=null&&ur.shouldGetKeyboardEvents()||Xr._keyboardManager.exec(this,Fn)}onEditingAction(Fn){["undo","redo","delete","selectAll"].includes(Fn.name)&&this[Fn.name]()}setEditingState(Fn){Fn?(Vn(this,qn,bu).call(this),Vn(this,qn,hc).call(this),Vn(this,qn,dc).call(this),Vn(this,qn,ts).call(this,{isEditing:Je(this,on)!==e.AnnotationEditorType.NONE,isEmpty:Vn(this,qn,to).call(this),hasSomethingToUndo:Je(this,Sn).hasSomethingToUndo(),hasSomethingToRedo:Je(this,Sn).hasSomethingToRedo(),hasSelectedEditor:!1})):(Vn(this,qn,uc).call(this),Vn(this,qn,Qo).call(this),Vn(this,qn,fc).call(this),Vn(this,qn,ts).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Fn){if(!Je(this,_n)){rr(this,_n,Fn);for(const ur of Je(this,_n))Vn(this,qn,Qa).call(this,ur.defaultPropertiesToUpdate)}}getId(){return Je(this,Ie).getId()}get currentLayer(){return Je(this,nn).get(Je(this,yn))}getLayer(Fn){return Je(this,nn).get(Fn)}get currentPageIndex(){return Je(this,yn)}addLayer(Fn){Je(this,nn).set(Fn.pageIndex,Fn),Je(this,Oe)?Fn.enable():Fn.disable()}removeLayer(Fn){Je(this,nn).delete(Fn.pageIndex)}updateMode(Fn,ur=null){if(Je(this,on)!==Fn){if(rr(this,on,Fn),Fn===e.AnnotationEditorType.NONE){this.setEditingState(!1),Vn(this,qn,yu).call(this);return}this.setEditingState(!0),Vn(this,qn,vu).call(this),this.unselectAll();for(const vr of Je(this,nn).values())vr.updateMode(Fn);if(ur){for(const vr of Je(this,Ge).values())if(vr.annotationElementId===ur){this.setSelected(vr),vr.enterInEditMode();break}}}}updateToolbar(Fn){Fn!==Je(this,on)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Fn})}updateParams(Fn,ur){if(Je(this,_n)){if(Fn===e.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Fn);return}for(const vr of Je(this,hn))vr.updateParams(Fn,ur);for(const vr of Je(this,_n))vr.updateDefaultParams(Fn,ur)}}enableWaiting(Fn=!1){if(Je(this,Ze)!==Fn){rr(this,Ze,Fn);for(const ur of Je(this,nn).values())Fn?ur.disableClick():ur.enableClick(),ur.div.classList.toggle("waiting",Fn)}}getEditors(Fn){const ur=[];for(const vr of Je(this,Ge).values())vr.pageIndex===Fn&&ur.push(vr);return ur}getEditor(Fn){return Je(this,Ge).get(Fn)}addEditor(Fn){Je(this,Ge).set(Fn.id,Fn)}removeEditor(Fn){var ur;Je(this,Ge).delete(Fn.id),this.unselect(Fn),(!Fn.annotationElementId||!Je(this,Pn).has(Fn.annotationElementId))&&((ur=Je(this,wn))==null||ur.remove(Fn.id))}addDeletedAnnotationElement(Fn){Je(this,Pn).add(Fn.annotationElementId),Fn.deleted=!0}isDeletedAnnotationElement(Fn){return Je(this,Pn).has(Fn)}removeDeletedAnnotationElement(Fn){Je(this,Pn).delete(Fn.annotationElementId),Fn.deleted=!1}setActiveEditor(Fn){Je(this,ke)!==Fn&&(rr(this,ke,Fn),Fn&&Vn(this,qn,Qa).call(this,Fn.propertiesToUpdate))}toggleSelected(Fn){if(Je(this,hn).has(Fn)){Je(this,hn).delete(Fn),Fn.unselect(),Vn(this,qn,ts).call(this,{hasSelectedEditor:this.hasSelection});return}Je(this,hn).add(Fn),Fn.select(),Vn(this,qn,Qa).call(this,Fn.propertiesToUpdate),Vn(this,qn,ts).call(this,{hasSelectedEditor:!0})}setSelected(Fn){for(const ur of Je(this,hn))ur!==Fn&&ur.unselect();Je(this,hn).clear(),Je(this,hn).add(Fn),Fn.select(),Vn(this,qn,Qa).call(this,Fn.propertiesToUpdate),Vn(this,qn,ts).call(this,{hasSelectedEditor:!0})}isSelected(Fn){return Je(this,hn).has(Fn)}unselect(Fn){Fn.unselect(),Je(this,hn).delete(Fn),Vn(this,qn,ts).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Je(this,hn).size!==0}undo(){Je(this,Sn).undo(),Vn(this,qn,ts).call(this,{hasSomethingToUndo:Je(this,Sn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Vn(this,qn,to).call(this)})}redo(){Je(this,Sn).redo(),Vn(this,qn,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Je(this,Sn).hasSomethingToRedo(),isEmpty:Vn(this,qn,to).call(this)})}addCommands(Fn){Je(this,Sn).add(Fn),Vn(this,qn,ts).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Vn(this,qn,to).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Fn=[...Je(this,hn)],ur=()=>{for(const yr of Fn)yr.remove()},vr=()=>{for(const yr of Fn)Vn(this,qn,pc).call(this,yr)};this.addCommands({cmd:ur,undo:vr,mustExec:!0})}commitOrRemove(){var Fn;(Fn=Je(this,ke))==null||Fn.commitOrRemove()}hasSomethingToControl(){return Je(this,ke)||this.hasSelection}selectAll(){for(const Fn of Je(this,hn))Fn.commit();Vn(this,qn,gc).call(this,Je(this,Ge).values())}unselectAll(){if(Je(this,ke)){Je(this,ke).commitOrRemove();return}if(this.hasSelection){for(const Fn of Je(this,hn))Fn.unselect();Je(this,hn).clear(),Vn(this,qn,ts).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Fn,ur,vr=!1){if(vr||this.commitOrRemove(),!this.hasSelection)return;Je(this,On)[0]+=Fn,Je(this,On)[1]+=ur;const[yr,Lr]=Je(this,On),kr=[...Je(this,hn)],Tn=1e3;Je(this,Hn)&&clearTimeout(Je(this,Hn)),rr(this,Hn,setTimeout(()=>{rr(this,Hn,null),Je(this,On)[0]=Je(this,On)[1]=0,this.addCommands({cmd:()=>{for(const Ln of kr)Je(this,Ge).has(Ln.id)&&Ln.translateInPage(yr,Lr)},undo:()=>{for(const Ln of kr)Je(this,Ge).has(Ln.id)&&Ln.translateInPage(-yr,-Lr)},mustExec:!1})},Tn));for(const Ln of kr)Ln.translateInPage(Fn,ur)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),rr(this,un,new Map);for(const Fn of Je(this,hn))Je(this,un).set(Fn,{savedX:Fn.x,savedY:Fn.y,savedPageIndex:Fn.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Je(this,un))return!1;this.disableUserSelect(!1);const Fn=Je(this,un);rr(this,un,null);let ur=!1;for(const[{x:yr,y:Lr,pageIndex:kr},Tn]of Fn)Tn.newX=yr,Tn.newY=Lr,Tn.newPageIndex=kr,ur||(ur=yr!==Tn.savedX||Lr!==Tn.savedY||kr!==Tn.savedPageIndex);if(!ur)return!1;const vr=(yr,Lr,kr,Tn)=>{if(Je(this,Ge).has(yr.id)){const Ln=Je(this,nn).get(Tn);Ln?yr._setParentAndPosition(Ln,Lr,kr):(yr.pageIndex=Tn,yr.x=Lr,yr.y=kr)}};return this.addCommands({cmd:()=>{for(const[yr,{newX:Lr,newY:kr,newPageIndex:Tn}]of Fn)vr(yr,Lr,kr,Tn)},undo:()=>{for(const[yr,{savedX:Lr,savedY:kr,savedPageIndex:Tn}]of Fn)vr(yr,Lr,kr,Tn)},mustExec:!0}),!0}dragSelectedEditors(Fn,ur){if(Je(this,un))for(const vr of Je(this,un).keys())vr.drag(Fn,ur)}rebuild(Fn){if(Fn.parent===null){const ur=this.getLayer(Fn.pageIndex);ur?(ur.changeParent(Fn),ur.addOrRebuild(Fn)):(this.addEditor(Fn),this.addToAnnotationStorage(Fn),Fn.rebuild())}else Fn.parent.addOrRebuild(Fn)}isActive(Fn){return Je(this,ke)===Fn}getActive(){return Je(this,ke)}getMode(){return Je(this,on)}get imageManager(){return(0,e.shadow)(this,"imageManager",new Ce)}};ke=new WeakMap,Ge=new WeakMap,nn=new WeakMap,dn=new WeakMap,wn=new WeakMap,Sn=new WeakMap,yn=new WeakMap,Pn=new WeakMap,un=new WeakMap,_n=new WeakMap,Nn=new WeakMap,je=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,Ze=new WeakMap,sn=new WeakMap,on=new WeakMap,hn=new WeakMap,An=new WeakMap,Mn=new WeakMap,In=new WeakMap,zn=new WeakMap,Wn=new WeakMap,Jn=new WeakMap,Dn=new WeakMap,cn=new WeakMap,Bn=new WeakMap,mn=new WeakMap,bn=new WeakMap,Rn=new WeakMap,On=new WeakMap,Hn=new WeakMap,tr=new WeakMap,ir=new WeakMap,qn=new WeakSet,bu=function(){window.addEventListener("focus",Je(this,In)),window.addEventListener("blur",Je(this,Mn))},uc=function(){window.removeEventListener("focus",Je(this,In)),window.removeEventListener("blur",Je(this,Mn))},hc=function(){window.addEventListener("keydown",Je(this,Dn),{capture:!0})},Qo=function(){window.removeEventListener("keydown",Je(this,Dn),{capture:!0})},dc=function(){document.addEventListener("copy",Je(this,zn)),document.addEventListener("cut",Je(this,Wn)),document.addEventListener("paste",Je(this,Jn))},fc=function(){document.removeEventListener("copy",Je(this,zn)),document.removeEventListener("cut",Je(this,Wn)),document.removeEventListener("paste",Je(this,Jn))},ts=function(Fn){Object.entries(Fn).some(([vr,yr])=>Je(this,Rn)[vr]!==yr)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Je(this,Rn),Fn)})},Qa=function(Fn){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Fn})},vu=function(){if(!Je(this,Oe)){rr(this,Oe,!0);for(const Fn of Je(this,nn).values())Fn.enable()}},yu=function(){if(this.unselectAll(),Je(this,Oe)){rr(this,Oe,!1);for(const Fn of Je(this,nn).values())Fn.disable()}},pc=function(Fn){const ur=Je(this,nn).get(Fn.pageIndex);ur?ur.addOrRebuild(Fn):this.addEditor(Fn)},to=function(){if(Je(this,Ge).size===0)return!0;if(Je(this,Ge).size===1)for(const Fn of Je(this,Ge).values())return Fn.isEmpty();return!1},gc=function(Fn){Je(this,hn).clear();for(const ur of Fn)ur.isEmpty()||(Je(this,hn).add(ur),ur.select());Vn(this,qn,ts).call(this,{hasSelectedEditor:!0})},oi(Xr,"TRANSLATE_SMALL",1),oi(Xr,"TRANSLATE_BIG",10);let He=Xr;t.AnnotationEditorUIManager=He},(St,t,xe)=>{var yn,Pn,un,_n,Nn,je,Ie,Oe,Ze,sn,on,hn,ba,va,mc,tl,el,eo,no;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=We,t.getColorValues=Ge,t.getCurrentTransform=nn,t.getCurrentTransformInverse=dn,t.getFilenameFromUrl=Be,t.getPdfFilenameFromUrl=Ye,t.getRGB=ke,t.getXfaPageViewport=gn,t.isDataScheme=$e,t.isPdfFile=Ke,t.isValidFetchUrl=rn,t.loadScript=en,t.noContextMenu=Xe,t.setLayerDimensions=wn;var e=xe(7),_e=xe(1);const Se="http://www.w3.org/2000/svg",Sn=class Sn{};oi(Sn,"CSS",96),oi(Sn,"PDF",72),oi(Sn,"PDF_TO_CSS_UNITS",Sn.CSS/Sn.PDF);let Ee=Sn;t.PixelsPerInch=Ee;class Re extends e.BaseFilterFactory{constructor({docId:mn,ownerDocument:bn=globalThis.document}={}){super();er(this,hn);er(this,yn);er(this,Pn);er(this,un);er(this,_n);er(this,Nn);er(this,je);er(this,Ie);er(this,Oe);er(this,Ze);er(this,sn);er(this,on,0);rr(this,un,mn),rr(this,_n,bn)}addFilter(mn){if(!mn)return"none";let bn=Je(this,hn,ba).get(mn);if(bn)return bn;let Rn,On,Hn,tr;if(mn.length===1){const fr=mn[0],Mr=new Array(256);for(let _r=0;_r<256;_r++)Mr[_r]=fr[_r]/255;tr=Rn=On=Hn=Mr.join(",")}else{const[fr,Mr,_r]=mn,Ir=new Array(256),hr=new Array(256),Rr=new Array(256);for(let jr=0;jr<256;jr++)Ir[jr]=fr[jr]/255,hr[jr]=Mr[jr]/255,Rr[jr]=_r[jr]/255;Rn=Ir.join(","),On=hr.join(","),Hn=Rr.join(","),tr=`${Rn}${On}${Hn}`}if(bn=Je(this,hn,ba).get(tr),bn)return Je(this,hn,ba).set(mn,bn),bn;const ir=`g_${Je(this,un)}_transfer_map_${Za(this,on)._++}`,qn=`url(#${ir})`;Je(this,hn,ba).set(mn,qn),Je(this,hn,ba).set(tr,qn);const pr=Vn(this,hn,tl).call(this,ir);return Vn(this,hn,eo).call(this,Rn,On,Hn,pr),qn}addHCMFilter(mn,bn){var Mr;const Rn=`${mn}-${bn}`;if(Je(this,je)===Rn)return Je(this,Ie);if(rr(this,je,Rn),rr(this,Ie,"none"),(Mr=Je(this,Nn))==null||Mr.remove(),!mn||!bn)return Je(this,Ie);const On=Vn(this,hn,no).call(this,mn);mn=_e.Util.makeHexColor(...On);const Hn=Vn(this,hn,no).call(this,bn);if(bn=_e.Util.makeHexColor(...Hn),Je(this,hn,va).style.color="",mn==="#000000"&&bn==="#ffffff"||mn===bn)return Je(this,Ie);const tr=new Array(256);for(let _r=0;_r<=255;_r++){const Ir=_r/255;tr[_r]=Ir<=.03928?Ir/12.92:((Ir+.055)/1.055)**2.4}const ir=tr.join(","),qn=`g_${Je(this,un)}_hcm_filter`,pr=rr(this,Oe,Vn(this,hn,tl).call(this,qn));Vn(this,hn,eo).call(this,ir,ir,ir,pr),Vn(this,hn,mc).call(this,pr);const fr=(_r,Ir)=>{const hr=On[_r]/255,Rr=Hn[_r]/255,jr=new Array(Ir+1);for(let Vr=0;Vr<=Ir;Vr++)jr[Vr]=hr+Vr/Ir*(Rr-hr);return jr.join(",")};return Vn(this,hn,eo).call(this,fr(0,5),fr(1,5),fr(2,5),pr),rr(this,Ie,`url(#${qn})`),Je(this,Ie)}addHighlightHCMFilter(mn,bn,Rn,On){var Rr;const Hn=`${mn}-${bn}-${Rn}-${On}`;if(Je(this,Ze)===Hn)return Je(this,sn);if(rr(this,Ze,Hn),rr(this,sn,"none"),(Rr=Je(this,Oe))==null||Rr.remove(),!mn||!bn)return Je(this,sn);const[tr,ir]=[mn,bn].map(Vn(this,hn,no).bind(this));let qn=Math.round(.2126*tr[0]+.7152*tr[1]+.0722*tr[2]),pr=Math.round(.2126*ir[0]+.7152*ir[1]+.0722*ir[2]),[fr,Mr]=[Rn,On].map(Vn(this,hn,no).bind(this));pr<qn&&([qn,pr,fr,Mr]=[pr,qn,Mr,fr]),Je(this,hn,va).style.color="";const _r=(jr,Vr,or)=>{const Xn=new Array(256),Qn=(pr-qn)/or,Sr=jr/255,Xr=(Vr-jr)/(255*or);let qr=0;for(let Fn=0;Fn<=or;Fn++){const ur=Math.round(qn+Fn*Qn),vr=Sr+Fn*Xr;for(let yr=qr;yr<=ur;yr++)Xn[yr]=vr;qr=ur+1}for(let Fn=qr;Fn<256;Fn++)Xn[Fn]=Xn[qr-1];return Xn.join(",")},Ir=`g_${Je(this,un)}_hcm_highlight_filter`,hr=rr(this,Oe,Vn(this,hn,tl).call(this,Ir));return Vn(this,hn,mc).call(this,hr),Vn(this,hn,eo).call(this,_r(fr[0],Mr[0],5),_r(fr[1],Mr[1],5),_r(fr[2],Mr[2],5),hr),rr(this,sn,`url(#${Ir})`),Je(this,sn)}destroy(mn=!1){mn&&(Je(this,Ie)||Je(this,sn))||(Je(this,Pn)&&(Je(this,Pn).parentNode.parentNode.remove(),rr(this,Pn,null)),Je(this,yn)&&(Je(this,yn).clear(),rr(this,yn,null)),rr(this,on,0))}}yn=new WeakMap,Pn=new WeakMap,un=new WeakMap,_n=new WeakMap,Nn=new WeakMap,je=new WeakMap,Ie=new WeakMap,Oe=new WeakMap,Ze=new WeakMap,sn=new WeakMap,on=new WeakMap,hn=new WeakSet,ba=function(){return Je(this,yn)||rr(this,yn,new Map)},va=function(){if(!Je(this,Pn)){const mn=Je(this,_n).createElement("div"),{style:bn}=mn;bn.visibility="hidden",bn.contain="strict",bn.width=bn.height=0,bn.position="absolute",bn.top=bn.left=0,bn.zIndex=-1;const Rn=Je(this,_n).createElementNS(Se,"svg");Rn.setAttribute("width",0),Rn.setAttribute("height",0),rr(this,Pn,Je(this,_n).createElementNS(Se,"defs")),mn.append(Rn),Rn.append(Je(this,Pn)),Je(this,_n).body.append(mn)}return Je(this,Pn)},mc=function(mn){const bn=Je(this,_n).createElementNS(Se,"feColorMatrix");bn.setAttribute("type","matrix"),bn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),mn.append(bn)},tl=function(mn){const bn=Je(this,_n).createElementNS(Se,"filter");return bn.setAttribute("color-interpolation-filters","sRGB"),bn.setAttribute("id",mn),Je(this,hn,va).append(bn),bn},el=function(mn,bn,Rn){const On=Je(this,_n).createElementNS(Se,bn);On.setAttribute("type","discrete"),On.setAttribute("tableValues",Rn),mn.append(On)},eo=function(mn,bn,Rn,On){const Hn=Je(this,_n).createElementNS(Se,"feComponentTransfer");On.append(Hn),Vn(this,hn,el).call(this,Hn,"feFuncR",mn),Vn(this,hn,el).call(this,Hn,"feFuncG",bn),Vn(this,hn,el).call(this,Hn,"feFuncB",Rn)},no=function(mn){return Je(this,hn,va).style.color=mn,ke(getComputedStyle(Je(this,hn,va)).getPropertyValue("color"))},t.DOMFilterFactory=Re;class Ce extends e.BaseCanvasFactory{constructor({ownerDocument:Bn=globalThis.document}={}){super(),this._document=Bn}_createCanvas(Bn,mn){const bn=this._document.createElement("canvas");return bn.width=Bn,bn.height=mn,bn}}t.DOMCanvasFactory=Ce;async function De(cn,Bn=!1){if(rn(cn,document.baseURI)){const mn=await fetch(cn);if(!mn.ok)throw new Error(mn.statusText);return Bn?new Uint8Array(await mn.arrayBuffer()):(0,_e.stringToBytes)(await mn.text())}return new Promise((mn,bn)=>{const Rn=new XMLHttpRequest;Rn.open("GET",cn,!0),Bn&&(Rn.responseType="arraybuffer"),Rn.onreadystatechange=()=>{if(Rn.readyState===XMLHttpRequest.DONE){if(Rn.status===200||Rn.status===0){let On;if(Bn&&Rn.response?On=new Uint8Array(Rn.response):!Bn&&Rn.responseText&&(On=(0,_e.stringToBytes)(Rn.responseText)),On){mn(On);return}}bn(new Error(Rn.statusText))}},Rn.send(null)})}class Me extends e.BaseCMapReaderFactory{_fetchData(Bn,mn){return De(Bn,this.isCompressed).then(bn=>({cMapData:bn,compressionType:mn}))}}t.DOMCMapReaderFactory=Me;class Ue extends e.BaseStandardFontDataFactory{_fetchData(Bn){return De(Bn,!0)}}t.DOMStandardFontDataFactory=Ue;class He extends e.BaseSVGFactory{_createSVG(Bn){return document.createElementNS(Se,Bn)}}t.DOMSVGFactory=He;class Te{constructor({viewBox:Bn,scale:mn,rotation:bn,offsetX:Rn=0,offsetY:On=0,dontFlip:Hn=!1}){this.viewBox=Bn,this.scale=mn,this.rotation=bn,this.offsetX=Rn,this.offsetY=On;const tr=(Bn[2]+Bn[0])/2,ir=(Bn[3]+Bn[1])/2;let qn,pr,fr,Mr;switch(bn%=360,bn<0&&(bn+=360),bn){case 180:qn=-1,pr=0,fr=0,Mr=1;break;case 90:qn=0,pr=1,fr=1,Mr=0;break;case 270:qn=0,pr=-1,fr=-1,Mr=0;break;case 0:qn=1,pr=0,fr=0,Mr=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Hn&&(fr=-fr,Mr=-Mr);let _r,Ir,hr,Rr;qn===0?(_r=Math.abs(ir-Bn[1])*mn+Rn,Ir=Math.abs(tr-Bn[0])*mn+On,hr=(Bn[3]-Bn[1])*mn,Rr=(Bn[2]-Bn[0])*mn):(_r=Math.abs(tr-Bn[0])*mn+Rn,Ir=Math.abs(ir-Bn[1])*mn+On,hr=(Bn[2]-Bn[0])*mn,Rr=(Bn[3]-Bn[1])*mn),this.transform=[qn*mn,pr*mn,fr*mn,Mr*mn,_r-qn*mn*tr-fr*mn*ir,Ir-pr*mn*tr-Mr*mn*ir],this.width=hr,this.height=Rr}get rawDims(){const{viewBox:Bn}=this;return(0,_e.shadow)(this,"rawDims",{pageWidth:Bn[2]-Bn[0],pageHeight:Bn[3]-Bn[1],pageX:Bn[0],pageY:Bn[1]})}clone({scale:Bn=this.scale,rotation:mn=this.rotation,offsetX:bn=this.offsetX,offsetY:Rn=this.offsetY,dontFlip:On=!1}={}){return new Te({viewBox:this.viewBox.slice(),scale:Bn,rotation:mn,offsetX:bn,offsetY:Rn,dontFlip:On})}convertToViewportPoint(Bn,mn){return _e.Util.applyTransform([Bn,mn],this.transform)}convertToViewportRectangle(Bn){const mn=_e.Util.applyTransform([Bn[0],Bn[1]],this.transform),bn=_e.Util.applyTransform([Bn[2],Bn[3]],this.transform);return[mn[0],mn[1],bn[0],bn[1]]}convertToPdfPoint(Bn,mn){return _e.Util.applyInverseTransform([Bn,mn],this.transform)}}t.PageViewport=Te;class Ve extends _e.BaseException{constructor(Bn,mn=0){super(Bn,"RenderingCancelledException"),this.extraDelay=mn}}t.RenderingCancelledException=Ve;function $e(cn){const Bn=cn.length;let mn=0;for(;mn<Bn&&cn[mn].trim()==="";)mn++;return cn.substring(mn,mn+5).toLowerCase()==="data:"}function Ke(cn){return typeof cn=="string"&&/\.pdf$/i.test(cn)}function Be(cn,Bn=!1){return Bn||([cn]=cn.split(/[#?]/,1)),cn.substring(cn.lastIndexOf("/")+1)}function Ye(cn,Bn="document.pdf"){if(typeof cn!="string")return Bn;if($e(cn))return(0,_e.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Bn;const mn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,bn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Rn=mn.exec(cn);let On=bn.exec(Rn[1])||bn.exec(Rn[2])||bn.exec(Rn[3]);if(On&&(On=On[0],On.includes("%")))try{On=bn.exec(decodeURIComponent(On))[0]}catch{}return On||Bn}class an{constructor(){oi(this,"started",Object.create(null));oi(this,"times",[])}time(Bn){Bn in this.started&&(0,_e.warn)(`Timer is already running for ${Bn}`),this.started[Bn]=Date.now()}timeEnd(Bn){Bn in this.started||(0,_e.warn)(`Timer has not been started for ${Bn}`),this.times.push({name:Bn,start:this.started[Bn],end:Date.now()}),delete this.started[Bn]}toString(){const Bn=[];let mn=0;for(const{name:bn}of this.times)mn=Math.max(bn.length,mn);for(const{name:bn,start:Rn,end:On}of this.times)Bn.push(`${bn.padEnd(mn)} ${On-Rn}ms
`);return Bn.join("")}}t.StatTimer=an;function rn(cn,Bn){try{const{protocol:mn}=Bn?new URL(cn,Bn):new URL(cn);return mn==="http:"||mn==="https:"}catch{return!1}}function Xe(cn){cn.preventDefault()}function en(cn,Bn=!1){return new Promise((mn,bn)=>{const Rn=document.createElement("script");Rn.src=cn,Rn.onload=function(On){Bn&&Rn.remove(),mn(On)},Rn.onerror=function(){bn(new Error(`Cannot load script at: ${Rn.src}`))},(document.head||document.documentElement).append(Rn)})}function We(cn){console.log("Deprecated API usage: "+cn)}let ze;class Qe{static toDateObject(Bn){if(!Bn||typeof Bn!="string")return null;ze||(ze=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const mn=ze.exec(Bn);if(!mn)return null;const bn=parseInt(mn[1],10);let Rn=parseInt(mn[2],10);Rn=Rn>=1&&Rn<=12?Rn-1:0;let On=parseInt(mn[3],10);On=On>=1&&On<=31?On:1;let Hn=parseInt(mn[4],10);Hn=Hn>=0&&Hn<=23?Hn:0;let tr=parseInt(mn[5],10);tr=tr>=0&&tr<=59?tr:0;let ir=parseInt(mn[6],10);ir=ir>=0&&ir<=59?ir:0;const qn=mn[7]||"Z";let pr=parseInt(mn[8],10);pr=pr>=0&&pr<=23?pr:0;let fr=parseInt(mn[9],10)||0;return fr=fr>=0&&fr<=59?fr:0,qn==="-"?(Hn+=pr,tr+=fr):qn==="+"&&(Hn-=pr,tr-=fr),new Date(Date.UTC(bn,Rn,On,Hn,tr,ir))}}t.PDFDateString=Qe;function gn(cn,{scale:Bn=1,rotation:mn=0}){const{width:bn,height:Rn}=cn.attributes.style,On=[0,0,parseInt(bn),parseInt(Rn)];return new Te({viewBox:On,scale:Bn,rotation:mn})}function ke(cn){if(cn.startsWith("#")){const Bn=parseInt(cn.slice(1),16);return[(Bn&16711680)>>16,(Bn&65280)>>8,Bn&255]}return cn.startsWith("rgb(")?cn.slice(4,-1).split(",").map(Bn=>parseInt(Bn)):cn.startsWith("rgba(")?cn.slice(5,-1).split(",").map(Bn=>parseInt(Bn)).slice(0,3):((0,_e.warn)(`Not a valid color format: "${cn}"`),[0,0,0])}function Ge(cn){const Bn=document.createElement("span");Bn.style.visibility="hidden",document.body.append(Bn);for(const mn of cn.keys()){Bn.style.color=mn;const bn=window.getComputedStyle(Bn).color;cn.set(mn,ke(bn))}Bn.remove()}function nn(cn){const{a:Bn,b:mn,c:bn,d:Rn,e:On,f:Hn}=cn.getTransform();return[Bn,mn,bn,Rn,On,Hn]}function dn(cn){const{a:Bn,b:mn,c:bn,d:Rn,e:On,f:Hn}=cn.getTransform().invertSelf();return[Bn,mn,bn,Rn,On,Hn]}function wn(cn,Bn,mn=!1,bn=!0){if(Bn instanceof Te){const{pageWidth:Rn,pageHeight:On}=Bn.rawDims,{style:Hn}=cn,tr=_e.FeatureTest.isCSSRoundSupported,ir=`var(--scale-factor) * ${Rn}px`,qn=`var(--scale-factor) * ${On}px`,pr=tr?`round(${ir}, 1px)`:`calc(${ir})`,fr=tr?`round(${qn}, 1px)`:`calc(${qn})`;!mn||Bn.rotation%180===0?(Hn.width=pr,Hn.height=fr):(Hn.width=fr,Hn.height=pr)}bn&&cn.setAttribute("data-main-rotation",Bn.rotation)}},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var e=xe(1);class _e{constructor(){this.constructor===_e&&(0,e.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(Me){return"none"}addHCMFilter(Me,Ue){return"none"}addHighlightHCMFilter(Me,Ue,He,Te){return"none"}destroy(Me=!1){}}t.BaseFilterFactory=_e;class Se{constructor(){this.constructor===Se&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(Me,Ue){if(Me<=0||Ue<=0)throw new Error("Invalid canvas size");const He=this._createCanvas(Me,Ue);return{canvas:He,context:He.getContext("2d")}}reset(Me,Ue,He){if(!Me.canvas)throw new Error("Canvas is not specified");if(Ue<=0||He<=0)throw new Error("Invalid canvas size");Me.canvas.width=Ue,Me.canvas.height=He}destroy(Me){if(!Me.canvas)throw new Error("Canvas is not specified");Me.canvas.width=0,Me.canvas.height=0,Me.canvas=null,Me.context=null}_createCanvas(Me,Ue){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=Se;class Ee{constructor({baseUrl:Me=null,isCompressed:Ue=!0}){this.constructor===Ee&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=Me,this.isCompressed=Ue}async fetch({name:Me}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!Me)throw new Error("CMap name must be specified.");const Ue=this.baseUrl+Me+(this.isCompressed?".bcmap":""),He=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(Ue,He).catch(Te=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Ue}`)})}_fetchData(Me,Ue){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=Ee;class Re{constructor({baseUrl:Me=null}){this.constructor===Re&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=Me}async fetch({filename:Me}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!Me)throw new Error("Font filename must be specified.");const Ue=`${this.baseUrl}${Me}`;return this._fetchData(Ue).catch(He=>{throw new Error(`Unable to load font data at: ${Ue}`)})}_fetchData(Me){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=Re;class Ce{constructor(){this.constructor===Ce&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(Me,Ue,He=!1){if(Me<=0||Ue<=0)throw new Error("Invalid SVG dimensions");const Te=this._createSVG("svg:svg");return Te.setAttribute("version","1.1"),He||(Te.setAttribute("width",`${Me}px`),Te.setAttribute("height",`${Ue}px`)),Te.setAttribute("preserveAspectRatio","none"),Te.setAttribute("viewBox",`0 0 ${Me} ${Ue}`),Te}createElement(Me){if(typeof Me!="string")throw new Error("Invalid SVG element type");return this._createSVG(Me)}_createSVG(Me){(0,e.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=Ce},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var e=xe(1);const _e=3285377520,Se=4294901760,Ee=65535;class Re{constructor(De){this.h1=De?De&4294967295:_e,this.h2=De?De&4294967295:_e}update(De){let Me,Ue;if(typeof De=="string"){Me=new Uint8Array(De.length*2),Ue=0;for(let We=0,ze=De.length;We<ze;We++){const Qe=De.charCodeAt(We);Qe<=255?Me[Ue++]=Qe:(Me[Ue++]=Qe>>>8,Me[Ue++]=Qe&255)}}else if((0,e.isArrayBuffer)(De))Me=De.slice(),Ue=Me.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const He=Ue>>2,Te=Ue-He*4,Ve=new Uint32Array(Me.buffer,0,He);let $e=0,Ke=0,Be=this.h1,Ye=this.h2;const an=3432918353,rn=461845907,Xe=an&Ee,en=rn&Ee;for(let We=0;We<He;We++)We&1?($e=Ve[We],$e=$e*an&Se|$e*Xe&Ee,$e=$e<<15|$e>>>17,$e=$e*rn&Se|$e*en&Ee,Be^=$e,Be=Be<<13|Be>>>19,Be=Be*5+3864292196):(Ke=Ve[We],Ke=Ke*an&Se|Ke*Xe&Ee,Ke=Ke<<15|Ke>>>17,Ke=Ke*rn&Se|Ke*en&Ee,Ye^=Ke,Ye=Ye<<13|Ye>>>19,Ye=Ye*5+3864292196);switch($e=0,Te){case 3:$e^=Me[He*4+2]<<16;case 2:$e^=Me[He*4+1]<<8;case 1:$e^=Me[He*4],$e=$e*an&Se|$e*Xe&Ee,$e=$e<<15|$e>>>17,$e=$e*rn&Se|$e*en&Ee,He&1?Be^=$e:Ye^=$e}this.h1=Be,this.h2=Ye}hexdigest(){let De=this.h1,Me=this.h2;return De^=Me>>>1,De=De*3981806797&Se|De*36045&Ee,Me=Me*4283543511&Se|((Me<<16|De>>>16)*2950163797&Se)>>>16,De^=Me>>>1,De=De*444984403&Se|De*60499&Ee,Me=Me*3301882366&Se|((Me<<16|De>>>16)*3120437893&Se)>>>16,De^=Me>>>1,(De>>>0).toString(16).padStart(8,"0")+(Me>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=Re},(St,t,xe)=>{var Ee;Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var e=xe(1);class _e{constructor({ownerDocument:Ce=globalThis.document,styleElement:De=null}){er(this,Ee,new Set);this._document=Ce,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(Ce){this.nativeFontFaces.add(Ce),this._document.fonts.add(Ce)}removeNativeFontFace(Ce){this.nativeFontFaces.delete(Ce),this._document.fonts.delete(Ce)}insertRule(Ce){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const De=this.styleElement.sheet;De.insertRule(Ce,De.cssRules.length)}clear(){for(const Ce of this.nativeFontFaces)this._document.fonts.delete(Ce);this.nativeFontFaces.clear(),Je(this,Ee).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(Ce){if(!(!Ce||Je(this,Ee).has(Ce.loadedName))){if((0,e.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:De,src:Me,style:Ue}=Ce,He=new FontFace(De,Me,Ue);this.addNativeFontFace(He);try{await He.load(),Je(this,Ee).add(De)}catch{(0,e.warn)(`Cannot load system font: ${Ce.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(He)}return}(0,e.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(Ce){if(Ce.attached||Ce.missingFile&&!Ce.systemFontInfo)return;if(Ce.attached=!0,Ce.systemFontInfo){await this.loadSystemFont(Ce.systemFontInfo);return}if(this.isFontLoadingAPISupported){const Me=Ce.createNativeFontFace();if(Me){this.addNativeFontFace(Me);try{await Me.loaded}catch(Ue){throw(0,e.warn)(`Failed to load font '${Me.family}': '${Ue}'.`),Ce.disableFontFace=!0,Ue}}return}const De=Ce.createFontFaceRule();if(De){if(this.insertRule(De),this.isSyncFontLoadingSupported)return;await new Promise(Me=>{const Ue=this._queueLoadingCallback(Me);this._prepareFontLoadEvent(Ce,Ue)})}}get isFontLoadingAPISupported(){var De;const Ce=!!((De=this._document)!=null&&De.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",Ce)}get isSyncFontLoadingSupported(){let Ce=!1;return(e.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(Ce=!0),(0,e.shadow)(this,"isSyncFontLoadingSupported",Ce)}_queueLoadingCallback(Ce){function De(){for((0,e.assert)(!Ue.done,"completeRequest() cannot be called twice."),Ue.done=!0;Me.length>0&&Me[0].done;){const He=Me.shift();setTimeout(He.callback,0)}}const{loadingRequests:Me}=this,Ue={done:!1,complete:De,callback:Ce};return Me.push(Ue),Ue}get _loadTestFont(){const Ce=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,e.shadow)(this,"_loadTestFont",Ce)}_prepareFontLoadEvent(Ce,De){function Me(ke,Ge){return ke.charCodeAt(Ge)<<24|ke.charCodeAt(Ge+1)<<16|ke.charCodeAt(Ge+2)<<8|ke.charCodeAt(Ge+3)&255}function Ue(ke,Ge,nn,dn){const wn=ke.substring(0,Ge),Sn=ke.substring(Ge+nn);return wn+dn+Sn}let He,Te;const Ve=this._document.createElement("canvas");Ve.width=1,Ve.height=1;const $e=Ve.getContext("2d");let Ke=0;function Be(ke,Ge){if(++Ke>30){(0,e.warn)("Load test font never loaded."),Ge();return}if($e.font="30px "+ke,$e.fillText(".",0,20),$e.getImageData(0,0,1,1).data[3]>0){Ge();return}setTimeout(Be.bind(null,ke,Ge))}const Ye=`lt${Date.now()}${this.loadTestFontId++}`;let an=this._loadTestFont;an=Ue(an,976,Ye.length,Ye);const Xe=16,en=1482184792;let We=Me(an,Xe);for(He=0,Te=Ye.length-3;He<Te;He+=4)We=We-en+Me(Ye,He)|0;He<Ye.length&&(We=We-en+Me(Ye+"XXX",He)|0),an=Ue(an,Xe,4,(0,e.string32)(We));const ze=`url(data:font/opentype;base64,${btoa(an)});`,Qe=`@font-face {font-family:"${Ye}";src:${ze}}`;this.insertRule(Qe);const gn=this._document.createElement("div");gn.style.visibility="hidden",gn.style.width=gn.style.height="10px",gn.style.position="absolute",gn.style.top=gn.style.left="0px";for(const ke of[Ce.loadedName,Ye]){const Ge=this._document.createElement("span");Ge.textContent="Hi",Ge.style.fontFamily=ke,gn.append(Ge)}this._document.body.append(gn),Be(Ye,()=>{gn.remove(),De.complete()})}}Ee=new WeakMap,t.FontLoader=_e;class Se{constructor(Ce,{isEvalSupported:De=!0,disableFontFace:Me=!1,ignoreErrors:Ue=!1,inspectFont:He=null}){this.compiledGlyphs=Object.create(null);for(const Te in Ce)this[Te]=Ce[Te];this.isEvalSupported=De!==!1,this.disableFontFace=Me===!0,this.ignoreErrors=Ue===!0,this._inspectFont=He}createNativeFontFace(){var De;if(!this.data||this.disableFontFace)return null;let Ce;if(!this.cssFontInfo)Ce=new FontFace(this.loadedName,this.data,{});else{const Me={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(Me.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Ce=new FontFace(this.cssFontInfo.fontFamily,this.data,Me)}return(De=this._inspectFont)==null||De.call(this,this),Ce}createFontFaceRule(){var Ue;if(!this.data||this.disableFontFace)return null;const Ce=(0,e.bytesToString)(this.data),De=`url(data:${this.mimetype};base64,${btoa(Ce)});`;let Me;if(!this.cssFontInfo)Me=`@font-face {font-family:"${this.loadedName}";src:${De}}`;else{let He=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(He+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),Me=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${He}src:${De}}`}return(Ue=this._inspectFont)==null||Ue.call(this,this,De),Me}getPathGenerator(Ce,De){if(this.compiledGlyphs[De]!==void 0)return this.compiledGlyphs[De];let Me;try{Me=Ce.get(this.loadedName+"_path_"+De)}catch(Ue){if(!this.ignoreErrors)throw Ue;return(0,e.warn)(`getPathGenerator - ignoring character: "${Ue}".`),this.compiledGlyphs[De]=function(He,Te){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const Ue=[];for(const He of Me){const Te=He.args!==void 0?He.args.join(","):"";Ue.push("c.",He.cmd,"(",Te,`);
`)}return this.compiledGlyphs[De]=new Function("c","size",Ue.join(""))}return this.compiledGlyphs[De]=function(Ue,He){for(const Te of Me)Te.cmd==="scale"&&(Te.args=[He,-He]),Ue[Te.cmd].apply(Ue,Te.args)}}}t.FontFaceObject=Se},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var e=xe(7);xe(1);const _e=function(De){return new Promise((Me,Ue)=>{require$$5.readFile(De,(Te,Ve)=>{if(Te||!Ve){Ue(new Error(Te));return}Me(new Uint8Array(Ve))})})};class Se extends e.BaseFilterFactory{}t.NodeFilterFactory=Se;class Ee extends e.BaseCanvasFactory{_createCanvas(Me,Ue){return require$$5.createCanvas(Me,Ue)}}t.NodeCanvasFactory=Ee;class Re extends e.BaseCMapReaderFactory{_fetchData(Me,Ue){return _e(Me).then(He=>({cMapData:He,compressionType:Ue}))}}t.NodeCMapReaderFactory=Re;class Ce extends e.BaseStandardFontDataFactory{_fetchData(Me){return _e(Me)}}t.NodeStandardFontDataFactory=Ce},(St,t,xe)=>{var Pn,bc,vc;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var e=xe(1),_e=xe(6),Se=xe(12),Ee=xe(13);const Re=16,Ce=100,De=4096,Me=15,Ue=10,He=1e3,Te=16;function Ve(je,Ie){if(je._removeMirroring)throw new Error("Context is already forwarding operations.");je.__originalSave=je.save,je.__originalRestore=je.restore,je.__originalRotate=je.rotate,je.__originalScale=je.scale,je.__originalTranslate=je.translate,je.__originalTransform=je.transform,je.__originalSetTransform=je.setTransform,je.__originalResetTransform=je.resetTransform,je.__originalClip=je.clip,je.__originalMoveTo=je.moveTo,je.__originalLineTo=je.lineTo,je.__originalBezierCurveTo=je.bezierCurveTo,je.__originalRect=je.rect,je.__originalClosePath=je.closePath,je.__originalBeginPath=je.beginPath,je._removeMirroring=()=>{je.save=je.__originalSave,je.restore=je.__originalRestore,je.rotate=je.__originalRotate,je.scale=je.__originalScale,je.translate=je.__originalTranslate,je.transform=je.__originalTransform,je.setTransform=je.__originalSetTransform,je.resetTransform=je.__originalResetTransform,je.clip=je.__originalClip,je.moveTo=je.__originalMoveTo,je.lineTo=je.__originalLineTo,je.bezierCurveTo=je.__originalBezierCurveTo,je.rect=je.__originalRect,je.closePath=je.__originalClosePath,je.beginPath=je.__originalBeginPath,delete je._removeMirroring},je.save=function(){Ie.save(),this.__originalSave()},je.restore=function(){Ie.restore(),this.__originalRestore()},je.translate=function(Ze,sn){Ie.translate(Ze,sn),this.__originalTranslate(Ze,sn)},je.scale=function(Ze,sn){Ie.scale(Ze,sn),this.__originalScale(Ze,sn)},je.transform=function(Ze,sn,on,hn,An,Mn){Ie.transform(Ze,sn,on,hn,An,Mn),this.__originalTransform(Ze,sn,on,hn,An,Mn)},je.setTransform=function(Ze,sn,on,hn,An,Mn){Ie.setTransform(Ze,sn,on,hn,An,Mn),this.__originalSetTransform(Ze,sn,on,hn,An,Mn)},je.resetTransform=function(){Ie.resetTransform(),this.__originalResetTransform()},je.rotate=function(Ze){Ie.rotate(Ze),this.__originalRotate(Ze)},je.clip=function(Ze){Ie.clip(Ze),this.__originalClip(Ze)},je.moveTo=function(Oe,Ze){Ie.moveTo(Oe,Ze),this.__originalMoveTo(Oe,Ze)},je.lineTo=function(Oe,Ze){Ie.lineTo(Oe,Ze),this.__originalLineTo(Oe,Ze)},je.bezierCurveTo=function(Oe,Ze,sn,on,hn,An){Ie.bezierCurveTo(Oe,Ze,sn,on,hn,An),this.__originalBezierCurveTo(Oe,Ze,sn,on,hn,An)},je.rect=function(Oe,Ze,sn,on){Ie.rect(Oe,Ze,sn,on),this.__originalRect(Oe,Ze,sn,on)},je.closePath=function(){Ie.closePath(),this.__originalClosePath()},je.beginPath=function(){Ie.beginPath(),this.__originalBeginPath()}}class $e{constructor(Ie){this.canvasFactory=Ie,this.cache=Object.create(null)}getCanvas(Ie,Oe,Ze){let sn;return this.cache[Ie]!==void 0?(sn=this.cache[Ie],this.canvasFactory.reset(sn,Oe,Ze)):(sn=this.canvasFactory.create(Oe,Ze),this.cache[Ie]=sn),sn}delete(Ie){delete this.cache[Ie]}clear(){for(const Ie in this.cache){const Oe=this.cache[Ie];this.canvasFactory.destroy(Oe),delete this.cache[Ie]}}}function Ke(je,Ie,Oe,Ze,sn,on,hn,An,Mn,In){const[zn,Wn,Jn,Dn,cn,Bn]=(0,_e.getCurrentTransform)(je);if(Wn===0&&Jn===0){const Rn=hn*zn+cn,On=Math.round(Rn),Hn=An*Dn+Bn,tr=Math.round(Hn),ir=(hn+Mn)*zn+cn,qn=Math.abs(Math.round(ir)-On)||1,pr=(An+In)*Dn+Bn,fr=Math.abs(Math.round(pr)-tr)||1;return je.setTransform(Math.sign(zn),0,0,Math.sign(Dn),On,tr),je.drawImage(Ie,Oe,Ze,sn,on,0,0,qn,fr),je.setTransform(zn,Wn,Jn,Dn,cn,Bn),[qn,fr]}if(zn===0&&Dn===0){const Rn=An*Jn+cn,On=Math.round(Rn),Hn=hn*Wn+Bn,tr=Math.round(Hn),ir=(An+In)*Jn+cn,qn=Math.abs(Math.round(ir)-On)||1,pr=(hn+Mn)*Wn+Bn,fr=Math.abs(Math.round(pr)-tr)||1;return je.setTransform(0,Math.sign(Wn),Math.sign(Jn),0,On,tr),je.drawImage(Ie,Oe,Ze,sn,on,0,0,fr,qn),je.setTransform(zn,Wn,Jn,Dn,cn,Bn),[fr,qn]}je.drawImage(Ie,Oe,Ze,sn,on,hn,An,Mn,In);const mn=Math.hypot(zn,Wn),bn=Math.hypot(Jn,Dn);return[mn*Mn,bn*In]}function Be(je){const{width:Ie,height:Oe}=je;if(Ie>He||Oe>He)return null;const Ze=1e3,sn=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),on=Ie+1;let hn=new Uint8Array(on*(Oe+1)),An,Mn,In;const zn=Ie+7&-8;let Wn=new Uint8Array(zn*Oe),Jn=0;for(const bn of je.data){let Rn=128;for(;Rn>0;)Wn[Jn++]=bn&Rn?0:255,Rn>>=1}let Dn=0;for(Jn=0,Wn[Jn]!==0&&(hn[0]=1,++Dn),Mn=1;Mn<Ie;Mn++)Wn[Jn]!==Wn[Jn+1]&&(hn[Mn]=Wn[Jn]?2:1,++Dn),Jn++;for(Wn[Jn]!==0&&(hn[Mn]=2,++Dn),An=1;An<Oe;An++){Jn=An*zn,In=An*on,Wn[Jn-zn]!==Wn[Jn]&&(hn[In]=Wn[Jn]?1:8,++Dn);let bn=(Wn[Jn]?4:0)+(Wn[Jn-zn]?8:0);for(Mn=1;Mn<Ie;Mn++)bn=(bn>>2)+(Wn[Jn+1]?4:0)+(Wn[Jn-zn+1]?8:0),sn[bn]&&(hn[In+Mn]=sn[bn],++Dn),Jn++;if(Wn[Jn-zn]!==Wn[Jn]&&(hn[In+Mn]=Wn[Jn]?2:4,++Dn),Dn>Ze)return null}for(Jn=zn*(Oe-1),In=An*on,Wn[Jn]!==0&&(hn[In]=8,++Dn),Mn=1;Mn<Ie;Mn++)Wn[Jn]!==Wn[Jn+1]&&(hn[In+Mn]=Wn[Jn]?4:8,++Dn),Jn++;if(Wn[Jn]!==0&&(hn[In+Mn]=4,++Dn),Dn>Ze)return null;const cn=new Int32Array([0,on,-1,0,-on,0,0,0,1]),Bn=new Path2D;for(An=0;Dn&&An<=Oe;An++){let bn=An*on;const Rn=bn+Ie;for(;bn<Rn&&!hn[bn];)bn++;if(bn===Rn)continue;Bn.moveTo(bn%on,An);const On=bn;let Hn=hn[bn];do{const tr=cn[Hn];do bn+=tr;while(!hn[bn]);const ir=hn[bn];ir!==5&&ir!==10?(Hn=ir,hn[bn]=0):(Hn=ir&51*Hn>>4,hn[bn]&=Hn>>2|Hn<<2),Bn.lineTo(bn%on,bn/on|0),hn[bn]||--Dn}while(On!==bn);--An}return Wn=null,hn=null,function(bn){bn.save(),bn.scale(1/Ie,-1/Oe),bn.translate(0,-Oe),bn.fill(Bn),bn.beginPath(),bn.restore()}}class Ye{constructor(Ie,Oe){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Ie,Oe])}clone(){const Ie=Object.create(this);return Ie.clipBox=this.clipBox.slice(),Ie}setCurrentPoint(Ie,Oe){this.x=Ie,this.y=Oe}updatePathMinMax(Ie,Oe,Ze){[Oe,Ze]=e.Util.applyTransform([Oe,Ze],Ie),this.minX=Math.min(this.minX,Oe),this.minY=Math.min(this.minY,Ze),this.maxX=Math.max(this.maxX,Oe),this.maxY=Math.max(this.maxY,Ze)}updateRectMinMax(Ie,Oe){const Ze=e.Util.applyTransform(Oe,Ie),sn=e.Util.applyTransform(Oe.slice(2),Ie);this.minX=Math.min(this.minX,Ze[0],sn[0]),this.minY=Math.min(this.minY,Ze[1],sn[1]),this.maxX=Math.max(this.maxX,Ze[0],sn[0]),this.maxY=Math.max(this.maxY,Ze[1],sn[1])}updateScalingPathMinMax(Ie,Oe){e.Util.scaleMinMax(Ie,Oe),this.minX=Math.min(this.minX,Oe[0]),this.maxX=Math.max(this.maxX,Oe[1]),this.minY=Math.min(this.minY,Oe[2]),this.maxY=Math.max(this.maxY,Oe[3])}updateCurvePathMinMax(Ie,Oe,Ze,sn,on,hn,An,Mn,In,zn){const Wn=e.Util.bezierBoundingBox(Oe,Ze,sn,on,hn,An,Mn,In);if(zn){zn[0]=Math.min(zn[0],Wn[0],Wn[2]),zn[1]=Math.max(zn[1],Wn[0],Wn[2]),zn[2]=Math.min(zn[2],Wn[1],Wn[3]),zn[3]=Math.max(zn[3],Wn[1],Wn[3]);return}this.updateRectMinMax(Ie,Wn)}getPathBoundingBox(Ie=Se.PathType.FILL,Oe=null){const Ze=[this.minX,this.minY,this.maxX,this.maxY];if(Ie===Se.PathType.STROKE){Oe||(0,e.unreachable)("Stroke bounding box must include transform.");const sn=e.Util.singularValueDecompose2dScale(Oe),on=sn[0]*this.lineWidth/2,hn=sn[1]*this.lineWidth/2;Ze[0]-=on,Ze[1]-=hn,Ze[2]+=on,Ze[3]+=hn}return Ze}updateClipFromPath(){const Ie=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Ie||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Ie){this.clipBox=Ie,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Ie=Se.PathType.FILL,Oe=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(Ie,Oe))}}function an(je,Ie){if(typeof ImageData<"u"&&Ie instanceof ImageData){je.putImageData(Ie,0,0);return}const Oe=Ie.height,Ze=Ie.width,sn=Oe%Te,on=(Oe-sn)/Te,hn=sn===0?on:on+1,An=je.createImageData(Ze,Te);let Mn=0,In;const zn=Ie.data,Wn=An.data;let Jn,Dn,cn,Bn;if(Ie.kind===e.ImageKind.GRAYSCALE_1BPP){const mn=zn.byteLength,bn=new Uint32Array(Wn.buffer,0,Wn.byteLength>>2),Rn=bn.length,On=Ze+7>>3,Hn=4294967295,tr=e.FeatureTest.isLittleEndian?4278190080:255;for(Jn=0;Jn<hn;Jn++){for(cn=Jn<on?Te:sn,In=0,Dn=0;Dn<cn;Dn++){const ir=mn-Mn;let qn=0;const pr=ir>On?Ze:ir*8-7,fr=pr&-8;let Mr=0,_r=0;for(;qn<fr;qn+=8)_r=zn[Mn++],bn[In++]=_r&128?Hn:tr,bn[In++]=_r&64?Hn:tr,bn[In++]=_r&32?Hn:tr,bn[In++]=_r&16?Hn:tr,bn[In++]=_r&8?Hn:tr,bn[In++]=_r&4?Hn:tr,bn[In++]=_r&2?Hn:tr,bn[In++]=_r&1?Hn:tr;for(;qn<pr;qn++)Mr===0&&(_r=zn[Mn++],Mr=128),bn[In++]=_r&Mr?Hn:tr,Mr>>=1}for(;In<Rn;)bn[In++]=0;je.putImageData(An,0,Jn*Te)}}else if(Ie.kind===e.ImageKind.RGBA_32BPP){for(Dn=0,Bn=Ze*Te*4,Jn=0;Jn<on;Jn++)Wn.set(zn.subarray(Mn,Mn+Bn)),Mn+=Bn,je.putImageData(An,0,Dn),Dn+=Te;Jn<hn&&(Bn=Ze*sn*4,Wn.set(zn.subarray(Mn,Mn+Bn)),je.putImageData(An,0,Dn))}else if(Ie.kind===e.ImageKind.RGB_24BPP)for(cn=Te,Bn=Ze*cn,Jn=0;Jn<hn;Jn++){for(Jn>=on&&(cn=sn,Bn=Ze*cn),In=0,Dn=Bn;Dn--;)Wn[In++]=zn[Mn++],Wn[In++]=zn[Mn++],Wn[In++]=zn[Mn++],Wn[In++]=255;je.putImageData(An,0,Jn*Te)}else throw new Error(`bad image kind: ${Ie.kind}`)}function rn(je,Ie){if(Ie.bitmap){je.drawImage(Ie.bitmap,0,0);return}const Oe=Ie.height,Ze=Ie.width,sn=Oe%Te,on=(Oe-sn)/Te,hn=sn===0?on:on+1,An=je.createImageData(Ze,Te);let Mn=0;const In=Ie.data,zn=An.data;for(let Wn=0;Wn<hn;Wn++){const Jn=Wn<on?Te:sn;({srcPos:Mn}=(0,Ee.convertBlackAndWhiteToRGBA)({src:In,srcPos:Mn,dest:zn,width:Ze,height:Jn,nonBlackColor:0})),je.putImageData(An,0,Wn*Te)}}function Xe(je,Ie){const Oe=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Ze of Oe)je[Ze]!==void 0&&(Ie[Ze]=je[Ze]);je.setLineDash!==void 0&&(Ie.setLineDash(je.getLineDash()),Ie.lineDashOffset=je.lineDashOffset)}function en(je){if(je.strokeStyle=je.fillStyle="#000000",je.fillRule="nonzero",je.globalAlpha=1,je.lineWidth=1,je.lineCap="butt",je.lineJoin="miter",je.miterLimit=10,je.globalCompositeOperation="source-over",je.font="10px sans-serif",je.setLineDash!==void 0&&(je.setLineDash([]),je.lineDashOffset=0),!e.isNodeJS){const{filter:Ie}=je;Ie!=="none"&&Ie!==""&&(je.filter="none")}}function We(je,Ie,Oe,Ze){const sn=je.length;for(let on=3;on<sn;on+=4){const hn=je[on];if(hn===0)je[on-3]=Ie,je[on-2]=Oe,je[on-1]=Ze;else if(hn<255){const An=255-hn;je[on-3]=je[on-3]*hn+Ie*An>>8,je[on-2]=je[on-2]*hn+Oe*An>>8,je[on-1]=je[on-1]*hn+Ze*An>>8}}}function ze(je,Ie,Oe){const Ze=je.length,sn=1/255;for(let on=3;on<Ze;on+=4){const hn=Oe?Oe[je[on]]:je[on];Ie[on]=Ie[on]*hn*sn|0}}function Qe(je,Ie,Oe){const Ze=je.length;for(let sn=3;sn<Ze;sn+=4){const on=je[sn-3]*77+je[sn-2]*152+je[sn-1]*28;Ie[sn]=Oe?Ie[sn]*Oe[on>>8]>>8:Ie[sn]*on>>16}}function gn(je,Ie,Oe,Ze,sn,on,hn,An,Mn,In,zn){const Wn=!!on,Jn=Wn?on[0]:0,Dn=Wn?on[1]:0,cn=Wn?on[2]:0,Bn=sn==="Luminosity"?Qe:ze,bn=Math.min(Ze,Math.ceil(1048576/Oe));for(let Rn=0;Rn<Ze;Rn+=bn){const On=Math.min(bn,Ze-Rn),Hn=je.getImageData(An-In,Rn+(Mn-zn),Oe,On),tr=Ie.getImageData(An,Rn+Mn,Oe,On);Wn&&We(Hn.data,Jn,Dn,cn),Bn(Hn.data,tr.data,hn),Ie.putImageData(tr,An,Rn+Mn)}}function ke(je,Ie,Oe,Ze){const sn=Ze[0],on=Ze[1],hn=Ze[2]-sn,An=Ze[3]-on;hn===0||An===0||(gn(Ie.context,Oe,hn,An,Ie.subtype,Ie.backdrop,Ie.transferMap,sn,on,Ie.offsetX,Ie.offsetY),je.save(),je.globalAlpha=1,je.globalCompositeOperation="source-over",je.setTransform(1,0,0,1,0,0),je.drawImage(Oe.canvas,0,0),je.restore())}function Ge(je,Ie){const Oe=e.Util.singularValueDecompose2dScale(je);Oe[0]=Math.fround(Oe[0]),Oe[1]=Math.fround(Oe[1]);const Ze=Math.fround((globalThis.devicePixelRatio||1)*_e.PixelsPerInch.PDF_TO_CSS_UNITS);return Ie!==void 0?Ie:Oe[0]<=Ze||Oe[1]<=Ze}const nn=["butt","round","square"],dn=["miter","round","bevel"],wn={},Sn={},Nn=class Nn{constructor(Ie,Oe,Ze,sn,on,{optionalContentConfig:hn,markedContentStack:An=null},Mn,In){er(this,Pn);this.ctx=Ie,this.current=new Ye(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Oe,this.objs=Ze,this.canvasFactory=sn,this.filterFactory=on,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=An||[],this.optionalContentConfig=hn,this.cachedCanvases=new $e(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Mn,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=In,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Ie,Oe=null){return typeof Ie=="string"?Ie.startsWith("g_")?this.commonObjs.get(Ie):this.objs.get(Ie):Oe}beginDrawing({transform:Ie,viewport:Oe,transparency:Ze=!1,background:sn=null}){const on=this.ctx.canvas.width,hn=this.ctx.canvas.height,An=this.ctx.fillStyle;if(this.ctx.fillStyle=sn||"#ffffff",this.ctx.fillRect(0,0,on,hn),this.ctx.fillStyle=An,Ze){const Mn=this.cachedCanvases.getCanvas("transparent",on,hn);this.compositeCtx=this.ctx,this.transparentCanvas=Mn.canvas,this.ctx=Mn.context,this.ctx.save(),this.ctx.transform(...(0,_e.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),en(this.ctx),Ie&&(this.ctx.transform(...Ie),this.outputScaleX=Ie[0],this.outputScaleY=Ie[0]),this.ctx.transform(...Oe.transform),this.viewportScale=Oe.scale,this.baseTransform=(0,_e.getCurrentTransform)(this.ctx)}executeOperatorList(Ie,Oe,Ze,sn){const on=Ie.argsArray,hn=Ie.fnArray;let An=Oe||0;const Mn=on.length;if(Mn===An)return An;const In=Mn-An>Ue&&typeof Ze=="function",zn=In?Date.now()+Me:0;let Wn=0;const Jn=this.commonObjs,Dn=this.objs;let cn;for(;;){if(sn!==void 0&&An===sn.nextBreakPoint)return sn.breakIt(An,Ze),An;if(cn=hn[An],cn!==e.OPS.dependency)this[cn].apply(this,on[An]);else for(const Bn of on[An]){const mn=Bn.startsWith("g_")?Jn:Dn;if(!mn.has(Bn))return mn.get(Bn,Ze),An}if(An++,An===Mn)return An;if(In&&++Wn>Ue){if(Date.now()>zn)return Ze(),An;Wn=0}}}endDrawing(){Vn(this,Pn,bc).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Ie of this._cachedBitmapsMap.values()){for(const Oe of Ie.values())typeof HTMLCanvasElement<"u"&&Oe instanceof HTMLCanvasElement&&(Oe.width=Oe.height=0);Ie.clear()}this._cachedBitmapsMap.clear(),Vn(this,Pn,vc).call(this)}_scaleImage(Ie,Oe){const Ze=Ie.width,sn=Ie.height;let on=Math.max(Math.hypot(Oe[0],Oe[1]),1),hn=Math.max(Math.hypot(Oe[2],Oe[3]),1),An=Ze,Mn=sn,In="prescale1",zn,Wn;for(;on>2&&An>1||hn>2&&Mn>1;){let Jn=An,Dn=Mn;on>2&&An>1&&(Jn=An>=16384?Math.floor(An/2)-1||1:Math.ceil(An/2),on/=An/Jn),hn>2&&Mn>1&&(Dn=Mn>=16384?Math.floor(Mn/2)-1||1:Math.ceil(Mn)/2,hn/=Mn/Dn),zn=this.cachedCanvases.getCanvas(In,Jn,Dn),Wn=zn.context,Wn.clearRect(0,0,Jn,Dn),Wn.drawImage(Ie,0,0,An,Mn,0,0,Jn,Dn),Ie=zn.canvas,An=Jn,Mn=Dn,In=In==="prescale1"?"prescale2":"prescale1"}return{img:Ie,paintWidth:An,paintHeight:Mn}}_createMaskCanvas(Ie){const Oe=this.ctx,{width:Ze,height:sn}=Ie,on=this.current.fillColor,hn=this.current.patternFill,An=(0,_e.getCurrentTransform)(Oe);let Mn,In,zn,Wn;if((Ie.bitmap||Ie.data)&&Ie.count>1){const qn=Ie.bitmap||Ie.data.buffer;In=JSON.stringify(hn?An:[An.slice(0,4),on]),Mn=this._cachedBitmapsMap.get(qn),Mn||(Mn=new Map,this._cachedBitmapsMap.set(qn,Mn));const pr=Mn.get(In);if(pr&&!hn){const fr=Math.round(Math.min(An[0],An[2])+An[4]),Mr=Math.round(Math.min(An[1],An[3])+An[5]);return{canvas:pr,offsetX:fr,offsetY:Mr}}zn=pr}zn||(Wn=this.cachedCanvases.getCanvas("maskCanvas",Ze,sn),rn(Wn.context,Ie));let Jn=e.Util.transform(An,[1/Ze,0,0,-1/sn,0,0]);Jn=e.Util.transform(Jn,[1,0,0,1,0,-sn]);const Dn=e.Util.applyTransform([0,0],Jn),cn=e.Util.applyTransform([Ze,sn],Jn),Bn=e.Util.normalizeRect([Dn[0],Dn[1],cn[0],cn[1]]),mn=Math.round(Bn[2]-Bn[0])||1,bn=Math.round(Bn[3]-Bn[1])||1,Rn=this.cachedCanvases.getCanvas("fillCanvas",mn,bn),On=Rn.context,Hn=Math.min(Dn[0],cn[0]),tr=Math.min(Dn[1],cn[1]);On.translate(-Hn,-tr),On.transform(...Jn),zn||(zn=this._scaleImage(Wn.canvas,(0,_e.getCurrentTransformInverse)(On)),zn=zn.img,Mn&&hn&&Mn.set(In,zn)),On.imageSmoothingEnabled=Ge((0,_e.getCurrentTransform)(On),Ie.interpolate),Ke(On,zn,0,0,zn.width,zn.height,0,0,Ze,sn),On.globalCompositeOperation="source-in";const ir=e.Util.transform((0,_e.getCurrentTransformInverse)(On),[1,0,0,1,-Hn,-tr]);return On.fillStyle=hn?on.getPattern(Oe,this,ir,Se.PathType.FILL):on,On.fillRect(0,0,Ze,sn),Mn&&!hn&&(this.cachedCanvases.delete("fillCanvas"),Mn.set(In,Rn.canvas)),{canvas:Rn.canvas,offsetX:Math.round(Hn),offsetY:Math.round(tr)}}setLineWidth(Ie){Ie!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Ie,this.ctx.lineWidth=Ie}setLineCap(Ie){this.ctx.lineCap=nn[Ie]}setLineJoin(Ie){this.ctx.lineJoin=dn[Ie]}setMiterLimit(Ie){this.ctx.miterLimit=Ie}setDash(Ie,Oe){const Ze=this.ctx;Ze.setLineDash!==void 0&&(Ze.setLineDash(Ie),Ze.lineDashOffset=Oe)}setRenderingIntent(Ie){}setFlatness(Ie){}setGState(Ie){for(const[Oe,Ze]of Ie)switch(Oe){case"LW":this.setLineWidth(Ze);break;case"LC":this.setLineCap(Ze);break;case"LJ":this.setLineJoin(Ze);break;case"ML":this.setMiterLimit(Ze);break;case"D":this.setDash(Ze[0],Ze[1]);break;case"RI":this.setRenderingIntent(Ze);break;case"FL":this.setFlatness(Ze);break;case"Font":this.setFont(Ze[0],Ze[1]);break;case"CA":this.current.strokeAlpha=Ze;break;case"ca":this.current.fillAlpha=Ze,this.ctx.globalAlpha=Ze;break;case"BM":this.ctx.globalCompositeOperation=Ze;break;case"SMask":this.current.activeSMask=Ze?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Ze);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Ie=this.inSMaskMode;this.current.activeSMask&&!Ie?this.beginSMaskMode():!this.current.activeSMask&&Ie&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Ie=this.ctx.canvas.width,Oe=this.ctx.canvas.height,Ze="smaskGroupAt"+this.groupLevel,sn=this.cachedCanvases.getCanvas(Ze,Ie,Oe);this.suspendedCtx=this.ctx,this.ctx=sn.context;const on=this.ctx;on.setTransform(...(0,_e.getCurrentTransform)(this.suspendedCtx)),Xe(this.suspendedCtx,on),Ve(on,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Xe(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Ie){if(!this.current.activeSMask)return;Ie?(Ie[0]=Math.floor(Ie[0]),Ie[1]=Math.floor(Ie[1]),Ie[2]=Math.ceil(Ie[2]),Ie[3]=Math.ceil(Ie[3])):Ie=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Oe=this.current.activeSMask,Ze=this.suspendedCtx;ke(Ze,Oe,this.ctx,Ie),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Xe(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Ie=this.current;this.stateStack.push(Ie),this.current=Ie.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Xe(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Ie,Oe,Ze,sn,on,hn){this.ctx.transform(Ie,Oe,Ze,sn,on,hn),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Ie,Oe,Ze){const sn=this.ctx,on=this.current;let hn=on.x,An=on.y,Mn,In;const zn=(0,_e.getCurrentTransform)(sn),Wn=zn[0]===0&&zn[3]===0||zn[1]===0&&zn[2]===0,Jn=Wn?Ze.slice(0):null;for(let Dn=0,cn=0,Bn=Ie.length;Dn<Bn;Dn++)switch(Ie[Dn]|0){case e.OPS.rectangle:hn=Oe[cn++],An=Oe[cn++];const mn=Oe[cn++],bn=Oe[cn++],Rn=hn+mn,On=An+bn;sn.moveTo(hn,An),mn===0||bn===0?sn.lineTo(Rn,On):(sn.lineTo(Rn,An),sn.lineTo(Rn,On),sn.lineTo(hn,On)),Wn||on.updateRectMinMax(zn,[hn,An,Rn,On]),sn.closePath();break;case e.OPS.moveTo:hn=Oe[cn++],An=Oe[cn++],sn.moveTo(hn,An),Wn||on.updatePathMinMax(zn,hn,An);break;case e.OPS.lineTo:hn=Oe[cn++],An=Oe[cn++],sn.lineTo(hn,An),Wn||on.updatePathMinMax(zn,hn,An);break;case e.OPS.curveTo:Mn=hn,In=An,hn=Oe[cn+4],An=Oe[cn+5],sn.bezierCurveTo(Oe[cn],Oe[cn+1],Oe[cn+2],Oe[cn+3],hn,An),on.updateCurvePathMinMax(zn,Mn,In,Oe[cn],Oe[cn+1],Oe[cn+2],Oe[cn+3],hn,An,Jn),cn+=6;break;case e.OPS.curveTo2:Mn=hn,In=An,sn.bezierCurveTo(hn,An,Oe[cn],Oe[cn+1],Oe[cn+2],Oe[cn+3]),on.updateCurvePathMinMax(zn,Mn,In,hn,An,Oe[cn],Oe[cn+1],Oe[cn+2],Oe[cn+3],Jn),hn=Oe[cn+2],An=Oe[cn+3],cn+=4;break;case e.OPS.curveTo3:Mn=hn,In=An,hn=Oe[cn+2],An=Oe[cn+3],sn.bezierCurveTo(Oe[cn],Oe[cn+1],hn,An,hn,An),on.updateCurvePathMinMax(zn,Mn,In,Oe[cn],Oe[cn+1],hn,An,hn,An,Jn),cn+=4;break;case e.OPS.closePath:sn.closePath();break}Wn&&on.updateScalingPathMinMax(zn,Jn),on.setCurrentPoint(hn,An)}closePath(){this.ctx.closePath()}stroke(Ie=!0){const Oe=this.ctx,Ze=this.current.strokeColor;Oe.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Ze=="object"&&(Ze!=null&&Ze.getPattern)?(Oe.save(),Oe.strokeStyle=Ze.getPattern(Oe,this,(0,_e.getCurrentTransformInverse)(Oe),Se.PathType.STROKE),this.rescaleAndStroke(!1),Oe.restore()):this.rescaleAndStroke(!0)),Ie&&this.consumePath(this.current.getClippedPathBoundingBox()),Oe.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Ie=!0){const Oe=this.ctx,Ze=this.current.fillColor,sn=this.current.patternFill;let on=!1;sn&&(Oe.save(),Oe.fillStyle=Ze.getPattern(Oe,this,(0,_e.getCurrentTransformInverse)(Oe),Se.PathType.FILL),on=!0);const hn=this.current.getClippedPathBoundingBox();this.contentVisible&&hn!==null&&(this.pendingEOFill?(Oe.fill("evenodd"),this.pendingEOFill=!1):Oe.fill()),on&&Oe.restore(),Ie&&this.consumePath(hn)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=wn}eoClip(){this.pendingClip=Sn}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Ie=this.pendingTextPaths,Oe=this.ctx;if(Ie===void 0){Oe.beginPath();return}Oe.save(),Oe.beginPath();for(const Ze of Ie)Oe.setTransform(...Ze.transform),Oe.translate(Ze.x,Ze.y),Ze.addToPath(Oe,Ze.fontSize);Oe.restore(),Oe.clip(),Oe.beginPath(),delete this.pendingTextPaths}setCharSpacing(Ie){this.current.charSpacing=Ie}setWordSpacing(Ie){this.current.wordSpacing=Ie}setHScale(Ie){this.current.textHScale=Ie/100}setLeading(Ie){this.current.leading=-Ie}setFont(Ie,Oe){var zn;const Ze=this.commonObjs.get(Ie),sn=this.current;if(!Ze)throw new Error(`Can't find font for ${Ie}`);if(sn.fontMatrix=Ze.fontMatrix||e.FONT_IDENTITY_MATRIX,(sn.fontMatrix[0]===0||sn.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+Ie),Oe<0?(Oe=-Oe,sn.fontDirection=-1):sn.fontDirection=1,this.current.font=Ze,this.current.fontSize=Oe,Ze.isType3Font)return;const on=Ze.loadedName||"sans-serif",hn=((zn=Ze.systemFontInfo)==null?void 0:zn.css)||`"${on}", ${Ze.fallbackName}`;let An="normal";Ze.black?An="900":Ze.bold&&(An="bold");const Mn=Ze.italic?"italic":"normal";let In=Oe;Oe<Re?In=Re:Oe>Ce&&(In=Ce),this.current.fontSizeScale=Oe/In,this.ctx.font=`${Mn} ${An} ${In}px ${hn}`}setTextRenderingMode(Ie){this.current.textRenderingMode=Ie}setTextRise(Ie){this.current.textRise=Ie}moveText(Ie,Oe){this.current.x=this.current.lineX+=Ie,this.current.y=this.current.lineY+=Oe}setLeadingMoveText(Ie,Oe){this.setLeading(-Oe),this.moveText(Ie,Oe)}setTextMatrix(Ie,Oe,Ze,sn,on,hn){this.current.textMatrix=[Ie,Oe,Ze,sn,on,hn],this.current.textMatrixScale=Math.hypot(Ie,Oe),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Ie,Oe,Ze,sn){const on=this.ctx,hn=this.current,An=hn.font,Mn=hn.textRenderingMode,In=hn.fontSize/hn.fontSizeScale,zn=Mn&e.TextRenderingMode.FILL_STROKE_MASK,Wn=!!(Mn&e.TextRenderingMode.ADD_TO_PATH_FLAG),Jn=hn.patternFill&&!An.missingFile;let Dn;(An.disableFontFace||Wn||Jn)&&(Dn=An.getPathGenerator(this.commonObjs,Ie)),An.disableFontFace||Jn?(on.save(),on.translate(Oe,Ze),on.beginPath(),Dn(on,In),sn&&on.setTransform(...sn),(zn===e.TextRenderingMode.FILL||zn===e.TextRenderingMode.FILL_STROKE)&&on.fill(),(zn===e.TextRenderingMode.STROKE||zn===e.TextRenderingMode.FILL_STROKE)&&on.stroke(),on.restore()):((zn===e.TextRenderingMode.FILL||zn===e.TextRenderingMode.FILL_STROKE)&&on.fillText(Ie,Oe,Ze),(zn===e.TextRenderingMode.STROKE||zn===e.TextRenderingMode.FILL_STROKE)&&on.strokeText(Ie,Oe,Ze)),Wn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,_e.getCurrentTransform)(on),x:Oe,y:Ze,fontSize:In,addToPath:Dn})}get isFontSubpixelAAEnabled(){const{context:Ie}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Ie.scale(1.5,1),Ie.fillText("I",0,10);const Oe=Ie.getImageData(0,0,10,10).data;let Ze=!1;for(let sn=3;sn<Oe.length;sn+=4)if(Oe[sn]>0&&Oe[sn]<255){Ze=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",Ze)}showText(Ie){const Oe=this.current,Ze=Oe.font;if(Ze.isType3Font)return this.showType3Text(Ie);const sn=Oe.fontSize;if(sn===0)return;const on=this.ctx,hn=Oe.fontSizeScale,An=Oe.charSpacing,Mn=Oe.wordSpacing,In=Oe.fontDirection,zn=Oe.textHScale*In,Wn=Ie.length,Jn=Ze.vertical,Dn=Jn?1:-1,cn=Ze.defaultVMetrics,Bn=sn*Oe.fontMatrix[0],mn=Oe.textRenderingMode===e.TextRenderingMode.FILL&&!Ze.disableFontFace&&!Oe.patternFill;on.save(),on.transform(...Oe.textMatrix),on.translate(Oe.x,Oe.y+Oe.textRise),In>0?on.scale(zn,-1):on.scale(zn,1);let bn;if(Oe.patternFill){on.save();const ir=Oe.fillColor.getPattern(on,this,(0,_e.getCurrentTransformInverse)(on),Se.PathType.FILL);bn=(0,_e.getCurrentTransform)(on),on.restore(),on.fillStyle=ir}let Rn=Oe.lineWidth;const On=Oe.textMatrixScale;if(On===0||Rn===0){const ir=Oe.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(ir===e.TextRenderingMode.STROKE||ir===e.TextRenderingMode.FILL_STROKE)&&(Rn=this.getSinglePixelWidth())}else Rn/=On;if(hn!==1&&(on.scale(hn,hn),Rn/=hn),on.lineWidth=Rn,Ze.isInvalidPDFjsFont){const ir=[];let qn=0;for(const pr of Ie)ir.push(pr.unicode),qn+=pr.width;on.fillText(ir.join(""),0,0),Oe.x+=qn*Bn*zn,on.restore(),this.compose();return}let Hn=0,tr;for(tr=0;tr<Wn;++tr){const ir=Ie[tr];if(typeof ir=="number"){Hn+=Dn*ir*sn/1e3;continue}let qn=!1;const pr=(ir.isSpace?Mn:0)+An,fr=ir.fontChar,Mr=ir.accent;let _r,Ir,hr=ir.width;if(Jn){const jr=ir.vmetric||cn,Vr=-(ir.vmetric?jr[1]:hr*.5)*Bn,or=jr[2]*Bn;hr=jr?-jr[0]:hr,_r=Vr/hn,Ir=(Hn+or)/hn}else _r=Hn/hn,Ir=0;if(Ze.remeasure&&hr>0){const jr=on.measureText(fr).width*1e3/sn*hn;if(hr<jr&&this.isFontSubpixelAAEnabled){const Vr=hr/jr;qn=!0,on.save(),on.scale(Vr,1),_r/=Vr}else hr!==jr&&(_r+=(hr-jr)/2e3*sn/hn)}if(this.contentVisible&&(ir.isInFont||Ze.missingFile)){if(mn&&!Mr)on.fillText(fr,_r,Ir);else if(this.paintChar(fr,_r,Ir,bn),Mr){const jr=_r+sn*Mr.offset.x/hn,Vr=Ir-sn*Mr.offset.y/hn;this.paintChar(Mr.fontChar,jr,Vr,bn)}}const Rr=Jn?hr*Bn-pr*In:hr*Bn+pr*In;Hn+=Rr,qn&&on.restore()}Jn?Oe.y-=Hn:Oe.x+=Hn*zn,on.restore(),this.compose()}showType3Text(Ie){const Oe=this.ctx,Ze=this.current,sn=Ze.font,on=Ze.fontSize,hn=Ze.fontDirection,An=sn.vertical?1:-1,Mn=Ze.charSpacing,In=Ze.wordSpacing,zn=Ze.textHScale*hn,Wn=Ze.fontMatrix||e.FONT_IDENTITY_MATRIX,Jn=Ie.length,Dn=Ze.textRenderingMode===e.TextRenderingMode.INVISIBLE;let cn,Bn,mn,bn;if(!(Dn||on===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Oe.save(),Oe.transform(...Ze.textMatrix),Oe.translate(Ze.x,Ze.y),Oe.scale(zn,hn),cn=0;cn<Jn;++cn){if(Bn=Ie[cn],typeof Bn=="number"){bn=An*Bn*on/1e3,this.ctx.translate(bn,0),Ze.x+=bn*zn;continue}const Rn=(Bn.isSpace?In:0)+Mn,On=sn.charProcOperatorList[Bn.operatorListId];if(!On){(0,e.warn)(`Type3 character "${Bn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Bn,this.save(),Oe.scale(on,on),Oe.transform(...Wn),this.executeOperatorList(On),this.restore()),mn=e.Util.applyTransform([Bn.width,0],Wn)[0]*on+Rn,Oe.translate(mn,0),Ze.x+=mn*zn}Oe.restore(),this.processingType3=null}}setCharWidth(Ie,Oe){}setCharWidthAndBounds(Ie,Oe,Ze,sn,on,hn){this.ctx.rect(Ze,sn,on-Ze,hn-sn),this.ctx.clip(),this.endPath()}getColorN_Pattern(Ie){let Oe;if(Ie[0]==="TilingPattern"){const Ze=Ie[1],sn=this.baseTransform||(0,_e.getCurrentTransform)(this.ctx),on={createCanvasGraphics:hn=>new Nn(hn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Oe=new Se.TilingPattern(Ie,Ze,this.ctx,on,sn)}else Oe=this._getPattern(Ie[1],Ie[2]);return Oe}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Ie,Oe,Ze){const sn=e.Util.makeHexColor(Ie,Oe,Ze);this.ctx.strokeStyle=sn,this.current.strokeColor=sn}setFillRGBColor(Ie,Oe,Ze){const sn=e.Util.makeHexColor(Ie,Oe,Ze);this.ctx.fillStyle=sn,this.current.fillColor=sn,this.current.patternFill=!1}_getPattern(Ie,Oe=null){let Ze;return this.cachedPatterns.has(Ie)?Ze=this.cachedPatterns.get(Ie):(Ze=(0,Se.getShadingPattern)(this.getObject(Ie)),this.cachedPatterns.set(Ie,Ze)),Oe&&(Ze.matrix=Oe),Ze}shadingFill(Ie){if(!this.contentVisible)return;const Oe=this.ctx;this.save();const Ze=this._getPattern(Ie);Oe.fillStyle=Ze.getPattern(Oe,this,(0,_e.getCurrentTransformInverse)(Oe),Se.PathType.SHADING);const sn=(0,_e.getCurrentTransformInverse)(Oe);if(sn){const{width:on,height:hn}=Oe.canvas,[An,Mn,In,zn]=e.Util.getAxialAlignedBoundingBox([0,0,on,hn],sn);this.ctx.fillRect(An,Mn,In-An,zn-Mn)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Ie,Oe){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Ie)&&Ie.length===6&&this.transform(...Ie),this.baseTransform=(0,_e.getCurrentTransform)(this.ctx),Oe)){const Ze=Oe[2]-Oe[0],sn=Oe[3]-Oe[1];this.ctx.rect(Oe[0],Oe[1],Ze,sn),this.current.updateRectMinMax((0,_e.getCurrentTransform)(this.ctx),Oe),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Ie){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Oe=this.ctx;Ie.isolated||(0,e.info)("TODO: Support non-isolated groups."),Ie.knockout&&(0,e.warn)("Knockout groups not supported.");const Ze=(0,_e.getCurrentTransform)(Oe);if(Ie.matrix&&Oe.transform(...Ie.matrix),!Ie.bbox)throw new Error("Bounding box is required.");let sn=e.Util.getAxialAlignedBoundingBox(Ie.bbox,(0,_e.getCurrentTransform)(Oe));const on=[0,0,Oe.canvas.width,Oe.canvas.height];sn=e.Util.intersect(sn,on)||[0,0,0,0];const hn=Math.floor(sn[0]),An=Math.floor(sn[1]);let Mn=Math.max(Math.ceil(sn[2])-hn,1),In=Math.max(Math.ceil(sn[3])-An,1),zn=1,Wn=1;Mn>De&&(zn=Mn/De,Mn=De),In>De&&(Wn=In/De,In=De),this.current.startNewPathAndClipBox([0,0,Mn,In]);let Jn="groupAt"+this.groupLevel;Ie.smask&&(Jn+="_smask_"+this.smaskCounter++%2);const Dn=this.cachedCanvases.getCanvas(Jn,Mn,In),cn=Dn.context;cn.scale(1/zn,1/Wn),cn.translate(-hn,-An),cn.transform(...Ze),Ie.smask?this.smaskStack.push({canvas:Dn.canvas,context:cn,offsetX:hn,offsetY:An,scaleX:zn,scaleY:Wn,subtype:Ie.smask.subtype,backdrop:Ie.smask.backdrop,transferMap:Ie.smask.transferMap||null,startTransformInverse:null}):(Oe.setTransform(1,0,0,1,0,0),Oe.translate(hn,An),Oe.scale(zn,Wn),Oe.save()),Xe(Oe,cn),this.ctx=cn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Oe),this.groupLevel++}endGroup(Ie){if(!this.contentVisible)return;this.groupLevel--;const Oe=this.ctx,Ze=this.groupStack.pop();if(this.ctx=Ze,this.ctx.imageSmoothingEnabled=!1,Ie.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const sn=(0,_e.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...sn);const on=e.Util.getAxialAlignedBoundingBox([0,0,Oe.canvas.width,Oe.canvas.height],sn);this.ctx.drawImage(Oe.canvas,0,0),this.ctx.restore(),this.compose(on)}}beginAnnotation(Ie,Oe,Ze,sn,on){if(Vn(this,Pn,bc).call(this),en(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Oe)&&Oe.length===4){const hn=Oe[2]-Oe[0],An=Oe[3]-Oe[1];if(on&&this.annotationCanvasMap){Ze=Ze.slice(),Ze[4]-=Oe[0],Ze[5]-=Oe[1],Oe=Oe.slice(),Oe[0]=Oe[1]=0,Oe[2]=hn,Oe[3]=An;const[Mn,In]=e.Util.singularValueDecompose2dScale((0,_e.getCurrentTransform)(this.ctx)),{viewportScale:zn}=this,Wn=Math.ceil(hn*this.outputScaleX*zn),Jn=Math.ceil(An*this.outputScaleY*zn);this.annotationCanvas=this.canvasFactory.create(Wn,Jn);const{canvas:Dn,context:cn}=this.annotationCanvas;this.annotationCanvasMap.set(Ie,Dn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=cn,this.ctx.save(),this.ctx.setTransform(Mn,0,0,-In,0,An*In),en(this.ctx)}else en(this.ctx),this.ctx.rect(Oe[0],Oe[1],hn,An),this.ctx.clip(),this.endPath()}this.current=new Ye(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Ze),this.transform(...sn)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Vn(this,Pn,vc).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Ie){if(!this.contentVisible)return;const Oe=Ie.count;Ie=this.getObject(Ie.data,Ie),Ie.count=Oe;const Ze=this.ctx,sn=this.processingType3;if(sn&&(sn.compiled===void 0&&(sn.compiled=Be(Ie)),sn.compiled)){sn.compiled(Ze);return}const on=this._createMaskCanvas(Ie),hn=on.canvas;Ze.save(),Ze.setTransform(1,0,0,1,0,0),Ze.drawImage(hn,on.offsetX,on.offsetY),Ze.restore(),this.compose()}paintImageMaskXObjectRepeat(Ie,Oe,Ze=0,sn=0,on,hn){if(!this.contentVisible)return;Ie=this.getObject(Ie.data,Ie);const An=this.ctx;An.save();const Mn=(0,_e.getCurrentTransform)(An);An.transform(Oe,Ze,sn,on,0,0);const In=this._createMaskCanvas(Ie);An.setTransform(1,0,0,1,In.offsetX-Mn[4],In.offsetY-Mn[5]);for(let zn=0,Wn=hn.length;zn<Wn;zn+=2){const Jn=e.Util.transform(Mn,[Oe,Ze,sn,on,hn[zn],hn[zn+1]]),[Dn,cn]=e.Util.applyTransform([0,0],Jn);An.drawImage(In.canvas,Dn,cn)}An.restore(),this.compose()}paintImageMaskXObjectGroup(Ie){if(!this.contentVisible)return;const Oe=this.ctx,Ze=this.current.fillColor,sn=this.current.patternFill;for(const on of Ie){const{data:hn,width:An,height:Mn,transform:In}=on,zn=this.cachedCanvases.getCanvas("maskCanvas",An,Mn),Wn=zn.context;Wn.save();const Jn=this.getObject(hn,on);rn(Wn,Jn),Wn.globalCompositeOperation="source-in",Wn.fillStyle=sn?Ze.getPattern(Wn,this,(0,_e.getCurrentTransformInverse)(Oe),Se.PathType.FILL):Ze,Wn.fillRect(0,0,An,Mn),Wn.restore(),Oe.save(),Oe.transform(...In),Oe.scale(1,-1),Ke(Oe,zn.canvas,0,0,An,Mn,0,-1,1,1),Oe.restore()}this.compose()}paintImageXObject(Ie){if(!this.contentVisible)return;const Oe=this.getObject(Ie);if(!Oe){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Oe)}paintImageXObjectRepeat(Ie,Oe,Ze,sn){if(!this.contentVisible)return;const on=this.getObject(Ie);if(!on){(0,e.warn)("Dependent image isn't ready yet");return}const hn=on.width,An=on.height,Mn=[];for(let In=0,zn=sn.length;In<zn;In+=2)Mn.push({transform:[Oe,0,0,Ze,sn[In],sn[In+1]],x:0,y:0,w:hn,h:An});this.paintInlineImageXObjectGroup(on,Mn)}applyTransferMapsToCanvas(Ie){return this.current.transferMaps!=="none"&&(Ie.filter=this.current.transferMaps,Ie.drawImage(Ie.canvas,0,0),Ie.filter="none"),Ie.canvas}applyTransferMapsToBitmap(Ie){if(this.current.transferMaps==="none")return Ie.bitmap;const{bitmap:Oe,width:Ze,height:sn}=Ie,on=this.cachedCanvases.getCanvas("inlineImage",Ze,sn),hn=on.context;return hn.filter=this.current.transferMaps,hn.drawImage(Oe,0,0),hn.filter="none",on.canvas}paintInlineImageXObject(Ie){if(!this.contentVisible)return;const Oe=Ie.width,Ze=Ie.height,sn=this.ctx;if(this.save(),!e.isNodeJS){const{filter:An}=sn;An!=="none"&&An!==""&&(sn.filter="none")}sn.scale(1/Oe,-1/Ze);let on;if(Ie.bitmap)on=this.applyTransferMapsToBitmap(Ie);else if(typeof HTMLElement=="function"&&Ie instanceof HTMLElement||!Ie.data)on=Ie;else{const Mn=this.cachedCanvases.getCanvas("inlineImage",Oe,Ze).context;an(Mn,Ie),on=this.applyTransferMapsToCanvas(Mn)}const hn=this._scaleImage(on,(0,_e.getCurrentTransformInverse)(sn));sn.imageSmoothingEnabled=Ge((0,_e.getCurrentTransform)(sn),Ie.interpolate),Ke(sn,hn.img,0,0,hn.paintWidth,hn.paintHeight,0,-Ze,Oe,Ze),this.compose(),this.restore()}paintInlineImageXObjectGroup(Ie,Oe){if(!this.contentVisible)return;const Ze=this.ctx;let sn;if(Ie.bitmap)sn=Ie.bitmap;else{const on=Ie.width,hn=Ie.height,Mn=this.cachedCanvases.getCanvas("inlineImage",on,hn).context;an(Mn,Ie),sn=this.applyTransferMapsToCanvas(Mn)}for(const on of Oe)Ze.save(),Ze.transform(...on.transform),Ze.scale(1,-1),Ke(Ze,sn,on.x,on.y,on.w,on.h,0,-1,1,1),Ze.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Ie){}markPointProps(Ie,Oe){}beginMarkedContent(Ie){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Ie,Oe){Ie==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Oe)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Ie){const Oe=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Ie);const Ze=this.ctx;this.pendingClip&&(Oe||(this.pendingClip===Sn?Ze.clip("evenodd"):Ze.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Ze.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Ie=(0,_e.getCurrentTransform)(this.ctx);if(Ie[1]===0&&Ie[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Ie[0]),Math.abs(Ie[3]));else{const Oe=Math.abs(Ie[0]*Ie[3]-Ie[2]*Ie[1]),Ze=Math.hypot(Ie[0],Ie[2]),sn=Math.hypot(Ie[1],Ie[3]);this._cachedGetSinglePixelWidth=Math.max(Ze,sn)/Oe}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Ie}=this.current,{a:Oe,b:Ze,c:sn,d:on}=this.ctx.getTransform();let hn,An;if(Ze===0&&sn===0){const Mn=Math.abs(Oe),In=Math.abs(on);if(Mn===In)if(Ie===0)hn=An=1/Mn;else{const zn=Mn*Ie;hn=An=zn<1?1/zn:1}else if(Ie===0)hn=1/Mn,An=1/In;else{const zn=Mn*Ie,Wn=In*Ie;hn=zn<1?1/zn:1,An=Wn<1?1/Wn:1}}else{const Mn=Math.abs(Oe*on-Ze*sn),In=Math.hypot(Oe,Ze),zn=Math.hypot(sn,on);if(Ie===0)hn=zn/Mn,An=In/Mn;else{const Wn=Ie*Mn;hn=zn>Wn?zn/Wn:1,An=In>Wn?In/Wn:1}}this._cachedScaleForStroking[0]=hn,this._cachedScaleForStroking[1]=An}return this._cachedScaleForStroking}rescaleAndStroke(Ie){const{ctx:Oe}=this,{lineWidth:Ze}=this.current,[sn,on]=this.getScaleForStroking();if(Oe.lineWidth=Ze||1,sn===1&&on===1){Oe.stroke();return}const hn=Oe.getLineDash();if(Ie&&Oe.save(),Oe.scale(sn,on),hn.length>0){const An=Math.max(sn,on);Oe.setLineDash(hn.map(Mn=>Mn/An)),Oe.lineDashOffset/=An}Oe.stroke(),Ie&&Oe.restore()}isContentVisible(){for(let Ie=this.markedContentStack.length-1;Ie>=0;Ie--)if(!this.markedContentStack[Ie].visible)return!1;return!0}};Pn=new WeakSet,bc=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},vc=function(){if(this.pageColors){const Ie=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Ie!=="none"){const Oe=this.ctx.filter;this.ctx.filter=Ie,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Oe}}};let yn=Nn;t.CanvasGraphics=yn;for(const je in e.OPS)yn.prototype[je]!==void 0&&(yn.prototype[e.OPS[je]]=yn.prototype[je])},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=Te;var e=xe(1),_e=xe(6);const Se={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=Se;function Ee(Be,Ye){if(!Ye)return;const an=Ye[2]-Ye[0],rn=Ye[3]-Ye[1],Xe=new Path2D;Xe.rect(Ye[0],Ye[1],an,rn),Be.clip(Xe)}class Re{constructor(){this.constructor===Re&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class Ce extends Re{constructor(Ye){super(),this._type=Ye[1],this._bbox=Ye[2],this._colorStops=Ye[3],this._p0=Ye[4],this._p1=Ye[5],this._r0=Ye[6],this._r1=Ye[7],this.matrix=null}_createGradient(Ye){let an;this._type==="axial"?an=Ye.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(an=Ye.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const rn of this._colorStops)an.addColorStop(rn[0],rn[1]);return an}getPattern(Ye,an,rn,Xe){let en;if(Xe===Se.STROKE||Xe===Se.FILL){const We=an.current.getClippedPathBoundingBox(Xe,(0,_e.getCurrentTransform)(Ye))||[0,0,0,0],ze=Math.ceil(We[2]-We[0])||1,Qe=Math.ceil(We[3]-We[1])||1,gn=an.cachedCanvases.getCanvas("pattern",ze,Qe,!0),ke=gn.context;ke.clearRect(0,0,ke.canvas.width,ke.canvas.height),ke.beginPath(),ke.rect(0,0,ke.canvas.width,ke.canvas.height),ke.translate(-We[0],-We[1]),rn=e.Util.transform(rn,[1,0,0,1,We[0],We[1]]),ke.transform(...an.baseTransform),this.matrix&&ke.transform(...this.matrix),Ee(ke,this._bbox),ke.fillStyle=this._createGradient(ke),ke.fill(),en=Ye.createPattern(gn.canvas,"no-repeat");const Ge=new DOMMatrix(rn);en.setTransform(Ge)}else Ee(Ye,this._bbox),en=this._createGradient(Ye);return en}}function De(Be,Ye,an,rn,Xe,en,We,ze){const Qe=Ye.coords,gn=Ye.colors,ke=Be.data,Ge=Be.width*4;let nn;Qe[an+1]>Qe[rn+1]&&(nn=an,an=rn,rn=nn,nn=en,en=We,We=nn),Qe[rn+1]>Qe[Xe+1]&&(nn=rn,rn=Xe,Xe=nn,nn=We,We=ze,ze=nn),Qe[an+1]>Qe[rn+1]&&(nn=an,an=rn,rn=nn,nn=en,en=We,We=nn);const dn=(Qe[an]+Ye.offsetX)*Ye.scaleX,wn=(Qe[an+1]+Ye.offsetY)*Ye.scaleY,Sn=(Qe[rn]+Ye.offsetX)*Ye.scaleX,yn=(Qe[rn+1]+Ye.offsetY)*Ye.scaleY,Pn=(Qe[Xe]+Ye.offsetX)*Ye.scaleX,un=(Qe[Xe+1]+Ye.offsetY)*Ye.scaleY;if(wn>=un)return;const _n=gn[en],Nn=gn[en+1],je=gn[en+2],Ie=gn[We],Oe=gn[We+1],Ze=gn[We+2],sn=gn[ze],on=gn[ze+1],hn=gn[ze+2],An=Math.round(wn),Mn=Math.round(un);let In,zn,Wn,Jn,Dn,cn,Bn,mn;for(let bn=An;bn<=Mn;bn++){if(bn<yn){const ir=bn<wn?0:(wn-bn)/(wn-yn);In=dn-(dn-Sn)*ir,zn=_n-(_n-Ie)*ir,Wn=Nn-(Nn-Oe)*ir,Jn=je-(je-Ze)*ir}else{let ir;bn>un?ir=1:yn===un?ir=0:ir=(yn-bn)/(yn-un),In=Sn-(Sn-Pn)*ir,zn=Ie-(Ie-sn)*ir,Wn=Oe-(Oe-on)*ir,Jn=Ze-(Ze-hn)*ir}let Rn;bn<wn?Rn=0:bn>un?Rn=1:Rn=(wn-bn)/(wn-un),Dn=dn-(dn-Pn)*Rn,cn=_n-(_n-sn)*Rn,Bn=Nn-(Nn-on)*Rn,mn=je-(je-hn)*Rn;const On=Math.round(Math.min(In,Dn)),Hn=Math.round(Math.max(In,Dn));let tr=Ge*bn+On*4;for(let ir=On;ir<=Hn;ir++)Rn=(In-ir)/(In-Dn),Rn<0?Rn=0:Rn>1&&(Rn=1),ke[tr++]=zn-(zn-cn)*Rn|0,ke[tr++]=Wn-(Wn-Bn)*Rn|0,ke[tr++]=Jn-(Jn-mn)*Rn|0,ke[tr++]=255}}function Me(Be,Ye,an){const rn=Ye.coords,Xe=Ye.colors;let en,We;switch(Ye.type){case"lattice":const ze=Ye.verticesPerRow,Qe=Math.floor(rn.length/ze)-1,gn=ze-1;for(en=0;en<Qe;en++){let ke=en*ze;for(let Ge=0;Ge<gn;Ge++,ke++)De(Be,an,rn[ke],rn[ke+1],rn[ke+ze],Xe[ke],Xe[ke+1],Xe[ke+ze]),De(Be,an,rn[ke+ze+1],rn[ke+1],rn[ke+ze],Xe[ke+ze+1],Xe[ke+1],Xe[ke+ze])}break;case"triangles":for(en=0,We=rn.length;en<We;en+=3)De(Be,an,rn[en],rn[en+1],rn[en+2],Xe[en],Xe[en+1],Xe[en+2]);break;default:throw new Error("illegal figure")}}class Ue extends Re{constructor(Ye){super(),this._coords=Ye[2],this._colors=Ye[3],this._figures=Ye[4],this._bounds=Ye[5],this._bbox=Ye[7],this._background=Ye[8],this.matrix=null}_createMeshCanvas(Ye,an,rn){const ze=Math.floor(this._bounds[0]),Qe=Math.floor(this._bounds[1]),gn=Math.ceil(this._bounds[2])-ze,ke=Math.ceil(this._bounds[3])-Qe,Ge=Math.min(Math.ceil(Math.abs(gn*Ye[0]*1.1)),3e3),nn=Math.min(Math.ceil(Math.abs(ke*Ye[1]*1.1)),3e3),dn=gn/Ge,wn=ke/nn,Sn={coords:this._coords,colors:this._colors,offsetX:-ze,offsetY:-Qe,scaleX:1/dn,scaleY:1/wn},yn=Ge+2*2,Pn=nn+2*2,un=rn.getCanvas("mesh",yn,Pn,!1),_n=un.context,Nn=_n.createImageData(Ge,nn);if(an){const Ie=Nn.data;for(let Oe=0,Ze=Ie.length;Oe<Ze;Oe+=4)Ie[Oe]=an[0],Ie[Oe+1]=an[1],Ie[Oe+2]=an[2],Ie[Oe+3]=255}for(const Ie of this._figures)Me(Nn,Ie,Sn);return _n.putImageData(Nn,2,2),{canvas:un.canvas,offsetX:ze-2*dn,offsetY:Qe-2*wn,scaleX:dn,scaleY:wn}}getPattern(Ye,an,rn,Xe){Ee(Ye,this._bbox);let en;if(Xe===Se.SHADING)en=e.Util.singularValueDecompose2dScale((0,_e.getCurrentTransform)(Ye));else if(en=e.Util.singularValueDecompose2dScale(an.baseTransform),this.matrix){const ze=e.Util.singularValueDecompose2dScale(this.matrix);en=[en[0]*ze[0],en[1]*ze[1]]}const We=this._createMeshCanvas(en,Xe===Se.SHADING?null:this._background,an.cachedCanvases);return Xe!==Se.SHADING&&(Ye.setTransform(...an.baseTransform),this.matrix&&Ye.transform(...this.matrix)),Ye.translate(We.offsetX,We.offsetY),Ye.scale(We.scaleX,We.scaleY),Ye.createPattern(We.canvas,"no-repeat")}}class He extends Re{getPattern(){return"hotpink"}}function Te(Be){switch(Be[0]){case"RadialAxial":return new Ce(Be);case"Mesh":return new Ue(Be);case"Dummy":return new He}throw new Error(`Unknown IR type: ${Be[0]}`)}const Ve={COLORED:1,UNCOLORED:2},Ke=class Ke{constructor(Ye,an,rn,Xe,en){this.operatorList=Ye[2],this.matrix=Ye[3]||[1,0,0,1,0,0],this.bbox=Ye[4],this.xstep=Ye[5],this.ystep=Ye[6],this.paintType=Ye[7],this.tilingType=Ye[8],this.color=an,this.ctx=rn,this.canvasGraphicsFactory=Xe,this.baseTransform=en}createPatternCanvas(Ye){const an=this.operatorList,rn=this.bbox,Xe=this.xstep,en=this.ystep,We=this.paintType,ze=this.tilingType,Qe=this.color,gn=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+ze);const ke=rn[0],Ge=rn[1],nn=rn[2],dn=rn[3],wn=e.Util.singularValueDecompose2dScale(this.matrix),Sn=e.Util.singularValueDecompose2dScale(this.baseTransform),yn=[wn[0]*Sn[0],wn[1]*Sn[1]],Pn=this.getSizeAndScale(Xe,this.ctx.canvas.width,yn[0]),un=this.getSizeAndScale(en,this.ctx.canvas.height,yn[1]),_n=Ye.cachedCanvases.getCanvas("pattern",Pn.size,un.size,!0),Nn=_n.context,je=gn.createCanvasGraphics(Nn);je.groupLevel=Ye.groupLevel,this.setFillAndStrokeStyleToContext(je,We,Qe);let Ie=ke,Oe=Ge,Ze=nn,sn=dn;return ke<0&&(Ie=0,Ze+=Math.abs(ke)),Ge<0&&(Oe=0,sn+=Math.abs(Ge)),Nn.translate(-(Pn.scale*Ie),-(un.scale*Oe)),je.transform(Pn.scale,0,0,un.scale,0,0),Nn.save(),this.clipBbox(je,Ie,Oe,Ze,sn),je.baseTransform=(0,_e.getCurrentTransform)(je.ctx),je.executeOperatorList(an),je.endDrawing(),{canvas:_n.canvas,scaleX:Pn.scale,scaleY:un.scale,offsetX:Ie,offsetY:Oe}}getSizeAndScale(Ye,an,rn){Ye=Math.abs(Ye);const Xe=Math.max(Ke.MAX_PATTERN_SIZE,an);let en=Math.ceil(Ye*rn);return en>=Xe?en=Xe:rn=en/Ye,{scale:rn,size:en}}clipBbox(Ye,an,rn,Xe,en){const We=Xe-an,ze=en-rn;Ye.ctx.rect(an,rn,We,ze),Ye.current.updateRectMinMax((0,_e.getCurrentTransform)(Ye.ctx),[an,rn,Xe,en]),Ye.clip(),Ye.endPath()}setFillAndStrokeStyleToContext(Ye,an,rn){const Xe=Ye.ctx,en=Ye.current;switch(an){case Ve.COLORED:const We=this.ctx;Xe.fillStyle=We.fillStyle,Xe.strokeStyle=We.strokeStyle,en.fillColor=We.fillStyle,en.strokeColor=We.strokeStyle;break;case Ve.UNCOLORED:const ze=e.Util.makeHexColor(rn[0],rn[1],rn[2]);Xe.fillStyle=ze,Xe.strokeStyle=ze,en.fillColor=ze,en.strokeColor=ze;break;default:throw new e.FormatError(`Unsupported paint type: ${an}`)}}getPattern(Ye,an,rn,Xe){let en=rn;Xe!==Se.SHADING&&(en=e.Util.transform(en,an.baseTransform),this.matrix&&(en=e.Util.transform(en,this.matrix)));const We=this.createPatternCanvas(an);let ze=new DOMMatrix(en);ze=ze.translate(We.offsetX,We.offsetY),ze=ze.scale(1/We.scaleX,1/We.scaleY);const Qe=Ye.createPattern(We.canvas,"repeat");return Qe.setTransform(ze),Qe}};oi(Ke,"MAX_PATTERN_SIZE",3e3);let $e=Ke;t.TilingPattern=$e},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=Se,t.convertToRGBA=_e,t.grayToRGBA=Re;var e=xe(1);function _e(Ce){switch(Ce.kind){case e.ImageKind.GRAYSCALE_1BPP:return Se(Ce);case e.ImageKind.RGB_24BPP:return Ee(Ce)}return null}function Se({src:Ce,srcPos:De=0,dest:Me,width:Ue,height:He,nonBlackColor:Te=4294967295,inverseDecode:Ve=!1}){const $e=e.FeatureTest.isLittleEndian?4278190080:255,[Ke,Be]=Ve?[Te,$e]:[$e,Te],Ye=Ue>>3,an=Ue&7,rn=Ce.length;Me=new Uint32Array(Me.buffer);let Xe=0;for(let en=0;en<He;en++){for(const ze=De+Ye;De<ze;De++){const Qe=De<rn?Ce[De]:255;Me[Xe++]=Qe&128?Be:Ke,Me[Xe++]=Qe&64?Be:Ke,Me[Xe++]=Qe&32?Be:Ke,Me[Xe++]=Qe&16?Be:Ke,Me[Xe++]=Qe&8?Be:Ke,Me[Xe++]=Qe&4?Be:Ke,Me[Xe++]=Qe&2?Be:Ke,Me[Xe++]=Qe&1?Be:Ke}if(an===0)continue;const We=De<rn?Ce[De++]:255;for(let ze=0;ze<an;ze++)Me[Xe++]=We&1<<7-ze?Be:Ke}return{srcPos:De,destPos:Xe}}function Ee({src:Ce,srcPos:De=0,dest:Me,destPos:Ue=0,width:He,height:Te}){let Ve=0;const $e=Ce.length>>2,Ke=new Uint32Array(Ce.buffer,De,$e);if(e.FeatureTest.isLittleEndian){for(;Ve<$e-2;Ve+=3,Ue+=4){const Be=Ke[Ve],Ye=Ke[Ve+1],an=Ke[Ve+2];Me[Ue]=Be|4278190080,Me[Ue+1]=Be>>>24|Ye<<8|4278190080,Me[Ue+2]=Ye>>>16|an<<16|4278190080,Me[Ue+3]=an>>>8|4278190080}for(let Be=Ve*4,Ye=Ce.length;Be<Ye;Be+=3)Me[Ue++]=Ce[Be]|Ce[Be+1]<<8|Ce[Be+2]<<16|4278190080}else{for(;Ve<$e-2;Ve+=3,Ue+=4){const Be=Ke[Ve],Ye=Ke[Ve+1],an=Ke[Ve+2];Me[Ue]=Be|255,Me[Ue+1]=Be<<24|Ye>>>8|255,Me[Ue+2]=Ye<<16|an>>>16|255,Me[Ue+3]=an<<8|255}for(let Be=Ve*4,Ye=Ce.length;Be<Ye;Be+=3)Me[Ue++]=Ce[Be]<<24|Ce[Be+1]<<16|Ce[Be+2]<<8|255}return{srcPos:De,destPos:Ue}}function Re(Ce,De){if(e.FeatureTest.isLittleEndian)for(let Me=0,Ue=Ce.length;Me<Ue;Me++)De[Me]=Ce[Me]*65793|4278190080;else for(let Me=0,Ue=Ce.length;Me<Ue;Me++)De[Me]=Ce[Me]*16843008|255}},(St,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const xe=Object.create(null);t.GlobalWorkerOptions=xe,xe.workerPort=null,xe.workerSrc=""},(St,t,xe)=>{var Ce,xu,wu,nl;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var e=xe(1);const _e={DATA:1,ERROR:2},Se={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ee(He){switch(He instanceof Error||typeof He=="object"&&He!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),He.name){case"AbortException":return new e.AbortException(He.message);case"MissingPDFException":return new e.MissingPDFException(He.message);case"PasswordException":return new e.PasswordException(He.message,He.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(He.message,He.status);case"UnknownErrorException":return new e.UnknownErrorException(He.message,He.details);default:return new e.UnknownErrorException(He.message,He.toString())}}class Re{constructor(Te,Ve,$e){er(this,Ce);this.sourceName=Te,this.targetName=Ve,this.comObj=$e,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Ke=>{const Be=Ke.data;if(Be.targetName!==this.sourceName)return;if(Be.stream){Vn(this,Ce,wu).call(this,Be);return}if(Be.callback){const an=Be.callbackId,rn=this.callbackCapabilities[an];if(!rn)throw new Error(`Cannot resolve callback ${an}`);if(delete this.callbackCapabilities[an],Be.callback===_e.DATA)rn.resolve(Be.data);else if(Be.callback===_e.ERROR)rn.reject(Ee(Be.reason));else throw new Error("Unexpected callback case");return}const Ye=this.actionHandler[Be.action];if(!Ye)throw new Error(`Unknown action from worker: ${Be.action}`);if(Be.callbackId){const an=this.sourceName,rn=Be.sourceName;new Promise(function(Xe){Xe(Ye(Be.data))}).then(function(Xe){$e.postMessage({sourceName:an,targetName:rn,callback:_e.DATA,callbackId:Be.callbackId,data:Xe})},function(Xe){$e.postMessage({sourceName:an,targetName:rn,callback:_e.ERROR,callbackId:Be.callbackId,reason:Ee(Xe)})});return}if(Be.streamId){Vn(this,Ce,xu).call(this,Be);return}Ye(Be.data)},$e.addEventListener("message",this._onComObjOnMessage)}on(Te,Ve){const $e=this.actionHandler;if($e[Te])throw new Error(`There is already an actionName called "${Te}"`);$e[Te]=Ve}send(Te,Ve,$e){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Te,data:Ve},$e)}sendWithPromise(Te,Ve,$e){const Ke=this.callbackId++,Be=new e.PromiseCapability;this.callbackCapabilities[Ke]=Be;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:Te,callbackId:Ke,data:Ve},$e)}catch(Ye){Be.reject(Ye)}return Be.promise}sendWithStream(Te,Ve,$e,Ke){const Be=this.streamId++,Ye=this.sourceName,an=this.targetName,rn=this.comObj;return new ReadableStream({start:Xe=>{const en=new e.PromiseCapability;return this.streamControllers[Be]={controller:Xe,startCall:en,pullCall:null,cancelCall:null,isClosed:!1},rn.postMessage({sourceName:Ye,targetName:an,action:Te,streamId:Be,data:Ve,desiredSize:Xe.desiredSize},Ke),en.promise},pull:Xe=>{const en=new e.PromiseCapability;return this.streamControllers[Be].pullCall=en,rn.postMessage({sourceName:Ye,targetName:an,stream:Se.PULL,streamId:Be,desiredSize:Xe.desiredSize}),en.promise},cancel:Xe=>{(0,e.assert)(Xe instanceof Error,"cancel must have a valid reason");const en=new e.PromiseCapability;return this.streamControllers[Be].cancelCall=en,this.streamControllers[Be].isClosed=!0,rn.postMessage({sourceName:Ye,targetName:an,stream:Se.CANCEL,streamId:Be,reason:Ee(Xe)}),en.promise}},$e)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Ce=new WeakSet,xu=function(Te){const Ve=Te.streamId,$e=this.sourceName,Ke=Te.sourceName,Be=this.comObj,Ye=this,an=this.actionHandler[Te.action],rn={enqueue(Xe,en=1,We){if(this.isCancelled)return;const ze=this.desiredSize;this.desiredSize-=en,ze>0&&this.desiredSize<=0&&(this.sinkCapability=new e.PromiseCapability,this.ready=this.sinkCapability.promise),Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.ENQUEUE,streamId:Ve,chunk:Xe},We)},close(){this.isCancelled||(this.isCancelled=!0,Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.CLOSE,streamId:Ve}),delete Ye.streamSinks[Ve])},error(Xe){(0,e.assert)(Xe instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.ERROR,streamId:Ve,reason:Ee(Xe)}))},sinkCapability:new e.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:Te.desiredSize,ready:null};rn.sinkCapability.resolve(),rn.ready=rn.sinkCapability.promise,this.streamSinks[Ve]=rn,new Promise(function(Xe){Xe(an(Te.data,rn))}).then(function(){Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.START_COMPLETE,streamId:Ve,success:!0})},function(Xe){Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.START_COMPLETE,streamId:Ve,reason:Ee(Xe)})})},wu=function(Te){const Ve=Te.streamId,$e=this.sourceName,Ke=Te.sourceName,Be=this.comObj,Ye=this.streamControllers[Ve],an=this.streamSinks[Ve];switch(Te.stream){case Se.START_COMPLETE:Te.success?Ye.startCall.resolve():Ye.startCall.reject(Ee(Te.reason));break;case Se.PULL_COMPLETE:Te.success?Ye.pullCall.resolve():Ye.pullCall.reject(Ee(Te.reason));break;case Se.PULL:if(!an){Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.PULL_COMPLETE,streamId:Ve,success:!0});break}an.desiredSize<=0&&Te.desiredSize>0&&an.sinkCapability.resolve(),an.desiredSize=Te.desiredSize,new Promise(function(rn){var Xe;rn((Xe=an.onPull)==null?void 0:Xe.call(an))}).then(function(){Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.PULL_COMPLETE,streamId:Ve,success:!0})},function(rn){Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.PULL_COMPLETE,streamId:Ve,reason:Ee(rn)})});break;case Se.ENQUEUE:if((0,e.assert)(Ye,"enqueue should have stream controller"),Ye.isClosed)break;Ye.controller.enqueue(Te.chunk);break;case Se.CLOSE:if((0,e.assert)(Ye,"close should have stream controller"),Ye.isClosed)break;Ye.isClosed=!0,Ye.controller.close(),Vn(this,Ce,nl).call(this,Ye,Ve);break;case Se.ERROR:(0,e.assert)(Ye,"error should have stream controller"),Ye.controller.error(Ee(Te.reason)),Vn(this,Ce,nl).call(this,Ye,Ve);break;case Se.CANCEL_COMPLETE:Te.success?Ye.cancelCall.resolve():Ye.cancelCall.reject(Ee(Te.reason)),Vn(this,Ce,nl).call(this,Ye,Ve);break;case Se.CANCEL:if(!an)break;new Promise(function(rn){var Xe;rn((Xe=an.onCancel)==null?void 0:Xe.call(an,Ee(Te.reason)))}).then(function(){Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.CANCEL_COMPLETE,streamId:Ve,success:!0})},function(rn){Be.postMessage({sourceName:$e,targetName:Ke,stream:Se.CANCEL_COMPLETE,streamId:Ve,reason:Ee(rn)})}),an.sinkCapability.reject(Ee(Te.reason)),an.isCancelled=!0,delete this.streamSinks[Ve];break;default:throw new Error("Unexpected stream case")}},nl=async function(Te,Ve){var $e,Ke,Be;await Promise.allSettled([($e=Te.startCall)==null?void 0:$e.promise,(Ke=Te.pullCall)==null?void 0:Ke.promise,(Be=Te.cancelCall)==null?void 0:Be.promise]),delete this.streamControllers[Ve]},t.MessageHandler=Re},(St,t,xe)=>{var Se,Ee;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var e=xe(1);class _e{constructor({parsedData:Ce,rawData:De}){er(this,Se);er(this,Ee);rr(this,Se,Ce),rr(this,Ee,De)}getRaw(){return Je(this,Ee)}get(Ce){return Je(this,Se).get(Ce)??null}getAll(){return(0,e.objectFromMap)(Je(this,Se))}has(Ce){return Je(this,Se).has(Ce)}}Se=new WeakMap,Ee=new WeakMap,t.Metadata=_e},(St,t,xe)=>{var Ce,De,Me,Ue,He,Te,yc;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var e=xe(1),_e=xe(8);const Se=Symbol("INTERNAL");class Ee{constructor(Ke,Be){er(this,Ce,!0);this.name=Ke,this.intent=Be}get visible(){return Je(this,Ce)}_setVisible(Ke,Be){Ke!==Se&&(0,e.unreachable)("Internal method `_setVisible` called."),rr(this,Ce,Be)}}Ce=new WeakMap;class Re{constructor(Ke){er(this,Te);er(this,De,null);er(this,Me,new Map);er(this,Ue,null);er(this,He,null);if(this.name=null,this.creator=null,Ke!==null){this.name=Ke.name,this.creator=Ke.creator,rr(this,He,Ke.order);for(const Be of Ke.groups)Je(this,Me).set(Be.id,new Ee(Be.name,Be.intent));if(Ke.baseState==="OFF")for(const Be of Je(this,Me).values())Be._setVisible(Se,!1);for(const Be of Ke.on)Je(this,Me).get(Be)._setVisible(Se,!0);for(const Be of Ke.off)Je(this,Me).get(Be)._setVisible(Se,!1);rr(this,Ue,this.getHash())}}isVisible(Ke){if(Je(this,Me).size===0)return!0;if(!Ke)return(0,e.warn)("Optional content group not defined."),!0;if(Ke.type==="OCG")return Je(this,Me).has(Ke.id)?Je(this,Me).get(Ke.id).visible:((0,e.warn)(`Optional content group not found: ${Ke.id}`),!0);if(Ke.type==="OCMD"){if(Ke.expression)return Vn(this,Te,yc).call(this,Ke.expression);if(!Ke.policy||Ke.policy==="AnyOn"){for(const Be of Ke.ids){if(!Je(this,Me).has(Be))return(0,e.warn)(`Optional content group not found: ${Be}`),!0;if(Je(this,Me).get(Be).visible)return!0}return!1}else if(Ke.policy==="AllOn"){for(const Be of Ke.ids){if(!Je(this,Me).has(Be))return(0,e.warn)(`Optional content group not found: ${Be}`),!0;if(!Je(this,Me).get(Be).visible)return!1}return!0}else if(Ke.policy==="AnyOff"){for(const Be of Ke.ids){if(!Je(this,Me).has(Be))return(0,e.warn)(`Optional content group not found: ${Be}`),!0;if(!Je(this,Me).get(Be).visible)return!0}return!1}else if(Ke.policy==="AllOff"){for(const Be of Ke.ids){if(!Je(this,Me).has(Be))return(0,e.warn)(`Optional content group not found: ${Be}`),!0;if(Je(this,Me).get(Be).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${Ke.policy}.`),!0}return(0,e.warn)(`Unknown group type ${Ke.type}.`),!0}setVisibility(Ke,Be=!0){if(!Je(this,Me).has(Ke)){(0,e.warn)(`Optional content group not found: ${Ke}`);return}Je(this,Me).get(Ke)._setVisible(Se,!!Be),rr(this,De,null)}get hasInitialVisibility(){return Je(this,Ue)===null||this.getHash()===Je(this,Ue)}getOrder(){return Je(this,Me).size?Je(this,He)?Je(this,He).slice():[...Je(this,Me).keys()]:null}getGroups(){return Je(this,Me).size>0?(0,e.objectFromMap)(Je(this,Me)):null}getGroup(Ke){return Je(this,Me).get(Ke)||null}getHash(){if(Je(this,De)!==null)return Je(this,De);const Ke=new _e.MurmurHash3_64;for(const[Be,Ye]of Je(this,Me))Ke.update(`${Be}:${Ye.visible}`);return rr(this,De,Ke.hexdigest())}}De=new WeakMap,Me=new WeakMap,Ue=new WeakMap,He=new WeakMap,Te=new WeakSet,yc=function(Ke){const Be=Ke.length;if(Be<2)return!0;const Ye=Ke[0];for(let an=1;an<Be;an++){const rn=Ke[an];let Xe;if(Array.isArray(rn))Xe=Vn(this,Te,yc).call(this,rn);else if(Je(this,Me).has(rn))Xe=Je(this,Me).get(rn).visible;else return(0,e.warn)(`Optional content group not found: ${rn}`),!0;switch(Ye){case"And":if(!Xe)return!1;break;case"Or":if(Xe)return!0;break;case"Not":return!Xe;default:return!0}}return Ye==="And"},t.OptionalContentConfig=Re},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var e=xe(1),_e=xe(6);class Se{constructor({length:De,initialData:Me,progressiveDone:Ue=!1,contentDispositionFilename:He=null,disableRange:Te=!1,disableStream:Ve=!1},$e){if((0,e.assert)($e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=Ue,this._contentDispositionFilename=He,(Me==null?void 0:Me.length)>0){const Ke=Me instanceof Uint8Array&&Me.byteLength===Me.buffer.byteLength?Me.buffer:new Uint8Array(Me).buffer;this._queuedChunks.push(Ke)}this._pdfDataRangeTransport=$e,this._isStreamingSupported=!Ve,this._isRangeSupported=!Te,this._contentLength=De,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Ke,Be)=>{this._onReceiveData({begin:Ke,chunk:Be})}),this._pdfDataRangeTransport.addProgressListener((Ke,Be)=>{this._onProgress({loaded:Ke,total:Be})}),this._pdfDataRangeTransport.addProgressiveReadListener(Ke=>{this._onReceiveData({chunk:Ke})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:De,chunk:Me}){const Ue=Me instanceof Uint8Array&&Me.byteLength===Me.buffer.byteLength?Me.buffer:new Uint8Array(Me).buffer;if(De===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Ue):this._queuedChunks.push(Ue);else{const He=this._rangeReaders.some(function(Te){return Te._begin!==De?!1:(Te._enqueue(Ue),!0)});(0,e.assert)(He,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var De;return((De=this._fullRequestReader)==null?void 0:De._loaded)??0}_onProgress(De){var Me,Ue,He,Te;De.total===void 0?(Ue=(Me=this._rangeReaders[0])==null?void 0:Me.onProgress)==null||Ue.call(Me,{loaded:De.loaded}):(Te=(He=this._fullRequestReader)==null?void 0:He.onProgress)==null||Te.call(He,{loaded:De.loaded,total:De.total})}_onProgressiveDone(){var De;(De=this._fullRequestReader)==null||De.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(De){const Me=this._rangeReaders.indexOf(De);Me>=0&&this._rangeReaders.splice(Me,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const De=this._queuedChunks;return this._queuedChunks=null,new Ee(this,De,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(De,Me){if(Me<=this._progressiveDataLength)return null;const Ue=new Re(this,De,Me);return this._pdfDataRangeTransport.requestDataRange(De,Me),this._rangeReaders.push(Ue),Ue}cancelAllRequests(De){var Me;(Me=this._fullRequestReader)==null||Me.cancel(De);for(const Ue of this._rangeReaders.slice(0))Ue.cancel(De);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=Se;class Ee{constructor(De,Me,Ue=!1,He=null){this._stream=De,this._done=Ue||!1,this._filename=(0,_e.isPdfFile)(He)?He:null,this._queuedChunks=Me||[],this._loaded=0;for(const Te of this._queuedChunks)this._loaded+=Te.byteLength;this._requests=[],this._headersReady=Promise.resolve(),De._fullRequestReader=this,this.onProgress=null}_enqueue(De){this._done||(this._requests.length>0?this._requests.shift().resolve({value:De,done:!1}):this._queuedChunks.push(De),this._loaded+=De.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const De=new e.PromiseCapability;return this._requests.push(De),De.promise}cancel(De){this._done=!0;for(const Me of this._requests)Me.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Re{constructor(De,Me,Ue){this._stream=De,this._begin=Me,this._end=Ue,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(De){if(!this._done){if(this._requests.length===0)this._queuedChunk=De;else{this._requests.shift().resolve({value:De,done:!1});for(const Ue of this._requests)Ue.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Me=this._queuedChunk;return this._queuedChunk=null,{value:Me,done:!1}}if(this._done)return{value:void 0,done:!0};const De=new e.PromiseCapability;return this._requests.push(De),De.promise}cancel(De){this._done=!0;for(const Me of this._requests)Me.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var e=xe(1),_e=xe(20);function Se(Ue,He,Te){return{method:"GET",headers:Ue,signal:Te.signal,mode:"cors",credentials:He?"include":"same-origin",redirect:"follow"}}function Ee(Ue){const He=new Headers;for(const Te in Ue){const Ve=Ue[Te];Ve!==void 0&&He.append(Te,Ve)}return He}function Re(Ue){return Ue instanceof Uint8Array?Ue.buffer:Ue instanceof ArrayBuffer?Ue:((0,e.warn)(`getArrayBuffer - unexpected data format: ${Ue}`),new Uint8Array(Ue).buffer)}class Ce{constructor(He){this.source=He,this.isHttp=/^https?:/i.test(He.url),this.httpHeaders=this.isHttp&&He.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var He;return((He=this._fullRequestReader)==null?void 0:He._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new De(this),this._fullRequestReader}getRangeReader(He,Te){if(Te<=this._progressiveDataLength)return null;const Ve=new Me(this,He,Te);return this._rangeRequestReaders.push(Ve),Ve}cancelAllRequests(He){var Te;(Te=this._fullRequestReader)==null||Te.cancel(He);for(const Ve of this._rangeRequestReaders.slice(0))Ve.cancel(He)}}t.PDFFetchStream=Ce;class De{constructor(He){this._stream=He,this._reader=null,this._loaded=0,this._filename=null;const Te=He.source;this._withCredentials=Te.withCredentials||!1,this._contentLength=Te.length,this._headersCapability=new e.PromiseCapability,this._disableRange=Te.disableRange||!1,this._rangeChunkSize=Te.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!Te.disableStream,this._isRangeSupported=!Te.disableRange,this._headers=Ee(this._stream.httpHeaders);const Ve=Te.url;fetch(Ve,Se(this._headers,this._withCredentials,this._abortController)).then($e=>{if(!(0,_e.validateResponseStatus)($e.status))throw(0,_e.createResponseStatusError)($e.status,Ve);this._reader=$e.body.getReader(),this._headersCapability.resolve();const Ke=an=>$e.headers.get(an),{allowRangeRequests:Be,suggestedLength:Ye}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:Ke,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Be,this._contentLength=Ye||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)(Ke),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ve;await this._headersCapability.promise;const{value:He,done:Te}=await this._reader.read();return Te?{value:He,done:Te}:(this._loaded+=He.byteLength,(Ve=this.onProgress)==null||Ve.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Re(He),done:!1})}cancel(He){var Te;(Te=this._reader)==null||Te.cancel(He),this._abortController.abort()}}class Me{constructor(He,Te,Ve){this._stream=He,this._reader=null,this._loaded=0;const $e=He.source;this._withCredentials=$e.withCredentials||!1,this._readCapability=new e.PromiseCapability,this._isStreamingSupported=!$e.disableStream,this._abortController=new AbortController,this._headers=Ee(this._stream.httpHeaders),this._headers.append("Range",`bytes=${Te}-${Ve-1}`);const Ke=$e.url;fetch(Ke,Se(this._headers,this._withCredentials,this._abortController)).then(Be=>{if(!(0,_e.validateResponseStatus)(Be.status))throw(0,_e.createResponseStatusError)(Be.status,Ke);this._readCapability.resolve(),this._reader=Be.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ve;await this._readCapability.promise;const{value:He,done:Te}=await this._reader.read();return Te?{value:He,done:Te}:(this._loaded+=He.byteLength,(Ve=this.onProgress)==null||Ve.call(this,{loaded:this._loaded}),{value:Re(He),done:!1})}cancel(He){var Te;(Te=this._reader)==null||Te.cancel(He),this._abortController.abort()}}},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=Ce,t.extractFilenameFromHeader=Re,t.validateRangeRequestCapabilities=Ee,t.validateResponseStatus=De;var e=xe(1),_e=xe(21),Se=xe(6);function Ee({getResponseHeader:Me,isHttp:Ue,rangeChunkSize:He,disableRange:Te}){const Ve={allowRangeRequests:!1,suggestedLength:void 0},$e=parseInt(Me("Content-Length"),10);return!Number.isInteger($e)||(Ve.suggestedLength=$e,$e<=2*He)||Te||!Ue||Me("Accept-Ranges")!=="bytes"||(Me("Content-Encoding")||"identity")!=="identity"||(Ve.allowRangeRequests=!0),Ve}function Re(Me){const Ue=Me("Content-Disposition");if(Ue){let He=(0,_e.getFilenameFromContentDispositionHeader)(Ue);if(He.includes("%"))try{He=decodeURIComponent(He)}catch{}if((0,Se.isPdfFile)(He))return He}return null}function Ce(Me,Ue){return Me===404||Me===0&&Ue.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+Ue+'".'):new e.UnexpectedResponseException(`Unexpected server response (${Me}) while retrieving PDF "${Ue}".`,Me)}function De(Me){return Me===200||Me===206}},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=_e;var e=xe(1);function _e(Se){let Ee=!0,Re=Ce("filename\\*","i").exec(Se);if(Re){Re=Re[1];let $e=He(Re);return $e=unescape($e),$e=Te($e),$e=Ve($e),Me($e)}if(Re=Ue(Se),Re){const $e=Ve(Re);return Me($e)}if(Re=Ce("filename","i").exec(Se),Re){Re=Re[1];let $e=He(Re);return $e=Ve($e),Me($e)}function Ce($e,Ke){return new RegExp("(?:^|;)\\s*"+$e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Ke)}function De($e,Ke){if($e){if(!/^[\x00-\xFF]+$/.test(Ke))return Ke;try{const Be=new TextDecoder($e,{fatal:!0}),Ye=(0,e.stringToBytes)(Ke);Ke=Be.decode(Ye),Ee=!1}catch{}}return Ke}function Me($e){return Ee&&/[\x80-\xff]/.test($e)&&($e=De("utf-8",$e),Ee&&($e=De("iso-8859-1",$e))),$e}function Ue($e){const Ke=[];let Be;const Ye=Ce("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Be=Ye.exec($e))!==null;){let[,rn,Xe,en]=Be;if(rn=parseInt(rn,10),rn in Ke){if(rn===0)break;continue}Ke[rn]=[Xe,en]}const an=[];for(let rn=0;rn<Ke.length&&rn in Ke;++rn){let[Xe,en]=Ke[rn];en=He(en),Xe&&(en=unescape(en),rn===0&&(en=Te(en))),an.push(en)}return an.join("")}function He($e){if($e.startsWith('"')){const Ke=$e.slice(1).split('\\"');for(let Be=0;Be<Ke.length;++Be){const Ye=Ke[Be].indexOf('"');Ye!==-1&&(Ke[Be]=Ke[Be].slice(0,Ye),Ke.length=Be+1),Ke[Be]=Ke[Be].replaceAll(/\\(.)/g,"$1")}$e=Ke.join('"')}return $e}function Te($e){const Ke=$e.indexOf("'");if(Ke===-1)return $e;const Be=$e.slice(0,Ke),an=$e.slice(Ke+1).replace(/^[^']*'/,"");return De(Be,an)}function Ve($e){return!$e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test($e)?$e:$e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Ke,Be,Ye,an){if(Ye==="q"||Ye==="Q")return an=an.replaceAll("_"," "),an=an.replaceAll(/=([0-9a-fA-F]{2})/g,function(rn,Xe){return String.fromCharCode(parseInt(Xe,16))}),De(Be,an);try{an=atob(an)}catch{}return De(Be,an)})}return""}},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var e=xe(1),_e=xe(20);const Se=200,Ee=206;function Re(He){const Te=He.response;return typeof Te!="string"?Te:(0,e.stringToBytes)(Te).buffer}class Ce{constructor(Te,Ve={}){this.url=Te,this.isHttp=/^https?:/i.test(Te),this.httpHeaders=this.isHttp&&Ve.httpHeaders||Object.create(null),this.withCredentials=Ve.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(Te,Ve,$e){const Ke={begin:Te,end:Ve};for(const Be in $e)Ke[Be]=$e[Be];return this.request(Ke)}requestFull(Te){return this.request(Te)}request(Te){const Ve=new XMLHttpRequest,$e=this.currXhrId++,Ke=this.pendingRequests[$e]={xhr:Ve};Ve.open("GET",this.url),Ve.withCredentials=this.withCredentials;for(const Be in this.httpHeaders){const Ye=this.httpHeaders[Be];Ye!==void 0&&Ve.setRequestHeader(Be,Ye)}return this.isHttp&&"begin"in Te&&"end"in Te?(Ve.setRequestHeader("Range",`bytes=${Te.begin}-${Te.end-1}`),Ke.expectedStatus=Ee):Ke.expectedStatus=Se,Ve.responseType="arraybuffer",Te.onError&&(Ve.onerror=function(Be){Te.onError(Ve.status)}),Ve.onreadystatechange=this.onStateChange.bind(this,$e),Ve.onprogress=this.onProgress.bind(this,$e),Ke.onHeadersReceived=Te.onHeadersReceived,Ke.onDone=Te.onDone,Ke.onError=Te.onError,Ke.onProgress=Te.onProgress,Ve.send(null),$e}onProgress(Te,Ve){var Ke;const $e=this.pendingRequests[Te];$e&&((Ke=$e.onProgress)==null||Ke.call($e,Ve))}onStateChange(Te,Ve){var rn,Xe,en;const $e=this.pendingRequests[Te];if(!$e)return;const Ke=$e.xhr;if(Ke.readyState>=2&&$e.onHeadersReceived&&($e.onHeadersReceived(),delete $e.onHeadersReceived),Ke.readyState!==4||!(Te in this.pendingRequests))return;if(delete this.pendingRequests[Te],Ke.status===0&&this.isHttp){(rn=$e.onError)==null||rn.call($e,Ke.status);return}const Be=Ke.status||Se;if(!(Be===Se&&$e.expectedStatus===Ee)&&Be!==$e.expectedStatus){(Xe=$e.onError)==null||Xe.call($e,Ke.status);return}const an=Re(Ke);if(Be===Ee){const We=Ke.getResponseHeader("Content-Range"),ze=/bytes (\d+)-(\d+)\/(\d+)/.exec(We);$e.onDone({begin:parseInt(ze[1],10),chunk:an})}else an?$e.onDone({begin:0,chunk:an}):(en=$e.onError)==null||en.call($e,Ke.status)}getRequestXhr(Te){return this.pendingRequests[Te].xhr}isPendingRequest(Te){return Te in this.pendingRequests}abortRequest(Te){const Ve=this.pendingRequests[Te].xhr;delete this.pendingRequests[Te],Ve.abort()}}class De{constructor(Te){this._source=Te,this._manager=new Ce(Te.url,{httpHeaders:Te.httpHeaders,withCredentials:Te.withCredentials}),this._rangeChunkSize=Te.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(Te){const Ve=this._rangeRequestReaders.indexOf(Te);Ve>=0&&this._rangeRequestReaders.splice(Ve,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Me(this._manager,this._source),this._fullRequestReader}getRangeReader(Te,Ve){const $e=new Ue(this._manager,Te,Ve);return $e.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push($e),$e}cancelAllRequests(Te){var Ve;(Ve=this._fullRequestReader)==null||Ve.cancel(Te);for(const $e of this._rangeRequestReaders.slice(0))$e.cancel(Te)}}t.PDFNetworkStream=De;class Me{constructor(Te,Ve){this._manager=Te;const $e={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Ve.url,this._fullRequestId=Te.requestFull($e),this._headersReceivedCapability=new e.PromiseCapability,this._disableRange=Ve.disableRange||!1,this._contentLength=Ve.length,this._rangeChunkSize=Ve.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const Te=this._fullRequestId,Ve=this._manager.getRequestXhr(Te),$e=Ye=>Ve.getResponseHeader(Ye),{allowRangeRequests:Ke,suggestedLength:Be}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:$e,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Ke&&(this._isRangeSupported=!0),this._contentLength=Be||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)($e),this._isRangeSupported&&this._manager.abortRequest(Te),this._headersReceivedCapability.resolve()}_onDone(Te){if(Te&&(this._requests.length>0?this._requests.shift().resolve({value:Te.chunk,done:!1}):this._cachedChunks.push(Te.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Ve of this._requests)Ve.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(Te){this._storedError=(0,_e.createResponseStatusError)(Te,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Ve of this._requests)Ve.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(Te){var Ve;(Ve=this.onProgress)==null||Ve.call(this,{loaded:Te.loaded,total:Te.lengthComputable?Te.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Te=new e.PromiseCapability;return this._requests.push(Te),Te.promise}cancel(Te){this._done=!0,this._headersReceivedCapability.reject(Te);for(const Ve of this._requests)Ve.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ue{constructor(Te,Ve,$e){this._manager=Te;const Ke={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Te.url,this._requestId=Te.requestRange(Ve,$e,Ke),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var Te;(Te=this.onClosed)==null||Te.call(this,this)}_onDone(Te){const Ve=Te.chunk;this._requests.length>0?this._requests.shift().resolve({value:Ve,done:!1}):this._queuedChunk=Ve,this._done=!0;for(const $e of this._requests)$e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(Te){this._storedError=(0,_e.createResponseStatusError)(Te,this._url);for(const Ve of this._requests)Ve.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(Te){var Ve;this.isStreamingSupported||(Ve=this.onProgress)==null||Ve.call(this,{loaded:Te.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Ve=this._queuedChunk;return this._queuedChunk=null,{value:Ve,done:!1}}if(this._done)return{value:void 0,done:!0};const Te=new e.PromiseCapability;return this._requests.push(Te),Te.promise}cancel(Te){this._done=!0;for(const Ve of this._requests)Ve.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var e=xe(1),_e=xe(20);const Se=/^file:\/\/\/[a-zA-Z]:\//;function Ee($e){const Ke=require$$5,Be=Ke.parse($e);return Be.protocol==="file:"||Be.host?Be:/^[a-z]:[/\\]/i.test($e)?Ke.parse(`file:///${$e}`):(Be.host||(Be.protocol="file:"),Be)}class Re{constructor(Ke){this.source=Ke,this.url=Ee(Ke.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Ke.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Ke;return((Ke=this._fullRequestReader)==null?void 0:Ke._loaded)??0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Te(this):new Ue(this),this._fullRequestReader}getRangeReader(Ke,Be){if(Be<=this._progressiveDataLength)return null;const Ye=this.isFsUrl?new Ve(this,Ke,Be):new He(this,Ke,Be);return this._rangeRequestReaders.push(Ye),Ye}cancelAllRequests(Ke){var Be;(Be=this._fullRequestReader)==null||Be.cancel(Ke);for(const Ye of this._rangeRequestReaders.slice(0))Ye.cancel(Ke)}}t.PDFNodeStream=Re;class Ce{constructor(Ke){this._url=Ke.url,this._done=!1,this._storedError=null,this.onProgress=null;const Be=Ke.source;this._contentLength=Be.length,this._loaded=0,this._filename=null,this._disableRange=Be.disableRange||!1,this._rangeChunkSize=Be.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Be.disableStream,this._isRangeSupported=!Be.disableRange,this._readableStream=null,this._readCapability=new e.PromiseCapability,this._headersCapability=new e.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ye;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Ke=this._readableStream.read();return Ke===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=Ke.length,(Ye=this.onProgress)==null||Ye.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Ke).buffer,done:!1})}cancel(Ke){if(!this._readableStream){this._error(Ke);return}this._readableStream.destroy(Ke)}_error(Ke){this._storedError=Ke,this._readCapability.resolve()}_setReadableStream(Ke){this._readableStream=Ke,Ke.on("readable",()=>{this._readCapability.resolve()}),Ke.on("end",()=>{Ke.destroy(),this._done=!0,this._readCapability.resolve()}),Ke.on("error",Be=>{this._error(Be)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class De{constructor(Ke){this._url=Ke.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new e.PromiseCapability;const Be=Ke.source;this._isStreamingSupported=!Be.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ye;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Ke=this._readableStream.read();return Ke===null?(this._readCapability=new e.PromiseCapability,this.read()):(this._loaded+=Ke.length,(Ye=this.onProgress)==null||Ye.call(this,{loaded:this._loaded}),{value:new Uint8Array(Ke).buffer,done:!1})}cancel(Ke){if(!this._readableStream){this._error(Ke);return}this._readableStream.destroy(Ke)}_error(Ke){this._storedError=Ke,this._readCapability.resolve()}_setReadableStream(Ke){this._readableStream=Ke,Ke.on("readable",()=>{this._readCapability.resolve()}),Ke.on("end",()=>{Ke.destroy(),this._done=!0,this._readCapability.resolve()}),Ke.on("error",Be=>{this._error(Be)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Me($e,Ke){return{protocol:$e.protocol,auth:$e.auth,host:$e.hostname,port:$e.port,path:$e.path,method:"GET",headers:Ke}}class Ue extends Ce{constructor(Ke){super(Ke);const Be=Ye=>{if(Ye.statusCode===404){const en=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=en,this._headersCapability.reject(en);return}this._headersCapability.resolve(),this._setReadableStream(Ye);const an=en=>this._readableStream.headers[en.toLowerCase()],{allowRangeRequests:rn,suggestedLength:Xe}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:an,isHttp:Ke.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=rn,this._contentLength=Xe||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)(an)};if(this._request=null,this._url.protocol==="http:"){const Ye=require$$5;this._request=Ye.request(Me(this._url,Ke.httpHeaders),Be)}else{const Ye=require$$5;this._request=Ye.request(Me(this._url,Ke.httpHeaders),Be)}this._request.on("error",Ye=>{this._storedError=Ye,this._headersCapability.reject(Ye)}),this._request.end()}}class He extends De{constructor(Ke,Be,Ye){super(Ke),this._httpHeaders={};for(const rn in Ke.httpHeaders){const Xe=Ke.httpHeaders[rn];Xe!==void 0&&(this._httpHeaders[rn]=Xe)}this._httpHeaders.Range=`bytes=${Be}-${Ye-1}`;const an=rn=>{if(rn.statusCode===404){const Xe=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Xe;return}this._setReadableStream(rn)};if(this._request=null,this._url.protocol==="http:"){const rn=require$$5;this._request=rn.request(Me(this._url,this._httpHeaders),an)}else{const rn=require$$5;this._request=rn.request(Me(this._url,this._httpHeaders),an)}this._request.on("error",rn=>{this._storedError=rn}),this._request.end()}}class Te extends Ce{constructor(Ke){super(Ke);let Be=decodeURIComponent(this._url.path);Se.test(this._url.href)&&(Be=Be.replace(/^\//,""));const Ye=require$$5;Ye.lstat(Be,(an,rn)=>{if(an){an.code==="ENOENT"&&(an=new e.MissingPDFException(`Missing PDF "${Be}".`)),this._storedError=an,this._headersCapability.reject(an);return}this._contentLength=rn.size,this._setReadableStream(Ye.createReadStream(Be)),this._headersCapability.resolve()})}}class Ve extends De{constructor(Ke,Be,Ye){super(Ke);let an=decodeURIComponent(this._url.path);Se.test(this._url.href)&&(an=an.replace(/^\//,""));const rn=require$$5;this._setReadableStream(rn.createReadStream(an,{start:Be,end:Ye-1}))}}},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var e=xe(6),_e=xe(1);const Se={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Ee="http://www.w3.org/XML/1998/namespace",Re="http://www.w3.org/1999/xlink",Ce=["butt","round","square"],De=["miter","round","bevel"],Me=function(rn,Xe="",en=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!en)return URL.createObjectURL(new Blob([rn],{type:Xe}));const We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ze=`data:${Xe};base64,`;for(let Qe=0,gn=rn.length;Qe<gn;Qe+=3){const ke=rn[Qe]&255,Ge=rn[Qe+1]&255,nn=rn[Qe+2]&255,dn=ke>>2,wn=(ke&3)<<4|Ge>>4,Sn=Qe+1<gn?(Ge&15)<<2|nn>>6:64,yn=Qe+2<gn?nn&63:64;ze+=We[dn]+We[wn]+We[Sn]+We[yn]}return ze},Ue=function(){const rn=new Uint8Array([137,80,78,71,13,10,26,10]),Xe=12,en=new Int32Array(256);for(let nn=0;nn<256;nn++){let dn=nn;for(let wn=0;wn<8;wn++)dn=dn&1?3988292384^dn>>1&2147483647:dn>>1&2147483647;en[nn]=dn}function We(nn,dn,wn){let Sn=-1;for(let yn=dn;yn<wn;yn++){const Pn=(Sn^nn[yn])&255,un=en[Pn];Sn=Sn>>>8^un}return Sn^-1}function ze(nn,dn,wn,Sn){let yn=Sn;const Pn=dn.length;wn[yn]=Pn>>24&255,wn[yn+1]=Pn>>16&255,wn[yn+2]=Pn>>8&255,wn[yn+3]=Pn&255,yn+=4,wn[yn]=nn.charCodeAt(0)&255,wn[yn+1]=nn.charCodeAt(1)&255,wn[yn+2]=nn.charCodeAt(2)&255,wn[yn+3]=nn.charCodeAt(3)&255,yn+=4,wn.set(dn,yn),yn+=dn.length;const un=We(wn,Sn+4,yn);wn[yn]=un>>24&255,wn[yn+1]=un>>16&255,wn[yn+2]=un>>8&255,wn[yn+3]=un&255}function Qe(nn,dn,wn){let Sn=1,yn=0;for(let Pn=dn;Pn<wn;++Pn)Sn=(Sn+(nn[Pn]&255))%65521,yn=(yn+Sn)%65521;return yn<<16|Sn}function gn(nn){if(!_e.isNodeJS)return ke(nn);try{const dn=parseInt(process.versions.node)>=8?nn:Buffer.from(nn),wn=require$$5.deflateSync(dn,{level:9});return wn instanceof Uint8Array?wn:new Uint8Array(wn)}catch(dn){(0,_e.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+dn)}return ke(nn)}function ke(nn){let dn=nn.length;const wn=65535,Sn=Math.ceil(dn/wn),yn=new Uint8Array(2+dn+Sn*5+4);let Pn=0;yn[Pn++]=120,yn[Pn++]=156;let un=0;for(;dn>wn;)yn[Pn++]=0,yn[Pn++]=255,yn[Pn++]=255,yn[Pn++]=0,yn[Pn++]=0,yn.set(nn.subarray(un,un+wn),Pn),Pn+=wn,un+=wn,dn-=wn;yn[Pn++]=1,yn[Pn++]=dn&255,yn[Pn++]=dn>>8&255,yn[Pn++]=~dn&65535&255,yn[Pn++]=(~dn&65535)>>8&255,yn.set(nn.subarray(un),Pn),Pn+=nn.length-un;const _n=Qe(nn,0,nn.length);return yn[Pn++]=_n>>24&255,yn[Pn++]=_n>>16&255,yn[Pn++]=_n>>8&255,yn[Pn++]=_n&255,yn}function Ge(nn,dn,wn,Sn){const yn=nn.width,Pn=nn.height;let un,_n,Nn;const je=nn.data;switch(dn){case _e.ImageKind.GRAYSCALE_1BPP:_n=0,un=1,Nn=yn+7>>3;break;case _e.ImageKind.RGB_24BPP:_n=2,un=8,Nn=yn*3;break;case _e.ImageKind.RGBA_32BPP:_n=6,un=8,Nn=yn*4;break;default:throw new Error("invalid format")}const Ie=new Uint8Array((1+Nn)*Pn);let Oe=0,Ze=0;for(let In=0;In<Pn;++In)Ie[Oe++]=0,Ie.set(je.subarray(Ze,Ze+Nn),Oe),Ze+=Nn,Oe+=Nn;if(dn===_e.ImageKind.GRAYSCALE_1BPP&&Sn){Oe=0;for(let In=0;In<Pn;In++){Oe++;for(let zn=0;zn<Nn;zn++)Ie[Oe++]^=255}}const sn=new Uint8Array([yn>>24&255,yn>>16&255,yn>>8&255,yn&255,Pn>>24&255,Pn>>16&255,Pn>>8&255,Pn&255,un,_n,0,0,0]),on=gn(Ie),hn=rn.length+Xe*3+sn.length+on.length,An=new Uint8Array(hn);let Mn=0;return An.set(rn,Mn),Mn+=rn.length,ze("IHDR",sn,An,Mn),Mn+=Xe+sn.length,ze("IDATA",on,An,Mn),Mn+=Xe+on.length,ze("IEND",new Uint8Array(0),An,Mn),Me(An,"image/png",wn)}return function(dn,wn,Sn){const yn=dn.kind===void 0?_e.ImageKind.GRAYSCALE_1BPP:dn.kind;return Ge(dn,yn,wn,Sn)}}();class He{constructor(){this.fontSizeScale=1,this.fontWeight=Se.fontWeight,this.fontSize=0,this.textMatrix=_e.IDENTITY_MATRIX,this.fontMatrix=_e.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=_e.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Se.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Xe,en){this.x=Xe,this.y=en}}function Te(rn){let Xe=[];const en=[];for(const We of rn){if(We.fn==="save"){Xe.push({fnId:92,fn:"group",items:[]}),en.push(Xe),Xe=Xe.at(-1).items;continue}We.fn==="restore"?Xe=en.pop():Xe.push(We)}return Xe}function Ve(rn){if(Number.isInteger(rn))return rn.toString();const Xe=rn.toFixed(10);let en=Xe.length-1;if(Xe[en]!=="0")return Xe;do en--;while(Xe[en]==="0");return Xe.substring(0,Xe[en]==="."?en:en+1)}function $e(rn){if(rn[4]===0&&rn[5]===0){if(rn[1]===0&&rn[2]===0)return rn[0]===1&&rn[3]===1?"":`scale(${Ve(rn[0])} ${Ve(rn[3])})`;if(rn[0]===rn[3]&&rn[1]===-rn[2]){const Xe=Math.acos(rn[0])*180/Math.PI;return`rotate(${Ve(Xe)})`}}else if(rn[0]===1&&rn[1]===0&&rn[2]===0&&rn[3]===1)return`translate(${Ve(rn[4])} ${Ve(rn[5])})`;return`matrix(${Ve(rn[0])} ${Ve(rn[1])} ${Ve(rn[2])} ${Ve(rn[3])} ${Ve(rn[4])} ${Ve(rn[5])})`}let Ke=0,Be=0,Ye=0;class an{constructor(Xe,en,We=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new He,this.transformMatrix=_e.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Xe,this.objs=en,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!We,this._operatorIdMapping=[];for(const ze in _e.OPS)this._operatorIdMapping[_e.OPS[ze]]=ze}getObject(Xe,en=null){return typeof Xe=="string"?Xe.startsWith("g_")?this.commonObjs.get(Xe):this.objs.get(Xe):en}save(){this.transformStack.push(this.transformMatrix);const Xe=this.current;this.extraStack.push(Xe),this.current=Xe.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Xe){this.save(),this.executeOpTree(Xe),this.restore()}loadDependencies(Xe){const en=Xe.fnArray,We=Xe.argsArray;for(let ze=0,Qe=en.length;ze<Qe;ze++)if(en[ze]===_e.OPS.dependency)for(const gn of We[ze]){const ke=gn.startsWith("g_")?this.commonObjs:this.objs,Ge=new Promise(nn=>{ke.get(gn,nn)});this.current.dependencies.push(Ge)}return Promise.all(this.current.dependencies)}transform(Xe,en,We,ze,Qe,gn){const ke=[Xe,en,We,ze,Qe,gn];this.transformMatrix=_e.Util.transform(this.transformMatrix,ke),this.tgrp=null}getSVG(Xe,en){this.viewport=en;const We=this._initialize(en);return this.loadDependencies(Xe).then(()=>(this.transformMatrix=_e.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Xe)),We))}convertOpList(Xe){const en=this._operatorIdMapping,We=Xe.argsArray,ze=Xe.fnArray,Qe=[];for(let gn=0,ke=ze.length;gn<ke;gn++){const Ge=ze[gn];Qe.push({fnId:Ge,fn:en[Ge],args:We[gn]})}return Te(Qe)}executeOpTree(Xe){for(const en of Xe){const We=en.fn,ze=en.fnId,Qe=en.args;switch(ze|0){case _e.OPS.beginText:this.beginText();break;case _e.OPS.dependency:break;case _e.OPS.setLeading:this.setLeading(Qe);break;case _e.OPS.setLeadingMoveText:this.setLeadingMoveText(Qe[0],Qe[1]);break;case _e.OPS.setFont:this.setFont(Qe);break;case _e.OPS.showText:this.showText(Qe[0]);break;case _e.OPS.showSpacedText:this.showText(Qe[0]);break;case _e.OPS.endText:this.endText();break;case _e.OPS.moveText:this.moveText(Qe[0],Qe[1]);break;case _e.OPS.setCharSpacing:this.setCharSpacing(Qe[0]);break;case _e.OPS.setWordSpacing:this.setWordSpacing(Qe[0]);break;case _e.OPS.setHScale:this.setHScale(Qe[0]);break;case _e.OPS.setTextMatrix:this.setTextMatrix(Qe[0],Qe[1],Qe[2],Qe[3],Qe[4],Qe[5]);break;case _e.OPS.setTextRise:this.setTextRise(Qe[0]);break;case _e.OPS.setTextRenderingMode:this.setTextRenderingMode(Qe[0]);break;case _e.OPS.setLineWidth:this.setLineWidth(Qe[0]);break;case _e.OPS.setLineJoin:this.setLineJoin(Qe[0]);break;case _e.OPS.setLineCap:this.setLineCap(Qe[0]);break;case _e.OPS.setMiterLimit:this.setMiterLimit(Qe[0]);break;case _e.OPS.setFillRGBColor:this.setFillRGBColor(Qe[0],Qe[1],Qe[2]);break;case _e.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Qe[0],Qe[1],Qe[2]);break;case _e.OPS.setStrokeColorN:this.setStrokeColorN(Qe);break;case _e.OPS.setFillColorN:this.setFillColorN(Qe);break;case _e.OPS.shadingFill:this.shadingFill(Qe[0]);break;case _e.OPS.setDash:this.setDash(Qe[0],Qe[1]);break;case _e.OPS.setRenderingIntent:this.setRenderingIntent(Qe[0]);break;case _e.OPS.setFlatness:this.setFlatness(Qe[0]);break;case _e.OPS.setGState:this.setGState(Qe[0]);break;case _e.OPS.fill:this.fill();break;case _e.OPS.eoFill:this.eoFill();break;case _e.OPS.stroke:this.stroke();break;case _e.OPS.fillStroke:this.fillStroke();break;case _e.OPS.eoFillStroke:this.eoFillStroke();break;case _e.OPS.clip:this.clip("nonzero");break;case _e.OPS.eoClip:this.clip("evenodd");break;case _e.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case _e.OPS.paintImageXObject:this.paintImageXObject(Qe[0]);break;case _e.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Qe[0]);break;case _e.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Qe[0]);break;case _e.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Qe[0],Qe[1]);break;case _e.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case _e.OPS.closePath:this.closePath();break;case _e.OPS.closeStroke:this.closeStroke();break;case _e.OPS.closeFillStroke:this.closeFillStroke();break;case _e.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case _e.OPS.nextLine:this.nextLine();break;case _e.OPS.transform:this.transform(Qe[0],Qe[1],Qe[2],Qe[3],Qe[4],Qe[5]);break;case _e.OPS.constructPath:this.constructPath(Qe[0],Qe[1]);break;case _e.OPS.endPath:this.endPath();break;case 92:this.group(en.items);break;default:(0,_e.warn)(`Unimplemented operator ${We}`);break}}}setWordSpacing(Xe){this.current.wordSpacing=Xe}setCharSpacing(Xe){this.current.charSpacing=Xe}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Xe,en,We,ze,Qe,gn){const ke=this.current;ke.textMatrix=ke.lineMatrix=[Xe,en,We,ze,Qe,gn],ke.textMatrixScale=Math.hypot(Xe,en),ke.x=ke.lineX=0,ke.y=ke.lineY=0,ke.xcoords=[],ke.ycoords=[],ke.tspan=this.svgFactory.createElement("svg:tspan"),ke.tspan.setAttributeNS(null,"font-family",ke.fontFamily),ke.tspan.setAttributeNS(null,"font-size",`${Ve(ke.fontSize)}px`),ke.tspan.setAttributeNS(null,"y",Ve(-ke.y)),ke.txtElement=this.svgFactory.createElement("svg:text"),ke.txtElement.append(ke.tspan)}beginText(){const Xe=this.current;Xe.x=Xe.lineX=0,Xe.y=Xe.lineY=0,Xe.textMatrix=_e.IDENTITY_MATRIX,Xe.lineMatrix=_e.IDENTITY_MATRIX,Xe.textMatrixScale=1,Xe.tspan=this.svgFactory.createElement("svg:tspan"),Xe.txtElement=this.svgFactory.createElement("svg:text"),Xe.txtgrp=this.svgFactory.createElement("svg:g"),Xe.xcoords=[],Xe.ycoords=[]}moveText(Xe,en){const We=this.current;We.x=We.lineX+=Xe,We.y=We.lineY+=en,We.xcoords=[],We.ycoords=[],We.tspan=this.svgFactory.createElement("svg:tspan"),We.tspan.setAttributeNS(null,"font-family",We.fontFamily),We.tspan.setAttributeNS(null,"font-size",`${Ve(We.fontSize)}px`),We.tspan.setAttributeNS(null,"y",Ve(-We.y))}showText(Xe){const en=this.current,We=en.font,ze=en.fontSize;if(ze===0)return;const Qe=en.fontSizeScale,gn=en.charSpacing,ke=en.wordSpacing,Ge=en.fontDirection,nn=en.textHScale*Ge,dn=We.vertical,wn=dn?1:-1,Sn=We.defaultVMetrics,yn=ze*en.fontMatrix[0];let Pn=0;for(const Nn of Xe){if(Nn===null){Pn+=Ge*ke;continue}else if(typeof Nn=="number"){Pn+=wn*Nn*ze/1e3;continue}const je=(Nn.isSpace?ke:0)+gn,Ie=Nn.fontChar;let Oe,Ze,sn=Nn.width;if(dn){let hn;const An=Nn.vmetric||Sn;hn=Nn.vmetric?An[1]:sn*.5,hn=-hn*yn;const Mn=An[2]*yn;sn=An?-An[0]:sn,Oe=hn/Qe,Ze=(Pn+Mn)/Qe}else Oe=Pn/Qe,Ze=0;(Nn.isInFont||We.missingFile)&&(en.xcoords.push(en.x+Oe),dn&&en.ycoords.push(-en.y+Ze),en.tspan.textContent+=Ie);const on=dn?sn*yn-je*Ge:sn*yn+je*Ge;Pn+=on}en.tspan.setAttributeNS(null,"x",en.xcoords.map(Ve).join(" ")),dn?en.tspan.setAttributeNS(null,"y",en.ycoords.map(Ve).join(" ")):en.tspan.setAttributeNS(null,"y",Ve(-en.y)),dn?en.y-=Pn:en.x+=Pn*nn,en.tspan.setAttributeNS(null,"font-family",en.fontFamily),en.tspan.setAttributeNS(null,"font-size",`${Ve(en.fontSize)}px`),en.fontStyle!==Se.fontStyle&&en.tspan.setAttributeNS(null,"font-style",en.fontStyle),en.fontWeight!==Se.fontWeight&&en.tspan.setAttributeNS(null,"font-weight",en.fontWeight);const un=en.textRenderingMode&_e.TextRenderingMode.FILL_STROKE_MASK;if(un===_e.TextRenderingMode.FILL||un===_e.TextRenderingMode.FILL_STROKE?(en.fillColor!==Se.fillColor&&en.tspan.setAttributeNS(null,"fill",en.fillColor),en.fillAlpha<1&&en.tspan.setAttributeNS(null,"fill-opacity",en.fillAlpha)):en.textRenderingMode===_e.TextRenderingMode.ADD_TO_PATH?en.tspan.setAttributeNS(null,"fill","transparent"):en.tspan.setAttributeNS(null,"fill","none"),un===_e.TextRenderingMode.STROKE||un===_e.TextRenderingMode.FILL_STROKE){const Nn=1/(en.textMatrixScale||1);this._setStrokeAttributes(en.tspan,Nn)}let _n=en.textMatrix;en.textRise!==0&&(_n=_n.slice(),_n[5]+=en.textRise),en.txtElement.setAttributeNS(null,"transform",`${$e(_n)} scale(${Ve(nn)}, -1)`),en.txtElement.setAttributeNS(Ee,"xml:space","preserve"),en.txtElement.append(en.tspan),en.txtgrp.append(en.txtElement),this._ensureTransformGroup().append(en.txtElement)}setLeadingMoveText(Xe,en){this.setLeading(-en),this.moveText(Xe,en)}addFontStyle(Xe){if(!Xe.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const en=Me(Xe.data,Xe.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Xe.loadedName}"; src: url(${en}); }
`}setFont(Xe){const en=this.current,We=this.commonObjs.get(Xe[0]);let ze=Xe[1];en.font=We,this.embedFonts&&!We.missingFile&&!this.embeddedFonts[We.loadedName]&&(this.addFontStyle(We),this.embeddedFonts[We.loadedName]=We),en.fontMatrix=We.fontMatrix||_e.FONT_IDENTITY_MATRIX;let Qe="normal";We.black?Qe="900":We.bold&&(Qe="bold");const gn=We.italic?"italic":"normal";ze<0?(ze=-ze,en.fontDirection=-1):en.fontDirection=1,en.fontSize=ze,en.fontFamily=We.loadedName,en.fontWeight=Qe,en.fontStyle=gn,en.tspan=this.svgFactory.createElement("svg:tspan"),en.tspan.setAttributeNS(null,"y",Ve(-en.y)),en.xcoords=[],en.ycoords=[]}endText(){var en;const Xe=this.current;Xe.textRenderingMode&_e.TextRenderingMode.ADD_TO_PATH_FLAG&&((en=Xe.txtElement)!=null&&en.hasChildNodes())&&(Xe.element=Xe.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Xe){Xe>0&&(this.current.lineWidth=Xe)}setLineCap(Xe){this.current.lineCap=Ce[Xe]}setLineJoin(Xe){this.current.lineJoin=De[Xe]}setMiterLimit(Xe){this.current.miterLimit=Xe}setStrokeAlpha(Xe){this.current.strokeAlpha=Xe}setStrokeRGBColor(Xe,en,We){this.current.strokeColor=_e.Util.makeHexColor(Xe,en,We)}setFillAlpha(Xe){this.current.fillAlpha=Xe}setFillRGBColor(Xe,en,We){this.current.fillColor=_e.Util.makeHexColor(Xe,en,We),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Xe){this.current.strokeColor=this._makeColorN_Pattern(Xe)}setFillColorN(Xe){this.current.fillColor=this._makeColorN_Pattern(Xe)}shadingFill(Xe){const{width:en,height:We}=this.viewport,ze=_e.Util.inverseTransform(this.transformMatrix),[Qe,gn,ke,Ge]=_e.Util.getAxialAlignedBoundingBox([0,0,en,We],ze),nn=this.svgFactory.createElement("svg:rect");nn.setAttributeNS(null,"x",Qe),nn.setAttributeNS(null,"y",gn),nn.setAttributeNS(null,"width",ke-Qe),nn.setAttributeNS(null,"height",Ge-gn),nn.setAttributeNS(null,"fill",this._makeShadingPattern(Xe)),this.current.fillAlpha<1&&nn.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(nn)}_makeColorN_Pattern(Xe){return Xe[0]==="TilingPattern"?this._makeTilingPattern(Xe):this._makeShadingPattern(Xe)}_makeTilingPattern(Xe){const en=Xe[1],We=Xe[2],ze=Xe[3]||_e.IDENTITY_MATRIX,[Qe,gn,ke,Ge]=Xe[4],nn=Xe[5],dn=Xe[6],wn=Xe[7],Sn=`shading${Ye++}`,[yn,Pn,un,_n]=_e.Util.normalizeRect([..._e.Util.applyTransform([Qe,gn],ze),..._e.Util.applyTransform([ke,Ge],ze)]),[Nn,je]=_e.Util.singularValueDecompose2dScale(ze),Ie=nn*Nn,Oe=dn*je,Ze=this.svgFactory.createElement("svg:pattern");Ze.setAttributeNS(null,"id",Sn),Ze.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Ze.setAttributeNS(null,"width",Ie),Ze.setAttributeNS(null,"height",Oe),Ze.setAttributeNS(null,"x",`${yn}`),Ze.setAttributeNS(null,"y",`${Pn}`);const sn=this.svg,on=this.transformMatrix,hn=this.current.fillColor,An=this.current.strokeColor,Mn=this.svgFactory.create(un-yn,_n-Pn);if(this.svg=Mn,this.transformMatrix=ze,wn===2){const In=_e.Util.makeHexColor(...en);this.current.fillColor=In,this.current.strokeColor=In}return this.executeOpTree(this.convertOpList(We)),this.svg=sn,this.transformMatrix=on,this.current.fillColor=hn,this.current.strokeColor=An,Ze.append(Mn.childNodes[0]),this.defs.append(Ze),`url(#${Sn})`}_makeShadingPattern(Xe){switch(typeof Xe=="string"&&(Xe=this.objs.get(Xe)),Xe[0]){case"RadialAxial":const en=`shading${Ye++}`,We=Xe[3];let ze;switch(Xe[1]){case"axial":const Qe=Xe[4],gn=Xe[5];ze=this.svgFactory.createElement("svg:linearGradient"),ze.setAttributeNS(null,"id",en),ze.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ze.setAttributeNS(null,"x1",Qe[0]),ze.setAttributeNS(null,"y1",Qe[1]),ze.setAttributeNS(null,"x2",gn[0]),ze.setAttributeNS(null,"y2",gn[1]);break;case"radial":const ke=Xe[4],Ge=Xe[5],nn=Xe[6],dn=Xe[7];ze=this.svgFactory.createElement("svg:radialGradient"),ze.setAttributeNS(null,"id",en),ze.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ze.setAttributeNS(null,"cx",Ge[0]),ze.setAttributeNS(null,"cy",Ge[1]),ze.setAttributeNS(null,"r",dn),ze.setAttributeNS(null,"fx",ke[0]),ze.setAttributeNS(null,"fy",ke[1]),ze.setAttributeNS(null,"fr",nn);break;default:throw new Error(`Unknown RadialAxial type: ${Xe[1]}`)}for(const Qe of We){const gn=this.svgFactory.createElement("svg:stop");gn.setAttributeNS(null,"offset",Qe[0]),gn.setAttributeNS(null,"stop-color",Qe[1]),ze.append(gn)}return this.defs.append(ze),`url(#${en})`;case"Mesh":return(0,_e.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Xe[0]}`)}}setDash(Xe,en){this.current.dashArray=Xe,this.current.dashPhase=en}constructPath(Xe,en){const We=this.current;let ze=We.x,Qe=We.y,gn=[],ke=0;for(const Ge of Xe)switch(Ge|0){case _e.OPS.rectangle:ze=en[ke++],Qe=en[ke++];const nn=en[ke++],dn=en[ke++],wn=ze+nn,Sn=Qe+dn;gn.push("M",Ve(ze),Ve(Qe),"L",Ve(wn),Ve(Qe),"L",Ve(wn),Ve(Sn),"L",Ve(ze),Ve(Sn),"Z");break;case _e.OPS.moveTo:ze=en[ke++],Qe=en[ke++],gn.push("M",Ve(ze),Ve(Qe));break;case _e.OPS.lineTo:ze=en[ke++],Qe=en[ke++],gn.push("L",Ve(ze),Ve(Qe));break;case _e.OPS.curveTo:ze=en[ke+4],Qe=en[ke+5],gn.push("C",Ve(en[ke]),Ve(en[ke+1]),Ve(en[ke+2]),Ve(en[ke+3]),Ve(ze),Ve(Qe)),ke+=6;break;case _e.OPS.curveTo2:gn.push("C",Ve(ze),Ve(Qe),Ve(en[ke]),Ve(en[ke+1]),Ve(en[ke+2]),Ve(en[ke+3])),ze=en[ke+2],Qe=en[ke+3],ke+=4;break;case _e.OPS.curveTo3:ze=en[ke+2],Qe=en[ke+3],gn.push("C",Ve(en[ke]),Ve(en[ke+1]),Ve(ze),Ve(Qe),Ve(ze),Ve(Qe)),ke+=4;break;case _e.OPS.closePath:gn.push("Z");break}gn=gn.join(" "),We.path&&Xe.length>0&&Xe[0]!==_e.OPS.rectangle&&Xe[0]!==_e.OPS.moveTo?gn=We.path.getAttributeNS(null,"d")+gn:(We.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(We.path)),We.path.setAttributeNS(null,"d",gn),We.path.setAttributeNS(null,"fill","none"),We.element=We.path,We.setCurrentPoint(ze,Qe)}endPath(){const Xe=this.current;if(Xe.path=null,!this.pendingClip)return;if(!Xe.element){this.pendingClip=null;return}const en=`clippath${Ke++}`,We=this.svgFactory.createElement("svg:clipPath");We.setAttributeNS(null,"id",en),We.setAttributeNS(null,"transform",$e(this.transformMatrix));const ze=Xe.element.cloneNode(!0);if(this.pendingClip==="evenodd"?ze.setAttributeNS(null,"clip-rule","evenodd"):ze.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,We.append(ze),this.defs.append(We),Xe.activeClipUrl){Xe.clipGroup=null;for(const Qe of this.extraStack)Qe.clipGroup=null;We.setAttributeNS(null,"clip-path",Xe.activeClipUrl)}Xe.activeClipUrl=`url(#${en})`,this.tgrp=null}clip(Xe){this.pendingClip=Xe}closePath(){const Xe=this.current;if(Xe.path){const en=`${Xe.path.getAttributeNS(null,"d")}Z`;Xe.path.setAttributeNS(null,"d",en)}}setLeading(Xe){this.current.leading=-Xe}setTextRise(Xe){this.current.textRise=Xe}setTextRenderingMode(Xe){this.current.textRenderingMode=Xe}setHScale(Xe){this.current.textHScale=Xe/100}setRenderingIntent(Xe){}setFlatness(Xe){}setGState(Xe){for(const[en,We]of Xe)switch(en){case"LW":this.setLineWidth(We);break;case"LC":this.setLineCap(We);break;case"LJ":this.setLineJoin(We);break;case"ML":this.setMiterLimit(We);break;case"D":this.setDash(We[0],We[1]);break;case"RI":this.setRenderingIntent(We);break;case"FL":this.setFlatness(We);break;case"Font":this.setFont(We);break;case"CA":this.setStrokeAlpha(We);break;case"ca":this.setFillAlpha(We);break;default:(0,_e.warn)(`Unimplemented graphic state operator ${en}`);break}}fill(){const Xe=this.current;Xe.element&&(Xe.element.setAttributeNS(null,"fill",Xe.fillColor),Xe.element.setAttributeNS(null,"fill-opacity",Xe.fillAlpha),this.endPath())}stroke(){const Xe=this.current;Xe.element&&(this._setStrokeAttributes(Xe.element),Xe.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Xe,en=1){const We=this.current;let ze=We.dashArray;en!==1&&ze.length>0&&(ze=ze.map(function(Qe){return en*Qe})),Xe.setAttributeNS(null,"stroke",We.strokeColor),Xe.setAttributeNS(null,"stroke-opacity",We.strokeAlpha),Xe.setAttributeNS(null,"stroke-miterlimit",Ve(We.miterLimit)),Xe.setAttributeNS(null,"stroke-linecap",We.lineCap),Xe.setAttributeNS(null,"stroke-linejoin",We.lineJoin),Xe.setAttributeNS(null,"stroke-width",Ve(en*We.lineWidth)+"px"),Xe.setAttributeNS(null,"stroke-dasharray",ze.map(Ve).join(" ")),Xe.setAttributeNS(null,"stroke-dashoffset",Ve(en*We.dashPhase)+"px")}eoFill(){var Xe;(Xe=this.current.element)==null||Xe.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Xe;(Xe=this.current.element)==null||Xe.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Xe=this.svgFactory.createElement("svg:rect");Xe.setAttributeNS(null,"x","0"),Xe.setAttributeNS(null,"y","0"),Xe.setAttributeNS(null,"width","1px"),Xe.setAttributeNS(null,"height","1px"),Xe.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Xe)}paintImageXObject(Xe){const en=this.getObject(Xe);if(!en){(0,_e.warn)(`Dependent image with object ID ${Xe} is not ready yet`);return}this.paintInlineImageXObject(en)}paintInlineImageXObject(Xe,en){const We=Xe.width,ze=Xe.height,Qe=Ue(Xe,this.forceDataSchema,!!en),gn=this.svgFactory.createElement("svg:rect");gn.setAttributeNS(null,"x","0"),gn.setAttributeNS(null,"y","0"),gn.setAttributeNS(null,"width",Ve(We)),gn.setAttributeNS(null,"height",Ve(ze)),this.current.element=gn,this.clip("nonzero");const ke=this.svgFactory.createElement("svg:image");ke.setAttributeNS(Re,"xlink:href",Qe),ke.setAttributeNS(null,"x","0"),ke.setAttributeNS(null,"y",Ve(-ze)),ke.setAttributeNS(null,"width",Ve(We)+"px"),ke.setAttributeNS(null,"height",Ve(ze)+"px"),ke.setAttributeNS(null,"transform",`scale(${Ve(1/We)} ${Ve(-1/ze)})`),en?en.append(ke):this._ensureTransformGroup().append(ke)}paintImageMaskXObject(Xe){const en=this.getObject(Xe.data,Xe);if(en.bitmap){(0,_e.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const We=this.current,ze=en.width,Qe=en.height,gn=We.fillColor;We.maskId=`mask${Be++}`;const ke=this.svgFactory.createElement("svg:mask");ke.setAttributeNS(null,"id",We.maskId);const Ge=this.svgFactory.createElement("svg:rect");Ge.setAttributeNS(null,"x","0"),Ge.setAttributeNS(null,"y","0"),Ge.setAttributeNS(null,"width",Ve(ze)),Ge.setAttributeNS(null,"height",Ve(Qe)),Ge.setAttributeNS(null,"fill",gn),Ge.setAttributeNS(null,"mask",`url(#${We.maskId})`),this.defs.append(ke),this._ensureTransformGroup().append(Ge),this.paintInlineImageXObject(en,ke)}paintFormXObjectBegin(Xe,en){if(Array.isArray(Xe)&&Xe.length===6&&this.transform(Xe[0],Xe[1],Xe[2],Xe[3],Xe[4],Xe[5]),en){const We=en[2]-en[0],ze=en[3]-en[1],Qe=this.svgFactory.createElement("svg:rect");Qe.setAttributeNS(null,"x",en[0]),Qe.setAttributeNS(null,"y",en[1]),Qe.setAttributeNS(null,"width",Ve(We)),Qe.setAttributeNS(null,"height",Ve(ze)),this.current.element=Qe,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Xe){const en=this.svgFactory.create(Xe.width,Xe.height),We=this.svgFactory.createElement("svg:defs");en.append(We),this.defs=We;const ze=this.svgFactory.createElement("svg:g");return ze.setAttributeNS(null,"transform",$e(Xe.transform)),en.append(ze),this.svg=ze,en}_ensureClipGroup(){if(!this.current.clipGroup){const Xe=this.svgFactory.createElement("svg:g");Xe.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Xe),this.current.clipGroup=Xe}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",$e(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=an},(St,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class xe{static textContent(_e){const Se=[],Ee={items:Se,styles:Object.create(null)};function Re(Ce){var Ue;if(!Ce)return;let De=null;const Me=Ce.name;if(Me==="#text")De=Ce.value;else if(xe.shouldBuildText(Me))(Ue=Ce==null?void 0:Ce.attributes)!=null&&Ue.textContent?De=Ce.attributes.textContent:Ce.value&&(De=Ce.value);else return;if(De!==null&&Se.push({str:De}),!!Ce.children)for(const He of Ce.children)Re(He)}return Re(_e),Ee}static shouldBuildText(_e){return!(_e==="textarea"||_e==="input"||_e==="option"||_e==="select")}}t.XfaText=xe},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=$e,t.updateTextLayer=Ke;var e=xe(1),_e=xe(6);const Se=1e5,Ee=30,Re=.8,Ce=new Map;function De(Be,Ye){let an;if(Ye&&e.FeatureTest.isOffscreenCanvasSupported)an=new OffscreenCanvas(Be,Be).getContext("2d",{alpha:!1});else{const rn=document.createElement("canvas");rn.width=rn.height=Be,an=rn.getContext("2d",{alpha:!1})}return an}function Me(Be,Ye){const an=Ce.get(Be);if(an)return an;const rn=De(Ee,Ye);rn.font=`${Ee}px ${Be}`;const Xe=rn.measureText("");let en=Xe.fontBoundingBoxAscent,We=Math.abs(Xe.fontBoundingBoxDescent);if(en){const Qe=en/(en+We);return Ce.set(Be,Qe),rn.canvas.width=rn.canvas.height=0,Qe}rn.strokeStyle="red",rn.clearRect(0,0,Ee,Ee),rn.strokeText("g",0,0);let ze=rn.getImageData(0,0,Ee,Ee).data;We=0;for(let Qe=ze.length-1-3;Qe>=0;Qe-=4)if(ze[Qe]>0){We=Math.ceil(Qe/4/Ee);break}rn.clearRect(0,0,Ee,Ee),rn.strokeText("A",0,Ee),ze=rn.getImageData(0,0,Ee,Ee).data,en=0;for(let Qe=0,gn=ze.length;Qe<gn;Qe+=4)if(ze[Qe]>0){en=Ee-Math.floor(Qe/4/Ee);break}if(rn.canvas.width=rn.canvas.height=0,en){const Qe=en/(en+We);return Ce.set(Be,Qe),Qe}return Ce.set(Be,Re),Re}function Ue(Be,Ye,an){const rn=document.createElement("span"),Xe={angle:0,canvasWidth:0,hasText:Ye.str!=="",hasEOL:Ye.hasEOL,fontSize:0};Be._textDivs.push(rn);const en=e.Util.transform(Be._transform,Ye.transform);let We=Math.atan2(en[1],en[0]);const ze=an[Ye.fontName];ze.vertical&&(We+=Math.PI/2);const Qe=Math.hypot(en[2],en[3]),gn=Qe*Me(ze.fontFamily,Be._isOffscreenCanvasSupported);let ke,Ge;We===0?(ke=en[4],Ge=en[5]-gn):(ke=en[4]+gn*Math.sin(We),Ge=en[5]-gn*Math.cos(We));const nn="calc(var(--scale-factor)*",dn=rn.style;Be._container===Be._rootContainer?(dn.left=`${(100*ke/Be._pageWidth).toFixed(2)}%`,dn.top=`${(100*Ge/Be._pageHeight).toFixed(2)}%`):(dn.left=`${nn}${ke.toFixed(2)}px)`,dn.top=`${nn}${Ge.toFixed(2)}px)`),dn.fontSize=`${nn}${Qe.toFixed(2)}px)`,dn.fontFamily=ze.fontFamily,Xe.fontSize=Qe,rn.setAttribute("role","presentation"),rn.textContent=Ye.str,rn.dir=Ye.dir,Be._fontInspectorEnabled&&(rn.dataset.fontName=Ye.fontName),We!==0&&(Xe.angle=We*(180/Math.PI));let wn=!1;if(Ye.str.length>1)wn=!0;else if(Ye.str!==" "&&Ye.transform[0]!==Ye.transform[3]){const Sn=Math.abs(Ye.transform[0]),yn=Math.abs(Ye.transform[3]);Sn!==yn&&Math.max(Sn,yn)/Math.min(Sn,yn)>1.5&&(wn=!0)}wn&&(Xe.canvasWidth=ze.vertical?Ye.height:Ye.width),Be._textDivProperties.set(rn,Xe),Be._isReadableStream&&Be._layoutText(rn)}function He(Be){const{div:Ye,scale:an,properties:rn,ctx:Xe,prevFontSize:en,prevFontFamily:We}=Be,{style:ze}=Ye;let Qe="";if(rn.canvasWidth!==0&&rn.hasText){const{fontFamily:gn}=ze,{canvasWidth:ke,fontSize:Ge}=rn;(en!==Ge||We!==gn)&&(Xe.font=`${Ge*an}px ${gn}`,Be.prevFontSize=Ge,Be.prevFontFamily=gn);const{width:nn}=Xe.measureText(Ye.textContent);nn>0&&(Qe=`scaleX(${ke*an/nn})`)}rn.angle!==0&&(Qe=`rotate(${rn.angle}deg) ${Qe}`),Qe.length>0&&(ze.transform=Qe)}function Te(Be){if(Be._canceled)return;const Ye=Be._textDivs,an=Be._capability;if(Ye.length>Se){an.resolve();return}if(!Be._isReadableStream)for(const Xe of Ye)Be._layoutText(Xe);an.resolve()}class Ve{constructor({textContentSource:Ye,container:an,viewport:rn,textDivs:Xe,textDivProperties:en,textContentItemsStr:We,isOffscreenCanvasSupported:ze}){var nn;this._textContentSource=Ye,this._isReadableStream=Ye instanceof ReadableStream,this._container=this._rootContainer=an,this._textDivs=Xe||[],this._textContentItemsStr=We||[],this._isOffscreenCanvasSupported=ze,this._fontInspectorEnabled=!!((nn=globalThis.FontInspector)!=null&&nn.enabled),this._reader=null,this._textDivProperties=en||new WeakMap,this._canceled=!1,this._capability=new e.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:rn.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:De(0,ze)};const{pageWidth:Qe,pageHeight:gn,pageX:ke,pageY:Ge}=rn.rawDims;this._transform=[1,0,0,-1,-ke,Ge+gn],this._pageWidth=Qe,this._pageHeight=gn,(0,_e.setLayerDimensions)(an,rn),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new e.AbortException("TextLayer task cancelled."))}_processItems(Ye,an){for(const rn of Ye){if(rn.str===void 0){if(rn.type==="beginMarkedContentProps"||rn.type==="beginMarkedContent"){const Xe=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),rn.id!==null&&this._container.setAttribute("id",`${rn.id}`),Xe.append(this._container)}else rn.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(rn.str),Ue(this,rn,an)}}_layoutText(Ye){const an=this._layoutTextParams.properties=this._textDivProperties.get(Ye);if(this._layoutTextParams.div=Ye,He(this._layoutTextParams),an.hasText&&this._container.append(Ye),an.hasEOL){const rn=document.createElement("br");rn.setAttribute("role","presentation"),this._container.append(rn)}}_render(){const Ye=new e.PromiseCapability;let an=Object.create(null);if(this._isReadableStream){const rn=()=>{this._reader.read().then(({value:Xe,done:en})=>{if(en){Ye.resolve();return}Object.assign(an,Xe.styles),this._processItems(Xe.items,an),rn()},Ye.reject)};this._reader=this._textContentSource.getReader(),rn()}else if(this._textContentSource){const{items:rn,styles:Xe}=this._textContentSource;this._processItems(rn,Xe),Ye.resolve()}else throw new Error('No "textContentSource" parameter specified.');Ye.promise.then(()=>{an=null,Te(this)},this._capability.reject)}}t.TextLayerRenderTask=Ve;function $e(Be){!Be.textContentSource&&(Be.textContent||Be.textContentStream)&&((0,_e.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Be.textContentSource=Be.textContent||Be.textContentStream);const{container:Ye,viewport:an}=Be,rn=getComputedStyle(Ye),Xe=rn.getPropertyValue("visibility"),en=parseFloat(rn.getPropertyValue("--scale-factor"));Xe==="visible"&&(!en||Math.abs(en-an.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const We=new Ve(Be);return We._render(),We}function Ke({container:Be,viewport:Ye,textDivs:an,textDivProperties:rn,isOffscreenCanvasSupported:Xe,mustRotate:en=!0,mustRescale:We=!0}){if(en&&(0,_e.setLayerDimensions)(Be,{rotation:Ye.rotation}),We){const ze=De(0,Xe),gn={prevFontSize:null,prevFontFamily:null,div:null,scale:Ye.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ze};for(const ke of an)gn.properties=rn.get(ke),gn.div=ke,He(gn)}}},(St,t,xe)=>{var Me,Ue,He,Te,Ve,$e,Ke,Be,Ye,an,rn,xc,rl,wc,Ac;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var e=xe(1),_e=xe(4),Se=xe(28),Ee=xe(33),Re=xe(6),Ce=xe(34);const Qe=class Qe{constructor({uiManager:ke,pageIndex:Ge,div:nn,accessibilityManager:dn,annotationLayer:wn,viewport:Sn,l10n:yn}){er(this,rn);er(this,Me);er(this,Ue,!1);er(this,He,null);er(this,Te,this.pointerup.bind(this));er(this,Ve,this.pointerdown.bind(this));er(this,$e,new Map);er(this,Ke,!1);er(this,Be,!1);er(this,Ye,!1);er(this,an);const Pn=[Se.FreeTextEditor,Ee.InkEditor,Ce.StampEditor];if(!Qe._initialized){Qe._initialized=!0;for(const un of Pn)un.initialize(yn)}ke.registerEditorTypes(Pn),rr(this,an,ke),this.pageIndex=Ge,this.div=nn,rr(this,Me,dn),rr(this,He,wn),this.viewport=Sn,Je(this,an).addLayer(this)}get isEmpty(){return Je(this,$e).size===0}updateToolbar(ke){Je(this,an).updateToolbar(ke)}updateMode(ke=Je(this,an).getMode()){Vn(this,rn,Ac).call(this),ke===e.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ke!==e.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",ke===e.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",ke===e.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",ke===e.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(ke){if(!ke&&Je(this,an).getMode()!==e.AnnotationEditorType.INK)return;if(!ke){for(const nn of Je(this,$e).values())if(nn.isEmpty()){nn.setInBackground();return}}Vn(this,rn,rl).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(ke){Je(this,an).setEditingState(ke)}addCommands(ke){Je(this,an).addCommands(ke)}enable(){this.div.style.pointerEvents="auto";const ke=new Set;for(const nn of Je(this,$e).values())nn.enableEditing(),nn.annotationElementId&&ke.add(nn.annotationElementId);if(!Je(this,He))return;const Ge=Je(this,He).getEditableAnnotations();for(const nn of Ge){if(nn.hide(),Je(this,an).isDeletedAnnotationElement(nn.data.id)||ke.has(nn.data.id))continue;const dn=this.deserialize(nn);dn&&(this.addOrRebuild(dn),dn.enableEditing())}}disable(){var Ge;rr(this,Ye,!0),this.div.style.pointerEvents="none";const ke=new Set;for(const nn of Je(this,$e).values()){if(nn.disableEditing(),!nn.annotationElementId||nn.serialize()!==null){ke.add(nn.annotationElementId);continue}(Ge=this.getEditableAnnotation(nn.annotationElementId))==null||Ge.show(),nn.remove()}if(Je(this,He)){const nn=Je(this,He).getEditableAnnotations();for(const dn of nn){const{id:wn}=dn.data;ke.has(wn)||Je(this,an).isDeletedAnnotationElement(wn)||dn.show()}}Vn(this,rn,Ac).call(this),this.isEmpty&&(this.div.hidden=!0),rr(this,Ye,!1)}getEditableAnnotation(ke){var Ge;return((Ge=Je(this,He))==null?void 0:Ge.getEditableAnnotation(ke))||null}setActiveEditor(ke){Je(this,an).getActive()!==ke&&Je(this,an).setActiveEditor(ke)}enableClick(){this.div.addEventListener("pointerdown",Je(this,Ve)),this.div.addEventListener("pointerup",Je(this,Te))}disableClick(){this.div.removeEventListener("pointerdown",Je(this,Ve)),this.div.removeEventListener("pointerup",Je(this,Te))}attach(ke){Je(this,$e).set(ke.id,ke);const{annotationElementId:Ge}=ke;Ge&&Je(this,an).isDeletedAnnotationElement(Ge)&&Je(this,an).removeDeletedAnnotationElement(ke)}detach(ke){var Ge;Je(this,$e).delete(ke.id),(Ge=Je(this,Me))==null||Ge.removePointerInTextLayer(ke.contentDiv),!Je(this,Ye)&&ke.annotationElementId&&Je(this,an).addDeletedAnnotationElement(ke)}remove(ke){this.detach(ke),Je(this,an).removeEditor(ke),ke.div.contains(document.activeElement)&&setTimeout(()=>{Je(this,an).focusMainContainer()},0),ke.div.remove(),ke.isAttachedToDOM=!1,Je(this,Be)||this.addInkEditorIfNeeded(!1)}changeParent(ke){var Ge;ke.parent!==this&&(ke.annotationElementId&&(Je(this,an).addDeletedAnnotationElement(ke.annotationElementId),_e.AnnotationEditor.deleteAnnotationElement(ke),ke.annotationElementId=null),this.attach(ke),(Ge=ke.parent)==null||Ge.detach(ke),ke.setParent(this),ke.div&&ke.isAttachedToDOM&&(ke.div.remove(),this.div.append(ke.div)))}add(ke){if(this.changeParent(ke),Je(this,an).addEditor(ke),this.attach(ke),!ke.isAttachedToDOM){const Ge=ke.render();this.div.append(Ge),ke.isAttachedToDOM=!0}ke.fixAndSetPosition(),ke.onceAdded(),Je(this,an).addToAnnotationStorage(ke)}moveEditorInDOM(ke){var nn;if(!ke.isAttachedToDOM)return;const{activeElement:Ge}=document;ke.div.contains(Ge)&&(ke._focusEventsAllowed=!1,setTimeout(()=>{ke.div.contains(document.activeElement)?ke._focusEventsAllowed=!0:(ke.div.addEventListener("focusin",()=>{ke._focusEventsAllowed=!0},{once:!0}),Ge.focus())},0)),ke._structTreeParentId=(nn=Je(this,Me))==null?void 0:nn.moveElementInDOM(this.div,ke.div,ke.contentDiv,!0)}addOrRebuild(ke){ke.needsToBeRebuilt()?ke.rebuild():this.add(ke)}addUndoableEditor(ke){const Ge=()=>ke._uiManager.rebuild(ke),nn=()=>{ke.remove()};this.addCommands({cmd:Ge,undo:nn,mustExec:!1})}getNextId(){return Je(this,an).getId()}pasteEditor(ke,Ge){Je(this,an).updateToolbar(ke),Je(this,an).updateMode(ke);const{offsetX:nn,offsetY:dn}=Vn(this,rn,wc).call(this),wn=this.getNextId(),Sn=Vn(this,rn,xc).call(this,{parent:this,id:wn,x:nn,y:dn,uiManager:Je(this,an),isCentered:!0,...Ge});Sn&&this.add(Sn)}deserialize(ke){switch(ke.annotationType??ke.annotationEditorType){case e.AnnotationEditorType.FREETEXT:return Se.FreeTextEditor.deserialize(ke,this,Je(this,an));case e.AnnotationEditorType.INK:return Ee.InkEditor.deserialize(ke,this,Je(this,an));case e.AnnotationEditorType.STAMP:return Ce.StampEditor.deserialize(ke,this,Je(this,an))}return null}addNewEditor(){Vn(this,rn,rl).call(this,Vn(this,rn,wc).call(this),!0)}setSelected(ke){Je(this,an).setSelected(ke)}toggleSelected(ke){Je(this,an).toggleSelected(ke)}isSelected(ke){return Je(this,an).isSelected(ke)}unselect(ke){Je(this,an).unselect(ke)}pointerup(ke){const{isMac:Ge}=e.FeatureTest.platform;if(!(ke.button!==0||ke.ctrlKey&&Ge)&&ke.target===this.div&&Je(this,Ke)){if(rr(this,Ke,!1),!Je(this,Ue)){rr(this,Ue,!0);return}if(Je(this,an).getMode()===e.AnnotationEditorType.STAMP){Je(this,an).unselectAll();return}Vn(this,rn,rl).call(this,ke,!1)}}pointerdown(ke){if(Je(this,Ke)){rr(this,Ke,!1);return}const{isMac:Ge}=e.FeatureTest.platform;if(ke.button!==0||ke.ctrlKey&&Ge||ke.target!==this.div)return;rr(this,Ke,!0);const nn=Je(this,an).getActive();rr(this,Ue,!nn||nn.isEmpty())}findNewParent(ke,Ge,nn){const dn=Je(this,an).findParent(Ge,nn);return dn===null||dn===this?!1:(dn.changeParent(ke),!0)}destroy(){var ke,Ge;((ke=Je(this,an).getActive())==null?void 0:ke.parent)===this&&(Je(this,an).commitOrRemove(),Je(this,an).setActiveEditor(null));for(const nn of Je(this,$e).values())(Ge=Je(this,Me))==null||Ge.removePointerInTextLayer(nn.contentDiv),nn.setParent(null),nn.isAttachedToDOM=!1,nn.div.remove();this.div=null,Je(this,$e).clear(),Je(this,an).removeLayer(this)}render({viewport:ke}){this.viewport=ke,(0,Re.setLayerDimensions)(this.div,ke);for(const Ge of Je(this,an).getEditors(this.pageIndex))this.add(Ge);this.updateMode()}update({viewport:ke}){Je(this,an).commitOrRemove(),this.viewport=ke,(0,Re.setLayerDimensions)(this.div,{rotation:ke.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:ke,pageHeight:Ge}=this.viewport.rawDims;return[ke,Ge]}};Me=new WeakMap,Ue=new WeakMap,He=new WeakMap,Te=new WeakMap,Ve=new WeakMap,$e=new WeakMap,Ke=new WeakMap,Be=new WeakMap,Ye=new WeakMap,an=new WeakMap,rn=new WeakSet,xc=function(ke){switch(Je(this,an).getMode()){case e.AnnotationEditorType.FREETEXT:return new Se.FreeTextEditor(ke);case e.AnnotationEditorType.INK:return new Ee.InkEditor(ke);case e.AnnotationEditorType.STAMP:return new Ce.StampEditor(ke)}return null},rl=function(ke,Ge){const nn=this.getNextId(),dn=Vn(this,rn,xc).call(this,{parent:this,id:nn,x:ke.offsetX,y:ke.offsetY,uiManager:Je(this,an),isCentered:Ge});return dn&&this.add(dn),dn},wc=function(){const{x:ke,y:Ge,width:nn,height:dn}=this.div.getBoundingClientRect(),wn=Math.max(0,ke),Sn=Math.max(0,Ge),yn=Math.min(window.innerWidth,ke+nn),Pn=Math.min(window.innerHeight,Ge+dn),un=(wn+yn)/2-ke,_n=(Sn+Pn)/2-Ge,[Nn,je]=this.viewport.rotation%180===0?[un,_n]:[_n,un];return{offsetX:Nn,offsetY:je}},Ac=function(){rr(this,Be,!0);for(const ke of Je(this,$e).values())ke.isEmpty()&&ke.remove();rr(this,Be,!1)},oi(Qe,"_initialized",!1);let De=Qe;t.AnnotationEditorLayer=De},(St,t,xe)=>{var Ce,De,Me,Ue,He,Te,Ve,$e,Ke,Be,Au,_u,Su,ro,_c,Eu,Sc;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var e=xe(1),_e=xe(5),Se=xe(4),Ee=xe(29);const Qe=class Qe extends Se.AnnotationEditor{constructor(Ge){super({...Ge,name:"freeTextEditor"});er(this,Be);er(this,Ce,this.editorDivBlur.bind(this));er(this,De,this.editorDivFocus.bind(this));er(this,Me,this.editorDivInput.bind(this));er(this,Ue,this.editorDivKeydown.bind(this));er(this,He);er(this,Te,"");er(this,Ve,`${this.id}-editor`);er(this,$e);er(this,Ke,null);rr(this,He,Ge.color||Qe._defaultColor||Se.AnnotationEditor._defaultLineColor),rr(this,$e,Ge.fontSize||Qe._defaultFontSize)}static get _keyboardManager(){const Ge=Qe.prototype,nn=Sn=>Sn.isEmpty(),dn=_e.AnnotationEditorUIManager.TRANSLATE_SMALL,wn=_e.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,e.shadow)(this,"_keyboardManager",new _e.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Ge.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Ge.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Ge._translateEmpty,{args:[-dn,0],checker:nn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ge._translateEmpty,{args:[-wn,0],checker:nn}],[["ArrowRight","mac+ArrowRight"],Ge._translateEmpty,{args:[dn,0],checker:nn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ge._translateEmpty,{args:[wn,0],checker:nn}],[["ArrowUp","mac+ArrowUp"],Ge._translateEmpty,{args:[0,-dn],checker:nn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ge._translateEmpty,{args:[0,-wn],checker:nn}],[["ArrowDown","mac+ArrowDown"],Ge._translateEmpty,{args:[0,dn],checker:nn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ge._translateEmpty,{args:[0,wn],checker:nn}]]))}static initialize(Ge){Se.AnnotationEditor.initialize(Ge,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const nn=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(nn.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Ge,nn){switch(Ge){case e.AnnotationEditorParamsType.FREETEXT_SIZE:Qe._defaultFontSize=nn;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:Qe._defaultColor=nn;break}}updateParams(Ge,nn){switch(Ge){case e.AnnotationEditorParamsType.FREETEXT_SIZE:Vn(this,Be,Au).call(this,nn);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:Vn(this,Be,_u).call(this,nn);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,Qe._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,Qe._defaultColor||Se.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,Je(this,$e)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,Je(this,He)]]}_translateEmpty(Ge,nn){this._uiManager.translateSelectedEditors(Ge,nn,!0)}getInitialTranslation(){const Ge=this.parentScale;return[-Qe._internalPadding*Ge,-(Qe._internalPadding+Je(this,$e))*Ge]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",Je(this,Ue)),this.editorDiv.addEventListener("focus",Je(this,De)),this.editorDiv.addEventListener("blur",Je(this,Ce)),this.editorDiv.addEventListener("input",Je(this,Me)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Je(this,Ve)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",Je(this,Ue)),this.editorDiv.removeEventListener("focus",Je(this,De)),this.editorDiv.removeEventListener("blur",Je(this,Ce)),this.editorDiv.removeEventListener("input",Je(this,Me)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Ge){this._focusEventsAllowed&&(super.focusin(Ge),Ge.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Ge;if(this.width){Vn(this,Be,Sc).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Ge=this._initialOptions)!=null&&Ge.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Ge=Je(this,Te),nn=rr(this,Te,Vn(this,Be,Su).call(this).trimEnd());if(Ge===nn)return;const dn=wn=>{if(rr(this,Te,wn),!wn){this.remove();return}Vn(this,Be,_c).call(this),this._uiManager.rebuild(this),Vn(this,Be,ro).call(this)};this.addCommands({cmd:()=>{dn(nn)},undo:()=>{dn(Ge)},mustExec:!1}),Vn(this,Be,ro).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Ge){this.enterInEditMode()}keydown(Ge){Ge.target===this.div&&Ge.key==="Enter"&&(this.enterInEditMode(),Ge.preventDefault())}editorDivKeydown(Ge){Qe._keyboardManager.exec(this,Ge)}editorDivFocus(Ge){this.isEditing=!0}editorDivBlur(Ge){this.isEditing=!1}editorDivInput(Ge){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Ge,nn;this.width&&(Ge=this.x,nn=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Je(this,Ve)),this.enableEditing(),Se.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(wn=>{var Sn;return(Sn=this.editorDiv)==null?void 0:Sn.setAttribute("aria-label",wn)}),Se.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(wn=>{var Sn;return(Sn=this.editorDiv)==null?void 0:Sn.setAttribute("default-content",wn)}),this.editorDiv.contentEditable=!0;const{style:dn}=this.editorDiv;if(dn.fontSize=`calc(${Je(this,$e)}px * var(--scale-factor))`,dn.color=Je(this,He),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_e.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[wn,Sn]=this.parentDimensions;if(this.annotationElementId){const{position:yn}=Je(this,Ke);let[Pn,un]=this.getInitialTranslation();[Pn,un]=this.pageTranslationToScreen(Pn,un);const[_n,Nn]=this.pageDimensions,[je,Ie]=this.pageTranslation;let Oe,Ze;switch(this.rotation){case 0:Oe=Ge+(yn[0]-je)/_n,Ze=nn+this.height-(yn[1]-Ie)/Nn;break;case 90:Oe=Ge+(yn[0]-je)/_n,Ze=nn-(yn[1]-Ie)/Nn,[Pn,un]=[un,-Pn];break;case 180:Oe=Ge-this.width+(yn[0]-je)/_n,Ze=nn-(yn[1]-Ie)/Nn,[Pn,un]=[-Pn,-un];break;case 270:Oe=Ge+(yn[0]-je-this.height*Nn)/_n,Ze=nn+(yn[1]-Ie-this.width*_n)/Nn,[Pn,un]=[-un,Pn];break}this.setAt(Oe*wn,Ze*Sn,Pn,un)}else this.setAt(Ge*wn,nn*Sn,this.width*wn,this.height*Sn);Vn(this,Be,_c).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Ge,nn,dn){let wn=null;if(Ge instanceof Ee.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:yn,fontColor:Pn},rect:un,rotation:_n,id:Nn},textContent:je,textPosition:Ie,parent:{page:{pageNumber:Oe}}}=Ge;if(!je||je.length===0)return null;wn=Ge={annotationType:e.AnnotationEditorType.FREETEXT,color:Array.from(Pn),fontSize:yn,value:je.join(`
`),position:Ie,pageIndex:Oe-1,rect:un,rotation:_n,id:Nn,deleted:!1}}const Sn=super.deserialize(Ge,nn,dn);return rr(Sn,$e,Ge.fontSize),rr(Sn,He,e.Util.makeHexColor(...Ge.color)),rr(Sn,Te,Ge.value),Sn.annotationElementId=Ge.id||null,rr(Sn,Ke,wn),Sn}serialize(Ge=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const nn=Qe._internalPadding*this.parentScale,dn=this.getRect(nn,nn),wn=Se.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Je(this,He)),Sn={annotationType:e.AnnotationEditorType.FREETEXT,color:wn,fontSize:Je(this,$e),value:Je(this,Te),pageIndex:this.pageIndex,rect:dn,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Ge?Sn:this.annotationElementId&&!Vn(this,Be,Eu).call(this,Sn)?null:(Sn.id=this.annotationElementId,Sn)}};Ce=new WeakMap,De=new WeakMap,Me=new WeakMap,Ue=new WeakMap,He=new WeakMap,Te=new WeakMap,Ve=new WeakMap,$e=new WeakMap,Ke=new WeakMap,Be=new WeakSet,Au=function(Ge){const nn=wn=>{this.editorDiv.style.fontSize=`calc(${wn}px * var(--scale-factor))`,this.translate(0,-(wn-Je(this,$e))*this.parentScale),rr(this,$e,wn),Vn(this,Be,ro).call(this)},dn=Je(this,$e);this.addCommands({cmd:()=>{nn(Ge)},undo:()=>{nn(dn)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},_u=function(Ge){const nn=Je(this,He);this.addCommands({cmd:()=>{rr(this,He,this.editorDiv.style.color=Ge)},undo:()=>{rr(this,He,this.editorDiv.style.color=nn)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Su=function(){const Ge=this.editorDiv.getElementsByTagName("div");if(Ge.length===0)return this.editorDiv.innerText;const nn=[];for(const dn of Ge)nn.push(dn.innerText.replace(/\r\n?|\n/,""));return nn.join(`
`)},ro=function(){const[Ge,nn]=this.parentDimensions;let dn;if(this.isAttachedToDOM)dn=this.div.getBoundingClientRect();else{const{currentLayer:wn,div:Sn}=this,yn=Sn.style.display;Sn.style.display="hidden",wn.div.append(this.div),dn=Sn.getBoundingClientRect(),Sn.remove(),Sn.style.display=yn}this.rotation%180===this.parentRotation%180?(this.width=dn.width/Ge,this.height=dn.height/nn):(this.width=dn.height/Ge,this.height=dn.width/nn),this.fixAndSetPosition()},_c=function(){if(this.editorDiv.replaceChildren(),!!Je(this,Te))for(const Ge of Je(this,Te).split(`
`)){const nn=document.createElement("div");nn.append(Ge?document.createTextNode(Ge):document.createElement("br")),this.editorDiv.append(nn)}},Eu=function(Ge){const{value:nn,fontSize:dn,color:wn,rect:Sn,pageIndex:yn}=Je(this,Ke);return Ge.value!==nn||Ge.fontSize!==dn||Ge.rect.some((Pn,un)=>Math.abs(Pn-Sn[un])>=1)||Ge.color.some((Pn,un)=>Pn!==wn[un])||Ge.pageIndex!==yn},Sc=function(Ge=!1){if(!this.annotationElementId)return;if(Vn(this,Be,ro).call(this),!Ge&&(this.width===0||this.height===0)){setTimeout(()=>Vn(this,Be,Sc).call(this,!0),0);return}const nn=Qe._internalPadding*this.parentScale;Je(this,Ke).rect=this.getRect(nn,nn)},oi(Qe,"_freeTextDefaultContent",""),oi(Qe,"_internalPadding",0),oi(Qe,"_defaultColor",null),oi(Qe,"_defaultFontSize",10),oi(Qe,"_type","freetext");let Re=Qe;t.FreeTextEditor=Re},(St,t,xe)=>{var Ze,on,Gs,Pu,Mn,In,zn,Wn,Jn,Dn,cn,Bn,mn,bn,Rn,On,Hn,tr,ir,qn,pr,fr,Lu,il,Ec,Pc,Rr,jr,Vr,or,Xn,Qn,Sr,Lc,qr,Fn,ur,vr,Cu,Cc;Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var e=xe(1),_e=xe(6),Se=xe(3),Ee=xe(30),Re=xe(31),Ce=xe(32);const De=1e3,Me=9,Ue=new WeakSet;function He(kr){return{width:kr[2]-kr[0],height:kr[3]-kr[1]}}class Te{static create(Tn){switch(Tn.data.annotationType){case e.AnnotationType.LINK:return new $e(Tn);case e.AnnotationType.TEXT:return new Ke(Tn);case e.AnnotationType.WIDGET:switch(Tn.data.fieldType){case"Tx":return new Ye(Tn);case"Btn":return Tn.data.radioButton?new Xe(Tn):Tn.data.checkBox?new rn(Tn):new en(Tn);case"Ch":return new We(Tn);case"Sig":return new an(Tn)}return new Be(Tn);case e.AnnotationType.POPUP:return new ze(Tn);case e.AnnotationType.FREETEXT:return new gn(Tn);case e.AnnotationType.LINE:return new ke(Tn);case e.AnnotationType.SQUARE:return new Ge(Tn);case e.AnnotationType.CIRCLE:return new nn(Tn);case e.AnnotationType.POLYLINE:return new dn(Tn);case e.AnnotationType.CARET:return new Sn(Tn);case e.AnnotationType.INK:return new yn(Tn);case e.AnnotationType.POLYGON:return new wn(Tn);case e.AnnotationType.HIGHLIGHT:return new Pn(Tn);case e.AnnotationType.UNDERLINE:return new un(Tn);case e.AnnotationType.SQUIGGLY:return new _n(Tn);case e.AnnotationType.STRIKEOUT:return new Nn(Tn);case e.AnnotationType.STAMP:return new je(Tn);case e.AnnotationType.FILEATTACHMENT:return new Ie(Tn);default:return new Ve(Tn)}}}const sn=class sn{constructor(Tn,{isRenderable:Ln=!1,ignoreBorder:Un=!1,createQuadrilaterals:Gn=!1}={}){er(this,Ze,!1);this.isRenderable=Ln,this.data=Tn.data,this.layer=Tn.layer,this.linkService=Tn.linkService,this.downloadManager=Tn.downloadManager,this.imageResourcesPath=Tn.imageResourcesPath,this.renderForms=Tn.renderForms,this.svgFactory=Tn.svgFactory,this.annotationStorage=Tn.annotationStorage,this.enableScripting=Tn.enableScripting,this.hasJSActions=Tn.hasJSActions,this._fieldObjects=Tn.fieldObjects,this.parent=Tn.parent,Ln&&(this.container=this._createContainer(Un)),Gn&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Tn,contentsObj:Ln,richText:Un}){return!!(Tn!=null&&Tn.str||Ln!=null&&Ln.str||Un!=null&&Un.str)}get hasPopupData(){return sn._hasPopupData(this.data)}_createContainer(Tn){const{data:Ln,parent:{page:Un,viewport:Gn}}=this,sr=document.createElement("section");sr.setAttribute("data-annotation-id",Ln.id),this instanceof Be||(sr.tabIndex=De),sr.style.zIndex=this.parent.zIndex++,this.data.popupRef&&sr.setAttribute("aria-haspopup","dialog"),Ln.noRotate&&sr.classList.add("norotate");const{pageWidth:dr,pageHeight:gr,pageX:Nr,pageY:Tr}=Gn.rawDims;if(!Ln.rect||this instanceof ze){const{rotation:Ur}=Ln;return!Ln.hasOwnCanvas&&Ur!==0&&this.setRotation(Ur,sr),sr}const{width:Er,height:Wr}=He(Ln.rect),Fr=e.Util.normalizeRect([Ln.rect[0],Un.view[3]-Ln.rect[1]+Un.view[1],Ln.rect[2],Un.view[3]-Ln.rect[3]+Un.view[1]]);if(!Tn&&Ln.borderStyle.width>0){sr.style.borderWidth=`${Ln.borderStyle.width}px`;const Ur=Ln.borderStyle.horizontalCornerRadius,Gr=Ln.borderStyle.verticalCornerRadius;if(Ur>0||Gr>0){const Zr=`calc(${Ur}px * var(--scale-factor)) / calc(${Gr}px * var(--scale-factor))`;sr.style.borderRadius=Zr}else if(this instanceof Xe){const Zr=`calc(${Er}px * var(--scale-factor)) / calc(${Wr}px * var(--scale-factor))`;sr.style.borderRadius=Zr}switch(Ln.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:sr.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:sr.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:sr.style.borderBottomStyle="solid";break}const Kr=Ln.borderColor||null;Kr?(rr(this,Ze,!0),sr.style.borderColor=e.Util.makeHexColor(Kr[0]|0,Kr[1]|0,Kr[2]|0)):sr.style.borderWidth=0}sr.style.left=`${100*(Fr[0]-Nr)/dr}%`,sr.style.top=`${100*(Fr[1]-Tr)/gr}%`;const{rotation:Dr}=Ln;return Ln.hasOwnCanvas||Dr===0?(sr.style.width=`${100*Er/dr}%`,sr.style.height=`${100*Wr/gr}%`):this.setRotation(Dr,sr),sr}setRotation(Tn,Ln=this.container){if(!this.data.rect)return;const{pageWidth:Un,pageHeight:Gn}=this.parent.viewport.rawDims,{width:sr,height:dr}=He(this.data.rect);let gr,Nr;Tn%180===0?(gr=100*sr/Un,Nr=100*dr/Gn):(gr=100*dr/Un,Nr=100*sr/Gn),Ln.style.width=`${gr}%`,Ln.style.height=`${Nr}%`,Ln.setAttribute("data-main-rotation",(360-Tn)%360)}get _commonActions(){const Tn=(Ln,Un,Gn)=>{const sr=Gn.detail[Ln],dr=sr[0],gr=sr.slice(1);Gn.target.style[Un]=Ee.ColorConverters[`${dr}_HTML`](gr),this.annotationStorage.setValue(this.data.id,{[Un]:Ee.ColorConverters[`${dr}_rgb`](gr)})};return(0,e.shadow)(this,"_commonActions",{display:Ln=>{const{display:Un}=Ln.detail,Gn=Un%2===1;this.container.style.visibility=Gn?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Gn,noPrint:Un===1||Un===2})},print:Ln=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Ln.detail.print})},hidden:Ln=>{const{hidden:Un}=Ln.detail;this.container.style.visibility=Un?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Un,noView:Un})},focus:Ln=>{setTimeout(()=>Ln.target.focus({preventScroll:!1}),0)},userName:Ln=>{Ln.target.title=Ln.detail.userName},readonly:Ln=>{Ln.target.disabled=Ln.detail.readonly},required:Ln=>{this._setRequired(Ln.target,Ln.detail.required)},bgColor:Ln=>{Tn("bgColor","backgroundColor",Ln)},fillColor:Ln=>{Tn("fillColor","backgroundColor",Ln)},fgColor:Ln=>{Tn("fgColor","color",Ln)},textColor:Ln=>{Tn("textColor","color",Ln)},borderColor:Ln=>{Tn("borderColor","borderColor",Ln)},strokeColor:Ln=>{Tn("strokeColor","borderColor",Ln)},rotation:Ln=>{const Un=Ln.detail.rotation;this.setRotation(Un),this.annotationStorage.setValue(this.data.id,{rotation:Un})}})}_dispatchEventFromSandbox(Tn,Ln){const Un=this._commonActions;for(const Gn of Object.keys(Ln.detail)){const sr=Tn[Gn]||Un[Gn];sr==null||sr(Ln)}}_setDefaultPropertiesFromJS(Tn){if(!this.enableScripting)return;const Ln=this.annotationStorage.getRawValue(this.data.id);if(!Ln)return;const Un=this._commonActions;for(const[Gn,sr]of Object.entries(Ln)){const dr=Un[Gn];if(dr){const gr={detail:{[Gn]:sr},target:Tn};dr(gr),delete Ln[Gn]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Tn}=this.data;if(!Tn)return;const[Ln,Un,Gn,sr]=this.data.rect;if(Tn.length===1){const[,{x:Gr,y:Kr},{x:Zr,y:li}]=Tn[0];if(Gn===Gr&&sr===Kr&&Ln===Zr&&Un===li)return}const{style:dr}=this.container;let gr;if(Je(this,Ze)){const{borderColor:Gr,borderWidth:Kr}=dr;dr.borderWidth=0,gr=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Gr}" stroke-width="${Kr}">`],this.container.classList.add("hasBorder")}const Nr=Gn-Ln,Tr=sr-Un,{svgFactory:Er}=this,Wr=Er.createElement("svg");Wr.classList.add("quadrilateralsContainer"),Wr.setAttribute("width",0),Wr.setAttribute("height",0);const Fr=Er.createElement("defs");Wr.append(Fr);const Dr=Er.createElement("clipPath"),Ur=`clippath_${this.data.id}`;Dr.setAttribute("id",Ur),Dr.setAttribute("clipPathUnits","objectBoundingBox"),Fr.append(Dr);for(const[,{x:Gr,y:Kr},{x:Zr,y:li}]of Tn){const si=Er.createElement("rect"),Ni=(Zr-Ln)/Nr,Fi=(sr-Kr)/Tr,Mi=(Gr-Zr)/Nr,us=(Kr-li)/Tr;si.setAttribute("x",Ni),si.setAttribute("y",Fi),si.setAttribute("width",Mi),si.setAttribute("height",us),Dr.append(si),gr==null||gr.push(`<rect vector-effect="non-scaling-stroke" x="${Ni}" y="${Fi}" width="${Mi}" height="${us}"/>`)}Je(this,Ze)&&(gr.push("</g></svg>')"),dr.backgroundImage=gr.join("")),this.container.append(Wr),this.container.style.clipPath=`url(#${Ur})`}_createPopup(){const{container:Tn,data:Ln}=this;Tn.setAttribute("aria-haspopup","dialog");const Un=new ze({data:{color:Ln.color,titleObj:Ln.titleObj,modificationDate:Ln.modificationDate,contentsObj:Ln.contentsObj,richText:Ln.richText,parentRect:Ln.rect,borderStyle:0,id:`popup_${Ln.id}`,rotation:Ln.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Un.render())}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Tn,Ln=null){const Un=[];if(this._fieldObjects){const Gn=this._fieldObjects[Tn];if(Gn)for(const{page:sr,id:dr,exportValues:gr}of Gn){if(sr===-1||dr===Ln)continue;const Nr=typeof gr=="string"?gr:null,Tr=document.querySelector(`[data-element-id="${dr}"]`);if(Tr&&!Ue.has(Tr)){(0,e.warn)(`_getElementsByName - element not allowed: ${dr}`);continue}Un.push({id:dr,exportValue:Nr,domElement:Tr})}return Un}for(const Gn of document.getElementsByName(Tn)){const{exportValue:sr}=Gn,dr=Gn.getAttribute("data-element-id");dr!==Ln&&Ue.has(Gn)&&Un.push({id:dr,exportValue:sr,domElement:Gn})}return Un}show(){var Tn;this.container&&(this.container.hidden=!1),(Tn=this.popup)==null||Tn.maybeShow()}hide(){var Tn;this.container&&(this.container.hidden=!0),(Tn=this.popup)==null||Tn.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Tn=this.getElementsToTriggerPopup();if(Array.isArray(Tn))for(const Ln of Tn)Ln.classList.add("highlightArea");else Tn.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Tn,data:{id:Ln}}=this;this.container.addEventListener("dblclick",()=>{var Un;(Un=this.linkService.eventBus)==null||Un.dispatch("switchannotationeditormode",{source:this,mode:Tn,editId:Ln})})}};Ze=new WeakMap;let Ve=sn;class $e extends Ve{constructor(Ln,Un=null){super(Ln,{isRenderable:!0,ignoreBorder:!!(Un!=null&&Un.ignoreBorder),createQuadrilaterals:!0});er(this,on);this.isTooltipOnly=Ln.data.isTooltipOnly}render(){const{data:Ln,linkService:Un}=this,Gn=document.createElement("a");Gn.setAttribute("data-element-id",Ln.id);let sr=!1;return Ln.url?(Un.addLinkAttributes(Gn,Ln.url,Ln.newWindow),sr=!0):Ln.action?(this._bindNamedAction(Gn,Ln.action),sr=!0):Ln.attachment?(this._bindAttachment(Gn,Ln.attachment),sr=!0):Ln.setOCGState?(Vn(this,on,Pu).call(this,Gn,Ln.setOCGState),sr=!0):Ln.dest?(this._bindLink(Gn,Ln.dest),sr=!0):(Ln.actions&&(Ln.actions.Action||Ln.actions["Mouse Up"]||Ln.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Gn,Ln),sr=!0),Ln.resetForm?(this._bindResetFormAction(Gn,Ln.resetForm),sr=!0):this.isTooltipOnly&&!sr&&(this._bindLink(Gn,""),sr=!0)),this.container.classList.add("linkAnnotation"),sr&&this.container.append(Gn),this.container}_bindLink(Ln,Un){Ln.href=this.linkService.getDestinationHash(Un),Ln.onclick=()=>(Un&&this.linkService.goToDestination(Un),!1),(Un||Un==="")&&Vn(this,on,Gs).call(this)}_bindNamedAction(Ln,Un){Ln.href=this.linkService.getAnchorUrl(""),Ln.onclick=()=>(this.linkService.executeNamedAction(Un),!1),Vn(this,on,Gs).call(this)}_bindAttachment(Ln,Un){Ln.href=this.linkService.getAnchorUrl(""),Ln.onclick=()=>{var Gn;return(Gn=this.downloadManager)==null||Gn.openOrDownloadData(this.container,Un.content,Un.filename),!1},Vn(this,on,Gs).call(this)}_bindJSAction(Ln,Un){Ln.href=this.linkService.getAnchorUrl("");const Gn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const sr of Object.keys(Un.actions)){const dr=Gn.get(sr);dr&&(Ln[dr]=()=>{var gr;return(gr=this.linkService.eventBus)==null||gr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Un.id,name:sr}}),!1})}Ln.onclick||(Ln.onclick=()=>!1),Vn(this,on,Gs).call(this)}_bindResetFormAction(Ln,Un){const Gn=Ln.onclick;if(Gn||(Ln.href=this.linkService.getAnchorUrl("")),Vn(this,on,Gs).call(this),!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Gn||(Ln.onclick=()=>!1);return}Ln.onclick=()=>{var Wr;Gn==null||Gn();const{fields:sr,refs:dr,include:gr}=Un,Nr=[];if(sr.length!==0||dr.length!==0){const Fr=new Set(dr);for(const Dr of sr){const Ur=this._fieldObjects[Dr]||[];for(const{id:Gr}of Ur)Fr.add(Gr)}for(const Dr of Object.values(this._fieldObjects))for(const Ur of Dr)Fr.has(Ur.id)===gr&&Nr.push(Ur)}else for(const Fr of Object.values(this._fieldObjects))Nr.push(...Fr);const Tr=this.annotationStorage,Er=[];for(const Fr of Nr){const{id:Dr}=Fr;switch(Er.push(Dr),Fr.type){case"text":{const Gr=Fr.defaultValue||"";Tr.setValue(Dr,{value:Gr});break}case"checkbox":case"radiobutton":{const Gr=Fr.defaultValue===Fr.exportValues;Tr.setValue(Dr,{value:Gr});break}case"combobox":case"listbox":{const Gr=Fr.defaultValue||"";Tr.setValue(Dr,{value:Gr});break}default:continue}const Ur=document.querySelector(`[data-element-id="${Dr}"]`);if(Ur){if(!Ue.has(Ur)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${Dr}`);continue}}else continue;Ur.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Wr=this.linkService.eventBus)==null||Wr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Er,name:"ResetForm"}})),!1}}}on=new WeakSet,Gs=function(){this.container.setAttribute("data-internal-link","")},Pu=function(Ln,Un){Ln.href=this.linkService.getAnchorUrl(""),Ln.onclick=()=>(this.linkService.executeSetOCGState(Un),!1),Vn(this,on,Gs).call(this)};class Ke extends Ve{constructor(Tn){super(Tn,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Tn=document.createElement("img");return Tn.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Tn.alt="[{{type}} Annotation]",Tn.dataset.l10nId="text_annotation_type",Tn.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Tn),this.container}}class Be extends Ve{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Tn){var Ln;this.data.hasOwnCanvas&&(((Ln=Tn.previousSibling)==null?void 0:Ln.nodeName)==="CANVAS"&&(Tn.previousSibling.hidden=!0),Tn.hidden=!1)}_getKeyModifier(Tn){const{isWin:Ln,isMac:Un}=e.FeatureTest.platform;return Ln&&Tn.ctrlKey||Un&&Tn.metaKey}_setEventListener(Tn,Ln,Un,Gn,sr){Un.includes("mouse")?Tn.addEventListener(Un,dr=>{var gr;(gr=this.linkService.eventBus)==null||gr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Gn,value:sr(dr),shift:dr.shiftKey,modifier:this._getKeyModifier(dr)}})}):Tn.addEventListener(Un,dr=>{var gr;if(Un==="blur"){if(!Ln.focused||!dr.relatedTarget)return;Ln.focused=!1}else if(Un==="focus"){if(Ln.focused)return;Ln.focused=!0}sr&&((gr=this.linkService.eventBus)==null||gr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Gn,value:sr(dr)}}))})}_setEventListeners(Tn,Ln,Un,Gn){var sr,dr,gr;for(const[Nr,Tr]of Un)(Tr==="Action"||(sr=this.data.actions)!=null&&sr[Tr])&&((Tr==="Focus"||Tr==="Blur")&&(Ln||(Ln={focused:!1})),this._setEventListener(Tn,Ln,Nr,Tr,Gn),Tr==="Focus"&&!((dr=this.data.actions)!=null&&dr.Blur)?this._setEventListener(Tn,Ln,"blur","Blur",null):Tr==="Blur"&&!((gr=this.data.actions)!=null&&gr.Focus)&&this._setEventListener(Tn,Ln,"focus","Focus",null))}_setBackgroundColor(Tn){const Ln=this.data.backgroundColor||null;Tn.style.backgroundColor=Ln===null?"transparent":e.Util.makeHexColor(Ln[0],Ln[1],Ln[2])}_setTextStyle(Tn){const Ln=["left","center","right"],{fontColor:Un}=this.data.defaultAppearanceData,Gn=this.data.defaultAppearanceData.fontSize||Me,sr=Tn.style;let dr;const gr=2,Nr=Tr=>Math.round(10*Tr)/10;if(this.data.multiLine){const Tr=Math.abs(this.data.rect[3]-this.data.rect[1]-gr),Er=Math.round(Tr/(e.LINE_FACTOR*Gn))||1,Wr=Tr/Er;dr=Math.min(Gn,Nr(Wr/e.LINE_FACTOR))}else{const Tr=Math.abs(this.data.rect[3]-this.data.rect[1]-gr);dr=Math.min(Gn,Nr(Tr/e.LINE_FACTOR))}sr.fontSize=`calc(${dr}px * var(--scale-factor))`,sr.color=e.Util.makeHexColor(Un[0],Un[1],Un[2]),this.data.textAlignment!==null&&(sr.textAlign=Ln[this.data.textAlignment])}_setRequired(Tn,Ln){Ln?Tn.setAttribute("required",!0):Tn.removeAttribute("required"),Tn.setAttribute("aria-required",Ln)}}class Ye extends Be{constructor(Tn){const Ln=Tn.renderForms||!Tn.data.hasAppearance&&!!Tn.data.fieldValue;super(Tn,{isRenderable:Ln})}setPropertyOnSiblings(Tn,Ln,Un,Gn){const sr=this.annotationStorage;for(const dr of this._getElementsByName(Tn.name,Tn.id))dr.domElement&&(dr.domElement[Ln]=Un),sr.setValue(dr.id,{[Gn]:Un})}render(){var Gn,sr;const Tn=this.annotationStorage,Ln=this.data.id;this.container.classList.add("textWidgetAnnotation");let Un=null;if(this.renderForms){const dr=Tn.getValue(Ln,{value:this.data.fieldValue});let gr=dr.value||"";const Nr=Tn.getValue(Ln,{charLimit:this.data.maxLen}).charLimit;Nr&&gr.length>Nr&&(gr=gr.slice(0,Nr));let Tr=dr.formattedValue||((Gn=this.data.textContent)==null?void 0:Gn.join(`
`))||null;Tr&&this.data.comb&&(Tr=Tr.replaceAll(/\s+/g,""));const Er={userValue:gr,formattedValue:Tr,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Un=document.createElement("textarea"),Un.textContent=Tr??gr,this.data.doNotScroll&&(Un.style.overflowY="hidden")):(Un=document.createElement("input"),Un.type="text",Un.setAttribute("value",Tr??gr),this.data.doNotScroll&&(Un.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Un.hidden=!0),Ue.add(Un),Un.setAttribute("data-element-id",Ln),Un.disabled=this.data.readOnly,Un.name=this.data.fieldName,Un.tabIndex=De,this._setRequired(Un,this.data.required),Nr&&(Un.maxLength=Nr),Un.addEventListener("input",Fr=>{Tn.setValue(Ln,{value:Fr.target.value}),this.setPropertyOnSiblings(Un,"value",Fr.target.value,"value"),Er.formattedValue=null}),Un.addEventListener("resetform",Fr=>{const Dr=this.data.defaultFieldValue??"";Un.value=Er.userValue=Dr,Er.formattedValue=null});let Wr=Fr=>{const{formattedValue:Dr}=Er;Dr!=null&&(Fr.target.value=Dr),Fr.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Un.addEventListener("focus",Dr=>{if(Er.focused)return;const{target:Ur}=Dr;Er.userValue&&(Ur.value=Er.userValue),Er.lastCommittedValue=Ur.value,Er.commitKey=1,Er.focused=!0}),Un.addEventListener("updatefromsandbox",Dr=>{this.showElementAndHideCanvas(Dr.target);const Ur={value(Gr){Er.userValue=Gr.detail.value??"",Tn.setValue(Ln,{value:Er.userValue.toString()}),Gr.target.value=Er.userValue},formattedValue(Gr){const{formattedValue:Kr}=Gr.detail;Er.formattedValue=Kr,Kr!=null&&Gr.target!==document.activeElement&&(Gr.target.value=Kr),Tn.setValue(Ln,{formattedValue:Kr})},selRange(Gr){Gr.target.setSelectionRange(...Gr.detail.selRange)},charLimit:Gr=>{var si;const{charLimit:Kr}=Gr.detail,{target:Zr}=Gr;if(Kr===0){Zr.removeAttribute("maxLength");return}Zr.setAttribute("maxLength",Kr);let li=Er.userValue;!li||li.length<=Kr||(li=li.slice(0,Kr),Zr.value=Er.userValue=li,Tn.setValue(Ln,{value:li}),(si=this.linkService.eventBus)==null||si.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:li,willCommit:!0,commitKey:1,selStart:Zr.selectionStart,selEnd:Zr.selectionEnd}}))}};this._dispatchEventFromSandbox(Ur,Dr)}),Un.addEventListener("keydown",Dr=>{var Kr;Er.commitKey=1;let Ur=-1;if(Dr.key==="Escape"?Ur=0:Dr.key==="Enter"&&!this.data.multiLine?Ur=2:Dr.key==="Tab"&&(Er.commitKey=3),Ur===-1)return;const{value:Gr}=Dr.target;Er.lastCommittedValue!==Gr&&(Er.lastCommittedValue=Gr,Er.userValue=Gr,(Kr=this.linkService.eventBus)==null||Kr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:Gr,willCommit:!0,commitKey:Ur,selStart:Dr.target.selectionStart,selEnd:Dr.target.selectionEnd}}))});const Fr=Wr;Wr=null,Un.addEventListener("blur",Dr=>{var Gr;if(!Er.focused||!Dr.relatedTarget)return;Er.focused=!1;const{value:Ur}=Dr.target;Er.userValue=Ur,Er.lastCommittedValue!==Ur&&((Gr=this.linkService.eventBus)==null||Gr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:Ur,willCommit:!0,commitKey:Er.commitKey,selStart:Dr.target.selectionStart,selEnd:Dr.target.selectionEnd}})),Fr(Dr)}),(sr=this.data.actions)!=null&&sr.Keystroke&&Un.addEventListener("beforeinput",Dr=>{var Fi;Er.lastCommittedValue=null;const{data:Ur,target:Gr}=Dr,{value:Kr,selectionStart:Zr,selectionEnd:li}=Gr;let si=Zr,Ni=li;switch(Dr.inputType){case"deleteWordBackward":{const Mi=Kr.substring(0,Zr).match(/\w*[^\w]*$/);Mi&&(si-=Mi[0].length);break}case"deleteWordForward":{const Mi=Kr.substring(Zr).match(/^[^\w]*\w*/);Mi&&(Ni+=Mi[0].length);break}case"deleteContentBackward":Zr===li&&(si-=1);break;case"deleteContentForward":Zr===li&&(Ni+=1);break}Dr.preventDefault(),(Fi=this.linkService.eventBus)==null||Fi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:Kr,change:Ur||"",willCommit:!1,selStart:si,selEnd:Ni}})}),this._setEventListeners(Un,Er,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Dr=>Dr.target.value)}if(Wr&&Un.addEventListener("blur",Wr),this.data.comb){const Dr=(this.data.rect[2]-this.data.rect[0])/Nr;Un.classList.add("comb"),Un.style.letterSpacing=`calc(${Dr}px * var(--scale-factor) - 1ch)`}}else Un=document.createElement("div"),Un.textContent=this.data.fieldValue,Un.style.verticalAlign="middle",Un.style.display="table-cell";return this._setTextStyle(Un),this._setBackgroundColor(Un),this._setDefaultPropertiesFromJS(Un),this.container.append(Un),this.container}}class an extends Be{constructor(Tn){super(Tn,{isRenderable:!!Tn.data.hasOwnCanvas})}}class rn extends Be{constructor(Tn){super(Tn,{isRenderable:Tn.renderForms})}render(){const Tn=this.annotationStorage,Ln=this.data,Un=Ln.id;let Gn=Tn.getValue(Un,{value:Ln.exportValue===Ln.fieldValue}).value;typeof Gn=="string"&&(Gn=Gn!=="Off",Tn.setValue(Un,{value:Gn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const sr=document.createElement("input");return Ue.add(sr),sr.setAttribute("data-element-id",Un),sr.disabled=Ln.readOnly,this._setRequired(sr,this.data.required),sr.type="checkbox",sr.name=Ln.fieldName,Gn&&sr.setAttribute("checked",!0),sr.setAttribute("exportValue",Ln.exportValue),sr.tabIndex=De,sr.addEventListener("change",dr=>{const{name:gr,checked:Nr}=dr.target;for(const Tr of this._getElementsByName(gr,Un)){const Er=Nr&&Tr.exportValue===Ln.exportValue;Tr.domElement&&(Tr.domElement.checked=Er),Tn.setValue(Tr.id,{value:Er})}Tn.setValue(Un,{value:Nr})}),sr.addEventListener("resetform",dr=>{const gr=Ln.defaultFieldValue||"Off";dr.target.checked=gr===Ln.exportValue}),this.enableScripting&&this.hasJSActions&&(sr.addEventListener("updatefromsandbox",dr=>{const gr={value(Nr){Nr.target.checked=Nr.detail.value!=="Off",Tn.setValue(Un,{value:Nr.target.checked})}};this._dispatchEventFromSandbox(gr,dr)}),this._setEventListeners(sr,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],dr=>dr.target.checked)),this._setBackgroundColor(sr),this._setDefaultPropertiesFromJS(sr),this.container.append(sr),this.container}}class Xe extends Be{constructor(Tn){super(Tn,{isRenderable:Tn.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Tn=this.annotationStorage,Ln=this.data,Un=Ln.id;let Gn=Tn.getValue(Un,{value:Ln.fieldValue===Ln.buttonValue}).value;typeof Gn=="string"&&(Gn=Gn!==Ln.buttonValue,Tn.setValue(Un,{value:Gn}));const sr=document.createElement("input");if(Ue.add(sr),sr.setAttribute("data-element-id",Un),sr.disabled=Ln.readOnly,this._setRequired(sr,this.data.required),sr.type="radio",sr.name=Ln.fieldName,Gn&&sr.setAttribute("checked",!0),sr.tabIndex=De,sr.addEventListener("change",dr=>{const{name:gr,checked:Nr}=dr.target;for(const Tr of this._getElementsByName(gr,Un))Tn.setValue(Tr.id,{value:!1});Tn.setValue(Un,{value:Nr})}),sr.addEventListener("resetform",dr=>{const gr=Ln.defaultFieldValue;dr.target.checked=gr!=null&&gr===Ln.buttonValue}),this.enableScripting&&this.hasJSActions){const dr=Ln.buttonValue;sr.addEventListener("updatefromsandbox",gr=>{const Nr={value:Tr=>{const Er=dr===Tr.detail.value;for(const Wr of this._getElementsByName(Tr.target.name)){const Fr=Er&&Wr.id===Un;Wr.domElement&&(Wr.domElement.checked=Fr),Tn.setValue(Wr.id,{value:Fr})}}};this._dispatchEventFromSandbox(Nr,gr)}),this._setEventListeners(sr,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],gr=>gr.target.checked)}return this._setBackgroundColor(sr),this._setDefaultPropertiesFromJS(sr),this.container.append(sr),this.container}}class en extends $e{constructor(Tn){super(Tn,{ignoreBorder:Tn.data.hasAppearance})}render(){const Tn=super.render();Tn.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Tn.title=this.data.alternativeText);const Ln=Tn.lastChild;return this.enableScripting&&this.hasJSActions&&Ln&&(this._setDefaultPropertiesFromJS(Ln),Ln.addEventListener("updatefromsandbox",Un=>{this._dispatchEventFromSandbox({},Un)})),Tn}}class We extends Be{constructor(Tn){super(Tn,{isRenderable:Tn.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Tn=this.annotationStorage,Ln=this.data.id,Un=Tn.getValue(Ln,{value:this.data.fieldValue}),Gn=document.createElement("select");Ue.add(Gn),Gn.setAttribute("data-element-id",Ln),Gn.disabled=this.data.readOnly,this._setRequired(Gn,this.data.required),Gn.name=this.data.fieldName,Gn.tabIndex=De;let sr=this.data.combo&&this.data.options.length>0;this.data.combo||(Gn.size=this.data.options.length,this.data.multiSelect&&(Gn.multiple=!0)),Gn.addEventListener("resetform",Er=>{const Wr=this.data.defaultFieldValue;for(const Fr of Gn.options)Fr.selected=Fr.value===Wr});for(const Er of this.data.options){const Wr=document.createElement("option");Wr.textContent=Er.displayValue,Wr.value=Er.exportValue,Un.value.includes(Er.exportValue)&&(Wr.setAttribute("selected",!0),sr=!1),Gn.append(Wr)}let dr=null;if(sr){const Er=document.createElement("option");Er.value=" ",Er.setAttribute("hidden",!0),Er.setAttribute("selected",!0),Gn.prepend(Er),dr=()=>{Er.remove(),Gn.removeEventListener("input",dr),dr=null},Gn.addEventListener("input",dr)}const gr=Er=>{const Wr=Er?"value":"textContent",{options:Fr,multiple:Dr}=Gn;return Dr?Array.prototype.filter.call(Fr,Ur=>Ur.selected).map(Ur=>Ur[Wr]):Fr.selectedIndex===-1?null:Fr[Fr.selectedIndex][Wr]};let Nr=gr(!1);const Tr=Er=>{const Wr=Er.target.options;return Array.prototype.map.call(Wr,Fr=>({displayValue:Fr.textContent,exportValue:Fr.value}))};return this.enableScripting&&this.hasJSActions?(Gn.addEventListener("updatefromsandbox",Er=>{const Wr={value(Fr){dr==null||dr();const Dr=Fr.detail.value,Ur=new Set(Array.isArray(Dr)?Dr:[Dr]);for(const Gr of Gn.options)Gr.selected=Ur.has(Gr.value);Tn.setValue(Ln,{value:gr(!0)}),Nr=gr(!1)},multipleSelection(Fr){Gn.multiple=!0},remove(Fr){const Dr=Gn.options,Ur=Fr.detail.remove;Dr[Ur].selected=!1,Gn.remove(Ur),Dr.length>0&&Array.prototype.findIndex.call(Dr,Kr=>Kr.selected)===-1&&(Dr[0].selected=!0),Tn.setValue(Ln,{value:gr(!0),items:Tr(Fr)}),Nr=gr(!1)},clear(Fr){for(;Gn.length!==0;)Gn.remove(0);Tn.setValue(Ln,{value:null,items:[]}),Nr=gr(!1)},insert(Fr){const{index:Dr,displayValue:Ur,exportValue:Gr}=Fr.detail.insert,Kr=Gn.children[Dr],Zr=document.createElement("option");Zr.textContent=Ur,Zr.value=Gr,Kr?Kr.before(Zr):Gn.append(Zr),Tn.setValue(Ln,{value:gr(!0),items:Tr(Fr)}),Nr=gr(!1)},items(Fr){const{items:Dr}=Fr.detail;for(;Gn.length!==0;)Gn.remove(0);for(const Ur of Dr){const{displayValue:Gr,exportValue:Kr}=Ur,Zr=document.createElement("option");Zr.textContent=Gr,Zr.value=Kr,Gn.append(Zr)}Gn.options.length>0&&(Gn.options[0].selected=!0),Tn.setValue(Ln,{value:gr(!0),items:Tr(Fr)}),Nr=gr(!1)},indices(Fr){const Dr=new Set(Fr.detail.indices);for(const Ur of Fr.target.options)Ur.selected=Dr.has(Ur.index);Tn.setValue(Ln,{value:gr(!0)}),Nr=gr(!1)},editable(Fr){Fr.target.disabled=!Fr.detail.editable}};this._dispatchEventFromSandbox(Wr,Er)}),Gn.addEventListener("input",Er=>{var Fr;const Wr=gr(!0);Tn.setValue(Ln,{value:Wr}),Er.preventDefault(),(Fr=this.linkService.eventBus)==null||Fr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Ln,name:"Keystroke",value:Nr,changeEx:Wr,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Gn,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Er=>Er.target.value)):Gn.addEventListener("input",function(Er){Tn.setValue(Ln,{value:gr(!0)})}),this.data.combo&&this._setTextStyle(Gn),this._setBackgroundColor(Gn),this._setDefaultPropertiesFromJS(Gn),this.container.append(Gn),this.container}}class ze extends Ve{constructor(Tn){const{data:Ln,elements:Un}=Tn;super(Tn,{isRenderable:Ve._hasPopupData(Ln)}),this.elements=Un}render(){this.container.classList.add("popupAnnotation");const Tn=new Qe({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Ln=[];for(const Un of this.elements)Un.popup=Tn,Ln.push(Un.data.id),Un.addHighlightArea();return this.container.setAttribute("aria-controls",Ln.map(Un=>`${e.AnnotationPrefix}${Un}`).join(",")),this.container}}class Qe{constructor({container:Tn,color:Ln,elements:Un,titleObj:Gn,modificationDate:sr,contentsObj:dr,richText:gr,parent:Nr,rect:Tr,parentRect:Er,open:Wr}){er(this,fr);er(this,Mn,null);er(this,In,Vn(this,fr,Lu).bind(this));er(this,zn,Vn(this,fr,Pc).bind(this));er(this,Wn,Vn(this,fr,Ec).bind(this));er(this,Jn,Vn(this,fr,il).bind(this));er(this,Dn,null);er(this,cn,null);er(this,Bn,null);er(this,mn,null);er(this,bn,null);er(this,Rn,null);er(this,On,!1);er(this,Hn,null);er(this,tr,null);er(this,ir,null);er(this,qn,null);er(this,pr,!1);var Dr;rr(this,cn,Tn),rr(this,qn,Gn),rr(this,Bn,dr),rr(this,ir,gr),rr(this,bn,Nr),rr(this,Dn,Ln),rr(this,tr,Tr),rr(this,Rn,Er),rr(this,mn,Un);const Fr=_e.PDFDateString.toDateObject(sr);Fr&&rr(this,Mn,Nr.l10n.get("annotation_date_string",{date:Fr.toLocaleDateString(),time:Fr.toLocaleTimeString()})),this.trigger=Un.flatMap(Ur=>Ur.getElementsToTriggerPopup());for(const Ur of this.trigger)Ur.addEventListener("click",Je(this,Jn)),Ur.addEventListener("mouseenter",Je(this,Wn)),Ur.addEventListener("mouseleave",Je(this,zn)),Ur.classList.add("popupTriggerArea");for(const Ur of Un)(Dr=Ur.container)==null||Dr.addEventListener("keydown",Je(this,In));Je(this,cn).hidden=!0,Wr&&Vn(this,fr,il).call(this)}render(){if(Je(this,Hn))return;const{page:{view:Tn},viewport:{rawDims:{pageWidth:Ln,pageHeight:Un,pageX:Gn,pageY:sr}}}=Je(this,bn),dr=rr(this,Hn,document.createElement("div"));if(dr.className="popup",Je(this,Dn)){const si=dr.style.outlineColor=e.Util.makeHexColor(...Je(this,Dn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?dr.style.backgroundColor=`color-mix(in srgb, ${si} 30%, white)`:dr.style.backgroundColor=e.Util.makeHexColor(...Je(this,Dn).map(Fi=>Math.floor(.7*(255-Fi)+Fi)))}const gr=document.createElement("span");gr.className="header";const Nr=document.createElement("h1");if(gr.append(Nr),{dir:Nr.dir,str:Nr.textContent}=Je(this,qn),dr.append(gr),Je(this,Mn)){const si=document.createElement("span");si.classList.add("popupDate"),Je(this,Mn).then(Ni=>{si.textContent=Ni}),gr.append(si)}const Tr=Je(this,Bn),Er=Je(this,ir);if(Er!=null&&Er.str&&(!(Tr!=null&&Tr.str)||Tr.str===Er.str))Ce.XfaLayer.render({xfaHtml:Er.html,intent:"richText",div:dr}),dr.lastChild.classList.add("richText","popupContent");else{const si=this._formatContents(Tr);dr.append(si)}let Wr=!!Je(this,Rn),Fr=Wr?Je(this,Rn):Je(this,tr);for(const si of Je(this,mn))if(!Fr||e.Util.intersect(si.data.rect,Fr)!==null){Fr=si.data.rect,Wr=!0;break}const Dr=e.Util.normalizeRect([Fr[0],Tn[3]-Fr[1]+Tn[1],Fr[2],Tn[3]-Fr[3]+Tn[1]]),Gr=Wr?Fr[2]-Fr[0]+5:0,Kr=Dr[0]+Gr,Zr=Dr[1],{style:li}=Je(this,cn);li.left=`${100*(Kr-Gn)/Ln}%`,li.top=`${100*(Zr-sr)/Un}%`,Je(this,cn).append(dr)}_formatContents({str:Tn,dir:Ln}){const Un=document.createElement("p");Un.classList.add("popupContent"),Un.dir=Ln;const Gn=Tn.split(/(?:\r\n?|\n)/);for(let sr=0,dr=Gn.length;sr<dr;++sr){const gr=Gn[sr];Un.append(document.createTextNode(gr)),sr<dr-1&&Un.append(document.createElement("br"))}return Un}forceHide(){rr(this,pr,this.isVisible),Je(this,pr)&&(Je(this,cn).hidden=!0)}maybeShow(){Je(this,pr)&&(rr(this,pr,!1),Je(this,cn).hidden=!1)}get isVisible(){return Je(this,cn).hidden===!1}}Mn=new WeakMap,In=new WeakMap,zn=new WeakMap,Wn=new WeakMap,Jn=new WeakMap,Dn=new WeakMap,cn=new WeakMap,Bn=new WeakMap,mn=new WeakMap,bn=new WeakMap,Rn=new WeakMap,On=new WeakMap,Hn=new WeakMap,tr=new WeakMap,ir=new WeakMap,qn=new WeakMap,pr=new WeakMap,fr=new WeakSet,Lu=function(Tn){Tn.altKey||Tn.shiftKey||Tn.ctrlKey||Tn.metaKey||(Tn.key==="Enter"||Tn.key==="Escape"&&Je(this,On))&&Vn(this,fr,il).call(this)},il=function(){rr(this,On,!Je(this,On)),Je(this,On)?(Vn(this,fr,Ec).call(this),Je(this,cn).addEventListener("click",Je(this,Jn)),Je(this,cn).addEventListener("keydown",Je(this,In))):(Vn(this,fr,Pc).call(this),Je(this,cn).removeEventListener("click",Je(this,Jn)),Je(this,cn).removeEventListener("keydown",Je(this,In)))},Ec=function(){Je(this,Hn)||this.render(),this.isVisible?Je(this,On)&&Je(this,cn).classList.add("focused"):(Je(this,cn).hidden=!1,Je(this,cn).style.zIndex=parseInt(Je(this,cn).style.zIndex)+1e3)},Pc=function(){Je(this,cn).classList.remove("focused"),!(Je(this,On)||!this.isVisible)&&(Je(this,cn).hidden=!0,Je(this,cn).style.zIndex=parseInt(Je(this,cn).style.zIndex)-1e3)};class gn extends Ve{constructor(Tn){super(Tn,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Tn.data.textContent,this.textPosition=Tn.data.textPosition,this.annotationEditorType=e.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Tn=document.createElement("div");Tn.classList.add("annotationTextContent"),Tn.setAttribute("role","comment");for(const Ln of this.textContent){const Un=document.createElement("span");Un.textContent=Ln,Tn.append(Un)}this.container.append(Tn)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=gn;class ke extends Ve{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});er(this,Rr,null)}render(){this.container.classList.add("lineAnnotation");const Ln=this.data,{width:Un,height:Gn}=He(Ln.rect),sr=this.svgFactory.create(Un,Gn,!0),dr=rr(this,Rr,this.svgFactory.createElement("svg:line"));return dr.setAttribute("x1",Ln.rect[2]-Ln.lineCoordinates[0]),dr.setAttribute("y1",Ln.rect[3]-Ln.lineCoordinates[1]),dr.setAttribute("x2",Ln.rect[2]-Ln.lineCoordinates[2]),dr.setAttribute("y2",Ln.rect[3]-Ln.lineCoordinates[3]),dr.setAttribute("stroke-width",Ln.borderStyle.width||1),dr.setAttribute("stroke","transparent"),dr.setAttribute("fill","transparent"),sr.append(dr),this.container.append(sr),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Je(this,Rr)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rr=new WeakMap;class Ge extends Ve{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});er(this,jr,null)}render(){this.container.classList.add("squareAnnotation");const Ln=this.data,{width:Un,height:Gn}=He(Ln.rect),sr=this.svgFactory.create(Un,Gn,!0),dr=Ln.borderStyle.width,gr=rr(this,jr,this.svgFactory.createElement("svg:rect"));return gr.setAttribute("x",dr/2),gr.setAttribute("y",dr/2),gr.setAttribute("width",Un-dr),gr.setAttribute("height",Gn-dr),gr.setAttribute("stroke-width",dr||1),gr.setAttribute("stroke","transparent"),gr.setAttribute("fill","transparent"),sr.append(gr),this.container.append(sr),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Je(this,jr)}addHighlightArea(){this.container.classList.add("highlightArea")}}jr=new WeakMap;class nn extends Ve{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});er(this,Vr,null)}render(){this.container.classList.add("circleAnnotation");const Ln=this.data,{width:Un,height:Gn}=He(Ln.rect),sr=this.svgFactory.create(Un,Gn,!0),dr=Ln.borderStyle.width,gr=rr(this,Vr,this.svgFactory.createElement("svg:ellipse"));return gr.setAttribute("cx",Un/2),gr.setAttribute("cy",Gn/2),gr.setAttribute("rx",Un/2-dr/2),gr.setAttribute("ry",Gn/2-dr/2),gr.setAttribute("stroke-width",dr||1),gr.setAttribute("stroke","transparent"),gr.setAttribute("fill","transparent"),sr.append(gr),this.container.append(sr),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Je(this,Vr)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vr=new WeakMap;class dn extends Ve{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});er(this,or,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Ln=this.data,{width:Un,height:Gn}=He(Ln.rect),sr=this.svgFactory.create(Un,Gn,!0);let dr=[];for(const Nr of Ln.vertices){const Tr=Nr.x-Ln.rect[0],Er=Ln.rect[3]-Nr.y;dr.push(Tr+","+Er)}dr=dr.join(" ");const gr=rr(this,or,this.svgFactory.createElement(this.svgElementName));return gr.setAttribute("points",dr),gr.setAttribute("stroke-width",Ln.borderStyle.width||1),gr.setAttribute("stroke","transparent"),gr.setAttribute("fill","transparent"),sr.append(gr),this.container.append(sr),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Je(this,or)}addHighlightArea(){this.container.classList.add("highlightArea")}}or=new WeakMap;class wn extends dn{constructor(Tn){super(Tn),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Sn extends Ve{constructor(Tn){super(Tn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class yn extends Ve{constructor(Ln){super(Ln,{isRenderable:!0,ignoreBorder:!0});er(this,Xn,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=e.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Ln=this.data,{width:Un,height:Gn}=He(Ln.rect),sr=this.svgFactory.create(Un,Gn,!0);for(const dr of Ln.inkLists){let gr=[];for(const Tr of dr){const Er=Tr.x-Ln.rect[0],Wr=Ln.rect[3]-Tr.y;gr.push(`${Er},${Wr}`)}gr=gr.join(" ");const Nr=this.svgFactory.createElement(this.svgElementName);Je(this,Xn).push(Nr),Nr.setAttribute("points",gr),Nr.setAttribute("stroke-width",Ln.borderStyle.width||1),Nr.setAttribute("stroke","transparent"),Nr.setAttribute("fill","transparent"),!Ln.popupRef&&this.hasPopupData&&this._createPopup(),sr.append(Nr)}return this.container.append(sr),this.container}getElementsToTriggerPopup(){return Je(this,Xn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xn=new WeakMap,t.InkAnnotationElement=yn;class Pn extends Ve{constructor(Tn){super(Tn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class un extends Ve{constructor(Tn){super(Tn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _n extends Ve{constructor(Tn){super(Tn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Nn extends Ve{constructor(Tn){super(Tn,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class je extends Ve{constructor(Tn){super(Tn,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=je;class Ie extends Ve{constructor(Ln){var sr;super(Ln,{isRenderable:!0});er(this,Sr);er(this,Qn,null);const{filename:Un,content:Gn}=this.data.file;this.filename=(0,_e.getFilenameFromUrl)(Un,!0),this.content=Gn,(sr=this.linkService.eventBus)==null||sr.dispatch("fileattachmentannotation",{source:this,filename:Un,content:Gn})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Ln,data:Un}=this;let Gn;Un.hasAppearance||Un.fillAlpha===0?Gn=document.createElement("div"):(Gn=document.createElement("img"),Gn.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Un.name)?"paperclip":"pushpin"}.svg`,Un.fillAlpha&&Un.fillAlpha<1&&(Gn.style=`filter: opacity(${Math.round(Un.fillAlpha*100)}%);`)),Gn.addEventListener("dblclick",Vn(this,Sr,Lc).bind(this)),rr(this,Qn,Gn);const{isMac:sr}=e.FeatureTest.platform;return Ln.addEventListener("keydown",dr=>{dr.key==="Enter"&&(sr?dr.metaKey:dr.ctrlKey)&&Vn(this,Sr,Lc).call(this)}),!Un.popupRef&&this.hasPopupData?this._createPopup():Gn.classList.add("popupTriggerArea"),Ln.append(Gn),Ln}getElementsToTriggerPopup(){return Je(this,Qn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qn=new WeakMap,Sr=new WeakSet,Lc=function(){var Ln;(Ln=this.downloadManager)==null||Ln.openOrDownloadData(this.container,this.content,this.filename)};class Oe{constructor({div:Tn,accessibilityManager:Ln,annotationCanvasMap:Un,l10n:Gn,page:sr,viewport:dr}){er(this,vr);er(this,qr,null);er(this,Fn,null);er(this,ur,new Map);this.div=Tn,rr(this,qr,Ln),rr(this,Fn,Un),this.l10n=Gn,this.page=sr,this.viewport=dr,this.zIndex=0,this.l10n||(this.l10n=Re.NullL10n)}async render(Tn){const{annotations:Ln}=Tn,Un=this.div;(0,_e.setLayerDimensions)(Un,this.viewport);const Gn=new Map,sr={data:null,layer:Un,linkService:Tn.linkService,downloadManager:Tn.downloadManager,imageResourcesPath:Tn.imageResourcesPath||"",renderForms:Tn.renderForms!==!1,svgFactory:new _e.DOMSVGFactory,annotationStorage:Tn.annotationStorage||new Se.AnnotationStorage,enableScripting:Tn.enableScripting===!0,hasJSActions:Tn.hasJSActions,fieldObjects:Tn.fieldObjects,parent:this,elements:null};for(const dr of Ln){if(dr.noHTML)continue;const gr=dr.annotationType===e.AnnotationType.POPUP;if(gr){const Er=Gn.get(dr.id);if(!Er)continue;sr.elements=Er}else{const{width:Er,height:Wr}=He(dr.rect);if(Er<=0||Wr<=0)continue}sr.data=dr;const Nr=Te.create(sr);if(!Nr.isRenderable)continue;if(!gr&&dr.popupRef){const Er=Gn.get(dr.popupRef);Er?Er.push(Nr):Gn.set(dr.popupRef,[Nr])}Nr.annotationEditorType>0&&Je(this,ur).set(Nr.data.id,Nr);const Tr=Nr.render();dr.hidden&&(Tr.style.visibility="hidden"),Vn(this,vr,Cu).call(this,Tr,dr.id)}Vn(this,vr,Cc).call(this),await this.l10n.translate(Un)}update({viewport:Tn}){const Ln=this.div;this.viewport=Tn,(0,_e.setLayerDimensions)(Ln,{rotation:Tn.rotation}),Vn(this,vr,Cc).call(this),Ln.hidden=!1}getEditableAnnotations(){return Array.from(Je(this,ur).values())}getEditableAnnotation(Tn){return Je(this,ur).get(Tn)}}qr=new WeakMap,Fn=new WeakMap,ur=new WeakMap,vr=new WeakSet,Cu=function(Tn,Ln){var Gn;const Un=Tn.firstChild||Tn;Un.id=`${e.AnnotationPrefix}${Ln}`,this.div.append(Tn),(Gn=Je(this,qr))==null||Gn.moveElementInDOM(this.div,Tn,Un,!1)},Cc=function(){if(!Je(this,Fn))return;const Tn=this.div;for(const[Ln,Un]of Je(this,Fn)){const Gn=Tn.querySelector(`[data-annotation-id="${Ln}"]`);if(!Gn)continue;const{firstChild:sr}=Gn;sr?sr.nodeName==="CANVAS"?sr.replaceWith(Un):sr.before(Un):Gn.append(Un)}Je(this,Fn).clear()},t.AnnotationLayer=Oe},(St,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function xe(Se){return Math.floor(Math.max(0,Math.min(1,Se))*255).toString(16).padStart(2,"0")}function e(Se){return Math.max(0,Math.min(255,255*Se))}class _e{static CMYK_G([Ee,Re,Ce,De]){return["G",1-Math.min(1,.3*Ee+.59*Ce+.11*Re+De)]}static G_CMYK([Ee]){return["CMYK",0,0,0,1-Ee]}static G_RGB([Ee]){return["RGB",Ee,Ee,Ee]}static G_rgb([Ee]){return Ee=e(Ee),[Ee,Ee,Ee]}static G_HTML([Ee]){const Re=xe(Ee);return`#${Re}${Re}${Re}`}static RGB_G([Ee,Re,Ce]){return["G",.3*Ee+.59*Re+.11*Ce]}static RGB_rgb(Ee){return Ee.map(e)}static RGB_HTML(Ee){return`#${Ee.map(xe).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([Ee,Re,Ce,De]){return["RGB",1-Math.min(1,Ee+De),1-Math.min(1,Ce+De),1-Math.min(1,Re+De)]}static CMYK_rgb([Ee,Re,Ce,De]){return[e(1-Math.min(1,Ee+De)),e(1-Math.min(1,Ce+De)),e(1-Math.min(1,Re+De))]}static CMYK_HTML(Ee){const Re=this.CMYK_RGB(Ee).slice(1);return this.RGB_HTML(Re)}static RGB_CMYK([Ee,Re,Ce]){const De=1-Ee,Me=1-Re,Ue=1-Ce,He=Math.min(De,Me,Ue);return["CMYK",De,Me,Ue,He]}}t.ColorConverters=_e},(St,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=e;const xe={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} Ã {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} Ã {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typingâ¦",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};xe.print_progress_percent="{{progress}}%";function e(Ee,Re){switch(Ee){case"find_match_count":Ee=`find_match_count[${Re.total===1?"one":"other"}]`;break;case"find_match_count_limit":Ee=`find_match_count_limit[${Re.limit===1?"one":"other"}]`;break}return xe[Ee]||""}function _e(Ee,Re){return Re?Ee.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(Ce,De)=>De in Re?Re[De]:"{{"+De+"}}"):Ee}const Se={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(Ee,Re=null,Ce=e(Ee,Re)){return _e(Ce,Re)},async translate(Ee){}};t.NullL10n=Se},(St,t,xe)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var e=xe(25);class _e{static setupStorage(Ee,Re,Ce,De,Me){const Ue=De.getValue(Re,{value:null});switch(Ce.name){case"textarea":if(Ue.value!==null&&(Ee.textContent=Ue.value),Me==="print")break;Ee.addEventListener("input",He=>{De.setValue(Re,{value:He.target.value})});break;case"input":if(Ce.attributes.type==="radio"||Ce.attributes.type==="checkbox"){if(Ue.value===Ce.attributes.xfaOn?Ee.setAttribute("checked",!0):Ue.value===Ce.attributes.xfaOff&&Ee.removeAttribute("checked"),Me==="print")break;Ee.addEventListener("change",He=>{De.setValue(Re,{value:He.target.checked?He.target.getAttribute("xfaOn"):He.target.getAttribute("xfaOff")})})}else{if(Ue.value!==null&&Ee.setAttribute("value",Ue.value),Me==="print")break;Ee.addEventListener("input",He=>{De.setValue(Re,{value:He.target.value})})}break;case"select":if(Ue.value!==null){Ee.setAttribute("value",Ue.value);for(const He of Ce.children)He.attributes.value===Ue.value?He.attributes.selected=!0:He.attributes.hasOwnProperty("selected")&&delete He.attributes.selected}Ee.addEventListener("input",He=>{const Te=He.target.options,Ve=Te.selectedIndex===-1?"":Te[Te.selectedIndex].value;De.setValue(Re,{value:Ve})});break}}static setAttributes({html:Ee,element:Re,storage:Ce=null,intent:De,linkService:Me}){const{attributes:Ue}=Re,He=Ee instanceof HTMLAnchorElement;Ue.type==="radio"&&(Ue.name=`${Ue.name}-${De}`);for(const[Te,Ve]of Object.entries(Ue))if(Ve!=null)switch(Te){case"class":Ve.length&&Ee.setAttribute(Te,Ve.join(" "));break;case"dataId":break;case"id":Ee.setAttribute("data-element-id",Ve);break;case"style":Object.assign(Ee.style,Ve);break;case"textContent":Ee.textContent=Ve;break;default:(!He||Te!=="href"&&Te!=="newWindow")&&Ee.setAttribute(Te,Ve)}He&&Me.addLinkAttributes(Ee,Ue.href,Ue.newWindow),Ce&&Ue.dataId&&this.setupStorage(Ee,Ue.dataId,Re,Ce)}static render(Ee){var $e;const Re=Ee.annotationStorage,Ce=Ee.linkService,De=Ee.xfaHtml,Me=Ee.intent||"display",Ue=document.createElement(De.name);De.attributes&&this.setAttributes({html:Ue,element:De,intent:Me,linkService:Ce});const He=[[De,-1,Ue]],Te=Ee.div;if(Te.append(Ue),Ee.viewport){const Ke=`matrix(${Ee.viewport.transform.join(",")})`;Te.style.transform=Ke}Me!=="richText"&&Te.setAttribute("class","xfaLayer xfaFont");const Ve=[];for(;He.length>0;){const[Ke,Be,Ye]=He.at(-1);if(Be+1===Ke.children.length){He.pop();continue}const an=Ke.children[++He.at(-1)[1]];if(an===null)continue;const{name:rn}=an;if(rn==="#text"){const en=document.createTextNode(an.value);Ve.push(en),Ye.append(en);continue}const Xe=($e=an==null?void 0:an.attributes)!=null&&$e.xmlns?document.createElementNS(an.attributes.xmlns,rn):document.createElement(rn);if(Ye.append(Xe),an.attributes&&this.setAttributes({html:Xe,element:an,storage:Re,intent:Me,linkService:Ce}),an.children&&an.children.length>0)He.push([an,-1,Xe]);else if(an.value){const en=document.createTextNode(an.value);e.XfaText.shouldBuildText(rn)&&Ve.push(en),Xe.append(en)}}for(const Ke of Te.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Ke.setAttribute("readOnly",!0);return{textDivs:Ve}}static update(Ee){const Re=`matrix(${Ee.viewport.transform.join(",")})`;Ee.div.style.transform=Re,Ee.div.hidden=!1}}t.XfaLayer=_e},(St,t,xe)=>{var De,Me,Ue,He,Te,Ve,$e,Ke,Be,Ye,an,rn,Xe,en,We,Tu,Nu,Ru,ku,Tc,Fu,Nc,Mu,Iu,Du,ju,Ou,xs,Rc,sl,al,ya,kc,ol,on,Bu,Fc,qu,Uu,Mc,ll,xa;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var e=xe(1),_e=xe(4),Se=xe(29),Ee=xe(6),Re=xe(5);const Dn=class Dn extends _e.AnnotationEditor{constructor(mn){super({...mn,name:"inkEditor"});er(this,We);er(this,De,0);er(this,Me,0);er(this,Ue,this.canvasPointermove.bind(this));er(this,He,this.canvasPointerleave.bind(this));er(this,Te,this.canvasPointerup.bind(this));er(this,Ve,this.canvasPointerdown.bind(this));er(this,$e,new Path2D);er(this,Ke,!1);er(this,Be,!1);er(this,Ye,!1);er(this,an,null);er(this,rn,0);er(this,Xe,0);er(this,en,null);this.color=mn.color||null,this.thickness=mn.thickness||null,this.opacity=mn.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(mn){_e.AnnotationEditor.initialize(mn,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(mn,bn){switch(mn){case e.AnnotationEditorParamsType.INK_THICKNESS:Dn._defaultThickness=bn;break;case e.AnnotationEditorParamsType.INK_COLOR:Dn._defaultColor=bn;break;case e.AnnotationEditorParamsType.INK_OPACITY:Dn._defaultOpacity=bn/100;break}}updateParams(mn,bn){switch(mn){case e.AnnotationEditorParamsType.INK_THICKNESS:Vn(this,We,Tu).call(this,bn);break;case e.AnnotationEditorParamsType.INK_COLOR:Vn(this,We,Nu).call(this,bn);break;case e.AnnotationEditorParamsType.INK_OPACITY:Vn(this,We,Ru).call(this,bn);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,Dn._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,Dn._defaultColor||_e.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(Dn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Dn._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||Dn._defaultColor||_e.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Dn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Vn(this,We,sl).call(this),Vn(this,We,al).call(this)),this.isAttachedToDOM||(this.parent.add(this),Vn(this,We,ya).call(this)),Vn(this,We,xa).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Je(this,an).disconnect(),rr(this,an,null),super.remove())}setParent(mn){!this.parent&&mn?this._uiManager.removeShouldRescale(this):this.parent&&mn===null&&this._uiManager.addShouldRescale(this),super.setParent(mn)}onScaleChanging(){const[mn,bn]=this.parentDimensions,Rn=this.width*mn,On=this.height*bn;this.setDimensions(Rn,On)}enableEditMode(){Je(this,Ke)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",Je(this,Ve)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",Je(this,Ve)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){Je(this,Ke)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),rr(this,Ke,!0),this.div.classList.add("disabled"),Vn(this,We,xa).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(mn){this._focusEventsAllowed&&(super.focusin(mn),this.enableEditMode())}canvasPointerdown(mn){mn.button!==0||!this.isInEditMode()||Je(this,Ke)||(this.setInForeground(),mn.preventDefault(),mn.type!=="mouse"&&this.div.focus(),Vn(this,We,Fu).call(this,mn.offsetX,mn.offsetY))}canvasPointermove(mn){mn.preventDefault(),Vn(this,We,Nc).call(this,mn.offsetX,mn.offsetY)}canvasPointerup(mn){mn.preventDefault(),Vn(this,We,Rc).call(this,mn)}canvasPointerleave(mn){Vn(this,We,Rc).call(this,mn)}get isResizable(){return!this.isEmpty()&&Je(this,Ke)}render(){if(this.div)return this.div;let mn,bn;this.width&&(mn=this.x,bn=this.y),super.render(),_e.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(ir=>{var qn;return(qn=this.div)==null?void 0:qn.setAttribute("aria-label",ir)});const[Rn,On,Hn,tr]=Vn(this,We,ku).call(this);if(this.setAt(Rn,On,0,0),this.setDims(Hn,tr),Vn(this,We,sl).call(this),this.width){const[ir,qn]=this.parentDimensions;this.setAspectRatio(this.width*ir,this.height*qn),this.setAt(mn*ir,bn*qn,this.width*ir,this.height*qn),rr(this,Ye,!0),Vn(this,We,ya).call(this),this.setDims(this.width*ir,this.height*qn),Vn(this,We,xs).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Vn(this,We,al).call(this),this.div}setDimensions(mn,bn){const Rn=Math.round(mn),On=Math.round(bn);if(Je(this,rn)===Rn&&Je(this,Xe)===On)return;rr(this,rn,Rn),rr(this,Xe,On),this.canvas.style.visibility="hidden";const[Hn,tr]=this.parentDimensions;this.width=mn/Hn,this.height=bn/tr,this.fixAndSetPosition(),Je(this,Ke)&&Vn(this,We,kc).call(this,mn,bn),Vn(this,We,ya).call(this),Vn(this,We,xs).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(mn,bn,Rn){var Rr,jr,Vr;if(mn instanceof Se.InkAnnotationElement)return null;const On=super.deserialize(mn,bn,Rn);On.thickness=mn.thickness,On.color=e.Util.makeHexColor(...mn.color),On.opacity=mn.opacity;const[Hn,tr]=On.pageDimensions,ir=On.width*Hn,qn=On.height*tr,pr=On.parentScale,fr=mn.thickness/2;rr(On,Ke,!0),rr(On,rn,Math.round(ir)),rr(On,Xe,Math.round(qn));const{paths:Mr,rect:_r,rotation:Ir}=mn;for(let{bezier:or}of Mr){or=Vn(Rr=Dn,on,qu).call(Rr,or,_r,Ir);const Xn=[];On.paths.push(Xn);let Qn=pr*(or[0]-fr),Sr=pr*(or[1]-fr);for(let qr=2,Fn=or.length;qr<Fn;qr+=6){const ur=pr*(or[qr]-fr),vr=pr*(or[qr+1]-fr),yr=pr*(or[qr+2]-fr),Lr=pr*(or[qr+3]-fr),kr=pr*(or[qr+4]-fr),Tn=pr*(or[qr+5]-fr);Xn.push([[Qn,Sr],[ur,vr],[yr,Lr],[kr,Tn]]),Qn=kr,Sr=Tn}const Xr=Vn(this,on,Bu).call(this,Xn);On.bezierPath2D.push(Xr)}const hr=Vn(jr=On,We,Mc).call(jr);return rr(On,Me,Math.max(_e.AnnotationEditor.MIN_SIZE,hr[2]-hr[0])),rr(On,De,Math.max(_e.AnnotationEditor.MIN_SIZE,hr[3]-hr[1])),Vn(Vr=On,We,kc).call(Vr,ir,qn),On}serialize(){if(this.isEmpty())return null;const mn=this.getRect(0,0),bn=_e.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:bn,thickness:this.thickness,opacity:this.opacity,paths:Vn(this,We,Uu).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,mn),pageIndex:this.pageIndex,rect:mn,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};De=new WeakMap,Me=new WeakMap,Ue=new WeakMap,He=new WeakMap,Te=new WeakMap,Ve=new WeakMap,$e=new WeakMap,Ke=new WeakMap,Be=new WeakMap,Ye=new WeakMap,an=new WeakMap,rn=new WeakMap,Xe=new WeakMap,en=new WeakMap,We=new WeakSet,Tu=function(mn){const bn=this.thickness;this.addCommands({cmd:()=>{this.thickness=mn,Vn(this,We,xa).call(this)},undo:()=>{this.thickness=bn,Vn(this,We,xa).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Nu=function(mn){const bn=this.color;this.addCommands({cmd:()=>{this.color=mn,Vn(this,We,xs).call(this)},undo:()=>{this.color=bn,Vn(this,We,xs).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ru=function(mn){mn/=100;const bn=this.opacity;this.addCommands({cmd:()=>{this.opacity=mn,Vn(this,We,xs).call(this)},undo:()=>{this.opacity=bn,Vn(this,We,xs).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ku=function(){const{parentRotation:mn,parentDimensions:[bn,Rn]}=this;switch(mn){case 90:return[0,Rn,Rn,bn];case 180:return[bn,Rn,bn,Rn];case 270:return[bn,0,Rn,bn];default:return[0,0,bn,Rn]}},Tc=function(){const{ctx:mn,color:bn,opacity:Rn,thickness:On,parentScale:Hn,scaleFactor:tr}=this;mn.lineWidth=On*Hn/tr,mn.lineCap="round",mn.lineJoin="round",mn.miterLimit=10,mn.strokeStyle=`${bn}${(0,Re.opacityToHex)(Rn)}`},Fu=function(mn,bn){this.canvas.addEventListener("contextmenu",Ee.noContextMenu),this.canvas.addEventListener("pointerleave",Je(this,He)),this.canvas.addEventListener("pointermove",Je(this,Ue)),this.canvas.addEventListener("pointerup",Je(this,Te)),this.canvas.removeEventListener("pointerdown",Je(this,Ve)),this.isEditing=!0,Je(this,Ye)||(rr(this,Ye,!0),Vn(this,We,ya).call(this),this.thickness||(this.thickness=Dn._defaultThickness),this.color||(this.color=Dn._defaultColor||_e.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Dn._defaultOpacity)),this.currentPath.push([mn,bn]),rr(this,Be,!1),Vn(this,We,Tc).call(this),rr(this,en,()=>{Vn(this,We,Du).call(this),Je(this,en)&&window.requestAnimationFrame(Je(this,en))}),window.requestAnimationFrame(Je(this,en))},Nc=function(mn,bn){const[Rn,On]=this.currentPath.at(-1);if(this.currentPath.length>1&&mn===Rn&&bn===On)return;const Hn=this.currentPath;let tr=Je(this,$e);if(Hn.push([mn,bn]),rr(this,Be,!0),Hn.length<=2){tr.moveTo(...Hn[0]),tr.lineTo(mn,bn);return}Hn.length===3&&(rr(this,$e,tr=new Path2D),tr.moveTo(...Hn[0])),Vn(this,We,ju).call(this,tr,...Hn.at(-3),...Hn.at(-2),mn,bn)},Mu=function(){if(this.currentPath.length===0)return;const mn=this.currentPath.at(-1);Je(this,$e).lineTo(...mn)},Iu=function(mn,bn){rr(this,en,null),mn=Math.min(Math.max(mn,0),this.canvas.width),bn=Math.min(Math.max(bn,0),this.canvas.height),Vn(this,We,Nc).call(this,mn,bn),Vn(this,We,Mu).call(this);let Rn;if(this.currentPath.length!==1)Rn=Vn(this,We,Ou).call(this);else{const qn=[mn,bn];Rn=[[qn,qn.slice(),qn.slice(),qn]]}const On=Je(this,$e),Hn=this.currentPath;this.currentPath=[],rr(this,$e,new Path2D);const tr=()=>{this.allRawPaths.push(Hn),this.paths.push(Rn),this.bezierPath2D.push(On),this.rebuild()},ir=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Vn(this,We,sl).call(this),Vn(this,We,al).call(this)),Vn(this,We,xa).call(this))};this.addCommands({cmd:tr,undo:ir,mustExec:!0})},Du=function(){if(!Je(this,Be))return;rr(this,Be,!1);const mn=Math.ceil(this.thickness*this.parentScale),bn=this.currentPath.slice(-3),Rn=bn.map(tr=>tr[0]),On=bn.map(tr=>tr[1]);Math.min(...Rn)-mn,Math.max(...Rn)+mn,Math.min(...On)-mn,Math.max(...On)+mn;const{ctx:Hn}=this;Hn.save(),Hn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const tr of this.bezierPath2D)Hn.stroke(tr);Hn.stroke(Je(this,$e)),Hn.restore()},ju=function(mn,bn,Rn,On,Hn,tr,ir){const qn=(bn+On)/2,pr=(Rn+Hn)/2,fr=(On+tr)/2,Mr=(Hn+ir)/2;mn.bezierCurveTo(qn+2*(On-qn)/3,pr+2*(Hn-pr)/3,fr+2*(On-fr)/3,Mr+2*(Hn-Mr)/3,fr,Mr)},Ou=function(){const mn=this.currentPath;if(mn.length<=2)return[[mn[0],mn[0],mn.at(-1),mn.at(-1)]];const bn=[];let Rn,[On,Hn]=mn[0];for(Rn=1;Rn<mn.length-2;Rn++){const[_r,Ir]=mn[Rn],[hr,Rr]=mn[Rn+1],jr=(_r+hr)/2,Vr=(Ir+Rr)/2,or=[On+2*(_r-On)/3,Hn+2*(Ir-Hn)/3],Xn=[jr+2*(_r-jr)/3,Vr+2*(Ir-Vr)/3];bn.push([[On,Hn],or,Xn,[jr,Vr]]),[On,Hn]=[jr,Vr]}const[tr,ir]=mn[Rn],[qn,pr]=mn[Rn+1],fr=[On+2*(tr-On)/3,Hn+2*(ir-Hn)/3],Mr=[qn+2*(tr-qn)/3,pr+2*(ir-pr)/3];return bn.push([[On,Hn],fr,Mr,[qn,pr]]),bn},xs=function(){if(this.isEmpty()){Vn(this,We,ol).call(this);return}Vn(this,We,Tc).call(this);const{canvas:mn,ctx:bn}=this;bn.setTransform(1,0,0,1,0,0),bn.clearRect(0,0,mn.width,mn.height),Vn(this,We,ol).call(this);for(const Rn of this.bezierPath2D)bn.stroke(Rn)},Rc=function(mn){this.canvas.removeEventListener("pointerleave",Je(this,He)),this.canvas.removeEventListener("pointermove",Je(this,Ue)),this.canvas.removeEventListener("pointerup",Je(this,Te)),this.canvas.addEventListener("pointerdown",Je(this,Ve)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",Ee.noContextMenu)},10),Vn(this,We,Iu).call(this,mn.offsetX,mn.offsetY),this.addToAnnotationStorage(),this.setInBackground()},sl=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",_e.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(mn=>{var bn;return(bn=this.canvas)==null?void 0:bn.setAttribute("aria-label",mn)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},al=function(){rr(this,an,new ResizeObserver(mn=>{const bn=mn[0].contentRect;bn.width&&bn.height&&this.setDimensions(bn.width,bn.height)})),Je(this,an).observe(this.div)},ya=function(){if(!Je(this,Ye))return;const[mn,bn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*mn),this.canvas.height=Math.ceil(this.height*bn),Vn(this,We,ol).call(this)},kc=function(mn,bn){const Rn=Vn(this,We,ll).call(this),On=(mn-Rn)/Je(this,Me),Hn=(bn-Rn)/Je(this,De);this.scaleFactor=Math.min(On,Hn)},ol=function(){const mn=Vn(this,We,ll).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+mn,this.translationY*this.scaleFactor+mn)},on=new WeakSet,Bu=function(mn){const bn=new Path2D;for(let Rn=0,On=mn.length;Rn<On;Rn++){const[Hn,tr,ir,qn]=mn[Rn];Rn===0&&bn.moveTo(...Hn),bn.bezierCurveTo(tr[0],tr[1],ir[0],ir[1],qn[0],qn[1])}return bn},Fc=function(mn,bn,Rn){const[On,Hn,tr,ir]=bn;switch(Rn){case 0:for(let qn=0,pr=mn.length;qn<pr;qn+=2)mn[qn]+=On,mn[qn+1]=ir-mn[qn+1];break;case 90:for(let qn=0,pr=mn.length;qn<pr;qn+=2){const fr=mn[qn];mn[qn]=mn[qn+1]+On,mn[qn+1]=fr+Hn}break;case 180:for(let qn=0,pr=mn.length;qn<pr;qn+=2)mn[qn]=tr-mn[qn],mn[qn+1]+=Hn;break;case 270:for(let qn=0,pr=mn.length;qn<pr;qn+=2){const fr=mn[qn];mn[qn]=tr-mn[qn+1],mn[qn+1]=ir-fr}break;default:throw new Error("Invalid rotation")}return mn},qu=function(mn,bn,Rn){const[On,Hn,tr,ir]=bn;switch(Rn){case 0:for(let qn=0,pr=mn.length;qn<pr;qn+=2)mn[qn]-=On,mn[qn+1]=ir-mn[qn+1];break;case 90:for(let qn=0,pr=mn.length;qn<pr;qn+=2){const fr=mn[qn];mn[qn]=mn[qn+1]-Hn,mn[qn+1]=fr-On}break;case 180:for(let qn=0,pr=mn.length;qn<pr;qn+=2)mn[qn]=tr-mn[qn],mn[qn+1]-=Hn;break;case 270:for(let qn=0,pr=mn.length;qn<pr;qn+=2){const fr=mn[qn];mn[qn]=ir-mn[qn+1],mn[qn+1]=tr-fr}break;default:throw new Error("Invalid rotation")}return mn},Uu=function(mn,bn,Rn,On){var pr,fr;const Hn=[],tr=this.thickness/2,ir=mn*bn+tr,qn=mn*Rn+tr;for(const Mr of this.paths){const _r=[],Ir=[];for(let hr=0,Rr=Mr.length;hr<Rr;hr++){const[jr,Vr,or,Xn]=Mr[hr],Qn=mn*jr[0]+ir,Sr=mn*jr[1]+qn,Xr=mn*Vr[0]+ir,qr=mn*Vr[1]+qn,Fn=mn*or[0]+ir,ur=mn*or[1]+qn,vr=mn*Xn[0]+ir,yr=mn*Xn[1]+qn;hr===0&&(_r.push(Qn,Sr),Ir.push(Qn,Sr)),_r.push(Xr,qr,Fn,ur,vr,yr),Ir.push(Xr,qr),hr===Rr-1&&Ir.push(vr,yr)}Hn.push({bezier:Vn(pr=Dn,on,Fc).call(pr,_r,On,this.rotation),points:Vn(fr=Dn,on,Fc).call(fr,Ir,On,this.rotation)})}return Hn},Mc=function(){let mn=1/0,bn=-1/0,Rn=1/0,On=-1/0;for(const Hn of this.paths)for(const[tr,ir,qn,pr]of Hn){const fr=e.Util.bezierBoundingBox(...tr,...ir,...qn,...pr);mn=Math.min(mn,fr[0]),Rn=Math.min(Rn,fr[1]),bn=Math.max(bn,fr[2]),On=Math.max(On,fr[3])}return[mn,Rn,bn,On]},ll=function(){return Je(this,Ke)?Math.ceil(this.thickness*this.parentScale):0},xa=function(mn=!1){if(this.isEmpty())return;if(!Je(this,Ke)){Vn(this,We,xs).call(this);return}const bn=Vn(this,We,Mc).call(this),Rn=Vn(this,We,ll).call(this);rr(this,Me,Math.max(_e.AnnotationEditor.MIN_SIZE,bn[2]-bn[0])),rr(this,De,Math.max(_e.AnnotationEditor.MIN_SIZE,bn[3]-bn[1]));const On=Math.ceil(Rn+Je(this,Me)*this.scaleFactor),Hn=Math.ceil(Rn+Je(this,De)*this.scaleFactor),[tr,ir]=this.parentDimensions;this.width=On/tr,this.height=Hn/ir,this.setAspectRatio(On,Hn);const qn=this.translationX,pr=this.translationY;this.translationX=-bn[0],this.translationY=-bn[1],Vn(this,We,ya).call(this),Vn(this,We,xs).call(this),rr(this,rn,On),rr(this,Xe,Hn),this.setDims(On,Hn);const fr=mn?Rn/this.scaleFactor/2:0;this.translate(qn-this.translationX-fr,pr-this.translationY-fr)},er(Dn,on),oi(Dn,"_defaultColor",null),oi(Dn,"_defaultOpacity",1),oi(Dn,"_defaultThickness",1),oi(Dn,"_type","ink");let Ce=Dn;t.InkEditor=Ce},(St,t,xe)=>{var Ce,De,Me,Ue,He,Te,Ve,$e,Ke,Be,Ye,io,so,cl,Ic,zu,Hu,Dc,ul,Wu;Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var e=xe(1),_e=xe(4),Se=xe(6),Ee=xe(29);const Ge=class Ge extends _e.AnnotationEditor{constructor(wn){super({...wn,name:"stampEditor"});er(this,Ye);er(this,Ce,null);er(this,De,null);er(this,Me,null);er(this,Ue,null);er(this,He,null);er(this,Te,null);er(this,Ve,null);er(this,$e,null);er(this,Ke,!1);er(this,Be,!1);rr(this,Ue,wn.bitmapUrl),rr(this,He,wn.bitmapFile)}static initialize(wn){_e.AnnotationEditor.initialize(wn)}static get supportedTypes(){const wn=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,e.shadow)(this,"supportedTypes",wn.map(Sn=>`image/${Sn}`))}static get supportedTypesStr(){return(0,e.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(wn){return this.supportedTypes.includes(wn)}static paste(wn,Sn){Sn.pasteEditor(e.AnnotationEditorType.STAMP,{bitmapFile:wn.getAsFile()})}remove(){var wn,Sn;Je(this,De)&&(rr(this,Ce,null),this._uiManager.imageManager.deleteId(Je(this,De)),(wn=Je(this,Te))==null||wn.remove(),rr(this,Te,null),(Sn=Je(this,Ve))==null||Sn.disconnect(),rr(this,Ve,null)),super.remove()}rebuild(){if(!this.parent){Je(this,De)&&Vn(this,Ye,cl).call(this);return}super.rebuild(),this.div!==null&&(Je(this,De)&&Vn(this,Ye,cl).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(Je(this,Me)||Je(this,Ce)||Je(this,Ue)||Je(this,He))}get isResizable(){return!0}render(){if(this.div)return this.div;let wn,Sn;if(this.width&&(wn=this.x,Sn=this.y),super.render(),this.div.hidden=!0,Je(this,Ce)?Vn(this,Ye,Ic).call(this):Vn(this,Ye,cl).call(this),this.width){const[yn,Pn]=this.parentDimensions;this.setAt(wn*yn,Sn*Pn,this.width*yn,this.height*Pn)}return this.div}static deserialize(wn,Sn,yn){if(wn instanceof Ee.StampAnnotationElement)return null;const Pn=super.deserialize(wn,Sn,yn),{rect:un,bitmapUrl:_n,bitmapId:Nn,isSvg:je,accessibilityData:Ie}=wn;Nn&&yn.imageManager.isValidId(Nn)?rr(Pn,De,Nn):rr(Pn,Ue,_n),rr(Pn,Ke,je);const[Oe,Ze]=Pn.pageDimensions;return Pn.width=(un[2]-un[0])/Oe,Pn.height=(un[3]-un[1])/Ze,Ie&&(Pn.altTextData=Ie),Pn}serialize(wn=!1,Sn=null){if(this.isEmpty())return null;const yn={annotationType:e.AnnotationEditorType.STAMP,bitmapId:Je(this,De),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Je(this,Ke),structTreeParentId:this._structTreeParentId};if(wn)return yn.bitmapUrl=Vn(this,Ye,ul).call(this,!0),yn.accessibilityData=this.altTextData,yn;const{decorative:Pn,altText:un}=this.altTextData;if(!Pn&&un&&(yn.accessibilityData={type:"Figure",alt:un}),Sn===null)return yn;Sn.stamps||(Sn.stamps=new Map);const _n=Je(this,Ke)?(yn.rect[2]-yn.rect[0])*(yn.rect[3]-yn.rect[1]):null;if(!Sn.stamps.has(Je(this,De)))Sn.stamps.set(Je(this,De),{area:_n,serialized:yn}),yn.bitmap=Vn(this,Ye,ul).call(this,!1);else if(Je(this,Ke)){const Nn=Sn.stamps.get(Je(this,De));_n>Nn.area&&(Nn.area=_n,Nn.serialized.bitmap.close(),Nn.serialized.bitmap=Vn(this,Ye,ul).call(this,!1))}return yn}};Ce=new WeakMap,De=new WeakMap,Me=new WeakMap,Ue=new WeakMap,He=new WeakMap,Te=new WeakMap,Ve=new WeakMap,$e=new WeakMap,Ke=new WeakMap,Be=new WeakMap,Ye=new WeakSet,io=function(wn,Sn=!1){if(!wn){this.remove();return}rr(this,Ce,wn.bitmap),Sn||(rr(this,De,wn.id),rr(this,Ke,wn.isSvg)),Vn(this,Ye,Ic).call(this)},so=function(){rr(this,Me,null),this._uiManager.enableWaiting(!1),Je(this,Te)&&this.div.focus()},cl=function(){if(Je(this,De)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Je(this,De)).then(Sn=>Vn(this,Ye,io).call(this,Sn,!0)).finally(()=>Vn(this,Ye,so).call(this));return}if(Je(this,Ue)){const Sn=Je(this,Ue);rr(this,Ue,null),this._uiManager.enableWaiting(!0),rr(this,Me,this._uiManager.imageManager.getFromUrl(Sn).then(yn=>Vn(this,Ye,io).call(this,yn)).finally(()=>Vn(this,Ye,so).call(this)));return}if(Je(this,He)){const Sn=Je(this,He);rr(this,He,null),this._uiManager.enableWaiting(!0),rr(this,Me,this._uiManager.imageManager.getFromFile(Sn).then(yn=>Vn(this,Ye,io).call(this,yn)).finally(()=>Vn(this,Ye,so).call(this)));return}const wn=document.createElement("input");wn.type="file",wn.accept=Ge.supportedTypesStr,rr(this,Me,new Promise(Sn=>{wn.addEventListener("change",async()=>{if(!wn.files||wn.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const yn=await this._uiManager.imageManager.getFromFile(wn.files[0]);Vn(this,Ye,io).call(this,yn)}Sn()}),wn.addEventListener("cancel",()=>{this.remove(),Sn()})}).finally(()=>Vn(this,Ye,so).call(this))),wn.click()},Ic=function(){const{div:wn}=this;let{width:Sn,height:yn}=Je(this,Ce);const[Pn,un]=this.pageDimensions,_n=.75;if(this.width)Sn=this.width*Pn,yn=this.height*un;else if(Sn>_n*Pn||yn>_n*un){const Oe=Math.min(_n*Pn/Sn,_n*un/yn);Sn*=Oe,yn*=Oe}const[Nn,je]=this.parentDimensions;this.setDims(Sn*Nn/Pn,yn*je/un),this._uiManager.enableWaiting(!1);const Ie=rr(this,Te,document.createElement("canvas"));wn.append(Ie),wn.hidden=!1,Vn(this,Ye,Dc).call(this,Sn,yn),Vn(this,Ye,Wu).call(this),Je(this,Be)||(this.parent.addUndoableEditor(this),rr(this,Be,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},zu=function(wn,Sn){var _n;const[yn,Pn]=this.parentDimensions;this.width=wn/yn,this.height=Sn/Pn,this.setDims(wn,Sn),(_n=this._initialOptions)!=null&&_n.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,Je(this,$e)!==null&&clearTimeout(Je(this,$e)),rr(this,$e,setTimeout(()=>{rr(this,$e,null),Vn(this,Ye,Dc).call(this,wn,Sn)},200))},Hu=function(wn,Sn){const{width:yn,height:Pn}=Je(this,Ce);let un=yn,_n=Pn,Nn=Je(this,Ce);for(;un>2*wn||_n>2*Sn;){const je=un,Ie=_n;un>2*wn&&(un=un>=16384?Math.floor(un/2)-1:Math.ceil(un/2)),_n>2*Sn&&(_n=_n>=16384?Math.floor(_n/2)-1:Math.ceil(_n/2));const Oe=new OffscreenCanvas(un,_n);Oe.getContext("2d").drawImage(Nn,0,0,je,Ie,0,0,un,_n),Nn=Oe.transferToImageBitmap()}return Nn},Dc=function(wn,Sn){wn=Math.ceil(wn),Sn=Math.ceil(Sn);const yn=Je(this,Te);if(!yn||yn.width===wn&&yn.height===Sn)return;yn.width=wn,yn.height=Sn;const Pn=Je(this,Ke)?Je(this,Ce):Vn(this,Ye,Hu).call(this,wn,Sn),un=yn.getContext("2d");un.filter=this._uiManager.hcmFilter,un.drawImage(Pn,0,0,Pn.width,Pn.height,0,0,wn,Sn)},ul=function(wn){if(wn){if(Je(this,Ke)){const Pn=this._uiManager.imageManager.getSvgUrl(Je(this,De));if(Pn)return Pn}const Sn=document.createElement("canvas");return{width:Sn.width,height:Sn.height}=Je(this,Ce),Sn.getContext("2d").drawImage(Je(this,Ce),0,0),Sn.toDataURL()}if(Je(this,Ke)){const[Sn,yn]=this.pageDimensions,Pn=Math.round(this.width*Sn*Se.PixelsPerInch.PDF_TO_CSS_UNITS),un=Math.round(this.height*yn*Se.PixelsPerInch.PDF_TO_CSS_UNITS),_n=new OffscreenCanvas(Pn,un);return _n.getContext("2d").drawImage(Je(this,Ce),0,0,Je(this,Ce).width,Je(this,Ce).height,0,0,Pn,un),_n.transferToImageBitmap()}return structuredClone(Je(this,Ce))},Wu=function(){rr(this,Ve,new ResizeObserver(wn=>{const Sn=wn[0].contentRect;Sn.width&&Sn.height&&Vn(this,Ye,zu).call(this,Sn.width,Sn.height)})),Je(this,Ve).observe(this.div)},oi(Ge,"_type","stamp");let Re=Ge;t.StampEditor=Re}],__webpack_module_cache__={};function __w_pdfjs_require__(St){var t=__webpack_module_cache__[St];if(t!==void 0)return t.exports;var xe=__webpack_module_cache__[St]={exports:{}};return __webpack_modules__[St](xe,xe.exports,__w_pdfjs_require__),xe.exports}var __webpack_exports__={};return(()=>{var St=__webpack_exports__;Object.defineProperty(St,"__esModule",{value:!0}),Object.defineProperty(St,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(St,"AnnotationEditorLayer",{enumerable:!0,get:function(){return Se.AnnotationEditorLayer}}),Object.defineProperty(St,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(St,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(St,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Ee.AnnotationEditorUIManager}}),Object.defineProperty(St,"AnnotationLayer",{enumerable:!0,get:function(){return Re.AnnotationLayer}}),Object.defineProperty(St,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(St,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(St,"DOMSVGFactory",{enumerable:!0,get:function(){return e.DOMSVGFactory}}),Object.defineProperty(St,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(St,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Ce.GlobalWorkerOptions}}),Object.defineProperty(St,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(St,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(St,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(St,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(St,"PDFDataRangeTransport",{enumerable:!0,get:function(){return xe.PDFDataRangeTransport}}),Object.defineProperty(St,"PDFDateString",{enumerable:!0,get:function(){return e.PDFDateString}}),Object.defineProperty(St,"PDFWorker",{enumerable:!0,get:function(){return xe.PDFWorker}}),Object.defineProperty(St,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(St,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(St,"PixelsPerInch",{enumerable:!0,get:function(){return e.PixelsPerInch}}),Object.defineProperty(St,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(St,"RenderingCancelledException",{enumerable:!0,get:function(){return e.RenderingCancelledException}}),Object.defineProperty(St,"SVGGraphics",{enumerable:!0,get:function(){return xe.SVGGraphics}}),Object.defineProperty(St,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(St,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(St,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(St,"XfaLayer",{enumerable:!0,get:function(){return De.XfaLayer}}),Object.defineProperty(St,"build",{enumerable:!0,get:function(){return xe.build}}),Object.defineProperty(St,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(St,"getDocument",{enumerable:!0,get:function(){return xe.getDocument}}),Object.defineProperty(St,"getFilenameFromUrl",{enumerable:!0,get:function(){return e.getFilenameFromUrl}}),Object.defineProperty(St,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return e.getPdfFilenameFromUrl}}),Object.defineProperty(St,"getXfaPageViewport",{enumerable:!0,get:function(){return e.getXfaPageViewport}}),Object.defineProperty(St,"isDataScheme",{enumerable:!0,get:function(){return e.isDataScheme}}),Object.defineProperty(St,"isPdfFile",{enumerable:!0,get:function(){return e.isPdfFile}}),Object.defineProperty(St,"loadScript",{enumerable:!0,get:function(){return e.loadScript}}),Object.defineProperty(St,"noContextMenu",{enumerable:!0,get:function(){return e.noContextMenu}}),Object.defineProperty(St,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(St,"renderTextLayer",{enumerable:!0,get:function(){return _e.renderTextLayer}}),Object.defineProperty(St,"setLayerDimensions",{enumerable:!0,get:function(){return e.setLayerDimensions}}),Object.defineProperty(St,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(St,"updateTextLayer",{enumerable:!0,get:function(){return _e.updateTextLayer}}),Object.defineProperty(St,"version",{enumerable:!0,get:function(){return xe.version}});var t=__w_pdfjs_require__(1),xe=__w_pdfjs_require__(2),e=__w_pdfjs_require__(6),_e=__w_pdfjs_require__(26),Se=__w_pdfjs_require__(27),Ee=__w_pdfjs_require__(5),Re=__w_pdfjs_require__(29),Ce=__w_pdfjs_require__(14),De=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function St(e,_e,Se,Ee,Re,Ce){if(Ce!==ReactPropTypesSecret){var De=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw De.name="Invariant Violation",De}}St.isRequired=St;function t(){return St}var xe={array:St,bigint:St,bool:St,func:St,number:St,object:St,string:St,symbol:St,any:St,arrayOf:t,element:St,elementType:St,instanceOf:t,node:St,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return xe.PropTypes=xe,xe};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(St,t,xe){if(xe||arguments.length===2)for(var e=0,_e=t.length,Se;e<_e;e++)(Se||!(e in t))&&(Se||(Se=Array.prototype.slice.call(t,0,e)),Se[e]=t[e]);return St.concat(Se||Array.prototype.slice.call(t))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(St,t){var xe={};return allEvents.forEach(function(e){var _e=St[e];_e&&(t?xe[e]=function(Se){return _e(Se,t(e))}:xe[e]=_e)}),xe}function makeCancellablePromise(St){var t=!1,xe=new Promise(function(e,_e){St.then(function(Se){return!t&&e(Se)}).catch(function(Se){return!t&&_e(Se)})});return{promise:xe,cancel:function(){t=!0}}}function r(St){var t,xe,e="";if(typeof St=="string"||typeof St=="number")e+=St;else if(typeof St=="object")if(Array.isArray(St)){var _e=St.length;for(t=0;t<_e;t++)St[t]&&(xe=r(St[t]))&&(e&&(e+=" "),e+=xe)}else for(xe in St)St[xe]&&(e&&(e+=" "),e+=xe);return e}function clsx(){for(var St,t,xe=0,e="",_e=arguments.length;xe<_e;xe++)(St=arguments[xe])&&(t=r(St))&&(e&&(e+=" "),e+=t);return e}var prefix="Invariant failed";function invariant(St,t){if(!St)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(St,t,xe){for(xe of St.keys())if(dequal(xe,t))return xe}function dequal(St,t){var xe,e,_e;if(St===t)return!0;if(St&&t&&(xe=St.constructor)===t.constructor){if(xe===Date)return St.getTime()===t.getTime();if(xe===RegExp)return St.toString()===t.toString();if(xe===Array){if((e=St.length)===t.length)for(;e--&&dequal(St[e],t[e]););return e===-1}if(xe===Set){if(St.size!==t.size)return!1;for(e of St)if(_e=e,_e&&typeof _e=="object"&&(_e=find(t,_e),!_e)||!t.has(_e))return!1;return!0}if(xe===Map){if(St.size!==t.size)return!1;for(e of St)if(_e=e[0],_e&&typeof _e=="object"&&(_e=find(t,_e),!_e)||!dequal(e[1],t.get(_e)))return!1;return!0}if(xe===ArrayBuffer)St=new Uint8Array(St),t=new Uint8Array(t);else if(xe===DataView){if((e=St.byteLength)===t.byteLength)for(;e--&&St.getInt8(e)===t.getInt8(e););return e===-1}if(ArrayBuffer.isView(St)){if((e=St.byteLength)===t.byteLength)for(;e--&&St[e]===t[e];);return e===-1}if(!xe||typeof St=="object"){e=0;for(xe in St)if(has.call(St,xe)&&++e&&!has.call(t,xe)||!(xe in t)||!dequal(St[xe],t[xe]))return!1;return Object.keys(t).length===e}}return St!==St&&t!==t}const DocumentContext=reactExports.createContext(null);function Message({children:St,type:t}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${t}`},St)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(xe=>{invariant(this.pdfDocument),invariant(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(xe):Array.isArray(t)?xe(t):t.then(xe)}).then(xe=>{invariant(Array.isArray(xe));const e=xe[0];new Promise(_e=>{invariant(this.pdfDocument),e instanceof Object?this.pdfDocument.getPageIndex(e).then(Se=>{_e(Se)}).catch(()=>{invariant(!1)}):typeof e=="number"?_e(e):invariant(!1)}).then(_e=>{const Se=_e+1;invariant(this.pdfViewer),invariant(Se>=1&&Se<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:xe,pageIndex:_e,pageNumber:Se})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const xe=t-1;invariant(this.pdfViewer),invariant(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:xe,pageNumber:t})}addLinkAttributes(t,xe,e){t.href=xe,t.rel=this.externalLinkRel||DEFAULT_LINK_REL,t.target=e?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(St){return typeof St<"u"}function isProvided(St){return isDefined(St)&&St!==null}function isString(St){return typeof St=="string"}function isArrayBuffer(St){return St instanceof ArrayBuffer}function isBlob(St){return invariant(isBrowser),St instanceof Blob}function isDataURI(St){return isString(St)&&/^data:/.test(St)}function dataURItoByteString(St){invariant(isDataURI(St));const[t="",xe=""]=St.split(",");return t.split(";").indexOf("base64")!==-1?atob(xe):unescape(xe)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(St){St&&St.cancel&&St.cancel()}function makePageCallback(St,t){return Object.defineProperty(St,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(St,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(St,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(St,"originalHeight",{get(){return this.view[3]},configurable:!0}),St}function isCancelException(St){return St.name==="RenderingCancelledException"}function loadFromFile(St){return new Promise((t,xe)=>{const e=new FileReader;e.onload=()=>{if(!e.result)return xe(new Error("Error while reading a file."));t(e.result)},e.onerror=_e=>{if(!_e.target)return xe(new Error("Error while reading a file."));const{error:Se}=_e.target;if(!Se)return xe(new Error("Error while reading a file."));switch(Se.code){case Se.NOT_FOUND_ERR:return xe(new Error("Error while reading a file: File not found."));case Se.SECURITY_ERR:return xe(new Error("Error while reading a file: Security error."));case Se.ABORT_ERR:return xe(new Error("Error while reading a file: Aborted."));default:return xe(new Error("Error while reading a file."))}},e.readAsArrayBuffer(St)})}function reducer(St,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return St}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const St={};return allEvents.forEach(t=>{St[t]=PropTypes.func}),St})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function St(t,xe,e){const{[xe]:_e,pageNumber:Se,pdf:Ee}=t;if(!isDefined(Ee))return null;if(isDefined(_e)){if(typeof _e!="number")return new Error(`\`${xe}\` of type \`${typeof _e}\` supplied to \`${e}\`, expected \`number\`.`);if(_e<0)return new Error(`Expected \`${xe}\` to be greater or equal to 0.`);const{numPages:Re}=Ee;if(_e+1>Re)return new Error(`Expected \`${xe}\` to be less or equal to ${Re-1}.`)}else if(!isDefined(Se))return new Error(`\`${xe}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${e}\`.`);return null},isPageNumber=function St(t,xe,e){const{[xe]:_e,pageIndex:Se,pdf:Ee}=t;if(!isDefined(Ee))return null;if(isDefined(_e)){if(typeof _e!="number")return new Error(`\`${xe}\` of type \`${typeof _e}\` supplied to \`${e}\`, expected \`number\`.`);if(_e<1)return new Error(`Expected \`${xe}\` to be greater or equal to 1.`);const{numPages:Re}=Ee;if(_e>Re)return new Error(`Expected \`${xe}\` to be less or equal to ${Re}.`)}else if(!isDefined(Se))return new Error(`\`${xe}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${e}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(St,t,xe,e){function _e(Se){return Se instanceof xe?Se:new xe(function(Ee){Ee(Se)})}return new(xe||(xe=Promise))(function(Se,Ee){function Re(Me){try{De(e.next(Me))}catch(Ue){Ee(Ue)}}function Ce(Me){try{De(e.throw(Me))}catch(Ue){Ee(Ue)}}function De(Me){Me.done?Se(Me.value):_e(Me.value).then(Re,Ce)}De((e=e.apply(St,t||[])).next())})},__rest$1=function(St,t){var xe={};for(var e in St)Object.prototype.hasOwnProperty.call(St,e)&&t.indexOf(e)<0&&(xe[e]=St[e]);if(St!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _e=0,e=Object.getOwnPropertySymbols(St);_e<e.length;_e++)t.indexOf(e[_e])<0&&Object.prototype.propertyIsEnumerable.call(St,e[_e])&&(xe[e[_e]]=St[e[_e]]);return xe};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(St,t)=>{switch(t){case PasswordResponses.NEED_PASSWORD:{const xe=prompt("Enter the password to open this PDF file.");St(xe);break}case PasswordResponses.INCORRECT_PASSWORD:{const xe=prompt("Invalid password. Please try again.");St(xe);break}}};function isParameterObject(St){return typeof St=="object"&&St!==null&&("data"in St||"range"in St||"url"in St)}const Document=reactExports.forwardRef(function St(t,xe){var{children:e,className:_e,error:Se="Failed to load PDF file.",externalLinkRel:Ee,externalLinkTarget:Re,file:Ce,inputRef:De,imageResourcesPath:Me,loading:Ue="Loading PDFâ¦",noData:He="No PDF file specified.",onItemClick:Te,onLoadError:Ve,onLoadProgress:$e,onLoadSuccess:Ke,onPassword:Be=defaultOnPassword,onSourceError:Ye,onSourceSuccess:an,options:rn,renderMode:Xe,rotate:en}=t,We=__rest$1(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[ze,Qe]=useResolver(),{value:gn,error:ke}=ze,[Ge,nn]=useResolver(),{value:dn,error:wn}=Ge,Sn=reactExports.useRef(new LinkService),yn=reactExports.useRef([]),Pn=reactExports.useRef(),un=reactExports.useRef();reactExports.useEffect(()=>{Ce&&Ce!==Pn.current&&isParameterObject(Ce)&&(warning$1(!dequal(Ce,Pn.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Pn.current=Ce)},[Ce]),reactExports.useEffect(()=>{rn&&rn!==un.current&&(warning$1(!dequal(rn,un.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),un.current=rn)},[rn]);const _n=reactExports.useRef({scrollPageIntoView:cn=>{const{dest:Bn,pageNumber:mn,pageIndex:bn=mn-1}=cn;if(Te){Te({dest:Bn,pageIndex:bn,pageNumber:mn});return}const Rn=yn.current[bn];if(Rn){Rn.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${mn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(xe,()=>({linkService:Sn,pages:yn,viewer:_n}),[]);function Nn(){an&&an()}function je(){ke&&(warning$1(!1,ke.toString()),Ye&&Ye(ke))}function Ie(){Qe({type:"RESET"})}reactExports.useEffect(Ie,[Ce,Qe]);const Oe=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!Ce)return null;if(typeof Ce=="string")return isDataURI(Ce)?{data:dataURItoByteString(Ce)}:(displayCORSWarning(),{url:Ce});if(Ce instanceof PDFDataRangeTransport)return{range:Ce};if(isArrayBuffer(Ce))return{data:Ce};if(isBrowser&&isBlob(Ce))return{data:yield loadFromFile(Ce)};if(invariant(typeof Ce=="object"),invariant(isParameterObject(Ce)),"url"in Ce&&typeof Ce.url=="string"){if(isDataURI(Ce.url)){const{url:cn}=Ce,Bn=__rest$1(Ce,["url"]),mn=dataURItoByteString(cn);return Object.assign({data:mn},Bn)}displayCORSWarning()}return Ce}),[Ce]);reactExports.useEffect(()=>{const cn=makeCancellablePromise(Oe());return cn.promise.then(Bn=>{Qe({type:"RESOLVE",value:Bn})}).catch(Bn=>{Qe({type:"REJECT",error:Bn})}),()=>{cancelRunningTask(cn)}},[Oe,Qe]),reactExports.useEffect(()=>{if(!(typeof gn>"u")){if(gn===!1){je();return}Nn()}},[gn]);function Ze(){dn&&(Ke&&Ke(dn),yn.current=new Array(dn.numPages),Sn.current.setDocument(dn))}function sn(){wn&&(warning$1(!1,wn.toString()),Ve&&Ve(wn))}function on(){nn({type:"RESET"})}reactExports.useEffect(on,[nn,gn]);function hn(){if(!gn)return;const cn=Object.assign(Object.assign({},rn),{isEvalSupported:!1}),Bn=Object.assign(Object.assign({},gn),cn),mn=pdfjs.getDocument(Bn);$e&&(mn.onProgress=$e),Be&&(mn.onPassword=Be);const bn=mn;return bn.promise.then(Rn=>{nn({type:"RESOLVE",value:Rn})}).catch(Rn=>{bn.destroyed||nn({type:"REJECT",error:Rn})}),()=>{bn.destroy()}}reactExports.useEffect(hn,[rn,nn,gn]),reactExports.useEffect(()=>{if(!(typeof dn>"u")){if(dn===!1){sn();return}Ze()}},[dn]);function An(){Sn.current.setViewer(_n.current),Sn.current.setExternalLinkRel(Ee),Sn.current.setExternalLinkTarget(Re)}reactExports.useEffect(An,[Ee,Re]);function Mn(cn,Bn){yn.current[cn]=Bn}function In(cn){delete yn.current[cn]}const zn=reactExports.useMemo(()=>({imageResourcesPath:Me,linkService:Sn.current,onItemClick:Te,pdf:dn,registerPage:Mn,renderMode:Xe,rotate:en,unregisterPage:In}),[Me,Te,dn,Xe,en]),Wn=reactExports.useMemo(()=>makeEventProps(We,()=>dn),[We,dn]);function Jn(){return React.createElement(DocumentContext.Provider,{value:zn},e)}function Dn(){return Ce?dn==null?React.createElement(Message,{type:"loading"},typeof Ue=="function"?Ue():Ue):dn===!1?React.createElement(Message,{type:"error"},typeof Se=="function"?Se():Se):Jn():React.createElement(Message,{type:"no-data"},typeof He=="function"?He():He)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",_e),ref:De,style:{"--scale-factor":"1"}},Wn),Dn())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var St=[],t=0;t<arguments.length;t++)St[t]=arguments[t];var xe=St.filter(Boolean);if(xe.length<=1){var e=xe[0];return e||null}return function(Se){xe.forEach(function(Ee){typeof Ee=="function"?Ee(Se):Ee&&(Ee.current=Se)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(St){return St in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(St){return"children"in St}function isStructTreeNodeWithOnlyContentChild(St){return isStructTreeNode(St)?St.children.length===1&&0 in St.children&&"id"in St.children[0]:!1}function getRoleAttributes(St){const t={};if(isStructTreeNode(St)){const{role:xe}=St,e=xe.match(HEADING_PATTERN);if(e)t.role="heading",t["aria-level"]=Number(e[1]);else if(isPdfRole(xe)){const _e=PDF_ROLE_TO_HTML_ROLE[xe];_e&&(t.role=_e)}}return t}function getBaseAttributes(St){const t={};if(isStructTreeNode(St)){if(St.alt!==void 0&&(t["aria-label"]=St.alt),St.lang!==void 0&&(t.lang=St.lang),isStructTreeNodeWithOnlyContentChild(St)){const[xe]=St.children;if(xe){const e=getBaseAttributes(xe);return Object.assign(Object.assign({},t),e)}}}else"id"in St&&(t["aria-owns"]=St.id);return t}function getAttributes(St){return St?Object.assign(Object.assign({},getRoleAttributes(St)),getBaseAttributes(St)):null}function StructTreeItem({className:St,node:t}){const xe=reactExports.useMemo(()=>getAttributes(t),[t]),e=reactExports.useMemo(()=>!isStructTreeNode(t)||isStructTreeNodeWithOnlyContentChild(t)?null:t.children.map((_e,Se)=>React.createElement(StructTreeItem,{key:Se,node:_e})),[t]);return React.createElement("span",Object.assign({className:St},xe),e)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const St=usePageContext();invariant(St);const{onGetStructTreeError:t,onGetStructTreeSuccess:xe}=St,[e,_e]=useResolver(),{value:Se,error:Ee}=e,{customTextRenderer:Re,page:Ce}=St;function De(){Se&&xe&&xe(Se)}function Me(){Ee&&(warning$1(!1,Ee.toString()),t&&t(Ee))}function Ue(){_e({type:"RESET"})}reactExports.useEffect(Ue,[_e,Ce]);function He(){if(Re||!Ce)return;const Te=makeCancellablePromise(Ce.getStructTree()),Ve=Te;return Te.promise.then($e=>{_e({type:"RESOLVE",value:$e})}).catch($e=>{_e({type:"REJECT",error:$e})}),()=>cancelRunningTask(Ve)}return reactExports.useEffect(He,[Re,Ce,_e]),reactExports.useEffect(()=>{if(Se!==void 0){if(Se===!1){Me();return}De()}},[Se]),Se?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:Se}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(St){const t=usePageContext();invariant(t);const xe=Object.assign(Object.assign({},t),St),{_className:e,canvasBackground:_e,devicePixelRatio:Se=getDevicePixelRatio(),onRenderError:Ee,onRenderSuccess:Re,page:Ce,renderForms:De,renderTextLayer:Me,rotate:Ue,scale:He}=xe,{canvasRef:Te}=St;invariant(Ce);const Ve=reactExports.useRef(null);function $e(){Ce&&Re&&Re(makePageCallback(Ce,He))}function Ke(Xe){isCancelException(Xe)||(warning$1(!1,Xe.toString()),Ee&&Ee(Xe))}const Be=reactExports.useMemo(()=>Ce.getViewport({scale:He*Se,rotation:Ue}),[Se,Ce,Ue,He]),Ye=reactExports.useMemo(()=>Ce.getViewport({scale:He,rotation:Ue}),[Ce,Ue,He]);function an(){if(!Ce)return;Ce.cleanup();const{current:Xe}=Ve;if(!Xe)return;Xe.width=Be.width,Xe.height=Be.height,Xe.style.width=`${Math.floor(Ye.width)}px`,Xe.style.height=`${Math.floor(Ye.height)}px`,Xe.style.visibility="hidden";const en={annotationMode:De?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:Xe.getContext("2d",{alpha:!1}),viewport:Be};_e&&(en.background=_e);const We=Ce.render(en),ze=We;return We.promise.then(()=>{Xe.style.visibility="",$e()}).catch(Ke),()=>cancelRunningTask(ze)}reactExports.useEffect(an,[_e,Ve,Se,Ce,De,Be,Ye]);const rn=reactExports.useCallback(()=>{const{current:Xe}=Ve;Xe&&(Xe.width=0,Xe.height=0)},[Ve]);return reactExports.useEffect(()=>rn,[rn]),React.createElement("canvas",{className:`${e}__canvas`,dir:"ltr",ref:mergeRefs(Te,Ve),style:{display:"block",userSelect:"none"}},Me?React.createElement(StructTree,null):null)}function PageSVG(){const St=usePageContext();invariant(St);const{_className:t,onRenderSuccess:xe,onRenderError:e,page:_e,rotate:Se,scale:Ee}=St;invariant(_e);const[Re,Ce]=useResolver(),{value:De,error:Me}=Re;function Ue(){_e&&xe&&xe(makePageCallback(_e,Ee))}function He(){Me&&(isCancelException(Me)||(warning$1(!1,Me.toString()),e&&e(Me)))}const Te=reactExports.useMemo(()=>_e.getViewport({scale:Ee,rotation:Se}),[_e,Se,Ee]);function Ve(){Ce({type:"RESET"})}reactExports.useEffect(Ve,[_e,Ce,Te]);function $e(){if(!_e)return;const an=makeCancellablePromise(_e.getOperatorList());return an.promise.then(rn=>{new pdfjs.SVGGraphics(_e.commonObjs,_e.objs).getSVG(rn,Te).then(en=>{if(!(en instanceof SVGElement))throw new Error("getSVG returned unexpected result.");Ce({type:"RESOLVE",value:en})}).catch(en=>{Ce({type:"REJECT",error:en})})}).catch(rn=>{Ce({type:"REJECT",error:rn})}),()=>cancelRunningTask(an)}reactExports.useEffect($e,[_e,Ce,Te]),reactExports.useEffect(()=>{if(De!==void 0){if(De===!1){He();return}Ue()}},[De]);function Ke(an){if(!an||!De)return;an.firstElementChild||an.appendChild(De);const{width:rn,height:Xe}=Te;De.setAttribute("width",`${rn}`),De.setAttribute("height",`${Xe}`)}const{width:Be,height:Ye}=Te;return React.createElement("div",{className:`${t}__svg`,ref:an=>Ke(an),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:Be,height:Ye,userSelect:"none"}})}function isTextItem(St){return"str"in St}function TextLayer(){const St=usePageContext();invariant(St);const{customTextRenderer:t,onGetTextError:xe,onGetTextSuccess:e,onRenderTextLayerError:_e,onRenderTextLayerSuccess:Se,page:Ee,pageIndex:Re,pageNumber:Ce,rotate:De,scale:Me}=St;invariant(Ee);const[Ue,He]=useResolver(),{value:Te,error:Ve}=Ue,$e=reactExports.useRef(null),Ke=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function Be(){Te&&e&&e(Te)}function Ye(){Ve&&(warning$1(!1,Ve.toString()),xe&&xe(Ve))}function an(){He({type:"RESET"})}reactExports.useEffect(an,[Ee,He]);function rn(){if(!Ee)return;const ke=makeCancellablePromise(Ee.getTextContent()),Ge=ke;return ke.promise.then(nn=>{He({type:"RESOLVE",value:nn})}).catch(nn=>{He({type:"REJECT",error:nn})}),()=>cancelRunningTask(Ge)}reactExports.useEffect(rn,[Ee,He]),reactExports.useEffect(()=>{if(Te!==void 0){if(Te===!1){Ye();return}Be()}},[Te]);const Xe=reactExports.useCallback(()=>{Se&&Se()},[Se]),en=reactExports.useCallback(ke=>{warning$1(!1,ke.toString()),_e&&_e(ke)},[_e]);function We(){const ke=Ke.current;ke&&ke.classList.add("active")}function ze(){const ke=Ke.current;ke&&ke.classList.remove("active")}const Qe=reactExports.useMemo(()=>Ee.getViewport({scale:Me,rotation:De}),[Ee,De,Me]);function gn(){if(!Ee||!Te)return;const{current:ke}=$e;if(!ke)return;ke.innerHTML="";const Ge=Ee.streamTextContent({includeMarkedContent:!0}),nn={container:ke,textContentSource:Ge,viewport:Qe},dn=pdfjs.renderTextLayer(nn),wn=dn;return dn.promise.then(()=>{const Sn=document.createElement("div");Sn.className="endOfContent",ke.append(Sn),Ke.current=Sn;const yn=ke.querySelectorAll('[role="presentation"]');if(t){let Pn=0;Te.items.forEach((un,_n)=>{if(!isTextItem(un))return;const Nn=yn[Pn];if(!Nn)return;const je=t(Object.assign({pageIndex:Re,pageNumber:Ce,itemIndex:_n},un));Nn.innerHTML=je,Pn+=un.str&&un.hasEOL?2:1})}Xe()}).catch(en),()=>cancelRunningTask(wn)}return reactExports.useLayoutEffect(gn,[t,en,Xe,Ee,Re,Ce,Te,Qe]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:ze,onMouseDown:We,ref:$e})}function AnnotationLayer(){const St=useDocumentContext(),t=usePageContext();invariant(t);const xe=Object.assign(Object.assign({},St),t),{imageResourcesPath:e,linkService:_e,onGetAnnotationsError:Se,onGetAnnotationsSuccess:Ee,onRenderAnnotationLayerError:Re,onRenderAnnotationLayerSuccess:Ce,page:De,pdf:Me,renderForms:Ue,rotate:He,scale:Te=1}=xe;invariant(Me),invariant(De),invariant(_e);const[Ve,$e]=useResolver(),{value:Ke,error:Be}=Ve,Ye=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function an(){Ke&&Ee&&Ee(Ke)}function rn(){Be&&(warning$1(!1,Be.toString()),Se&&Se(Be))}function Xe(){$e({type:"RESET"})}reactExports.useEffect(Xe,[$e,De]);function en(){if(!De)return;const ke=makeCancellablePromise(De.getAnnotations()),Ge=ke;return ke.promise.then(nn=>{$e({type:"RESOLVE",value:nn})}).catch(nn=>{$e({type:"REJECT",error:nn})}),()=>{cancelRunningTask(Ge)}}reactExports.useEffect(en,[$e,De,Ue]),reactExports.useEffect(()=>{if(Ke!==void 0){if(Ke===!1){rn();return}an()}},[Ke]);function We(){Ce&&Ce()}function ze(ke){warning$1(!1,`${ke}`),Re&&Re(ke)}const Qe=reactExports.useMemo(()=>De.getViewport({scale:Te,rotation:He}),[De,He,Te]);function gn(){if(!Me||!De||!_e||!Ke)return;const{current:ke}=Ye;if(!ke)return;const Ge=Qe.clone({dontFlip:!0}),nn={accessibilityManager:null,annotationCanvasMap:null,div:ke,l10n:null,page:De,viewport:Ge},dn={annotations:Ke,annotationStorage:Me.annotationStorage,div:ke,downloadManager:null,imageResourcesPath:e,linkService:_e,page:De,renderForms:Ue,viewport:Ge};ke.innerHTML="";try{new pdfjs.AnnotationLayer(nn).render(dn),We()}catch(wn){ze(wn)}return()=>{}}return reactExports.useEffect(gn,[Ke,e,_e,De,Ue,Qe]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:Ye})}var __rest=function(St,t){var xe={};for(var e in St)Object.prototype.hasOwnProperty.call(St,e)&&t.indexOf(e)<0&&(xe[e]=St[e]);if(St!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _e=0,e=Object.getOwnPropertySymbols(St);_e<e.length;_e++)t.indexOf(e[_e])<0&&Object.prototype.propertyIsEnumerable.call(St,e[_e])&&(xe[e[_e]]=St[e[_e]]);return xe};const defaultScale=1,Page=function St(t){const xe=useDocumentContext(),e=Object.assign(Object.assign({},xe),t),{_className:_e="react-pdf__Page",_enableRegisterUnregisterPage:Se=!0,canvasBackground:Ee,canvasRef:Re,children:Ce,className:De,customRenderer:Me,customTextRenderer:Ue,devicePixelRatio:He,error:Te="Failed to load the page.",height:Ve,inputRef:$e,loading:Ke="Loading pageâ¦",noData:Be="No page specified.",onGetAnnotationsError:Ye,onGetAnnotationsSuccess:an,onGetStructTreeError:rn,onGetStructTreeSuccess:Xe,onGetTextError:en,onGetTextSuccess:We,onLoadError:ze,onLoadSuccess:Qe,onRenderAnnotationLayerError:gn,onRenderAnnotationLayerSuccess:ke,onRenderError:Ge,onRenderSuccess:nn,onRenderTextLayerError:dn,onRenderTextLayerSuccess:wn,pageIndex:Sn,pageNumber:yn,pdf:Pn,registerPage:un,renderAnnotationLayer:_n=!0,renderForms:Nn=!1,renderMode:je="canvas",renderTextLayer:Ie=!0,rotate:Oe,scale:Ze=defaultScale,unregisterPage:sn,width:on}=e,hn=__rest(e,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[An,Mn]=useResolver(),{value:In,error:zn}=An,Wn=reactExports.useRef(null);invariant(Pn);const Jn=isProvided(yn)?yn-1:Sn??null,Dn=yn??(isProvided(Sn)?Sn+1:null),cn=Oe??(In?In.rotate:null),Bn=reactExports.useMemo(()=>{if(!In)return null;let Rr=1;const jr=Ze??defaultScale;if(on||Ve){const Vr=In.getViewport({scale:1,rotation:cn});on?Rr=on/Vr.width:Ve&&(Rr=Ve/Vr.height)}return jr*Rr},[Ve,In,cn,Ze,on]);function mn(){return()=>{isProvided(Jn)&&Se&&sn&&sn(Jn)}}reactExports.useEffect(mn,[Se,Pn,Jn,sn]);function bn(){if(Qe){if(!In||!Bn)return;Qe(makePageCallback(In,Bn))}if(Se&&un){if(!isProvided(Jn)||!Wn.current)return;un(Jn,Wn.current)}}function Rn(){zn&&(warning$1(!1,zn.toString()),ze&&ze(zn))}function On(){Mn({type:"RESET"})}reactExports.useEffect(On,[Mn,Pn,Jn]);function Hn(){if(!Pn||!Dn)return;const Rr=makeCancellablePromise(Pn.getPage(Dn)),jr=Rr;return Rr.promise.then(Vr=>{Mn({type:"RESOLVE",value:Vr})}).catch(Vr=>{Mn({type:"REJECT",error:Vr})}),()=>cancelRunningTask(jr)}reactExports.useEffect(Hn,[Mn,Pn,Jn,Dn,un]),reactExports.useEffect(()=>{if(In!==void 0){if(In===!1){Rn();return}bn()}},[In,Bn]);const tr=reactExports.useMemo(()=>In&&isProvided(Jn)&&Dn&&isProvided(cn)&&isProvided(Bn)?{_className:_e,canvasBackground:Ee,customTextRenderer:Ue,devicePixelRatio:He,onGetAnnotationsError:Ye,onGetAnnotationsSuccess:an,onGetStructTreeError:rn,onGetStructTreeSuccess:Xe,onGetTextError:en,onGetTextSuccess:We,onRenderAnnotationLayerError:gn,onRenderAnnotationLayerSuccess:ke,onRenderError:Ge,onRenderSuccess:nn,onRenderTextLayerError:dn,onRenderTextLayerSuccess:wn,page:In,pageIndex:Jn,pageNumber:Dn,renderForms:Nn,renderTextLayer:Ie,rotate:cn,scale:Bn}:null,[_e,Ee,Ue,He,Ye,an,rn,Xe,en,We,gn,ke,Ge,nn,dn,wn,In,Jn,Dn,Nn,Ie,cn,Bn]),ir=reactExports.useMemo(()=>makeEventProps(hn,()=>In&&(Bn?makePageCallback(In,Bn):void 0)),[hn,In,Bn]),qn=`${Jn}@${Bn}/${cn}`,pr=`${Jn}/${cn}`;function fr(){switch(je){case"custom":return invariant(Me),React.createElement(Me,{key:`${qn}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${pr}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${qn}_canvas`,canvasRef:Re})}}function Mr(){return Ie?React.createElement(TextLayer,{key:`${qn}_text`}):null}function _r(){return _n?React.createElement(AnnotationLayer,{key:`${qn}_annotations`}):null}function Ir(){return React.createElement(PageContext.Provider,{value:tr},fr(),Mr(),_r(),Ce)}function hr(){return Dn?Pn===null||In===void 0||In===null?React.createElement(Message,{type:"loading"},typeof Ke=="function"?Ke():Ke):Pn===!1||In===!1?React.createElement(Message,{type:"error"},typeof Te=="function"?Te():Te):Ir():React.createElement(Message,{type:"no-data"},typeof Be=="function"?Be():Be)}return React.createElement("div",Object.assign({className:clsx(_e,De),"data-page-number":Dn,ref:mergeRefs($e,Wn),style:{"--scale-factor":`${Bn}`,backgroundColor:Ee||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},ir),hr())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";const scriptRel="modulepreload",assetsURL=function(St){return"/"+St},seen={},__vitePreload=function St(t,xe,e){let _e=Promise.resolve();if(xe&&xe.length>0){document.getElementsByTagName("link");const Ee=document.querySelector("meta[property=csp-nonce]"),Re=(Ee==null?void 0:Ee.nonce)||(Ee==null?void 0:Ee.getAttribute("nonce"));_e=Promise.allSettled(xe.map(Ce=>{if(Ce=assetsURL(Ce),Ce in seen)return;seen[Ce]=!0;const De=Ce.endsWith(".css"),Me=De?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ce}"]${Me}`))return;const Ue=document.createElement("link");if(Ue.rel=De?"stylesheet":scriptRel,De||(Ue.as="script"),Ue.crossOrigin="",Ue.href=Ce,Re&&Ue.setAttribute("nonce",Re),document.head.appendChild(Ue),De)return new Promise((He,Te)=>{Ue.addEventListener("load",He),Ue.addEventListener("error",()=>Te(new Error(`Unable to preload CSS for ${Ce}`)))})}))}function Se(Ee){const Re=new Event("vite:preloadError",{cancelable:!0});if(Re.payload=Ee,window.dispatchEvent(Re),!Re.defaultPrevented)throw Ee}return _e.then(Ee=>{for(const Re of Ee||[])Re.status==="rejected"&&Se(Re.reason);return t().catch(Se)})};function _typeof(St){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(St)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(St,t){for(var xe=new u16(31),e=0;e<31;++e)xe[e]=t+=1<<St[e-1];for(var _e=new i32(xe[30]),e=1;e<30;++e)for(var Se=xe[e];Se<xe[e+1];++Se)_e[Se]=Se-xe[e]<<5|e;return{b:xe,r:_e}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(St,t,xe){for(var e=St.length,_e=0,Se=new u16(t);_e<e;++_e)St[_e]&&++Se[St[_e]-1];var Ee=new u16(t);for(_e=1;_e<t;++_e)Ee[_e]=Ee[_e-1]+Se[_e-1]<<1;var Re;if(xe){Re=new u16(1<<t);var Ce=15-t;for(_e=0;_e<e;++_e)if(St[_e])for(var De=_e<<4|St[_e],Me=t-St[_e],Ue=Ee[St[_e]-1]++<<Me,He=Ue|(1<<Me)-1;Ue<=He;++Ue)Re[rev[Ue]>>Ce]=De}else for(Re=new u16(e),_e=0;_e<e;++_e)St[_e]&&(Re[_e]=rev[Ee[St[_e]-1]++]>>15-St[_e]);return Re},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(St){for(var t=St[0],xe=1;xe<St.length;++xe)St[xe]>t&&(t=St[xe]);return t},bits=function(St,t,xe){var e=t/8|0;return(St[e]|St[e+1]<<8)>>(t&7)&xe},bits16=function(St,t){var xe=t/8|0;return(St[xe]|St[xe+1]<<8|St[xe+2]<<16)>>(t&7)},shft=function(St){return(St+7)/8|0},slc=function(St,t,xe){return(xe==null||xe>St.length)&&(xe=St.length),new u8(St.subarray(t,xe))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(St,t,xe){var e=new Error(t||ec[St]);if(e.code=St,Error.captureStackTrace&&Error.captureStackTrace(e,err),!xe)throw e;return e},inflt=function(St,t,xe,e){var _e=St.length,Se=0;if(!_e||t.f&&!t.l)return xe||new u8(0);var Ee=!xe,Re=Ee||t.i!=2,Ce=t.i;Ee&&(xe=new u8(_e*3));var De=function(In){var zn=xe.length;if(In>zn){var Wn=new u8(Math.max(zn*2,In));Wn.set(xe),xe=Wn}},Me=t.f||0,Ue=t.p||0,He=t.b||0,Te=t.l,Ve=t.d,$e=t.m,Ke=t.n,Be=_e*8;do{if(!Te){Me=bits(St,Ue,1);var Ye=bits(St,Ue+1,3);if(Ue+=3,Ye)if(Ye==1)Te=flrm,Ve=fdrm,$e=9,Ke=5;else if(Ye==2){var en=bits(St,Ue,31)+257,We=bits(St,Ue+10,15)+4,ze=en+bits(St,Ue+5,31)+1;Ue+=14;for(var Qe=new u8(ze),gn=new u8(19),ke=0;ke<We;++ke)gn[clim[ke]]=bits(St,Ue+ke*3,7);Ue+=We*3;for(var Ge=max(gn),nn=(1<<Ge)-1,dn=hMap(gn,Ge,1),ke=0;ke<ze;){var wn=dn[bits(St,Ue,nn)];Ue+=wn&15;var an=wn>>4;if(an<16)Qe[ke++]=an;else{var Sn=0,yn=0;for(an==16?(yn=3+bits(St,Ue,3),Ue+=2,Sn=Qe[ke-1]):an==17?(yn=3+bits(St,Ue,7),Ue+=3):an==18&&(yn=11+bits(St,Ue,127),Ue+=7);yn--;)Qe[ke++]=Sn}}var Pn=Qe.subarray(0,en),un=Qe.subarray(en);$e=max(Pn),Ke=max(un),Te=hMap(Pn,$e,1),Ve=hMap(un,Ke,1)}else err(1);else{var an=shft(Ue)+4,rn=St[an-4]|St[an-3]<<8,Xe=an+rn;if(Xe>_e){Ce&&err(0);break}Re&&De(He+rn),xe.set(St.subarray(an,Xe),He),t.b=He+=rn,t.p=Ue=Xe*8,t.f=Me;continue}if(Ue>Be){Ce&&err(0);break}}Re&&De(He+131072);for(var _n=(1<<$e)-1,Nn=(1<<Ke)-1,je=Ue;;je=Ue){var Sn=Te[bits16(St,Ue)&_n],Ie=Sn>>4;if(Ue+=Sn&15,Ue>Be){Ce&&err(0);break}if(Sn||err(2),Ie<256)xe[He++]=Ie;else if(Ie==256){je=Ue,Te=null;break}else{var Oe=Ie-254;if(Ie>264){var ke=Ie-257,Ze=fleb[ke];Oe=bits(St,Ue,(1<<Ze)-1)+fl[ke],Ue+=Ze}var sn=Ve[bits16(St,Ue)&Nn],on=sn>>4;sn||err(3),Ue+=sn&15;var un=fd[on];if(on>3){var Ze=fdeb[on];un+=bits16(St,Ue)&(1<<Ze)-1,Ue+=Ze}if(Ue>Be){Ce&&err(0);break}Re&&De(He+131072);var hn=He+Oe;if(He<un){var An=Se-un,Mn=Math.min(un,hn);for(An+He<0&&err(3);He<Mn;++He)xe[He]=e[An+He]}for(;He<hn;++He)xe[He]=xe[He-un]}}t.l=Te,t.p=je,t.b=He,t.f=Me,Te&&(Me=1,t.m=$e,t.d=Ve,t.n=Ke)}while(!Me);return He!=xe.length&&Ee?slc(xe,0,He):xe.subarray(0,He)},wbits=function(St,t,xe){xe<<=t&7;var e=t/8|0;St[e]|=xe,St[e+1]|=xe>>8},wbits16=function(St,t,xe){xe<<=t&7;var e=t/8|0;St[e]|=xe,St[e+1]|=xe>>8,St[e+2]|=xe>>16},hTree=function(St,t){for(var xe=[],e=0;e<St.length;++e)St[e]&&xe.push({s:e,f:St[e]});var _e=xe.length,Se=xe.slice();if(!_e)return{t:et$1,l:0};if(_e==1){var Ee=new u8(xe[0].s+1);return Ee[xe[0].s]=1,{t:Ee,l:1}}xe.sort(function(Xe,en){return Xe.f-en.f}),xe.push({s:-1,f:25001});var Re=xe[0],Ce=xe[1],De=0,Me=1,Ue=2;for(xe[0]={s:-1,f:Re.f+Ce.f,l:Re,r:Ce};Me!=_e-1;)Re=xe[xe[De].f<xe[Ue].f?De++:Ue++],Ce=xe[De!=Me&&xe[De].f<xe[Ue].f?De++:Ue++],xe[Me++]={s:-1,f:Re.f+Ce.f,l:Re,r:Ce};for(var He=Se[0].s,e=1;e<_e;++e)Se[e].s>He&&(He=Se[e].s);var Te=new u16(He+1),Ve=ln(xe[Me-1],Te,0);if(Ve>t){var e=0,$e=0,Ke=Ve-t,Be=1<<Ke;for(Se.sort(function(en,We){return Te[We.s]-Te[en.s]||en.f-We.f});e<_e;++e){var Ye=Se[e].s;if(Te[Ye]>t)$e+=Be-(1<<Ve-Te[Ye]),Te[Ye]=t;else break}for($e>>=Ke;$e>0;){var an=Se[e].s;Te[an]<t?$e-=1<<t-Te[an]++-1:++e}for(;e>=0&&$e;--e){var rn=Se[e].s;Te[rn]==t&&(--Te[rn],++$e)}Ve=t}return{t:new u8(Te),l:Ve}},ln=function(St,t,xe){return St.s==-1?Math.max(ln(St.l,t,xe+1),ln(St.r,t,xe+1)):t[St.s]=xe},lc=function(St){for(var t=St.length;t&&!St[--t];);for(var xe=new u16(++t),e=0,_e=St[0],Se=1,Ee=function(Ce){xe[e++]=Ce},Re=1;Re<=t;++Re)if(St[Re]==_e&&Re!=t)++Se;else{if(!_e&&Se>2){for(;Se>138;Se-=138)Ee(32754);Se>2&&(Ee(Se>10?Se-11<<5|28690:Se-3<<5|12305),Se=0)}else if(Se>3){for(Ee(_e),--Se;Se>6;Se-=6)Ee(8304);Se>2&&(Ee(Se-3<<5|8208),Se=0)}for(;Se--;)Ee(_e);Se=1,_e=St[Re]}return{c:xe.subarray(0,e),n:t}},clen=function(St,t){for(var xe=0,e=0;e<t.length;++e)xe+=St[e]*t[e];return xe},wfblk=function(St,t,xe){var e=xe.length,_e=shft(t+2);St[_e]=e&255,St[_e+1]=e>>8,St[_e+2]=St[_e]^255,St[_e+3]=St[_e+1]^255;for(var Se=0;Se<e;++Se)St[_e+Se+4]=xe[Se];return(_e+4+e)*8},wblk=function(St,t,xe,e,_e,Se,Ee,Re,Ce,De,Me){wbits(t,Me++,xe),++_e[256];for(var Ue=hTree(_e,15),He=Ue.t,Te=Ue.l,Ve=hTree(Se,15),$e=Ve.t,Ke=Ve.l,Be=lc(He),Ye=Be.c,an=Be.n,rn=lc($e),Xe=rn.c,en=rn.n,We=new u16(19),ze=0;ze<Ye.length;++ze)++We[Ye[ze]&31];for(var ze=0;ze<Xe.length;++ze)++We[Xe[ze]&31];for(var Qe=hTree(We,7),gn=Qe.t,ke=Qe.l,Ge=19;Ge>4&&!gn[clim[Ge-1]];--Ge);var nn=De+5<<3,dn=clen(_e,flt)+clen(Se,fdt)+Ee,wn=clen(_e,He)+clen(Se,$e)+Ee+14+3*Ge+clen(We,gn)+2*We[16]+3*We[17]+7*We[18];if(Ce>=0&&nn<=dn&&nn<=wn)return wfblk(t,Me,St.subarray(Ce,Ce+De));var Sn,yn,Pn,un;if(wbits(t,Me,1+(wn<dn)),Me+=2,wn<dn){Sn=hMap(He,Te,0),yn=He,Pn=hMap($e,Ke,0),un=$e;var _n=hMap(gn,ke,0);wbits(t,Me,an-257),wbits(t,Me+5,en-1),wbits(t,Me+10,Ge-4),Me+=14;for(var ze=0;ze<Ge;++ze)wbits(t,Me+3*ze,gn[clim[ze]]);Me+=3*Ge;for(var Nn=[Ye,Xe],je=0;je<2;++je)for(var Ie=Nn[je],ze=0;ze<Ie.length;++ze){var Oe=Ie[ze]&31;wbits(t,Me,_n[Oe]),Me+=gn[Oe],Oe>15&&(wbits(t,Me,Ie[ze]>>5&127),Me+=Ie[ze]>>12)}}else Sn=flm,yn=flt,Pn=fdm,un=fdt;for(var ze=0;ze<Re;++ze){var Ze=e[ze];if(Ze>255){var Oe=Ze>>18&31;wbits16(t,Me,Sn[Oe+257]),Me+=yn[Oe+257],Oe>7&&(wbits(t,Me,Ze>>23&31),Me+=fleb[Oe]);var sn=Ze&31;wbits16(t,Me,Pn[sn]),Me+=un[sn],sn>3&&(wbits16(t,Me,Ze>>5&8191),Me+=fdeb[sn])}else wbits16(t,Me,Sn[Ze]),Me+=yn[Ze]}return wbits16(t,Me,Sn[256]),Me+yn[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(St,t,xe,e,_e,Se){var Ee=Se.z||St.length,Re=new u8(e+Ee+5*(1+Math.ceil(Ee/7e3))+_e),Ce=Re.subarray(e,Re.length-_e),De=Se.l,Me=(Se.r||0)&7;if(t){Me&&(Ce[0]=Se.r>>3);for(var Ue=deo[t-1],He=Ue>>13,Te=Ue&8191,Ve=(1<<xe)-1,$e=Se.p||new u16(32768),Ke=Se.h||new u16(Ve+1),Be=Math.ceil(xe/3),Ye=2*Be,an=function(Jn){return(St[Jn]^St[Jn+1]<<Be^St[Jn+2]<<Ye)&Ve},rn=new i32(25e3),Xe=new u16(288),en=new u16(32),We=0,ze=0,Qe=Se.i||0,gn=0,ke=Se.w||0,Ge=0;Qe+2<Ee;++Qe){var nn=an(Qe),dn=Qe&32767,wn=Ke[nn];if($e[dn]=wn,Ke[nn]=dn,ke<=Qe){var Sn=Ee-Qe;if((We>7e3||gn>24576)&&(Sn>423||!De)){Me=wblk(St,Ce,0,rn,Xe,en,ze,gn,Ge,Qe-Ge,Me),gn=We=ze=0,Ge=Qe;for(var yn=0;yn<286;++yn)Xe[yn]=0;for(var yn=0;yn<30;++yn)en[yn]=0}var Pn=2,un=0,_n=Te,Nn=dn-wn&32767;if(Sn>2&&nn==an(Qe-Nn))for(var je=Math.min(He,Sn)-1,Ie=Math.min(32767,Qe),Oe=Math.min(258,Sn);Nn<=Ie&&--_n&&dn!=wn;){if(St[Qe+Pn]==St[Qe+Pn-Nn]){for(var Ze=0;Ze<Oe&&St[Qe+Ze]==St[Qe+Ze-Nn];++Ze);if(Ze>Pn){if(Pn=Ze,un=Nn,Ze>je)break;for(var sn=Math.min(Nn,Ze-2),on=0,yn=0;yn<sn;++yn){var hn=Qe-Nn+yn&32767,An=$e[hn],Mn=hn-An&32767;Mn>on&&(on=Mn,wn=hn)}}}dn=wn,wn=$e[dn],Nn+=dn-wn&32767}if(un){rn[gn++]=268435456|revfl[Pn]<<18|revfd[un];var In=revfl[Pn]&31,zn=revfd[un]&31;ze+=fleb[In]+fdeb[zn],++Xe[257+In],++en[zn],ke=Qe+Pn,++We}else rn[gn++]=St[Qe],++Xe[St[Qe]]}}for(Qe=Math.max(Qe,ke);Qe<Ee;++Qe)rn[gn++]=St[Qe],++Xe[St[Qe]];Me=wblk(St,Ce,De,rn,Xe,en,ze,gn,Ge,Qe-Ge,Me),De||(Se.r=Me&7|Ce[Me/8|0]<<3,Me-=7,Se.h=Ke,Se.p=$e,Se.i=Qe,Se.w=ke)}else{for(var Qe=Se.w||0;Qe<Ee+De;Qe+=65535){var Wn=Qe+65535;Wn>=Ee&&(Ce[Me/8|0]=De,Wn=Ee),Me=wfblk(Ce,Me+1,St.subarray(Qe,Wn))}Se.i=Ee}return slc(Re,0,e+shft(Me)+_e)},adler=function(){var St=1,t=0;return{p:function(xe){for(var e=St,_e=t,Se=xe.length|0,Ee=0;Ee!=Se;){for(var Re=Math.min(Ee+2655,Se);Ee<Re;++Ee)_e+=e+=xe[Ee];e=(e&65535)+15*(e>>16),_e=(_e&65535)+15*(_e>>16)}St=e,t=_e},d:function(){return St%=65521,t%=65521,(St&255)<<24|(St&65280)<<8|(t&255)<<8|t>>8}}},dopt=function(St,t,xe,e,_e){if(!_e&&(_e={l:1},t.dictionary)){var Se=t.dictionary.subarray(-32768),Ee=new u8(Se.length+St.length);Ee.set(Se),Ee.set(St,Se.length),St=Ee,_e.w=Se.length}return dflt(St,t.level==null?6:t.level,t.mem==null?_e.l?Math.ceil(Math.max(8,Math.min(13,Math.log(St.length)))*1.5):20:12+t.mem,xe,e,_e)},wbytes=function(St,t,xe){for(;xe;++t)St[t]=xe,xe>>>=8},zlh=function(St,t){var xe=t.level,e=xe==0?0:xe<6?1:xe==9?3:2;if(St[0]=120,St[1]=e<<6|(t.dictionary&&32),St[1]|=31-(St[0]<<8|St[1])%31,t.dictionary){var _e=adler();_e.p(t.dictionary),wbytes(St,2,_e.d())}},zls=function(St,t){return((St[0]&15)!=8||St[0]>>4>7||(St[0]<<8|St[1])%31)&&err(6,"invalid zlib data"),(St[1]>>5&1)==1&&err(6,"invalid zlib data: "+(St[1]&32?"need":"unexpected")+" dictionary"),(St[1]>>3&4)+2};function zlibSync(St,t){t||(t={});var xe=adler();xe.p(St);var e=dopt(St,t,t.dictionary?6:2,4);return zlh(e,t),wbytes(e,e.length-4,xe.d()),e}function unzlibSync(St,t){return inflt(St.subarray(zls(St),-4),{i:2},t,t)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(St){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(St){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(St){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(St))}};function o(St,t,xe){var e=new XMLHttpRequest;e.open("GET",St),e.responseType="blob",e.onload=function(){l(e.response,t,xe)},e.onerror=function(){a.error("could not download file")},e.send()}function s(St){var t=new XMLHttpRequest;t.open("HEAD",St,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function c(St){try{St.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),St.dispatchEvent(t)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(St,t,xe){var e=n.URL||n.webkitURL,_e=document.createElement("a");t=t||St.name||"download",_e.download=t,_e.rel="noopener",typeof St=="string"?(_e.href=St,_e.origin!==location.origin?s(_e.href)?o(St,t,xe):c(_e,_e.target="_blank"):c(_e)):(_e.href=e.createObjectURL(St),setTimeout(function(){e.revokeObjectURL(_e.href)},4e4),setTimeout(function(){c(_e)},0))}:"msSaveOrOpenBlob"in navigator?function(St,t,xe){if(t=t||St.name||"download",typeof St=="string")if(s(St))o(St,t,xe);else{var e=document.createElement("a");e.href=St,e.target="_blank",setTimeout(function(){c(e)})}else navigator.msSaveOrOpenBlob(function(_e,Se){return Se===void 0?Se={autoBom:!1}:_typeof(Se)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Se={autoBom:!Se}),Se.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_e.type)?new Blob(["\uFEFF",_e],{type:_e.type}):_e}(St,xe),t)}:function(St,t,xe,e){if((e=e||open("","_blank"))&&(e.document.title=e.document.body.innerText="downloading..."),typeof St=="string")return o(St,t,xe);var _e=St.type==="application/octet-stream",Se=/constructor/i.test(n.HTMLElement)||n.safari,Ee=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ee||_e&&Se)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Re=new FileReader;Re.onloadend=function(){var Me=Re.result;Me=Ee?Me:Me.replace(/^data:[^;]*;/,"data:attachment/file;"),e?e.location.href=Me:location=Me,e=null},Re.readAsDataURL(St)}else{var Ce=n.URL||n.webkitURL,De=Ce.createObjectURL(St);e?e.location=De:location.href=De,e=null,setTimeout(function(){Ce.revokeObjectURL(De)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(St){var t;St=St||"",this.ok=!1,St.charAt(0)=="#"&&(St=St.substr(1,6)),St={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[St=(St=St.replace(/ /g,"")).toLowerCase()]||St;for(var xe=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Re){return[parseInt(Re[1]),parseInt(Re[2]),parseInt(Re[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Re){return[parseInt(Re[1],16),parseInt(Re[2],16),parseInt(Re[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Re){return[parseInt(Re[1]+Re[1],16),parseInt(Re[2]+Re[2],16),parseInt(Re[3]+Re[3],16)]}}],e=0;e<xe.length;e++){var _e=xe[e].re,Se=xe[e].process,Ee=_e.exec(St);Ee&&(t=Se(Ee),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Re=this.r.toString(16),Ce=this.g.toString(16),De=this.b.toString(16);return Re.length==1&&(Re="0"+Re),Ce.length==1&&(Ce="0"+Ce),De.length==1&&(De="0"+De),"#"+Re+Ce+De}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(St,t){var xe=St[0],e=St[1],_e=St[2],Se=St[3];xe=g(xe,e,_e,Se,t[0],7,-680876936),Se=g(Se,xe,e,_e,t[1],12,-389564586),_e=g(_e,Se,xe,e,t[2],17,606105819),e=g(e,_e,Se,xe,t[3],22,-1044525330),xe=g(xe,e,_e,Se,t[4],7,-176418897),Se=g(Se,xe,e,_e,t[5],12,1200080426),_e=g(_e,Se,xe,e,t[6],17,-1473231341),e=g(e,_e,Se,xe,t[7],22,-45705983),xe=g(xe,e,_e,Se,t[8],7,1770035416),Se=g(Se,xe,e,_e,t[9],12,-1958414417),_e=g(_e,Se,xe,e,t[10],17,-42063),e=g(e,_e,Se,xe,t[11],22,-1990404162),xe=g(xe,e,_e,Se,t[12],7,1804603682),Se=g(Se,xe,e,_e,t[13],12,-40341101),_e=g(_e,Se,xe,e,t[14],17,-1502002290),xe=m(xe,e=g(e,_e,Se,xe,t[15],22,1236535329),_e,Se,t[1],5,-165796510),Se=m(Se,xe,e,_e,t[6],9,-1069501632),_e=m(_e,Se,xe,e,t[11],14,643717713),e=m(e,_e,Se,xe,t[0],20,-373897302),xe=m(xe,e,_e,Se,t[5],5,-701558691),Se=m(Se,xe,e,_e,t[10],9,38016083),_e=m(_e,Se,xe,e,t[15],14,-660478335),e=m(e,_e,Se,xe,t[4],20,-405537848),xe=m(xe,e,_e,Se,t[9],5,568446438),Se=m(Se,xe,e,_e,t[14],9,-1019803690),_e=m(_e,Se,xe,e,t[3],14,-187363961),e=m(e,_e,Se,xe,t[8],20,1163531501),xe=m(xe,e,_e,Se,t[13],5,-1444681467),Se=m(Se,xe,e,_e,t[2],9,-51403784),_e=m(_e,Se,xe,e,t[7],14,1735328473),xe=v(xe,e=m(e,_e,Se,xe,t[12],20,-1926607734),_e,Se,t[5],4,-378558),Se=v(Se,xe,e,_e,t[8],11,-2022574463),_e=v(_e,Se,xe,e,t[11],16,1839030562),e=v(e,_e,Se,xe,t[14],23,-35309556),xe=v(xe,e,_e,Se,t[1],4,-1530992060),Se=v(Se,xe,e,_e,t[4],11,1272893353),_e=v(_e,Se,xe,e,t[7],16,-155497632),e=v(e,_e,Se,xe,t[10],23,-1094730640),xe=v(xe,e,_e,Se,t[13],4,681279174),Se=v(Se,xe,e,_e,t[0],11,-358537222),_e=v(_e,Se,xe,e,t[3],16,-722521979),e=v(e,_e,Se,xe,t[6],23,76029189),xe=v(xe,e,_e,Se,t[9],4,-640364487),Se=v(Se,xe,e,_e,t[12],11,-421815835),_e=v(_e,Se,xe,e,t[15],16,530742520),xe=b(xe,e=v(e,_e,Se,xe,t[2],23,-995338651),_e,Se,t[0],6,-198630844),Se=b(Se,xe,e,_e,t[7],10,1126891415),_e=b(_e,Se,xe,e,t[14],15,-1416354905),e=b(e,_e,Se,xe,t[5],21,-57434055),xe=b(xe,e,_e,Se,t[12],6,1700485571),Se=b(Se,xe,e,_e,t[3],10,-1894986606),_e=b(_e,Se,xe,e,t[10],15,-1051523),e=b(e,_e,Se,xe,t[1],21,-2054922799),xe=b(xe,e,_e,Se,t[8],6,1873313359),Se=b(Se,xe,e,_e,t[15],10,-30611744),_e=b(_e,Se,xe,e,t[6],15,-1560198380),e=b(e,_e,Se,xe,t[13],21,1309151649),xe=b(xe,e,_e,Se,t[4],6,-145523070),Se=b(Se,xe,e,_e,t[11],10,-1120210379),_e=b(_e,Se,xe,e,t[2],15,718787259),e=b(e,_e,Se,xe,t[9],21,-343485551),St[0]=_(xe,St[0]),St[1]=_(e,St[1]),St[2]=_(_e,St[2]),St[3]=_(Se,St[3])}function p(St,t,xe,e,_e,Se){return t=_(_(t,St),_(e,Se)),_(t<<_e|t>>>32-_e,xe)}function g(St,t,xe,e,_e,Se,Ee){return p(t&xe|~t&e,St,t,_e,Se,Ee)}function m(St,t,xe,e,_e,Se,Ee){return p(t&e|xe&~e,St,t,_e,Se,Ee)}function v(St,t,xe,e,_e,Se,Ee){return p(t^xe^e,St,t,_e,Se,Ee)}function b(St,t,xe,e,_e,Se,Ee){return p(xe^(t|~e),St,t,_e,Se,Ee)}function y(St){var t,xe=St.length,e=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=St.length;t+=64)d(e,w(St.substring(t-64,t)));St=St.substring(t-64);var _e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<St.length;t++)_e[t>>2]|=St.charCodeAt(t)<<(t%4<<3);if(_e[t>>2]|=128<<(t%4<<3),t>55)for(d(e,_e),t=0;t<16;t++)_e[t]=0;return _e[14]=8*xe,d(e,_e),e}function w(St){var t,xe=[];for(t=0;t<64;t+=4)xe[t>>2]=St.charCodeAt(t)+(St.charCodeAt(t+1)<<8)+(St.charCodeAt(t+2)<<16)+(St.charCodeAt(t+3)<<24);return xe}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(St){for(var t="",xe=0;xe<4;xe++)t+=N[St>>8*xe+4&15]+N[St>>8*xe&15];return t}function A(St){return String.fromCharCode((255&St)>>0,(65280&St)>>8,(16711680&St)>>16,(4278190080&St)>>24)}function x(St){return y(St).map(A).join("")}var S=function(St){for(var t=0;t<St.length;t++)St[t]=L(St[t]);return St.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(St,t){if(S){var xe=(65535&St)+(65535&t);return(St>>16)+(t>>16)+(xe>>16)<<16|65535&xe}return St+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(St,t){var xe,e,_e,Se;if(St!==xe){for(var Ee=(_e=St,Se=1+(256/St.length>>0),new Array(Se+1).join(_e)),Re=[],Ce=0;Ce<256;Ce++)Re[Ce]=Ce;var De=0;for(Ce=0;Ce<256;Ce++){var Me=Re[Ce];De=(De+Me+Ee.charCodeAt(Ce))%256,Re[Ce]=Re[De],Re[De]=Me}xe=St,e=Re}else Re=e;var Ue=t.length,He=0,Te=0,Ve="";for(Ce=0;Ce<Ue;Ce++)Te=(Te+(Me=Re[He=(He+1)%256]))%256,Re[He]=Re[Te],Re[Te]=Me,Ee=Re[(Re[He]+Re[Te])%256],Ve+=String.fromCharCode(t.charCodeAt(Ce)^Ee);return Ve}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(St,t,xe,e){this.v=1,this.r=2;var _e=192;St.forEach(function(Re){if(k.perm!==void 0)throw new Error("Invalid permission: "+Re);_e+=k[Re]}),this.padding="(Â¿N^NuÂAd\0NVÃ¿Ãº\b..\0Â¶Ãh>Â/\fÂ©Ã¾dSiz";var Se=(t+this.padding).substr(0,32),Ee=(xe+this.padding).substr(0,32);this.O=this.processOwnerPassword(Se,Ee),this.P=-(1+(255^_e)),this.encryptionKey=x(Se+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(e)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(St){if(/[^\u0000-\u00ff]/.test(St))throw new Error("Invalid PDF Name Object: "+St+", Only accept ASCII characters.");for(var t="",xe=St.length,e=0;e<xe;e++){var _e=St.charCodeAt(e);_e<33||_e===35||_e===37||_e===40||_e===41||_e===47||_e===60||_e===62||_e===91||_e===93||_e===123||_e===125||_e>126?t+="#"+("0"+_e.toString(16)).slice(-2):t+=St[e]}return t}function C(St){if(_typeof(St)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(xe,e,_e){if(_e=_e||!1,typeof xe!="string"||typeof e!="function"||typeof _e!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(xe)||(t[xe]={});var Se=Math.random().toString(35);return t[xe][Se]=[e,!!_e],Se},this.unsubscribe=function(xe){for(var e in t)if(t[e][xe])return delete t[e][xe],Object.keys(t[e]).length===0&&delete t[e],!0;return!1},this.publish=function(xe){if(t.hasOwnProperty(xe)){var e=Array.prototype.slice.call(arguments,1),_e=[];for(var Se in t[xe]){var Ee=t[xe][Se];try{Ee[0].apply(St,e)}catch(Re){n.console&&a.error("jsPDF PubSub Error",Re.message,Re)}Ee[1]&&_e.push(Se)}_e.length&&_e.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function j(St){if(!(this instanceof j))return new j(St);var t="opacity,stroke-opacity".split(",");for(var xe in St)St.hasOwnProperty(xe)&&t.indexOf(xe)>=0&&(this[xe]=St[xe]);this.id="",this.objectNumber=-1}function O(St,t){this.gState=St,this.matrix=t,this.id="",this.objectNumber=-1}function B(St,t,xe,e,_e){if(!(this instanceof B))return new B(St,t,xe,e,_e);this.type=St==="axial"?2:3,this.coords=t,this.colors=xe,O.call(this,e,_e)}function M(St,t,xe,e,_e){if(!(this instanceof M))return new M(St,t,xe,e,_e);this.boundingBox=St,this.xStep=t,this.yStep=xe,this.stream="",this.cloneIndex=0,O.call(this,e,_e)}function E(St){var t,xe=typeof arguments[0]=="string"?arguments[0]:"p",e=arguments[1],_e=arguments[2],Se=arguments[3],Ee=[],Re=1,Ce=16,De="S",Me=null;_typeof(St=St||{})==="object"&&(xe=St.orientation,e=St.unit||e,_e=St.format||_e,Se=St.compress||St.compressPdf||Se,(Me=St.encryption||null)!==null&&(Me.userPassword=Me.userPassword||"",Me.ownerPassword=Me.ownerPassword||"",Me.userPermissions=Me.userPermissions||[]),Re=typeof St.userUnit=="number"?Math.abs(St.userUnit):1,St.precision!==void 0&&(t=St.precision),St.floatPrecision!==void 0&&(Ce=St.floatPrecision),De=St.defaultPathOperation||"S"),Ee=St.filters||(Se===!0?["FlateEncode"]:Ee),e=e||"mm",xe=(""+(xe||"P")).toLowerCase();var Ue=St.putOnlyUsedFonts||!1,He={},Te={internal:{},__private__:{}};Te.__private__.PubSub=C;var Ve="1.3",$e=Te.__private__.getPdfVersion=function(){return Ve};Te.__private__.setPdfVersion=function(Fe){Ve=Fe};var Ke={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Te.__private__.getPageFormats=function(){return Ke};var Be=Te.__private__.getPageFormat=function(Fe){return Ke[Fe]};_e=_e||"a4";var Ye={COMPAT:"compat",ADVANCED:"advanced"},an=Ye.COMPAT;function rn(){this.saveGraphicsState(),cn(new Gn(hr,0,0,-hr,0,_s()*hr).toString()+" cm"),this.setFontSize(this.getFontSize()/hr),De="n",an=Ye.ADVANCED}function Xe(){this.restoreGraphicsState(),De="S",an=Ye.COMPAT}var en=Te.__private__.combineFontStyleAndFontWeight=function(Fe,pn){if(Fe=="bold"&&pn=="normal"||Fe=="bold"&&pn==400||Fe=="normal"&&pn=="italic"||Fe=="bold"&&pn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return pn&&(Fe=pn==400||pn==="normal"?Fe==="italic"?"italic":"normal":pn!=700&&pn!=="bold"||Fe!=="normal"?(pn==700?"bold":pn)+""+Fe:"bold"),Fe};Te.advancedAPI=function(Fe){var pn=an===Ye.COMPAT;return pn&&rn.call(this),typeof Fe!="function"||(Fe(this),pn&&Xe.call(this)),this},Te.compatAPI=function(Fe){var pn=an===Ye.ADVANCED;return pn&&Xe.call(this),typeof Fe!="function"||(Fe(this),pn&&rn.call(this)),this},Te.isAdvancedAPI=function(){return an===Ye.ADVANCED};var We,ze=function(Fe){if(an!==Ye.ADVANCED)throw new Error(Fe+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Qe=Te.roundToPrecision=Te.__private__.roundToPrecision=function(Fe,pn){var jn=t||pn;if(isNaN(Fe)||isNaN(jn))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Fe.toFixed(jn).replace(/0+$/,"")};We=Te.hpf=Te.__private__.hpf=typeof Ce=="number"?function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(Fe,Ce)}:Ce==="smart"?function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(Fe,Fe>-1&&Fe<1?16:5)}:function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return Qe(Fe,16)};var gn=Te.f2=Te.__private__.f2=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.f2");return Qe(Fe,2)},ke=Te.__private__.f3=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.f3");return Qe(Fe,3)},Ge=Te.scale=Te.__private__.scale=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.scale");return an===Ye.COMPAT?Fe*hr:an===Ye.ADVANCED?Fe:void 0},nn=function(Fe){return an===Ye.COMPAT?_s()-Fe:an===Ye.ADVANCED?Fe:void 0},dn=function(Fe){return Ge(nn(Fe))};Te.__private__.setPrecision=Te.setPrecision=function(Fe){typeof parseInt(Fe,10)=="number"&&(t=parseInt(Fe,10))};var wn,Sn="00000000000000000000000000000000",yn=Te.__private__.getFileId=function(){return Sn},Pn=Te.__private__.setFileId=function(Fe){return Sn=Fe!==void 0&&/^[a-fA-F0-9]{32}$/.test(Fe)?Fe.toUpperCase():Sn.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Me!==null&&(Ri=new I(Me.userPermissions,Me.userPassword,Me.ownerPassword,Sn)),Sn};Te.setFileId=function(Fe){return Pn(Fe),this},Te.getFileId=function(){return yn()};var un=Te.__private__.convertDateToPDFDate=function(Fe){var pn=Fe.getTimezoneOffset(),jn=pn<0?"+":"-",$n=Math.floor(Math.abs(pn/60)),ar=Math.abs(pn%60),br=[jn,Oe($n),"'",Oe(ar),"'"].join("");return["D:",Fe.getFullYear(),Oe(Fe.getMonth()+1),Oe(Fe.getDate()),Oe(Fe.getHours()),Oe(Fe.getMinutes()),Oe(Fe.getSeconds()),br].join("")},_n=Te.__private__.convertPDFDateToDate=function(Fe){var pn=parseInt(Fe.substr(2,4),10),jn=parseInt(Fe.substr(6,2),10)-1,$n=parseInt(Fe.substr(8,2),10),ar=parseInt(Fe.substr(10,2),10),br=parseInt(Fe.substr(12,2),10),Cr=parseInt(Fe.substr(14,2),10);return new Date(pn,jn,$n,ar,br,Cr,0)},Nn=Te.__private__.setCreationDate=function(Fe){var pn;if(Fe===void 0&&(Fe=new Date),Fe instanceof Date)pn=un(Fe);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Fe))throw new Error("Invalid argument passed to jsPDF.setCreationDate");pn=Fe}return wn=pn},je=Te.__private__.getCreationDate=function(Fe){var pn=wn;return Fe==="jsDate"&&(pn=_n(wn)),pn};Te.setCreationDate=function(Fe){return Nn(Fe),this},Te.getCreationDate=function(Fe){return je(Fe)};var Ie,Oe=Te.__private__.padd2=function(Fe){return("0"+parseInt(Fe)).slice(-2)},Ze=Te.__private__.padd2Hex=function(Fe){return("00"+(Fe=Fe.toString())).substr(Fe.length)},sn=0,on=[],hn=[],An=0,Mn=[],In=[],zn=!1,Wn=hn,Jn=function(){sn=0,An=0,hn=[],on=[],Mn=[],Fr=Tr(),Dr=Tr()};Te.__private__.setCustomOutputDestination=function(Fe){zn=!0,Wn=Fe};var Dn=function(Fe){zn||(Wn=Fe)};Te.__private__.resetCustomOutputDestination=function(){zn=!1,Wn=hn};var cn=Te.__private__.out=function(Fe){return Fe=Fe.toString(),An+=Fe.length+1,Wn.push(Fe),Wn},Bn=Te.__private__.write=function(Fe){return cn(arguments.length===1?Fe.toString():Array.prototype.join.call(arguments," "))},mn=Te.__private__.getArrayBuffer=function(Fe){for(var pn=Fe.length,jn=new ArrayBuffer(pn),$n=new Uint8Array(jn);pn--;)$n[pn]=Fe.charCodeAt(pn);return jn},bn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Te.__private__.getStandardFonts=function(){return bn};var Rn=St.fontSize||16;Te.__private__.setFontSize=Te.setFontSize=function(Fe){return Rn=an===Ye.ADVANCED?Fe/hr:Fe,this};var On,Hn=Te.__private__.getFontSize=Te.getFontSize=function(){return an===Ye.COMPAT?Rn:Rn*hr},tr=St.R2L||!1;Te.__private__.setR2L=Te.setR2L=function(Fe){return tr=Fe,this},Te.__private__.getR2L=Te.getR2L=function(){return tr};var ir,qn=Te.__private__.setZoomMode=function(Fe){var pn=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Fe))On=Fe;else if(isNaN(Fe)){if(pn.indexOf(Fe)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Fe+'" is not recognized.');On=Fe}else On=parseInt(Fe,10)};Te.__private__.getZoomMode=function(){return On};var pr,fr=Te.__private__.setPageMode=function(Fe){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Fe)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Fe+'" is not recognized.');ir=Fe};Te.__private__.getPageMode=function(){return ir};var Mr=Te.__private__.setLayoutMode=function(Fe){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Fe)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Fe+'" is not recognized.');pr=Fe};Te.__private__.getLayoutMode=function(){return pr},Te.__private__.setDisplayMode=Te.setDisplayMode=function(Fe,pn,jn){return qn(Fe),Mr(pn),fr(jn),this};var _r={title:"",subject:"",author:"",keywords:"",creator:""};Te.__private__.getDocumentProperty=function(Fe){if(Object.keys(_r).indexOf(Fe)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _r[Fe]},Te.__private__.getDocumentProperties=function(){return _r},Te.__private__.setDocumentProperties=Te.setProperties=Te.setDocumentProperties=function(Fe){for(var pn in _r)_r.hasOwnProperty(pn)&&Fe[pn]&&(_r[pn]=Fe[pn]);return this},Te.__private__.setDocumentProperty=function(Fe,pn){if(Object.keys(_r).indexOf(Fe)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _r[Fe]=pn};var Ir,hr,Rr,jr,Vr,or={},Xn={},Qn=[],Sr={},Xr={},qr={},Fn={},ur=null,vr=0,yr=[],Lr=new C(Te),kr=St.hotfixes||[],Tn={},Ln={},Un=[],Gn=function Fe(pn,jn,$n,ar,br,Cr){if(!(this instanceof Fe))return new Fe(pn,jn,$n,ar,br,Cr);isNaN(pn)&&(pn=1),isNaN(jn)&&(jn=0),isNaN($n)&&($n=0),isNaN(ar)&&(ar=1),isNaN(br)&&(br=0),isNaN(Cr)&&(Cr=0),this._matrix=[pn,jn,$n,ar,br,Cr]};Object.defineProperty(Gn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Fe){this._matrix[0]=Fe}}),Object.defineProperty(Gn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Fe){this._matrix[1]=Fe}}),Object.defineProperty(Gn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Fe){this._matrix[2]=Fe}}),Object.defineProperty(Gn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Fe){this._matrix[3]=Fe}}),Object.defineProperty(Gn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Fe){this._matrix[4]=Fe}}),Object.defineProperty(Gn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Fe){this._matrix[5]=Fe}}),Object.defineProperty(Gn.prototype,"a",{get:function(){return this._matrix[0]},set:function(Fe){this._matrix[0]=Fe}}),Object.defineProperty(Gn.prototype,"b",{get:function(){return this._matrix[1]},set:function(Fe){this._matrix[1]=Fe}}),Object.defineProperty(Gn.prototype,"c",{get:function(){return this._matrix[2]},set:function(Fe){this._matrix[2]=Fe}}),Object.defineProperty(Gn.prototype,"d",{get:function(){return this._matrix[3]},set:function(Fe){this._matrix[3]=Fe}}),Object.defineProperty(Gn.prototype,"e",{get:function(){return this._matrix[4]},set:function(Fe){this._matrix[4]=Fe}}),Object.defineProperty(Gn.prototype,"f",{get:function(){return this._matrix[5]},set:function(Fe){this._matrix[5]=Fe}}),Object.defineProperty(Gn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Gn.prototype.join=function(Fe){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(We).join(Fe)},Gn.prototype.multiply=function(Fe){var pn=Fe.sx*this.sx+Fe.shy*this.shx,jn=Fe.sx*this.shy+Fe.shy*this.sy,$n=Fe.shx*this.sx+Fe.sy*this.shx,ar=Fe.shx*this.shy+Fe.sy*this.sy,br=Fe.tx*this.sx+Fe.ty*this.shx+this.tx,Cr=Fe.tx*this.shy+Fe.ty*this.sy+this.ty;return new Gn(pn,jn,$n,ar,br,Cr)},Gn.prototype.decompose=function(){var Fe=this.sx,pn=this.shy,jn=this.shx,$n=this.sy,ar=this.tx,br=this.ty,Cr=Math.sqrt(Fe*Fe+pn*pn),zr=(Fe/=Cr)*jn+(pn/=Cr)*$n;jn-=Fe*zr,$n-=pn*zr;var $r=Math.sqrt(jn*jn+$n*$n);return zr/=$r,Fe*($n/=$r)<pn*(jn/=$r)&&(Fe=-Fe,pn=-pn,zr=-zr,Cr=-Cr),{scale:new Gn(Cr,0,0,$r,0,0),translate:new Gn(1,0,0,1,ar,br),rotate:new Gn(Fe,pn,-pn,Fe,0,0),skew:new Gn(1,0,zr,1,0,0)}},Gn.prototype.toString=function(Fe){return this.join(" ")},Gn.prototype.inversed=function(){var Fe=this.sx,pn=this.shy,jn=this.shx,$n=this.sy,ar=this.tx,br=this.ty,Cr=1/(Fe*$n-pn*jn),zr=$n*Cr,$r=-pn*Cr,ti=-jn*Cr,Qr=Fe*Cr;return new Gn(zr,$r,ti,Qr,-zr*ar-ti*br,-$r*ar-Qr*br)},Gn.prototype.applyToPoint=function(Fe){var pn=Fe.x*this.sx+Fe.y*this.shx+this.tx,jn=Fe.x*this.shy+Fe.y*this.sy+this.ty;return new ta(pn,jn)},Gn.prototype.applyToRectangle=function(Fe){var pn=this.applyToPoint(Fe),jn=this.applyToPoint(new ta(Fe.x+Fe.w,Fe.y+Fe.h));return new ka(pn.x,pn.y,jn.x-pn.x,jn.y-pn.y)},Gn.prototype.clone=function(){var Fe=this.sx,pn=this.shy,jn=this.shx,$n=this.sy,ar=this.tx,br=this.ty;return new Gn(Fe,pn,jn,$n,ar,br)},Te.Matrix=Gn;var sr=Te.matrixMult=function(Fe,pn){return pn.multiply(Fe)},dr=new Gn(1,0,0,1,0,0);Te.unitMatrix=Te.identityMatrix=dr;var gr=function(Fe,pn){if(!Xr[Fe]){var jn=(pn instanceof B?"Sh":"P")+(Object.keys(Sr).length+1).toString(10);pn.id=jn,Xr[Fe]=jn,Sr[jn]=pn,Lr.publish("addPattern",pn)}};Te.ShadingPattern=B,Te.TilingPattern=M,Te.addShadingPattern=function(Fe,pn){return ze("addShadingPattern()"),gr(Fe,pn),this},Te.beginTilingPattern=function(Fe){ze("beginTilingPattern()"),Eo(Fe.boundingBox[0],Fe.boundingBox[1],Fe.boundingBox[2]-Fe.boundingBox[0],Fe.boundingBox[3]-Fe.boundingBox[1],Fe.matrix)},Te.endTilingPattern=function(Fe,pn){ze("endTilingPattern()"),pn.stream=In[Ie].join(`
`),gr(Fe,pn),Lr.publish("endTilingPattern",pn),Un.pop().restore()};var Nr=Te.__private__.newObject=function(){var Fe=Tr();return Er(Fe,!0),Fe},Tr=Te.__private__.newObjectDeferred=function(){return sn++,on[sn]=function(){return An},sn},Er=function(Fe,pn){return pn=typeof pn=="boolean"&&pn,on[Fe]=An,pn&&cn(Fe+" 0 obj"),Fe},Wr=Te.__private__.newAdditionalObject=function(){var Fe={objId:Tr(),content:""};return Mn.push(Fe),Fe},Fr=Tr(),Dr=Tr(),Ur=Te.__private__.decodeColorString=function(Fe){var pn=Fe.split(" ");if(pn.length!==2||pn[1]!=="g"&&pn[1]!=="G")pn.length===5&&(pn[4]==="k"||pn[4]==="K")&&(pn=[(1-pn[0])*(1-pn[3]),(1-pn[1])*(1-pn[3]),(1-pn[2])*(1-pn[3]),"r"]);else{var jn=parseFloat(pn[0]);pn=[jn,jn,jn,"r"]}for(var $n="#",ar=0;ar<3;ar++)$n+=("0"+Math.floor(255*parseFloat(pn[ar])).toString(16)).slice(-2);return $n},Gr=Te.__private__.encodeColorString=function(Fe){var pn;typeof Fe=="string"&&(Fe={ch1:Fe});var jn=Fe.ch1,$n=Fe.ch2,ar=Fe.ch3,br=Fe.ch4,Cr=Fe.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof jn=="string"&&jn.charAt(0)!=="#"){var zr=new f(jn);if(zr.ok)jn=zr.toHex();else if(!/^\d*\.?\d*$/.test(jn))throw new Error('Invalid color "'+jn+'" passed to jsPDF.encodeColorString.')}if(typeof jn=="string"&&/^#[0-9A-Fa-f]{3}$/.test(jn)&&(jn="#"+jn[1]+jn[1]+jn[2]+jn[2]+jn[3]+jn[3]),typeof jn=="string"&&/^#[0-9A-Fa-f]{6}$/.test(jn)){var $r=parseInt(jn.substr(1),16);jn=$r>>16&255,$n=$r>>8&255,ar=255&$r}if($n===void 0||br===void 0&&jn===$n&&$n===ar)if(typeof jn=="string")pn=jn+" "+Cr[0];else switch(Fe.precision){case 2:pn=gn(jn/255)+" "+Cr[0];break;case 3:default:pn=ke(jn/255)+" "+Cr[0]}else if(br===void 0||_typeof(br)==="object"){if(br&&!isNaN(br.a)&&br.a===0)return pn=["1.","1.","1.",Cr[1]].join(" ");if(typeof jn=="string")pn=[jn,$n,ar,Cr[1]].join(" ");else switch(Fe.precision){case 2:pn=[gn(jn/255),gn($n/255),gn(ar/255),Cr[1]].join(" ");break;default:case 3:pn=[ke(jn/255),ke($n/255),ke(ar/255),Cr[1]].join(" ")}}else if(typeof jn=="string")pn=[jn,$n,ar,br,Cr[2]].join(" ");else switch(Fe.precision){case 2:pn=[gn(jn),gn($n),gn(ar),gn(br),Cr[2]].join(" ");break;case 3:default:pn=[ke(jn),ke($n),ke(ar),ke(br),Cr[2]].join(" ")}return pn},Kr=Te.__private__.getFilters=function(){return Ee},Zr=Te.__private__.putStream=function(Fe){var pn=(Fe=Fe||{}).data||"",jn=Fe.filters||Kr(),$n=Fe.alreadyAppliedFilters||[],ar=Fe.addLength1||!1,br=pn.length,Cr=Fe.objectId,zr=function(ki){return ki};if(Me!==null&&Cr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Me!==null&&(zr=Ri.encryptor(Cr,0));var $r={};jn===!0&&(jn=["FlateEncode"]);var ti=Fe.additionalKeyValues||[],Qr=($r=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(pn,jn):{data:pn,reverseChain:[]}).reverseChain+(Array.isArray($n)?$n.join(" "):$n.toString());if($r.data.length!==0&&(ti.push({key:"Length",value:$r.data.length}),ar===!0&&ti.push({key:"Length1",value:br})),Qr.length!=0)if(Qr.split("/").length-1==1)ti.push({key:"Filter",value:Qr});else{ti.push({key:"Filter",value:"["+Qr+"]"});for(var ri=0;ri<ti.length;ri+=1)if(ti[ri].key==="DecodeParms"){for(var gi=[],mi=0;mi<$r.reverseChain.split("/").length-1;mi+=1)gi.push("null");gi.push(ti[ri].value),ti[ri].value="["+gi.join(" ")+"]"}}cn("<<");for(var wi=0;wi<ti.length;wi++)cn("/"+ti[wi].key+" "+ti[wi].value);cn(">>"),$r.data.length!==0&&(cn("stream"),cn(zr($r.data)),cn("endstream"))},li=Te.__private__.putPage=function(Fe){var pn=Fe.number,jn=Fe.data,$n=Fe.objId,ar=Fe.contentsObjId;Er($n,!0),cn("<</Type /Page"),cn("/Parent "+Fe.rootDictionaryObjId+" 0 R"),cn("/Resources "+Fe.resourceDictionaryObjId+" 0 R"),cn("/MediaBox ["+parseFloat(We(Fe.mediaBox.bottomLeftX))+" "+parseFloat(We(Fe.mediaBox.bottomLeftY))+" "+We(Fe.mediaBox.topRightX)+" "+We(Fe.mediaBox.topRightY)+"]"),Fe.cropBox!==null&&cn("/CropBox ["+We(Fe.cropBox.bottomLeftX)+" "+We(Fe.cropBox.bottomLeftY)+" "+We(Fe.cropBox.topRightX)+" "+We(Fe.cropBox.topRightY)+"]"),Fe.bleedBox!==null&&cn("/BleedBox ["+We(Fe.bleedBox.bottomLeftX)+" "+We(Fe.bleedBox.bottomLeftY)+" "+We(Fe.bleedBox.topRightX)+" "+We(Fe.bleedBox.topRightY)+"]"),Fe.trimBox!==null&&cn("/TrimBox ["+We(Fe.trimBox.bottomLeftX)+" "+We(Fe.trimBox.bottomLeftY)+" "+We(Fe.trimBox.topRightX)+" "+We(Fe.trimBox.topRightY)+"]"),Fe.artBox!==null&&cn("/ArtBox ["+We(Fe.artBox.bottomLeftX)+" "+We(Fe.artBox.bottomLeftY)+" "+We(Fe.artBox.topRightX)+" "+We(Fe.artBox.topRightY)+"]"),typeof Fe.userUnit=="number"&&Fe.userUnit!==1&&cn("/UserUnit "+Fe.userUnit),Lr.publish("putPage",{objId:$n,pageContext:yr[pn],pageNumber:pn,page:jn}),cn("/Contents "+ar+" 0 R"),cn(">>"),cn("endobj");var br=jn.join(`
`);return an===Ye.ADVANCED&&(br+=`
Q`),Er(ar,!0),Zr({data:br,filters:Kr(),objectId:ar}),cn("endobj"),$n},si=Te.__private__.putPages=function(){var Fe,pn,jn=[];for(Fe=1;Fe<=vr;Fe++)yr[Fe].objId=Tr(),yr[Fe].contentsObjId=Tr();for(Fe=1;Fe<=vr;Fe++)jn.push(li({number:Fe,data:In[Fe],objId:yr[Fe].objId,contentsObjId:yr[Fe].contentsObjId,mediaBox:yr[Fe].mediaBox,cropBox:yr[Fe].cropBox,bleedBox:yr[Fe].bleedBox,trimBox:yr[Fe].trimBox,artBox:yr[Fe].artBox,userUnit:yr[Fe].userUnit,rootDictionaryObjId:Fr,resourceDictionaryObjId:Dr}));Er(Fr,!0),cn("<</Type /Pages");var $n="/Kids [";for(pn=0;pn<vr;pn++)$n+=jn[pn]+" 0 R ";cn($n+"]"),cn("/Count "+vr),cn(">>"),cn("endobj"),Lr.publish("postPutPages")},Ni=function(Fe){Lr.publish("putFont",{font:Fe,out:cn,newObject:Nr,putStream:Zr}),Fe.isAlreadyPutted!==!0&&(Fe.objectNumber=Nr(),cn("<<"),cn("/Type /Font"),cn("/BaseFont /"+F(Fe.postScriptName)),cn("/Subtype /Type1"),typeof Fe.encoding=="string"&&cn("/Encoding /"+Fe.encoding),cn("/FirstChar 32"),cn("/LastChar 255"),cn(">>"),cn("endobj"))},Fi=function(){for(var Fe in or)or.hasOwnProperty(Fe)&&(Ue===!1||Ue===!0&&He.hasOwnProperty(Fe))&&Ni(or[Fe])},Mi=function(Fe){Fe.objectNumber=Nr();var pn=[];pn.push({key:"Type",value:"/XObject"}),pn.push({key:"Subtype",value:"/Form"}),pn.push({key:"BBox",value:"["+[We(Fe.x),We(Fe.y),We(Fe.x+Fe.width),We(Fe.y+Fe.height)].join(" ")+"]"}),pn.push({key:"Matrix",value:"["+Fe.matrix.toString()+"]"});var jn=Fe.pages[1].join(`
`);Zr({data:jn,additionalKeyValues:pn,objectId:Fe.objectNumber}),cn("endobj")},us=function(){for(var Fe in Tn)Tn.hasOwnProperty(Fe)&&Mi(Tn[Fe])},ao=function(Fe,pn){var jn,$n=[],ar=1/(pn-1);for(jn=0;jn<1;jn+=ar)$n.push(jn);if($n.push(1),Fe[0].offset!=0){var br={offset:0,color:Fe[0].color};Fe.unshift(br)}if(Fe[Fe.length-1].offset!=1){var Cr={offset:1,color:Fe[Fe.length-1].color};Fe.push(Cr)}for(var zr="",$r=0,ti=0;ti<$n.length;ti++){for(jn=$n[ti];jn>Fe[$r+1].offset;)$r++;var Qr=Fe[$r].offset,ri=(jn-Qr)/(Fe[$r+1].offset-Qr),gi=Fe[$r].color,mi=Fe[$r+1].color;zr+=Ze(Math.round((1-ri)*gi[0]+ri*mi[0]).toString(16))+Ze(Math.round((1-ri)*gi[1]+ri*mi[1]).toString(16))+Ze(Math.round((1-ri)*gi[2]+ri*mi[2]).toString(16))}return zr.trim()},hl=function(Fe,pn){pn||(pn=21);var jn=Nr(),$n=ao(Fe.colors,pn),ar=[];ar.push({key:"FunctionType",value:"0"}),ar.push({key:"Domain",value:"[0.0 1.0]"}),ar.push({key:"Size",value:"["+pn+"]"}),ar.push({key:"BitsPerSample",value:"8"}),ar.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ar.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Zr({data:$n,additionalKeyValues:ar,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:jn}),cn("endobj"),Fe.objectNumber=Nr(),cn("<< /ShadingType "+Fe.type),cn("/ColorSpace /DeviceRGB");var br="/Coords ["+We(parseFloat(Fe.coords[0]))+" "+We(parseFloat(Fe.coords[1]))+" ";Fe.type===2?br+=We(parseFloat(Fe.coords[2]))+" "+We(parseFloat(Fe.coords[3])):br+=We(parseFloat(Fe.coords[2]))+" "+We(parseFloat(Fe.coords[3]))+" "+We(parseFloat(Fe.coords[4]))+" "+We(parseFloat(Fe.coords[5])),cn(br+="]"),Fe.matrix&&cn("/Matrix ["+Fe.matrix.toString()+"]"),cn("/Function "+jn+" 0 R"),cn("/Extend [true true]"),cn(">>"),cn("endobj")},dl=function(Fe,pn){var jn=Tr(),$n=Nr();pn.push({resourcesOid:jn,objectOid:$n}),Fe.objectNumber=$n;var ar=[];ar.push({key:"Type",value:"/Pattern"}),ar.push({key:"PatternType",value:"1"}),ar.push({key:"PaintType",value:"1"}),ar.push({key:"TilingType",value:"1"}),ar.push({key:"BBox",value:"["+Fe.boundingBox.map(We).join(" ")+"]"}),ar.push({key:"XStep",value:We(Fe.xStep)}),ar.push({key:"YStep",value:We(Fe.yStep)}),ar.push({key:"Resources",value:jn+" 0 R"}),Fe.matrix&&ar.push({key:"Matrix",value:"["+Fe.matrix.toString()+"]"}),Zr({data:Fe.stream,additionalKeyValues:ar,objectId:Fe.objectNumber}),cn("endobj")},Vs=function(Fe){var pn;for(pn in Sr)Sr.hasOwnProperty(pn)&&(Sr[pn]instanceof B?hl(Sr[pn]):Sr[pn]instanceof M&&dl(Sr[pn],Fe))},oo=function(Fe){for(var pn in Fe.objectNumber=Nr(),cn("<<"),Fe)switch(pn){case"opacity":cn("/ca "+gn(Fe[pn]));break;case"stroke-opacity":cn("/CA "+gn(Fe[pn]))}cn(">>"),cn("endobj")},pl=function(){var Fe;for(Fe in qr)qr.hasOwnProperty(Fe)&&oo(qr[Fe])},wa=function(){for(var Fe in cn("/XObject <<"),Tn)Tn.hasOwnProperty(Fe)&&Tn[Fe].objectNumber>=0&&cn("/"+Fe+" "+Tn[Fe].objectNumber+" 0 R");Lr.publish("putXobjectDict"),cn(">>")},gl=function(){Ri.oid=Nr(),cn("<<"),cn("/Filter /Standard"),cn("/V "+Ri.v),cn("/R "+Ri.r),cn("/U <"+Ri.toHexString(Ri.U)+">"),cn("/O <"+Ri.toHexString(Ri.O)+">"),cn("/P "+Ri.P),cn(">>"),cn("endobj")},lo=function(){for(var Fe in cn("/Font <<"),or)or.hasOwnProperty(Fe)&&(Ue===!1||Ue===!0&&He.hasOwnProperty(Fe))&&cn("/"+Fe+" "+or[Fe].objectNumber+" 0 R");cn(">>")},ml=function(){if(Object.keys(Sr).length>0){for(var Fe in cn("/Shading <<"),Sr)Sr.hasOwnProperty(Fe)&&Sr[Fe]instanceof B&&Sr[Fe].objectNumber>=0&&cn("/"+Fe+" "+Sr[Fe].objectNumber+" 0 R");Lr.publish("putShadingPatternDict"),cn(">>")}},$s=function(Fe){if(Object.keys(Sr).length>0){for(var pn in cn("/Pattern <<"),Sr)Sr.hasOwnProperty(pn)&&Sr[pn]instanceof Te.TilingPattern&&Sr[pn].objectNumber>=0&&Sr[pn].objectNumber<Fe&&cn("/"+pn+" "+Sr[pn].objectNumber+" 0 R");Lr.publish("putTilingPatternDict"),cn(">>")}},bl=function(){if(Object.keys(qr).length>0){var Fe;for(Fe in cn("/ExtGState <<"),qr)qr.hasOwnProperty(Fe)&&qr[Fe].objectNumber>=0&&cn("/"+Fe+" "+qr[Fe].objectNumber+" 0 R");Lr.publish("putGStateDict"),cn(">>")}},vi=function(Fe){Er(Fe.resourcesOid,!0),cn("<<"),cn("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),lo(),ml(),$s(Fe.objectOid),bl(),wa(),cn(">>"),cn("endobj")},co=function(){var Fe=[];Fi(),pl(),us(),Vs(Fe),Lr.publish("putResources"),Fe.forEach(vi),vi({resourcesOid:Dr,objectOid:Number.MAX_SAFE_INTEGER}),Lr.publish("postPutResources")},uo=function(){Lr.publish("putAdditionalObjects");for(var Fe=0;Fe<Mn.length;Fe++){var pn=Mn[Fe];Er(pn.objId,!0),cn(pn.content),cn("endobj")}Lr.publish("postPutAdditionalObjects")},ho=function(Fe){Xn[Fe.fontName]=Xn[Fe.fontName]||{},Xn[Fe.fontName][Fe.fontStyle]=Fe.id},Aa=function(Fe,pn,jn,$n,ar){var br={id:"F"+(Object.keys(or).length+1).toString(10),postScriptName:Fe,fontName:pn,fontStyle:jn,encoding:$n,isStandardFont:ar||!1,metadata:{}};return Lr.publish("addFont",{font:br,instance:this}),or[br.id]=br,ho(br),br.id},vl=function(Fe){for(var pn=0,jn=bn.length;pn<jn;pn++){var $n=Aa.call(this,Fe[pn][0],Fe[pn][1],Fe[pn][2],bn[pn][3],!0);Ue===!1&&(He[$n]=!0);var ar=Fe[pn][0].split("-");ho({id:$n,fontName:ar[0],fontStyle:ar[1]||""})}Lr.publish("addFonts",{fonts:or,dictionary:Xn})},es=function(Fe){return Fe.foo=function(){try{return Fe.apply(this,arguments)}catch($n){var pn=$n.stack||"";~pn.indexOf(" at ")&&(pn=pn.split(" at ")[1]);var jn="Error in function "+pn.split(`
`)[0].split("<")[0]+": "+$n.message;if(!n.console)throw new Error(jn);n.console.error(jn,$n),n.alert&&alert(jn)}},Fe.foo.bar=Fe,Fe.foo},Xs=function(Fe,pn){var jn,$n,ar,br,Cr,zr,$r,ti,Qr;if(ar=(pn=pn||{}).sourceEncoding||"Unicode",Cr=pn.outputEncoding,(pn.autoencode||Cr)&&or[Ir].metadata&&or[Ir].metadata[ar]&&or[Ir].metadata[ar].encoding&&(br=or[Ir].metadata[ar].encoding,!Cr&&or[Ir].encoding&&(Cr=or[Ir].encoding),!Cr&&br.codePages&&(Cr=br.codePages[0]),typeof Cr=="string"&&(Cr=br[Cr]),Cr)){for($r=!1,zr=[],jn=0,$n=Fe.length;jn<$n;jn++)(ti=Cr[Fe.charCodeAt(jn)])?zr.push(String.fromCharCode(ti)):zr.push(Fe[jn]),zr[jn].charCodeAt(0)>>8&&($r=!0);Fe=zr.join("")}for(jn=Fe.length;$r===void 0&&jn!==0;)Fe.charCodeAt(jn-1)>>8&&($r=!0),jn--;if(!$r)return Fe;for(zr=pn.noBOM?[]:[254,255],jn=0,$n=Fe.length;jn<$n;jn++){if((Qr=(ti=Fe.charCodeAt(jn))>>8)>>8)throw new Error("Character at position "+jn+" of string '"+Fe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zr.push(Qr),zr.push(ti-(Qr<<8))}return String.fromCharCode.apply(void 0,zr)},Oi=Te.__private__.pdfEscape=Te.pdfEscape=function(Fe,pn){return Xs(Fe,pn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Sa=Te.__private__.beginPage=function(Fe){In[++vr]=[],yr[vr]={objId:0,contentsObjId:0,userUnit:Number(Re),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Fe[0]),topRightY:Number(Fe[1])}},po(vr),Dn(In[Ie])},fo=function(Fe,pn){var jn,$n,ar;switch(xe=pn||xe,typeof Fe=="string"&&(jn=Be(Fe.toLowerCase()),Array.isArray(jn)&&($n=jn[0],ar=jn[1])),Array.isArray(Fe)&&($n=Fe[0]*hr,ar=Fe[1]*hr),isNaN($n)&&($n=_e[0],ar=_e[1]),($n>14400||ar>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),$n=Math.min(14400,$n),ar=Math.min(14400,ar)),_e=[$n,ar],xe.substr(0,1)){case"l":ar>$n&&(_e=[ar,$n]);break;case"p":$n>ar&&(_e=[ar,$n])}Sa(_e),xo(Ca),cn(ns),Na!==0&&cn(Na+" J"),Ra!==0&&cn(Ra+" j"),Lr.publish("addPage",{pageNumber:vr})},yl=function(Fe){Fe>0&&Fe<=vr&&(In.splice(Fe,1),yr.splice(Fe,1),vr--,Ie>vr&&(Ie=vr),this.setPage(Ie))},po=function(Fe){Fe>0&&Fe<=vr&&(Ie=Fe)},xl=Te.__private__.getNumberOfPages=Te.getNumberOfPages=function(){return In.length-1},go=function(Fe,pn,jn){var $n,ar=void 0;return jn=jn||{},Fe=Fe!==void 0?Fe:or[Ir].fontName,pn=pn!==void 0?pn:or[Ir].fontStyle,$n=Fe.toLowerCase(),Xn[$n]!==void 0&&Xn[$n][pn]!==void 0?ar=Xn[$n][pn]:Xn[Fe]!==void 0&&Xn[Fe][pn]!==void 0?ar=Xn[Fe][pn]:jn.disableWarning===!1&&a.warn("Unable to look up font label for font '"+Fe+"', '"+pn+"'. Refer to getFontList() for available fonts."),ar||jn.noFallback||(ar=Xn.times[pn])==null&&(ar=Xn.times.normal),ar},wl=Te.__private__.putInfo=function(){var Fe=Nr(),pn=function($n){return $n};for(var jn in Me!==null&&(pn=Ri.encryptor(Fe,0)),cn("<<"),cn("/Producer ("+Oi(pn("jsPDF "+E.version))+")"),_r)_r.hasOwnProperty(jn)&&_r[jn]&&cn("/"+jn.substr(0,1).toUpperCase()+jn.substr(1)+" ("+Oi(pn(_r[jn]))+")");cn("/CreationDate ("+Oi(pn(wn))+")"),cn(">>"),cn("endobj")},Ea=Te.__private__.putCatalog=function(Fe){var pn=(Fe=Fe||{}).rootDictionaryObjId||Fr;switch(Nr(),cn("<<"),cn("/Type /Catalog"),cn("/Pages "+pn+" 0 R"),On||(On="fullwidth"),On){case"fullwidth":cn("/OpenAction [3 0 R /FitH null]");break;case"fullheight":cn("/OpenAction [3 0 R /FitV null]");break;case"fullpage":cn("/OpenAction [3 0 R /Fit]");break;case"original":cn("/OpenAction [3 0 R /XYZ null null 1]");break;default:var jn=""+On;jn.substr(jn.length-1)==="%"&&(On=parseInt(On)/100),typeof On=="number"&&cn("/OpenAction [3 0 R /XYZ null null "+gn(On)+"]")}switch(pr||(pr="continuous"),pr){case"continuous":cn("/PageLayout /OneColumn");break;case"single":cn("/PageLayout /SinglePage");break;case"two":case"twoleft":cn("/PageLayout /TwoColumnLeft");break;case"tworight":cn("/PageLayout /TwoColumnRight")}ir&&cn("/PageMode /"+ir),Lr.publish("putCatalog"),cn(">>"),cn("endobj")},Al=Te.__private__.putTrailer=function(){cn("trailer"),cn("<<"),cn("/Size "+(sn+1)),cn("/Root "+sn+" 0 R"),cn("/Info "+(sn-1)+" 0 R"),Me!==null&&cn("/Encrypt "+Ri.oid+" 0 R"),cn("/ID [ <"+Sn+"> <"+Sn+"> ]"),cn(">>")},_l=Te.__private__.putHeader=function(){cn("%PDF-"+Ve),cn("%ÂºÃÂ¬Ã ")},Sl=Te.__private__.putXRef=function(){var Fe="0000000000";cn("xref"),cn("0 "+(sn+1)),cn("0000000000 65535 f ");for(var pn=1;pn<=sn;pn++)typeof on[pn]=="function"?cn((Fe+on[pn]()).slice(-10)+" 00000 n "):on[pn]!==void 0?cn((Fe+on[pn]).slice(-10)+" 00000 n "):cn("0000000000 00000 n ")},hs=Te.__private__.buildDocument=function(){Jn(),Dn(hn),Lr.publish("buildDocument"),_l(),si(),uo(),co(),Me!==null&&gl(),wl(),Ea();var Fe=An;return Sl(),Al(),cn("startxref"),cn(""+Fe),cn("%%EOF"),Dn(In[Ie]),hn.join(`
`)},Ys=Te.__private__.getBlob=function(Fe){return new Blob([mn(Fe)],{type:"application/pdf"})},Ks=Te.output=Te.__private__.output=es(function(Fe,pn){switch(typeof(pn=pn||{})=="string"?pn={filename:pn}:pn.filename=pn.filename||"generated.pdf",Fe){case void 0:return hs();case"save":Te.save(pn.filename);break;case"arraybuffer":return mn(hs());case"blob":return Ys(hs());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(Ys(hs()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var jn="",$n=hs();try{jn=h($n)}catch{jn=h(unescape(encodeURIComponent($n)))}return"data:application/pdf;filename="+pn.filename+";base64,"+jn;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var ar="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",br=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';pn.pdfObjectUrl&&(ar=pn.pdfObjectUrl,br="");var Cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ar+'"'+br+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(pn)+");<\/script></body></html>",zr=n.open();return zr!==null&&zr.document.write(Cr),zr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var $r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(pn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+pn.filename+'" width="500px" height="400px" /></body></html>',ti=n.open();if(ti!==null){ti.document.write($r);var Qr=this;ti.document.documentElement.querySelector("#pdfViewer").onload=function(){ti.document.title=pn.filename,ti.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qr.output("bloburl"))}}return ti}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ri='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",pn)+'"></iframe></body></html>',gi=n.open();if(gi!==null&&(gi.document.write(ri),gi.document.title=pn.filename),gi||typeof safari>"u")return gi;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",pn);default:return null}}),mo=function(Fe){return Array.isArray(kr)===!0&&kr.indexOf(Fe)>-1};switch(e){case"pt":hr=1;break;case"mm":hr=72/25.4;break;case"cm":hr=72/2.54;break;case"in":hr=72;break;case"px":hr=mo("px_scaling")==1?.75:96/72;break;case"pc":case"em":hr=12;break;case"ex":hr=6;break;default:if(typeof e!="number")throw new Error("Invalid unit: "+e);hr=e}var Ri=null;Nn(),Pn();var El=function(Fe){return Me!==null?Ri.encryptor(Fe,0):function(pn){return pn}},bo=Te.__private__.getPageInfo=Te.getPageInfo=function(Fe){if(isNaN(Fe)||Fe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:yr[Fe].objId,pageNumber:Fe,pageContext:yr[Fe]}},Jr=Te.__private__.getPageInfoByObjId=function(Fe){if(isNaN(Fe)||Fe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pn in yr)if(yr[pn].objId===Fe)break;return bo(pn)},Pl=Te.__private__.getCurrentPageInfo=Te.getCurrentPageInfo=function(){return{objId:yr[Ie].objId,pageNumber:Ie,pageContext:yr[Ie]}};Te.addPage=function(){return fo.apply(this,arguments),this},Te.setPage=function(){return po.apply(this,arguments),Dn.call(this,In[Ie]),this},Te.insertPage=function(Fe){return this.addPage(),this.movePage(Ie,Fe),this},Te.movePage=function(Fe,pn){var jn,$n;if(Fe>pn){jn=In[Fe],$n=yr[Fe];for(var ar=Fe;ar>pn;ar--)In[ar]=In[ar-1],yr[ar]=yr[ar-1];In[pn]=jn,yr[pn]=$n,this.setPage(pn)}else if(Fe<pn){jn=In[Fe],$n=yr[Fe];for(var br=Fe;br<pn;br++)In[br]=In[br+1],yr[br]=yr[br+1];In[pn]=jn,yr[pn]=$n,this.setPage(pn)}return this},Te.deletePage=function(){return yl.apply(this,arguments),this},Te.__private__.text=Te.text=function(Fe,pn,jn,$n,ar){var br,Cr,zr,$r,ti,Qr,ri,gi,mi,wi=($n=$n||{}).scope||this;if(typeof Fe=="number"&&typeof pn=="number"&&(typeof jn=="string"||Array.isArray(jn))){var ki=jn;jn=pn,pn=Fe,Fe=ki}if(arguments[3]instanceof Gn?(ze("The transform parameter of text() with a Matrix value"),mi=ar):(zr=arguments[4],$r=arguments[5],_typeof(ri=arguments[3])==="object"&&ri!==null||(typeof zr=="string"&&($r=zr,zr=null),typeof ri=="string"&&($r=ri,ri=null),typeof ri=="number"&&(zr=ri,ri=null),$n={flags:ri,angle:zr,align:$r})),isNaN(pn)||isNaN(jn)||Fe==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Fe.length===0)return wi;var Ei="",rs=!1,Hi=typeof $n.lineHeightFactor=="number"?$n.lineHeightFactor:Ds,ls=wi.internal.scaleFactor;function Po(fi){return fi=fi.split("	").join(Array($n.TabLen||9).join(" ")),Oi(fi,ri)}function Da(fi){for(var pi,xi=fi.concat(),Si=[],ms=xi.length;ms--;)typeof(pi=xi.shift())=="string"?Si.push(pi):Array.isArray(fi)&&(pi.length===1||pi[1]===void 0&&pi[2]===void 0)?Si.push(pi[0]):Si.push([pi[0],pi[1],pi[2]]);return Si}function ja(fi,pi){var xi;if(typeof fi=="string")xi=pi(fi)[0];else if(Array.isArray(fi)){for(var Si,ms,Ga=fi.concat(),ha=[],Ro=Ga.length;Ro--;)typeof(Si=Ga.shift())=="string"?ha.push(pi(Si)[0]):Array.isArray(Si)&&typeof Si[0]=="string"&&(ms=pi(Si[0],Si[1],Si[2]),ha.push([ms[0],ms[1],ms[2]]));xi=ha}return xi}var na=!1,Oa=!0;if(typeof Fe=="string")na=!0;else if(Array.isArray(Fe)){var Ba=Fe.concat();Cr=[];for(var ra,Ci=Ba.length;Ci--;)(typeof(ra=Ba.shift())!="string"||Array.isArray(ra)&&typeof ra[0]!="string")&&(Oa=!1);na=Oa}if(na===!1)throw new Error('Type of text must be string or Array. "'+Fe+'" is not recognized.');typeof Fe=="string"&&(Fe=Fe.match(/[\r?\n]/)?Fe.split(/\r\n|\r|\n/g):[Fe]);var ia=Rn/wi.internal.scaleFactor,sa=ia*(Hi-1);switch($n.baseline){case"bottom":jn-=sa;break;case"top":jn+=ia-sa;break;case"hanging":jn+=ia-2*sa;break;case"middle":jn+=ia/2-sa}if((Qr=$n.maxWidth||0)>0&&(typeof Fe=="string"?Fe=wi.splitTextToSize(Fe,Qr):Object.prototype.toString.call(Fe)==="[object Array]"&&(Fe=Fe.reduce(function(fi,pi){return fi.concat(wi.splitTextToSize(pi,Qr))},[]))),br={text:Fe,x:pn,y:jn,options:$n,mutex:{pdfEscape:Oi,activeFontKey:Ir,fonts:or,activeFontSize:Rn}},Lr.publish("preProcessText",br),Fe=br.text,zr=($n=br.options).angle,!(mi instanceof Gn)&&zr&&typeof zr=="number"){zr*=Math.PI/180,$n.rotationDirection===0&&(zr=-zr),an===Ye.ADVANCED&&(zr=-zr);var aa=Math.cos(zr),qa=Math.sin(zr);mi=new Gn(aa,qa,-qa,aa,0,0)}else zr&&zr instanceof Gn&&(mi=zr);an!==Ye.ADVANCED||mi||(mi=dr),(ti=$n.charSpace||Qs)!==void 0&&(Ei+=We(Ge(ti))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(gi=$n.horizontalScale)!==void 0&&(Ei+=We(100*gi)+` Tz
`),$n.lang;var Bi=-1,Dl=$n.renderingMode!==void 0?$n.renderingMode:$n.stroke,Ua=wi.internal.getCurrentPageInfo().pageContext;switch(Dl){case 0:case!1:case"fill":Bi=0;break;case 1:case!0:case"stroke":Bi=1;break;case 2:case"fillThenStroke":Bi=2;break;case 3:case"invisible":Bi=3;break;case 4:case"fillAndAddForClipping":Bi=4;break;case 5:case"strokeAndAddPathForClipping":Bi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bi=6;break;case 7:case"addToPathForClipping":Bi=7}var Lo=Ua.usedRenderingMode!==void 0?Ua.usedRenderingMode:-1;Bi!==-1?Ei+=Bi+` Tr
`:Lo!==-1&&(Ei+=`0 Tr
`),Bi!==-1&&(Ua.usedRenderingMode=Bi),$r=$n.align||"left";var $i,oa=Rn*Hi,Co=wi.internal.pageSize.getWidth(),To=or[Ir];ti=$n.charSpace||Qs,Qr=$n.maxWidth||0,ri=Object.assign({autoencode:!0,noBOM:!0},$n.flags);var Ss=[],Bs=function(fi){return wi.getStringUnitWidth(fi,{font:To,charSpace:ti,fontSize:Rn,doKerning:!1})*Rn/ls};if(Object.prototype.toString.call(Fe)==="[object Array]"){var qi;Cr=Da(Fe),$r!=="left"&&($i=Cr.map(Bs));var Ii,Es=0;if($r==="right"){pn-=$i[0],Fe=[],Ci=Cr.length;for(var fs=0;fs<Ci;fs++)fs===0?(Ii=os(pn),qi=ds(jn)):(Ii=Ge(Es-$i[fs]),qi=-oa),Fe.push([Cr[fs],Ii,qi]),Es=$i[fs]}else if($r==="center"){pn-=$i[0]/2,Fe=[],Ci=Cr.length;for(var ps=0;ps<Ci;ps++)ps===0?(Ii=os(pn),qi=ds(jn)):(Ii=Ge((Es-$i[ps])/2),qi=-oa),Fe.push([Cr[ps],Ii,qi]),Es=$i[ps]}else if($r==="left"){Fe=[],Ci=Cr.length;for(var la=0;la<Ci;la++)Fe.push(Cr[la])}else if($r==="justify"&&To.encoding==="Identity-H"){Fe=[],Ci=Cr.length,Qr=Qr!==0?Qr:Co;for(var gs=0,yi=0;yi<Ci;yi++)if(qi=yi===0?ds(jn):-oa,Ii=yi===0?os(pn):gs,yi<Ci-1){var za=Ge((Qr-$i[yi])/(Cr[yi].split(" ").length-1)),Di=Cr[yi].split(" ");Fe.push([Di[0]+" ",Ii,qi]),gs=0;for(var Xi=1;Xi<Di.length;Xi++){var ca=(Bs(Di[Xi-1]+" "+Di[Xi])-Bs(Di[Xi]))*ls+za;Xi==Di.length-1?Fe.push([Di[Xi],ca,0]):Fe.push([Di[Xi]+" ",ca,0]),gs-=ca}}else Fe.push([Cr[yi],Ii,qi]);Fe.push(["",gs,0])}else{if($r!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Fe=[],Ci=Cr.length,Qr=Qr!==0?Qr:Co,yi=0;yi<Ci;yi++)qi=yi===0?ds(jn):-oa,Ii=yi===0?os(pn):0,yi<Ci-1?Ss.push(We(Ge((Qr-$i[yi])/(Cr[yi].split(" ").length-1)))):Ss.push(0),Fe.push([Cr[yi],Ii,qi])}}var No=typeof $n.R2L=="boolean"?$n.R2L:tr;No===!0&&(Fe=ja(Fe,function(fi,pi,xi){return[fi.split("").reverse().join(""),pi,xi]})),br={text:Fe,x:pn,y:jn,options:$n,mutex:{pdfEscape:Oi,activeFontKey:Ir,fonts:or,activeFontSize:Rn}},Lr.publish("postProcessText",br),Fe=br.text,rs=br.mutex.isHex||!1;var Ha=or[Ir].encoding;Ha!=="WinAnsiEncoding"&&Ha!=="StandardEncoding"||(Fe=ja(Fe,function(fi,pi,xi){return[Po(fi),pi,xi]})),Cr=Da(Fe),Fe=[];for(var qs,Us,Ps,zs=0,ua=1,Hs=Array.isArray(Cr[0])?ua:zs,Ls="",Wa=function(fi,pi,xi){var Si="";return xi instanceof Gn?(xi=typeof $n.angle=="number"?sr(xi,new Gn(1,0,0,1,fi,pi)):sr(new Gn(1,0,0,1,fi,pi),xi),an===Ye.ADVANCED&&(xi=sr(new Gn(1,0,0,-1,0,0),xi)),Si=xi.join(" ")+` Tm
`):Si=We(fi)+" "+We(pi)+` Td
`,Si},Yi=0;Yi<Cr.length;Yi++){switch(Ls="",Hs){case ua:Ps=(rs?"<":"(")+Cr[Yi][0]+(rs?">":")"),qs=parseFloat(Cr[Yi][1]),Us=parseFloat(Cr[Yi][2]);break;case zs:Ps=(rs?"<":"(")+Cr[Yi]+(rs?">":")"),qs=os(pn),Us=ds(jn)}Ss!==void 0&&Ss[Yi]!==void 0&&(Ls=Ss[Yi]+` Tw
`),Yi===0?Fe.push(Ls+Wa(qs,Us,mi)+Ps):Hs===zs?Fe.push(Ls+Ps):Hs===ua&&Fe.push(Ls+Wa(qs,Us,mi)+Ps)}Fe=Hs===zs?Fe.join(` Tj
T* `):Fe.join(` Tj
`),Fe+=` Tj
`;var Ki=`BT
/`;return Ki+=Ir+" "+Rn+` Tf
`,Ki+=We(Rn*Hi)+` TL
`,Ki+=js+`
`,Ki+=Ei,Ki+=Fe,cn(Ki+="ET"),He[Ir]=!0,wi};var Ll=Te.__private__.clip=Te.clip=function(Fe){return cn(Fe==="evenodd"?"W*":"W"),this};Te.clipEvenOdd=function(){return Ll("evenodd")},Te.__private__.discardPath=Te.discardPath=function(){return cn("n"),this};var as=Te.__private__.isValidStyle=function(Fe){var pn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Fe)!==-1&&(pn=!0),pn};Te.__private__.setDefaultPathOperation=Te.setDefaultPathOperation=function(Fe){return as(Fe)&&(De=Fe),this};var vo=Te.__private__.getStyle=Te.getStyle=function(Fe){var pn=De;switch(Fe){case"D":case"S":pn="S";break;case"F":pn="f";break;case"FD":case"DF":pn="B";break;case"f":case"f*":case"B":case"B*":pn=Fe}return pn},yo=Te.close=function(){return cn("h"),this};Te.stroke=function(){return cn("S"),this},Te.fill=function(Fe){return Js("f",Fe),this},Te.fillEvenOdd=function(Fe){return Js("f*",Fe),this},Te.fillStroke=function(Fe){return Js("B",Fe),this},Te.fillStrokeEvenOdd=function(Fe){return Js("B*",Fe),this};var Js=function(Fe,pn){_typeof(pn)==="object"?Tl(pn,Fe):cn(Fe)},Pa=function(Fe){Fe===null||an===Ye.ADVANCED&&Fe===void 0||(Fe=vo(Fe),cn(Fe))};function Cl(Fe,pn,jn,$n,ar){var br=new M(pn||this.boundingBox,jn||this.xStep,$n||this.yStep,this.gState,ar||this.matrix);br.stream=this.stream;var Cr=Fe+"$$"+this.cloneIndex+++"$$";return gr(Cr,br),br}var Tl=function(Fe,pn){var jn=Xr[Fe.key],$n=Sr[jn];if($n instanceof B)cn("q"),cn(Nl(pn)),$n.gState&&Te.setGState($n.gState),cn(Fe.matrix.toString()+" cm"),cn("/"+jn+" sh"),cn("Q");else if($n instanceof M){var ar=new Gn(1,0,0,-1,0,_s());Fe.matrix&&(ar=ar.multiply(Fe.matrix||dr),jn=Cl.call($n,Fe.key,Fe.boundingBox,Fe.xStep,Fe.yStep,ar).id),cn("q"),cn("/Pattern cs"),cn("/"+jn+" scn"),$n.gState&&Te.setGState($n.gState),cn(pn),cn("Q")}},Nl=function(Fe){switch(Fe){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},La=Te.moveTo=function(Fe,pn){return cn(We(Ge(Fe))+" "+We(dn(pn))+" m"),this},Is=Te.lineTo=function(Fe,pn){return cn(We(Ge(Fe))+" "+We(dn(pn))+" l"),this},ws=Te.curveTo=function(Fe,pn,jn,$n,ar,br){return cn([We(Ge(Fe)),We(dn(pn)),We(Ge(jn)),We(dn($n)),We(Ge(ar)),We(dn(br)),"c"].join(" ")),this};Te.__private__.line=Te.line=function(Fe,pn,jn,$n,ar){if(isNaN(Fe)||isNaN(pn)||isNaN(jn)||isNaN($n)||!as(ar))throw new Error("Invalid arguments passed to jsPDF.line");return an===Ye.COMPAT?this.lines([[jn-Fe,$n-pn]],Fe,pn,[1,1],ar||"S"):this.lines([[jn-Fe,$n-pn]],Fe,pn,[1,1]).stroke()},Te.__private__.lines=Te.lines=function(Fe,pn,jn,$n,ar,br){var Cr,zr,$r,ti,Qr,ri,gi,mi,wi,ki,Ei,rs;if(typeof Fe=="number"&&(rs=jn,jn=pn,pn=Fe,Fe=rs),$n=$n||[1,1],br=br||!1,isNaN(pn)||isNaN(jn)||!Array.isArray(Fe)||!Array.isArray($n)||!as(ar)||typeof br!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(La(pn,jn),Cr=$n[0],zr=$n[1],ti=Fe.length,ki=pn,Ei=jn,$r=0;$r<ti;$r++)(Qr=Fe[$r]).length===2?(ki=Qr[0]*Cr+ki,Ei=Qr[1]*zr+Ei,Is(ki,Ei)):(ri=Qr[0]*Cr+ki,gi=Qr[1]*zr+Ei,mi=Qr[2]*Cr+ki,wi=Qr[3]*zr+Ei,ki=Qr[4]*Cr+ki,Ei=Qr[5]*zr+Ei,ws(ri,gi,mi,wi,ki,Ei));return br&&yo(),Pa(ar),this},Te.path=function(Fe){for(var pn=0;pn<Fe.length;pn++){var jn=Fe[pn],$n=jn.c;switch(jn.op){case"m":La($n[0],$n[1]);break;case"l":Is($n[0],$n[1]);break;case"c":ws.apply(this,$n);break;case"h":yo()}}return this},Te.__private__.rect=Te.rect=function(Fe,pn,jn,$n,ar){if(isNaN(Fe)||isNaN(pn)||isNaN(jn)||isNaN($n)||!as(ar))throw new Error("Invalid arguments passed to jsPDF.rect");return an===Ye.COMPAT&&($n=-$n),cn([We(Ge(Fe)),We(dn(pn)),We(Ge(jn)),We(Ge($n)),"re"].join(" ")),Pa(ar),this},Te.__private__.triangle=Te.triangle=function(Fe,pn,jn,$n,ar,br,Cr){if(isNaN(Fe)||isNaN(pn)||isNaN(jn)||isNaN($n)||isNaN(ar)||isNaN(br)||!as(Cr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[jn-Fe,$n-pn],[ar-jn,br-$n],[Fe-ar,pn-br]],Fe,pn,[1,1],Cr,!0),this},Te.__private__.roundedRect=Te.roundedRect=function(Fe,pn,jn,$n,ar,br,Cr){if(isNaN(Fe)||isNaN(pn)||isNaN(jn)||isNaN($n)||isNaN(ar)||isNaN(br)||!as(Cr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zr=4/3*(Math.SQRT2-1);return ar=Math.min(ar,.5*jn),br=Math.min(br,.5*$n),this.lines([[jn-2*ar,0],[ar*zr,0,ar,br-br*zr,ar,br],[0,$n-2*br],[0,br*zr,-ar*zr,br,-ar,br],[2*ar-jn,0],[-ar*zr,0,-ar,-br*zr,-ar,-br],[0,2*br-$n],[0,-br*zr,ar*zr,-br,ar,-br]],Fe+ar,pn,[1,1],Cr,!0),this},Te.__private__.ellipse=Te.ellipse=function(Fe,pn,jn,$n,ar){if(isNaN(Fe)||isNaN(pn)||isNaN(jn)||isNaN($n)||!as(ar))throw new Error("Invalid arguments passed to jsPDF.ellipse");var br=4/3*(Math.SQRT2-1)*jn,Cr=4/3*(Math.SQRT2-1)*$n;return La(Fe+jn,pn),ws(Fe+jn,pn-Cr,Fe+br,pn-$n,Fe,pn-$n),ws(Fe-br,pn-$n,Fe-jn,pn-Cr,Fe-jn,pn),ws(Fe-jn,pn+Cr,Fe-br,pn+$n,Fe,pn+$n),ws(Fe+br,pn+$n,Fe+jn,pn+Cr,Fe+jn,pn),Pa(ar),this},Te.__private__.circle=Te.circle=function(Fe,pn,jn,$n){if(isNaN(Fe)||isNaN(pn)||isNaN(jn)||!as($n))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Fe,pn,jn,jn,$n)},Te.setFont=function(Fe,pn,jn){return jn&&(pn=en(pn,jn)),Ir=go(Fe,pn,{disableWarning:!1}),this};var Rl=Te.__private__.getFont=Te.getFont=function(){return or[go.apply(Te,arguments)]};Te.__private__.getFontList=Te.getFontList=function(){var Fe,pn,jn={};for(Fe in Xn)if(Xn.hasOwnProperty(Fe))for(pn in jn[Fe]=[],Xn[Fe])Xn[Fe].hasOwnProperty(pn)&&jn[Fe].push(pn);return jn},Te.addFont=function(Fe,pn,jn,$n,ar){var br=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&br.indexOf(arguments[3])!==-1?ar=arguments[3]:arguments[3]&&br.indexOf(arguments[3])==-1&&(jn=en(jn,$n)),ar=ar||"Identity-H",Aa.call(this,Fe,pn,jn,ar)};var Ds,Ca=St.lineWidth||.200025,Zs=Te.__private__.getLineWidth=Te.getLineWidth=function(){return Ca},xo=Te.__private__.setLineWidth=Te.setLineWidth=function(Fe){return Ca=Fe,cn(We(Ge(Fe))+" w"),this};Te.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(Fe,pn){if(Fe=Fe||[],pn=pn||0,isNaN(pn)||!Array.isArray(Fe))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Fe=Fe.map(function(jn){return We(Ge(jn))}).join(" "),pn=We(Ge(pn)),cn("["+Fe+"] "+pn+" d"),this};var wo=Te.__private__.getLineHeight=Te.getLineHeight=function(){return Rn*Ds};Te.__private__.getLineHeight=Te.getLineHeight=function(){return Rn*Ds};var Ao=Te.__private__.setLineHeightFactor=Te.setLineHeightFactor=function(Fe){return typeof(Fe=Fe||1.15)=="number"&&(Ds=Fe),this},_o=Te.__private__.getLineHeightFactor=Te.getLineHeightFactor=function(){return Ds};Ao(St.lineHeight);var os=Te.__private__.getHorizontalCoordinate=function(Fe){return Ge(Fe)},ds=Te.__private__.getVerticalCoordinate=function(Fe){return an===Ye.ADVANCED?Fe:yr[Ie].mediaBox.topRightY-yr[Ie].mediaBox.bottomLeftY-Ge(Fe)},kl=Te.__private__.getHorizontalCoordinateString=Te.getHorizontalCoordinateString=function(Fe){return We(os(Fe))},As=Te.__private__.getVerticalCoordinateString=Te.getVerticalCoordinateString=function(Fe){return We(ds(Fe))},ns=St.strokeColor||"0 G";Te.__private__.getStrokeColor=Te.getDrawColor=function(){return Ur(ns)},Te.__private__.setStrokeColor=Te.setDrawColor=function(Fe,pn,jn,$n){return ns=Gr({ch1:Fe,ch2:pn,ch3:jn,ch4:$n,pdfColorType:"draw",precision:2}),cn(ns),this};var Ta=St.fillColor||"0 g";Te.__private__.getFillColor=Te.getFillColor=function(){return Ur(Ta)},Te.__private__.setFillColor=Te.setFillColor=function(Fe,pn,jn,$n){return Ta=Gr({ch1:Fe,ch2:pn,ch3:jn,ch4:$n,pdfColorType:"fill",precision:2}),cn(Ta),this};var js=St.textColor||"0 g",Fl=Te.__private__.getTextColor=Te.getTextColor=function(){return Ur(js)};Te.__private__.setTextColor=Te.setTextColor=function(Fe,pn,jn,$n){return js=Gr({ch1:Fe,ch2:pn,ch3:jn,ch4:$n,pdfColorType:"text",precision:3}),this};var Qs=St.charSpace,Ml=Te.__private__.getCharSpace=Te.getCharSpace=function(){return parseFloat(Qs||0)};Te.__private__.setCharSpace=Te.setCharSpace=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qs=Fe,this};var Na=0;Te.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Te.__private__.setLineCap=Te.setLineCap=function(Fe){var pn=Te.CapJoinStyles[Fe];if(pn===void 0)throw new Error("Line cap style of '"+Fe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Na=pn,cn(pn+" J"),this};var Ra=0;Te.__private__.setLineJoin=Te.setLineJoin=function(Fe){var pn=Te.CapJoinStyles[Fe];if(pn===void 0)throw new Error("Line join style of '"+Fe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ra=pn,cn(pn+" j"),this},Te.__private__.setLineMiterLimit=Te.__private__.setMiterLimit=Te.setLineMiterLimit=Te.setMiterLimit=function(Fe){if(Fe=Fe||0,isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return cn(We(Ge(Fe))+" M"),this},Te.GState=j,Te.setGState=function(Fe){(Fe=typeof Fe=="string"?qr[Fn[Fe]]:So(null,Fe)).equals(ur)||(cn("/"+Fe.id+" gs"),ur=Fe)};var So=function(Fe,pn){if(!Fe||!Fn[Fe]){var jn=!1;for(var $n in qr)if(qr.hasOwnProperty($n)&&qr[$n].equals(pn)){jn=!0;break}if(jn)pn=qr[$n];else{var ar="GS"+(Object.keys(qr).length+1).toString(10);qr[ar]=pn,pn.id=ar}return Fe&&(Fn[Fe]=pn.id),Lr.publish("addGState",pn),pn}};Te.addGState=function(Fe,pn){return So(Fe,pn),this},Te.saveGraphicsState=function(){return cn("q"),Qn.push({key:Ir,size:Rn,color:js}),this},Te.restoreGraphicsState=function(){cn("Q");var Fe=Qn.pop();return Ir=Fe.key,Rn=Fe.size,js=Fe.color,ur=null,this},Te.setCurrentTransformationMatrix=function(Fe){return cn(Fe.toString()+" cm"),this},Te.comment=function(Fe){return cn("#"+Fe),this};var ta=function(Fe,pn){var jn=Fe||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return jn},set:function(br){isNaN(br)||(jn=parseFloat(br))}});var $n=pn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return $n},set:function(br){isNaN(br)||($n=parseFloat(br))}});var ar="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ar},set:function(br){ar=br.toString()}}),this},ka=function(Fe,pn,jn,$n){ta.call(this,Fe,pn),this.type="rect";var ar=jn||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ar},set:function(Cr){isNaN(Cr)||(ar=parseFloat(Cr))}});var br=$n||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return br},set:function(Cr){isNaN(Cr)||(br=parseFloat(Cr))}}),this},Fa=function(){this.page=vr,this.currentPage=Ie,this.pages=In.slice(0),this.pagesContext=yr.slice(0),this.x=Rr,this.y=jr,this.matrix=Vr,this.width=Os(Ie),this.height=_s(Ie),this.outputDestination=Wn,this.id="",this.objectNumber=-1};Fa.prototype.restore=function(){vr=this.page,Ie=this.currentPage,yr=this.pagesContext,In=this.pages,Rr=this.x,jr=this.y,Vr=this.matrix,Ma(Ie,this.width),Ia(Ie,this.height),Wn=this.outputDestination};var Eo=function(Fe,pn,jn,$n,ar){Un.push(new Fa),vr=Ie=0,In=[],Rr=Fe,jr=pn,Vr=ar,Sa([jn,$n])},Il=function(Fe){if(Ln[Fe])Un.pop().restore();else{var pn=new Fa,jn="Xo"+(Object.keys(Tn).length+1).toString(10);pn.id=jn,Ln[Fe]=jn,Tn[jn]=pn,Lr.publish("addFormObject",pn),Un.pop().restore()}};for(var ea in Te.beginFormObject=function(Fe,pn,jn,$n,ar){return Eo(Fe,pn,jn,$n,ar),this},Te.endFormObject=function(Fe){return Il(Fe),this},Te.doFormObject=function(Fe,pn){var jn=Tn[Ln[Fe]];return cn("q"),cn(pn.toString()+" cm"),cn("/"+jn.id+" Do"),cn("Q"),this},Te.getFormObject=function(Fe){var pn=Tn[Ln[Fe]];return{x:pn.x,y:pn.y,width:pn.width,height:pn.height,matrix:pn.matrix}},Te.save=function(Fe,pn){return Fe=Fe||"generated.pdf",(pn=pn||{}).returnPromise=pn.returnPromise||!1,pn.returnPromise===!1?(l(Ys(hs()),Fe),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(jn,$n){try{var ar=l(Ys(hs()),Fe);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),jn(ar)}catch(br){$n(br.message)}})},E.API)E.API.hasOwnProperty(ea)&&(ea==="events"&&E.API.events.length?function(Fe,pn){var jn,$n,ar;for(ar=pn.length-1;ar!==-1;ar--)jn=pn[ar][0],$n=pn[ar][1],Fe.subscribe.apply(Fe,[jn].concat(typeof $n=="function"?[$n]:$n))}(Lr,E.API.events):Te[ea]=E.API[ea]);var Os=Te.getPageWidth=function(Fe){return(yr[Fe=Fe||Ie].mediaBox.topRightX-yr[Fe].mediaBox.bottomLeftX)/hr},Ma=Te.setPageWidth=function(Fe,pn){yr[Fe].mediaBox.topRightX=pn*hr+yr[Fe].mediaBox.bottomLeftX},_s=Te.getPageHeight=function(Fe){return(yr[Fe=Fe||Ie].mediaBox.topRightY-yr[Fe].mediaBox.bottomLeftY)/hr},Ia=Te.setPageHeight=function(Fe,pn){yr[Fe].mediaBox.topRightY=pn*hr+yr[Fe].mediaBox.bottomLeftY};return Te.internal={pdfEscape:Oi,getStyle:vo,getFont:Rl,getFontSize:Hn,getCharSpace:Ml,getTextColor:Fl,getLineHeight:wo,getLineHeightFactor:_o,getLineWidth:Zs,write:Bn,getHorizontalCoordinate:os,getVerticalCoordinate:ds,getCoordinateString:kl,getVerticalCoordinateString:As,collections:{},newObject:Nr,newAdditionalObject:Wr,newObjectDeferred:Tr,newObjectDeferredBegin:Er,getFilters:Kr,putStream:Zr,events:Lr,scaleFactor:hr,pageSize:{getWidth:function(){return Os(Ie)},setWidth:function(Fe){Ma(Ie,Fe)},getHeight:function(){return _s(Ie)},setHeight:function(Fe){Ia(Ie,Fe)}},encryptionOptions:Me,encryption:Ri,getEncryptor:El,output:Ks,getNumberOfPages:xl,pages:In,out:cn,f2:gn,f3:ke,getPageInfo:bo,getPageInfoByObjId:Jr,getCurrentPageInfo:Pl,getPDFVersion:$e,Point:ta,Rectangle:ka,Matrix:Gn,hasHotfix:mo},Object.defineProperty(Te.internal.pageSize,"width",{get:function(){return Os(Ie)},set:function(Fe){Ma(Ie,Fe)},enumerable:!0,configurable:!0}),Object.defineProperty(Te.internal.pageSize,"height",{get:function(){return _s(Ie)},set:function(Fe){Ia(Ie,Fe)},enumerable:!0,configurable:!0}),vl.call(Te,bn),Ir="F1",fo(_e,xe),Lr.publish("initialized"),Te}I.prototype.lsbFirstWord=function(St){return String.fromCharCode(St>>0&255,St>>8&255,St>>16&255,St>>24&255)},I.prototype.toHexString=function(St){return St.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(St){for(var t=[],xe=0;xe<St.length;xe+=2)t.push(String.fromCharCode(parseInt(St.substr(xe,2),16)));return t.join("")},I.prototype.processOwnerPassword=function(St,t){return P(x(t).substr(0,5),St)},I.prototype.encryptor=function(St,t){var xe=x(this.encryptionKey+String.fromCharCode(255&St,St>>8&255,St>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return P(xe,e)}},j.prototype.equals=function(St){var t,xe="id,objectNumber,equals";if(!St||_typeof(St)!==_typeof(this))return!1;var e=0;for(t in this)if(!(xe.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!St.hasOwnProperty(t)||this[t]!==St[t])return!1;e++}for(t in St)St.hasOwnProperty(t)&&xe.indexOf(t)<0&&e--;return e===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(St){return St.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(St){return St.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(St){return St.toFixed(2)},z=function(St){return St.toFixed(5)};q.__acroform__={};var H=function(St,t){St.prototype=Object.create(t.prototype),St.prototype.constructor=St},W=function(St){return St*D},V=function(St){var t=new ut,xe=At.internal.getHeight(St)||0,e=At.internal.getWidth(St)||0;return t.BBox=[0,0,Number(U(e)),Number(U(xe))],t},G=q.__acroform__.setBit=function(St,t){if(St=St||0,t=t||0,isNaN(St)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return St|=1<<t},Y=q.__acroform__.clearBit=function(St,t){if(St=St||0,t=t||0,isNaN(St)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return St&=~(1<<t)},J=q.__acroform__.getBit=function(St,t){if(isNaN(St)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return St&1<<t?1:0},X=q.__acroform__.getBitForPdf=function(St,t){if(isNaN(St)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(St,t-1)},K=q.__acroform__.setBitForPdf=function(St,t){if(isNaN(St)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(St,t-1)},Z=q.__acroform__.clearBitForPdf=function(St,t){if(isNaN(St)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(St,t-1)},$=q.__acroform__.calculateCoordinates=function(St,t){var xe=t.internal.getHorizontalCoordinate,e=t.internal.getVerticalCoordinate,_e=St[0],Se=St[1],Ee=St[2],Re=St[3],Ce={};return Ce.lowerLeft_X=xe(_e)||0,Ce.lowerLeft_Y=e(Se+Re)||0,Ce.upperRight_X=xe(_e+Ee)||0,Ce.upperRight_Y=e(Se)||0,[Number(U(Ce.lowerLeft_X)),Number(U(Ce.lowerLeft_Y)),Number(U(Ce.upperRight_X)),Number(U(Ce.upperRight_Y))]},Q=function(St){if(St.appearanceStreamContent)return St.appearanceStreamContent;if(St.V||St.DV){var t=[],xe=St._V||St.DV,e=tt(St,xe),_e=St.scope.internal.getFont(St.fontName,St.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(St.scope.__private__.encodeColorString(St.color)),t.push("/"+_e+" "+U(e.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(e.text),t.push("ET"),t.push("Q"),t.push("EMC");var Se=V(St);return Se.scope=St.scope,Se.stream=t.join(`
`),Se}},tt=function(St,t){var xe=St.fontSize===0?St.maxFontSize:St.fontSize,e={text:"",fontSize:""},_e=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");_e=St.multiline?_e.map(function(ke){return ke.split(`
`)}):_e.map(function(ke){return[ke]});var Se=xe,Ee=At.internal.getHeight(St)||0;Ee=Ee<0?-Ee:Ee;var Re=At.internal.getWidth(St)||0;Re=Re<0?-Re:Re;var Ce=function(ke,Ge,nn){if(ke+1<_e.length){var dn=Ge+" "+_e[ke+1][0];return et(dn,St,nn).width<=Re-4}return!1};Se++;t:for(;Se>0;){t="",Se--;var De,Me,Ue=et("3",St,Se).height,He=St.multiline?Ee-Se:(Ee-Ue)/2,Te=He+=2,Ve=0,$e=0,Ke=0;if(Se<=0){t=`(...) Tj
`,t+="% Width of Text: "+et(t,St,Se=12).width+", FieldWidth:"+Re+`
`;break}for(var Be="",Ye=0,an=0;an<_e.length;an++)if(_e.hasOwnProperty(an)){var rn=!1;if(_e[an].length!==1&&Ke!==_e[an].length-1){if((Ue+2)*(Ye+2)+2>Ee)continue t;Be+=_e[an][Ke],rn=!0,$e=an,an--}else{Be=(Be+=_e[an][Ke]+" ").substr(Be.length-1)==" "?Be.substr(0,Be.length-1):Be;var Xe=parseInt(an),en=Ce(Xe,Be,Se),We=an>=_e.length-1;if(en&&!We){Be+=" ",Ke=0;continue}if(en||We){if(We)$e=Xe;else if(St.multiline&&(Ue+2)*(Ye+2)+2>Ee)continue t}else{if(!St.multiline||(Ue+2)*(Ye+2)+2>Ee)continue t;$e=Xe}}for(var ze="",Qe=Ve;Qe<=$e;Qe++){var gn=_e[Qe];if(St.multiline){if(Qe===$e){ze+=gn[Ke]+" ",Ke=(Ke+1)%gn.length;continue}if(Qe===Ve){ze+=gn[gn.length-1]+" ";continue}}ze+=gn[0]+" "}switch(ze=ze.substr(ze.length-1)==" "?ze.substr(0,ze.length-1):ze,Me=et(ze,St,Se).width,St.textAlign){case"right":De=Re-Me-2;break;case"center":De=(Re-Me)/2;break;case"left":default:De=2}t+=U(De)+" "+U(Te)+` Td
`,t+="("+R(ze)+`) Tj
`,t+=-U(De)+` 0 Td
`,Te=-(Se+2),Me=0,Ve=rn?$e:$e+1,Ye++,Be=""}break}return e.text=t,e.fontSize=Se,e},et=function(St,t,xe){var e=t.scope.internal.getFont(t.fontName,t.fontStyle),_e=t.scope.getStringUnitWidth(St,{font:e,fontSize:parseFloat(xe),charSpace:0})*parseFloat(xe);return{height:t.scope.getStringUnitWidth("3",{font:e,fontSize:parseFloat(xe),charSpace:0})*parseFloat(xe)*1.5,width:_e}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(St,t){var xe={type:"reference",object:St};t.internal.getPageInfo(St.page).pageContext.annotations.find(function(e){return e.type===xe.type&&e.object===xe.object})===void 0&&t.internal.getPageInfo(St.page).pageContext.annotations.push(xe)},it=function(St,t){for(var xe in St)if(St.hasOwnProperty(xe)){var e=xe,_e=St[xe];t.internal.newObjectDeferredBegin(_e.objId,!0),_typeof(_e)==="object"&&typeof _e.putStream=="function"&&_e.putStream(),delete St[e]}},at=function(St,t){if(t.scope=St,St.internal!==void 0&&(St.internal.acroformPlugin===void 0||St.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,St.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),St.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=St.internal.scaleFactor,St.internal.acroformPlugin.acroFormDictionaryRoot=new ht,St.internal.acroformPlugin.acroFormDictionaryRoot.scope=St,St.internal.acroformPlugin.acroFormDictionaryRoot._eventID=St.internal.events.subscribe("postPutResources",function(){(function(xe){xe.internal.events.unsubscribe(xe.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete xe.internal.acroformPlugin.acroFormDictionaryRoot._eventID,xe.internal.acroformPlugin.printedOut=!0})(St)}),St.internal.events.subscribe("buildDocument",function(){(function(xe){xe.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=xe.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var _e in e)if(e.hasOwnProperty(_e)){var Se=e[_e];Se.objId=void 0,Se.hasAnnotation&&nt(Se,xe)}})(St)}),St.internal.events.subscribe("putCatalog",function(){(function(xe){if(xe.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");xe.internal.write("/AcroForm "+xe.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(St)}),St.internal.events.subscribe("postPutPages",function(xe){(function(e,_e){var Se=!e;for(var Ee in e||(_e.internal.newObjectDeferredBegin(_e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),_e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||_e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(Ee)){var Re=e[Ee],Ce=[],De=Re.Rect;if(Re.Rect&&(Re.Rect=$(Re.Rect,_e)),_e.internal.newObjectDeferredBegin(Re.objId,!0),Re.DA=At.createDefaultAppearanceStream(Re),_typeof(Re)==="object"&&typeof Re.getKeyValueListForStream=="function"&&(Ce=Re.getKeyValueListForStream()),Re.Rect=De,Re.hasAppearanceStream&&!Re.appearanceStreamContent){var Me=Q(Re);Ce.push({key:"AP",value:"<</N "+Me+">>"}),_e.internal.acroformPlugin.xForms.push(Me)}if(Re.appearanceStreamContent){var Ue="";for(var He in Re.appearanceStreamContent)if(Re.appearanceStreamContent.hasOwnProperty(He)){var Te=Re.appearanceStreamContent[He];if(Ue+="/"+He+" ",Ue+="<<",Object.keys(Te).length>=1||Array.isArray(Te)){for(var Ee in Te)if(Te.hasOwnProperty(Ee)){var Ve=Te[Ee];typeof Ve=="function"&&(Ve=Ve.call(_e,Re)),Ue+="/"+Ee+" "+Ve+" ",_e.internal.acroformPlugin.xForms.indexOf(Ve)>=0||_e.internal.acroformPlugin.xForms.push(Ve)}}else typeof(Ve=Te)=="function"&&(Ve=Ve.call(_e,Re)),Ue+="/"+Ee+" "+Ve,_e.internal.acroformPlugin.xForms.indexOf(Ve)>=0||_e.internal.acroformPlugin.xForms.push(Ve);Ue+=">>"}Ce.push({key:"AP",value:`<<
`+Ue+">>"})}_e.internal.putStream({additionalKeyValues:Ce,objectId:Re.objId}),_e.internal.out("endobj")}Se&&it(_e.internal.acroformPlugin.xForms,_e)})(xe,St)}),St.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(St,t,xe){var e=function(Ee){return Ee};if(Array.isArray(St)){for(var _e="[",Se=0;Se<St.length;Se++)switch(Se!==0&&(_e+=" "),_typeof(St[Se])){case"boolean":case"number":case"object":_e+=St[Se].toString();break;case"string":St[Se].substr(0,1)!=="/"?(t!==void 0&&xe&&(e=xe.internal.getEncryptor(t)),_e+="("+R(e(St[Se].toString()))+")"):_e+=St[Se].toString()}return _e+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(St,t,xe){var e=function(_e){return _e};return t!==void 0&&xe&&(e=xe.internal.getEncryptor(t)),(St=St||"").toString(),St="("+R(e(St))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(St){this._objId=St}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var St=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:St,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var St=[],t=Object.getOwnPropertyNames(this).filter(function(Se){return Se!="content"&&Se!="appearanceStreamContent"&&Se!="scope"&&Se!="objId"&&Se.substring(0,1)!="_"});for(var xe in t)if(Object.getOwnPropertyDescriptor(this,t[xe]).configurable===!1){var e=t[xe],_e=this[e];_e&&(Array.isArray(_e)?St.push({key:e,value:ot(_e,this.objId,this.scope)}):_e instanceof ct?(_e.scope=this.scope,St.push({key:e,value:_e.objId+" 0 R"})):typeof _e!="function"&&St.push({key:e,value:_e}))}return St};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var St,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(xe){t=xe}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(xe){St=xe.trim()},get:function(){return St||null}})};H(ut,ct);var ht=function(){ct.call(this);var St,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(St){var xe=function(e){return e};return this.scope&&(xe=this.scope.internal.getEncryptor(this.objId)),"("+R(xe(St))+")"}},set:function(xe){St=xe}})};H(ht,ct);var lt=function St(){ct.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Be){if(isNaN(Be))throw new Error('Invalid value "'+Be+'" for attribute F supplied.');t=Be}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(t,3)},set:function(Be){Be?this.F=K(t,3):this.F=Z(t,3)}});var xe=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return xe},set:function(Be){if(isNaN(Be))throw new Error('Invalid value "'+Be+'" for attribute Ff supplied.');xe=Be}});var e=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(e.length!==0)return e},set:function(Be){e=Be!==void 0?Be:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!e||isNaN(e[0])?0:e[0]},set:function(Be){e[0]=Be}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!e||isNaN(e[1])?0:e[1]},set:function(Be){e[1]=Be}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!e||isNaN(e[2])?0:e[2]},set:function(Be){e[2]=Be}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!e||isNaN(e[3])?0:e[3]},set:function(Be){e[3]=Be}});var _e="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return _e},set:function(Be){switch(Be){case"/Btn":case"/Tx":case"/Ch":case"/Sig":_e=Be;break;default:throw new Error('Invalid value "'+Be+'" for attribute FT supplied.')}}});var Se=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Se||Se.length<1){if(this instanceof yt)return;Se="FieldObject"+St.FieldNum++}var Be=function(Ye){return Ye};return this.scope&&(Be=this.scope.internal.getEncryptor(this.objId)),"("+R(Be(Se))+")"},set:function(Be){Se=Be.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Se},set:function(Be){Se=Be}});var Ee="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Ee},set:function(Be){Ee=Be}});var Re="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Re},set:function(Be){Re=Be}});var Ce=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ce},set:function(Be){Ce=Be}});var De=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return De===void 0?50/D:De},set:function(Be){De=Be}});var Me="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Me},set:function(Be){Me=Be}});var Ue="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Ue||this instanceof yt||this instanceof Nt))return st(Ue,this.objId,this.scope)},set:function(Be){Be=Be.toString(),Ue=Be}});var He=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(He)return this instanceof mt?He:st(He,this.objId,this.scope)},set:function(Be){Be=Be.toString(),He=this instanceof mt?Be:Be.substr(0,1)==="("?T(Be.substr(1,Be.length-2)):T(Be)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(He.substr(1,He.length-1)):He},set:function(Be){Be=Be.toString(),He=this instanceof mt?"/"+Be:Be}});var Te=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Te)return Te},set:function(Be){this.V=Be}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Te)return this instanceof mt?Te:st(Te,this.objId,this.scope)},set:function(Be){Be=Be.toString(),Te=this instanceof mt?Be:Be.substr(0,1)==="("?T(Be.substr(1,Be.length-2)):T(Be)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Te.substr(1,Te.length-1)):Te},set:function(Be){Be=Be.toString(),Te=this instanceof mt?"/"+Be:Be}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Ve,$e=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return $e},set:function(Be){Be=!!Be,$e=Be}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Ve)return Ve},set:function(Be){Ve=Be}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(Be){Be?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(Be){Be?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(Be){Be?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var Ke=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Ke!==null)return Ke},set:function(Be){if([0,1,2].indexOf(Be)===-1)throw new Error('Invalid value "'+Be+'" for attribute Q supplied.');Ke=Be}}),Object.defineProperty(this,"textAlign",{get:function(){var Be;switch(Ke){case 0:default:Be="left";break;case 1:Be="center";break;case 2:Be="right"}return Be},configurable:!0,enumerable:!0,set:function(Be){switch(Be){case"right":case 2:Ke=2;break;case"center":case 1:Ke=1;break;case"left":case 0:default:Ke=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var St=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return St},set:function(xe){St=xe}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return St},set:function(xe){St=xe}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(t,this.objId,this.scope)},set:function(xe){var e,_e;_e=[],typeof(e=xe)=="string"&&(_e=function(Se,Ee,Re){Re||(Re=1);for(var Ce,De=[];Ce=Ee.exec(Se);)De.push(Ce[Re]);return De}(e,/\((.*?)\)/g)),t=_e}}),this.getOptions=function(){return t},this.setOptions=function(xe){t=xe,this.sort&&t.sort()},this.addOption=function(xe){xe=(xe=xe||"").toString(),t.push(xe),this.sort&&t.sort()},this.removeOption=function(xe,e){for(e=e||!1,xe=(xe=xe||"").toString();t.indexOf(xe)!==-1&&(t.splice(t.indexOf(xe),1),e!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(xe){xe?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(xe){this.combo===!0&&(xe?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(xe){xe?(this.Ff=K(this.Ff,20),t.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(xe){xe?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(xe){xe?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(xe){xe?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(xe){xe?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(xe){xe?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(xe){xe?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(xe){xe?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var St,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var xe=function(Se){return Se};if(this.scope&&(xe=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var e,_e=[];for(e in _e.push("<<"),t)_e.push("/"+e+" ("+R(xe(t[e]))+")");return _e.push(">>"),_e.join(`
`)}},set:function(xe){_typeof(xe)==="object"&&(t=xe)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(xe){typeof xe=="string"&&(t.CA=xe)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return St},set:function(xe){St=xe}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return St.substr(1,St.length-1)},set:function(xe){St="/"+xe}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var St=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return St},set:function(t){St=t!==void 0?t:[]}})};H(bt,mt);var yt=function(){var St,t;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return St},set:function(_e){St=_e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(_e){t=_e}});var xe,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var _e=function(Re){return Re};this.scope&&(_e=this.scope.internal.getEncryptor(this.objId));var Se,Ee=[];for(Se in Ee.push("<<"),e)Ee.push("/"+Se+" ("+R(_e(e[Se]))+")");return Ee.push(">>"),Ee.join(`
`)},set:function(_e){_typeof(_e)==="object"&&(e=_e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(_e){typeof _e=="string"&&(e.CA=_e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return xe},set:function(_e){xe=_e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return xe.substr(1,xe.length-1)},set:function(_e){xe="/"+_e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(St){if(!("createAppearanceStream"in St)||!("getCA"in St))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var xe=this.Kids[t];xe.appearanceStreamContent=St.createAppearanceStream(xe.optionName),xe.caption=St.getCA()}},bt.prototype.createOption=function(St){var t=new yt;return t.Parent=this,t.optionName=St,this.Kids.push(t),xt.call(this.scope,t),t};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(t){t?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(t){t?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(t){t?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(t){t?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(t){t?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(t){t?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var St=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return St},set:function(t){St=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return St},set:function(t){Number.isInteger(t)&&(St=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(St){St?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(St){var t=V(St);t.scope=St.scope;var xe=[],e=St.scope.internal.getFont(St.fontName,St.fontStyle).id,_e=St.scope.__private__.encodeColorString(St.color),Se=tt(St,St.caption);return xe.push("0.749023 g"),xe.push("0 0 "+U(At.internal.getWidth(St))+" "+U(At.internal.getHeight(St))+" re"),xe.push("f"),xe.push("BMC"),xe.push("q"),xe.push("0 0 1 rg"),xe.push("/"+e+" "+U(Se.fontSize)+" Tf "+_e),xe.push("BT"),xe.push(Se.text),xe.push("ET"),xe.push("Q"),xe.push("EMC"),t.stream=xe.join(`
`),t},YesNormal:function(St){var t=V(St);t.scope=St.scope;var xe=St.scope.internal.getFont(St.fontName,St.fontStyle).id,e=St.scope.__private__.encodeColorString(St.color),_e=[],Se=At.internal.getHeight(St),Ee=At.internal.getWidth(St),Re=tt(St,St.caption);return _e.push("1 g"),_e.push("0 0 "+U(Ee)+" "+U(Se)+" re"),_e.push("f"),_e.push("q"),_e.push("0 0 1 rg"),_e.push("0 0 "+U(Ee-1)+" "+U(Se-1)+" re"),_e.push("W"),_e.push("n"),_e.push("0 g"),_e.push("BT"),_e.push("/"+xe+" "+U(Re.fontSize)+" Tf "+e),_e.push(Re.text),_e.push("ET"),_e.push("Q"),t.stream=_e.join(`
`),t},OffPushDown:function(St){var t=V(St);t.scope=St.scope;var xe=[];return xe.push("0.749023 g"),xe.push("0 0 "+U(At.internal.getWidth(St))+" "+U(At.internal.getHeight(St))+" re"),xe.push("f"),t.stream=xe.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(St){var t={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return t.N[St]=At.RadioButton.Circle.YesNormal,t.D[St]=At.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(St){var t=V(St);t.scope=St.scope;var xe=[],e=At.internal.getWidth(St)<=At.internal.getHeight(St)?At.internal.getWidth(St)/4:At.internal.getHeight(St)/4;e=Number((.9*e).toFixed(5));var _e=At.internal.Bezier_C,Se=Number((e*_e).toFixed(5));return xe.push("q"),xe.push("1 0 0 1 "+z(At.internal.getWidth(St)/2)+" "+z(At.internal.getHeight(St)/2)+" cm"),xe.push(e+" 0 m"),xe.push(e+" "+Se+" "+Se+" "+e+" 0 "+e+" c"),xe.push("-"+Se+" "+e+" -"+e+" "+Se+" -"+e+" 0 c"),xe.push("-"+e+" -"+Se+" -"+Se+" -"+e+" 0 -"+e+" c"),xe.push(Se+" -"+e+" "+e+" -"+Se+" "+e+" 0 c"),xe.push("f"),xe.push("Q"),t.stream=xe.join(`
`),t},YesPushDown:function(St){var t=V(St);t.scope=St.scope;var xe=[],e=At.internal.getWidth(St)<=At.internal.getHeight(St)?At.internal.getWidth(St)/4:At.internal.getHeight(St)/4;e=Number((.9*e).toFixed(5));var _e=Number((2*e).toFixed(5)),Se=Number((_e*At.internal.Bezier_C).toFixed(5)),Ee=Number((e*At.internal.Bezier_C).toFixed(5));return xe.push("0.749023 g"),xe.push("q"),xe.push("1 0 0 1 "+z(At.internal.getWidth(St)/2)+" "+z(At.internal.getHeight(St)/2)+" cm"),xe.push(_e+" 0 m"),xe.push(_e+" "+Se+" "+Se+" "+_e+" 0 "+_e+" c"),xe.push("-"+Se+" "+_e+" -"+_e+" "+Se+" -"+_e+" 0 c"),xe.push("-"+_e+" -"+Se+" -"+Se+" -"+_e+" 0 -"+_e+" c"),xe.push(Se+" -"+_e+" "+_e+" -"+Se+" "+_e+" 0 c"),xe.push("f"),xe.push("Q"),xe.push("0 g"),xe.push("q"),xe.push("1 0 0 1 "+z(At.internal.getWidth(St)/2)+" "+z(At.internal.getHeight(St)/2)+" cm"),xe.push(e+" 0 m"),xe.push(e+" "+Ee+" "+Ee+" "+e+" 0 "+e+" c"),xe.push("-"+Ee+" "+e+" -"+e+" "+Ee+" -"+e+" 0 c"),xe.push("-"+e+" -"+Ee+" -"+Ee+" -"+e+" 0 -"+e+" c"),xe.push(Ee+" -"+e+" "+e+" -"+Ee+" "+e+" 0 c"),xe.push("f"),xe.push("Q"),t.stream=xe.join(`
`),t},OffPushDown:function(St){var t=V(St);t.scope=St.scope;var xe=[],e=At.internal.getWidth(St)<=At.internal.getHeight(St)?At.internal.getWidth(St)/4:At.internal.getHeight(St)/4;e=Number((.9*e).toFixed(5));var _e=Number((2*e).toFixed(5)),Se=Number((_e*At.internal.Bezier_C).toFixed(5));return xe.push("0.749023 g"),xe.push("q"),xe.push("1 0 0 1 "+z(At.internal.getWidth(St)/2)+" "+z(At.internal.getHeight(St)/2)+" cm"),xe.push(_e+" 0 m"),xe.push(_e+" "+Se+" "+Se+" "+_e+" 0 "+_e+" c"),xe.push("-"+Se+" "+_e+" -"+_e+" "+Se+" -"+_e+" 0 c"),xe.push("-"+_e+" -"+Se+" -"+Se+" -"+_e+" 0 -"+_e+" c"),xe.push(Se+" -"+_e+" "+_e+" -"+Se+" "+_e+" 0 c"),xe.push("f"),xe.push("Q"),t.stream=xe.join(`
`),t}},Cross:{createAppearanceStream:function(St){var t={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return t.N[St]=At.RadioButton.Cross.YesNormal,t.D[St]=At.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(St){var t=V(St);t.scope=St.scope;var xe=[],e=At.internal.calculateCross(St);return xe.push("q"),xe.push("1 1 "+U(At.internal.getWidth(St)-2)+" "+U(At.internal.getHeight(St)-2)+" re"),xe.push("W"),xe.push("n"),xe.push(U(e.x1.x)+" "+U(e.x1.y)+" m"),xe.push(U(e.x2.x)+" "+U(e.x2.y)+" l"),xe.push(U(e.x4.x)+" "+U(e.x4.y)+" m"),xe.push(U(e.x3.x)+" "+U(e.x3.y)+" l"),xe.push("s"),xe.push("Q"),t.stream=xe.join(`
`),t},YesPushDown:function(St){var t=V(St);t.scope=St.scope;var xe=At.internal.calculateCross(St),e=[];return e.push("0.749023 g"),e.push("0 0 "+U(At.internal.getWidth(St))+" "+U(At.internal.getHeight(St))+" re"),e.push("f"),e.push("q"),e.push("1 1 "+U(At.internal.getWidth(St)-2)+" "+U(At.internal.getHeight(St)-2)+" re"),e.push("W"),e.push("n"),e.push(U(xe.x1.x)+" "+U(xe.x1.y)+" m"),e.push(U(xe.x2.x)+" "+U(xe.x2.y)+" l"),e.push(U(xe.x4.x)+" "+U(xe.x4.y)+" m"),e.push(U(xe.x3.x)+" "+U(xe.x3.y)+" l"),e.push("s"),e.push("Q"),t.stream=e.join(`
`),t},OffPushDown:function(St){var t=V(St);t.scope=St.scope;var xe=[];return xe.push("0.749023 g"),xe.push("0 0 "+U(At.internal.getWidth(St))+" "+U(At.internal.getHeight(St))+" re"),xe.push("f"),t.stream=xe.join(`
`),t}}},createDefaultAppearanceStream:function(St){var t=St.scope.internal.getFont(St.fontName,St.fontStyle).id,xe=St.scope.__private__.encodeColorString(St.color);return"/"+t+" "+St.fontSize+" Tf "+xe}};At.internal={Bezier_C:.551915024494,calculateCross:function(St){var t=At.internal.getWidth(St),xe=At.internal.getHeight(St),e=Math.min(t,xe);return{x1:{x:(t-e)/2,y:(xe-e)/2+e},x2:{x:(t-e)/2+e,y:(xe-e)/2},x3:{x:(t-e)/2,y:(xe-e)/2},x4:{x:(t-e)/2+e,y:(xe-e)/2+e}}}},At.internal.getWidth=function(St){var t=0;return _typeof(St)==="object"&&(t=W(St.Rect[2])),t},At.internal.getHeight=function(St){var t=0;return _typeof(St)==="object"&&(t=W(St.Rect[3])),t};var xt=q.addField=function(St){if(at(this,St),!(St instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=St).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),St.page=St.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(St){return St.reduce(function(t,xe,e){return t[xe]=e,t},{})}(function(St){St.__addimage__={};var t="UNKNOWN",xe={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},e=St.__addimage__.getImageFileTypeByImageData=function(ke,Ge){var nn,dn,wn,Sn,yn,Pn=t;if((Ge=Ge||t)==="RGBA"||ke.data!==void 0&&ke.data instanceof Uint8ClampedArray&&"height"in ke&&"width"in ke)return"RGBA";if(en(ke))for(yn in xe)for(wn=xe[yn],nn=0;nn<wn.length;nn+=1){for(Sn=!0,dn=0;dn<wn[nn].length;dn+=1)if(wn[nn][dn]!==void 0&&wn[nn][dn]!==ke[dn]){Sn=!1;break}if(Sn===!0){Pn=yn;break}}else for(yn in xe)for(wn=xe[yn],nn=0;nn<wn.length;nn+=1){for(Sn=!0,dn=0;dn<wn[nn].length;dn+=1)if(wn[nn][dn]!==void 0&&wn[nn][dn]!==ke.charCodeAt(dn)){Sn=!1;break}if(Sn===!0){Pn=yn;break}}return Pn===t&&Ge!==t&&(Pn=Ge),Pn},_e=function ke(Ge){for(var nn=this.internal.write,dn=this.internal.putStream,wn=(0,this.internal.getFilters)();wn.indexOf("FlateEncode")!==-1;)wn.splice(wn.indexOf("FlateEncode"),1);Ge.objectId=this.internal.newObject();var Sn=[];if(Sn.push({key:"Type",value:"/XObject"}),Sn.push({key:"Subtype",value:"/Image"}),Sn.push({key:"Width",value:Ge.width}),Sn.push({key:"Height",value:Ge.height}),Ge.colorSpace===Ke.INDEXED?Sn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Ge.palette.length/3-1)+" "+("sMask"in Ge&&Ge.sMask!==void 0?Ge.objectId+2:Ge.objectId+1)+" 0 R]"}):(Sn.push({key:"ColorSpace",value:"/"+Ge.colorSpace}),Ge.colorSpace===Ke.DEVICE_CMYK&&Sn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Sn.push({key:"BitsPerComponent",value:Ge.bitsPerComponent}),"decodeParameters"in Ge&&Ge.decodeParameters!==void 0&&Sn.push({key:"DecodeParms",value:"<<"+Ge.decodeParameters+">>"}),"transparency"in Ge&&Array.isArray(Ge.transparency)){for(var yn="",Pn=0,un=Ge.transparency.length;Pn<un;Pn++)yn+=Ge.transparency[Pn]+" "+Ge.transparency[Pn]+" ";Sn.push({key:"Mask",value:"["+yn+"]"})}Ge.sMask!==void 0&&Sn.push({key:"SMask",value:Ge.objectId+1+" 0 R"});var _n=Ge.filter!==void 0?["/"+Ge.filter]:void 0;if(dn({data:Ge.data,additionalKeyValues:Sn,alreadyAppliedFilters:_n,objectId:Ge.objectId}),nn("endobj"),"sMask"in Ge&&Ge.sMask!==void 0){var Nn="/Predictor "+Ge.predictor+" /Colors 1 /BitsPerComponent "+Ge.bitsPerComponent+" /Columns "+Ge.width,je={width:Ge.width,height:Ge.height,colorSpace:"DeviceGray",bitsPerComponent:Ge.bitsPerComponent,decodeParameters:Nn,data:Ge.sMask};"filter"in Ge&&(je.filter=Ge.filter),ke.call(this,je)}if(Ge.colorSpace===Ke.INDEXED){var Ie=this.internal.newObject();dn({data:ze(new Uint8Array(Ge.palette)),objectId:Ie}),nn("endobj")}},Se=function(){var ke=this.internal.collections.addImage_images;for(var Ge in ke)_e.call(this,ke[Ge])},Ee=function(){var ke,Ge=this.internal.collections.addImage_images,nn=this.internal.write;for(var dn in Ge)nn("/I"+(ke=Ge[dn]).index,ke.objectId,"0","R")},Re=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Se),this.internal.events.subscribe("putXobjectDict",Ee))},Ce=function(){var ke=this.internal.collections.addImage_images;return Re.call(this),ke},De=function(){return Object.keys(this.internal.collections.addImage_images).length},Me=function(ke){return typeof St["process"+ke.toUpperCase()]=="function"},Ue=function(ke){return _typeof(ke)==="object"&&ke.nodeType===1},He=function(ke,Ge){if(ke.nodeName==="IMG"&&ke.hasAttribute("src")){var nn=""+ke.getAttribute("src");if(nn.indexOf("data:image/")===0)return u(unescape(nn).split("base64,").pop());var dn=St.loadFile(nn,!0);if(dn!==void 0)return dn}if(ke.nodeName==="CANVAS"){if(ke.width===0||ke.height===0)throw new Error("Given canvas must have data. Canvas width: "+ke.width+", height: "+ke.height);var wn;switch(Ge){case"PNG":wn="image/png";break;case"WEBP":wn="image/webp";break;case"JPEG":case"JPG":default:wn="image/jpeg"}return u(ke.toDataURL(wn,1).split("base64,").pop())}},Te=function(ke){var Ge=this.internal.collections.addImage_images;if(Ge){for(var nn in Ge)if(ke===Ge[nn].alias)return Ge[nn]}},Ve=function(ke,Ge,nn){return ke||Ge||(ke=-96,Ge=-96),ke<0&&(ke=-1*nn.width*72/ke/this.internal.scaleFactor),Ge<0&&(Ge=-1*nn.height*72/Ge/this.internal.scaleFactor),ke===0&&(ke=Ge*nn.width/nn.height),Ge===0&&(Ge=ke*nn.height/nn.width),[ke,Ge]},$e=function(ke,Ge,nn,dn,wn,Sn){var yn=Ve.call(this,nn,dn,wn),Pn=this.internal.getCoordinateString,un=this.internal.getVerticalCoordinateString,_n=Ce.call(this);if(nn=yn[0],dn=yn[1],_n[wn.index]=wn,Sn){Sn*=Math.PI/180;var Nn=Math.cos(Sn),je=Math.sin(Sn),Ie=function(Ze){return Ze.toFixed(4)},Oe=[Ie(Nn),Ie(je),Ie(-1*je),Ie(Nn),0,0,"cm"]}this.internal.write("q"),Sn?(this.internal.write([1,"0","0",1,Pn(ke),un(Ge+dn),"cm"].join(" ")),this.internal.write(Oe.join(" ")),this.internal.write([Pn(nn),"0","0",Pn(dn),"0","0","cm"].join(" "))):this.internal.write([Pn(nn),"0","0",Pn(dn),Pn(ke),un(Ge+dn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+wn.index+" Do"),this.internal.write("Q")},Ke=St.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};St.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Be=St.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Ye=St.__addimage__.sHashCode=function(ke){var Ge,nn,dn=0;if(typeof ke=="string")for(nn=ke.length,Ge=0;Ge<nn;Ge++)dn=(dn<<5)-dn+ke.charCodeAt(Ge),dn|=0;else if(en(ke))for(nn=ke.byteLength/2,Ge=0;Ge<nn;Ge++)dn=(dn<<5)-dn+ke[Ge],dn|=0;return dn},an=St.__addimage__.validateStringAsBase64=function(ke){(ke=ke||"").toString().trim();var Ge=!0;return ke.length===0&&(Ge=!1),ke.length%4!=0&&(Ge=!1),/^[A-Za-z0-9+/]+$/.test(ke.substr(0,ke.length-2))===!1&&(Ge=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ke.substr(-2))===!1&&(Ge=!1),Ge},rn=St.__addimage__.extractImageFromDataUrl=function(ke){var Ge=(ke=ke||"").split("base64,"),nn=null;if(Ge.length===2){var dn=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Ge[0]);Array.isArray(dn)&&(nn={mimeType:dn[1],charset:dn[2],data:Ge[1]})}return nn},Xe=St.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};St.__addimage__.isArrayBuffer=function(ke){return Xe()&&ke instanceof ArrayBuffer};var en=St.__addimage__.isArrayBufferView=function(ke){return Xe()&&typeof Uint32Array<"u"&&(ke instanceof Int8Array||ke instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ke instanceof Uint8ClampedArray||ke instanceof Int16Array||ke instanceof Uint16Array||ke instanceof Int32Array||ke instanceof Uint32Array||ke instanceof Float32Array||ke instanceof Float64Array)},We=St.__addimage__.binaryStringToUint8Array=function(ke){for(var Ge=ke.length,nn=new Uint8Array(Ge),dn=0;dn<Ge;dn++)nn[dn]=ke.charCodeAt(dn);return nn},ze=St.__addimage__.arrayBufferToBinaryString=function(ke){for(var Ge="",nn=en(ke)?ke:new Uint8Array(ke),dn=0;dn<nn.length;dn+=8192)Ge+=String.fromCharCode.apply(null,nn.subarray(dn,dn+8192));return Ge};St.addImage=function(){var ke,Ge,nn,dn,wn,Sn,yn,Pn,un;if(typeof arguments[1]=="number"?(Ge=t,nn=arguments[1],dn=arguments[2],wn=arguments[3],Sn=arguments[4],yn=arguments[5],Pn=arguments[6],un=arguments[7]):(Ge=arguments[1],nn=arguments[2],dn=arguments[3],wn=arguments[4],Sn=arguments[5],yn=arguments[6],Pn=arguments[7],un=arguments[8]),_typeof(ke=arguments[0])==="object"&&!Ue(ke)&&"imageData"in ke){var _n=ke;ke=_n.imageData,Ge=_n.format||Ge||t,nn=_n.x||nn||0,dn=_n.y||dn||0,wn=_n.w||_n.width||wn,Sn=_n.h||_n.height||Sn,yn=_n.alias||yn,Pn=_n.compression||Pn,un=_n.rotation||_n.angle||un}var Nn=this.internal.getFilters();if(Pn===void 0&&Nn.indexOf("FlateEncode")!==-1&&(Pn="SLOW"),isNaN(nn)||isNaN(dn))throw new Error("Invalid coordinates passed to jsPDF.addImage");Re.call(this);var je=Qe.call(this,ke,Ge,yn,Pn);return $e.call(this,nn,dn,wn,Sn,je,un),this};var Qe=function(ke,Ge,nn,dn){var wn,Sn,yn;if(typeof ke=="string"&&e(ke)===t){ke=unescape(ke);var Pn=gn(ke,!1);(Pn!==""||(Pn=St.loadFile(ke,!0))!==void 0)&&(ke=Pn)}if(Ue(ke)&&(ke=He(ke,Ge)),Ge=e(ke,Ge),!Me(Ge))throw new Error("addImage does not support files of type '"+Ge+"', please ensure that a plugin for '"+Ge+"' support is added.");if(((yn=nn)==null||yn.length===0)&&(nn=function(un){return typeof un=="string"||en(un)?Ye(un):en(un.data)?Ye(un.data):null}(ke)),(wn=Te.call(this,nn))||(Xe()&&(ke instanceof Uint8Array||Ge==="RGBA"||(Sn=ke,ke=We(ke))),wn=this["process"+Ge.toUpperCase()](ke,De.call(this),nn,function(un){return un&&typeof un=="string"&&(un=un.toUpperCase()),un in St.image_compression?un:Be.NONE}(dn),Sn)),!wn)throw new Error("An unknown error occurred whilst processing the image.");return wn},gn=St.__addimage__.convertBase64ToBinaryString=function(ke,Ge){var nn;Ge=typeof Ge!="boolean"||Ge;var dn,wn="";if(typeof ke=="string"){dn=(nn=rn(ke))!==null?nn.data:ke;try{wn=u(dn)}catch(Sn){if(Ge)throw an(dn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Sn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return wn};St.getImageProperties=function(ke){var Ge,nn,dn="";if(Ue(ke)&&(ke=He(ke)),typeof ke=="string"&&e(ke)===t&&((dn=gn(ke,!1))===""&&(dn=St.loadFile(ke)||""),ke=dn),nn=e(ke),!Me(nn))throw new Error("addImage does not support files of type '"+nn+"', please ensure that a plugin for '"+nn+"' support is added.");if(!Xe()||ke instanceof Uint8Array||(ke=We(ke)),!(Ge=this["process"+nn.toUpperCase()](ke)))throw new Error("An unknown error occurred whilst processing the image");return Ge.fileType=nn,Ge}})(E.API),function(St){var t=function(xe){if(xe!==void 0&&xe!="")return!0};E.API.events.push(["addPage",function(xe){this.internal.getPageInfo(xe.pageNumber).pageContext.annotations=[]}]),St.events.push(["putPage",function(xe){for(var e,_e,Se,Ee=this.internal.getCoordinateString,Re=this.internal.getVerticalCoordinateString,Ce=this.internal.getPageInfoByObjId(xe.objId),De=xe.pageContext.annotations,Me=!1,Ue=0;Ue<De.length&&!Me;Ue++)switch((e=De[Ue]).type){case"link":(t(e.options.url)||t(e.options.pageNumber))&&(Me=!0);break;case"reference":case"text":case"freetext":Me=!0}if(Me!=0){this.internal.write("/Annots [");for(var He=0;He<De.length;He++){e=De[He];var Te=this.internal.pdfEscape,Ve=this.internal.getEncryptor(xe.objId);switch(e.type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var $e=this.internal.newAdditionalObject(),Ke=this.internal.newAdditionalObject(),Be=this.internal.getEncryptor($e.objId),Ye=e.title||"Note";Se="<</Type /Annot /Subtype /Text "+(_e="/Rect ["+Ee(e.bounds.x)+" "+Re(e.bounds.y+e.bounds.h)+" "+Ee(e.bounds.x+e.bounds.w)+" "+Re(e.bounds.y)+"] ")+"/Contents ("+Te(Be(e.contents))+")",Se+=" /Popup "+Ke.objId+" 0 R",Se+=" /P "+Ce.objId+" 0 R",Se+=" /T ("+Te(Be(Ye))+") >>",$e.content=Se;var an=$e.objId+" 0 R";Se="<</Type /Annot /Subtype /Popup "+(_e="/Rect ["+Ee(e.bounds.x+30)+" "+Re(e.bounds.y+e.bounds.h)+" "+Ee(e.bounds.x+e.bounds.w+30)+" "+Re(e.bounds.y)+"] ")+" /Parent "+an,e.open&&(Se+=" /Open true"),Se+=" >>",Ke.content=Se,this.internal.write($e.objId,"0 R",Ke.objId,"0 R");break;case"freetext":_e="/Rect ["+Ee(e.bounds.x)+" "+Re(e.bounds.y)+" "+Ee(e.bounds.x+e.bounds.w)+" "+Re(e.bounds.y+e.bounds.h)+"] ";var rn=e.color||"#000000";Se="<</Type /Annot /Subtype /FreeText "+_e+"/Contents ("+Te(Ve(e.contents))+")",Se+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+rn+")",Se+=" /Border [0 0 0]",Se+=" >>",this.internal.write(Se);break;case"link":if(e.options.name){var Xe=this.annotations._nameMap[e.options.name];e.options.pageNumber=Xe.page,e.options.top=Xe.y}else e.options.top||(e.options.top=0);if(_e="/Rect ["+e.finalBounds.x+" "+e.finalBounds.y+" "+e.finalBounds.w+" "+e.finalBounds.h+"] ",Se="",e.options.url)Se="<</Type /Annot /Subtype /Link "+_e+"/Border [0 0 0] /A <</S /URI /URI ("+Te(Ve(e.options.url))+") >>";else if(e.options.pageNumber)switch(Se="<</Type /Annot /Subtype /Link "+_e+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":Se+=" /Fit]";break;case"FitH":Se+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,Se+=" /FitV "+e.options.left+"]";break;case"XYZ":default:var en=Re(e.options.top);e.options.left=e.options.left||0,e.options.zoom===void 0&&(e.options.zoom=0),Se+=" /XYZ "+e.options.left+" "+en+" "+e.options.zoom+"]"}Se!=""&&(Se+=" >>",this.internal.write(Se))}}this.internal.write("]")}}]),St.createAnnotation=function(xe){var e=this.internal.getCurrentPageInfo();switch(xe.type){case"link":this.link(xe.bounds.x,xe.bounds.y,xe.bounds.w,xe.bounds.h,xe);break;case"text":case"freetext":e.pageContext.annotations.push(xe)}},St.link=function(xe,e,_e,Se,Ee){var Re=this.internal.getCurrentPageInfo(),Ce=this.internal.getCoordinateString,De=this.internal.getVerticalCoordinateString;Re.pageContext.annotations.push({finalBounds:{x:Ce(xe),y:De(e),w:Ce(xe+_e),h:De(e+Se)},options:Ee,type:"link"})},St.textWithLink=function(xe,e,_e,Se){var Ee,Re,Ce=this.getTextWidth(xe),De=this.internal.getLineHeight()/this.internal.scaleFactor;if(Se.maxWidth!==void 0){Re=Se.maxWidth;var Me=this.splitTextToSize(xe,Re).length;Ee=Math.ceil(De*Me)}else Re=Ce,Ee=De;return this.text(xe,e,_e,Se),_e+=.2*De,Se.align==="center"&&(e-=Ce/2),Se.align==="right"&&(e-=Ce),this.link(e,_e-De,Re,Ee,Se),Ce},St.getTextWidth=function(xe){var e=this.internal.getFontSize();return this.getStringUnitWidth(xe)*e/this.internal.scaleFactor}}(E.API),function(St){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},xe={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},e={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},_e=[1570,1571,1573,1575];St.__arabicParser__={};var Se=St.__arabicParser__.isInArabicSubstitutionA=function($e){return t[$e.charCodeAt(0)]!==void 0},Ee=St.__arabicParser__.isArabicLetter=function($e){return typeof $e=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test($e)},Re=St.__arabicParser__.isArabicEndLetter=function($e){return Ee($e)&&Se($e)&&t[$e.charCodeAt(0)].length<=2},Ce=St.__arabicParser__.isArabicAlfLetter=function($e){return Ee($e)&&_e.indexOf($e.charCodeAt(0))>=0};St.__arabicParser__.arabicLetterHasIsolatedForm=function($e){return Ee($e)&&Se($e)&&t[$e.charCodeAt(0)].length>=1};var De=St.__arabicParser__.arabicLetterHasFinalForm=function($e){return Ee($e)&&Se($e)&&t[$e.charCodeAt(0)].length>=2};St.__arabicParser__.arabicLetterHasInitialForm=function($e){return Ee($e)&&Se($e)&&t[$e.charCodeAt(0)].length>=3};var Me=St.__arabicParser__.arabicLetterHasMedialForm=function($e){return Ee($e)&&Se($e)&&t[$e.charCodeAt(0)].length==4},Ue=St.__arabicParser__.resolveLigatures=function($e){var Ke=0,Be=xe,Ye="",an=0;for(Ke=0;Ke<$e.length;Ke+=1)Be[$e.charCodeAt(Ke)]!==void 0?(an++,typeof(Be=Be[$e.charCodeAt(Ke)])=="number"&&(Ye+=String.fromCharCode(Be),Be=xe,an=0),Ke===$e.length-1&&(Be=xe,Ye+=$e.charAt(Ke-(an-1)),Ke-=an-1,an=0)):(Be=xe,Ye+=$e.charAt(Ke-an),Ke-=an,an=0);return Ye};St.__arabicParser__.isArabicDiacritic=function($e){return $e!==void 0&&e[$e.charCodeAt(0)]!==void 0};var He=St.__arabicParser__.getCorrectForm=function($e,Ke,Be){return Ee($e)?Se($e)===!1?-1:!De($e)||!Ee(Ke)&&!Ee(Be)||!Ee(Be)&&Re(Ke)||Re($e)&&!Ee(Ke)||Re($e)&&Ce(Ke)||Re($e)&&Re(Ke)?0:Me($e)&&Ee(Ke)&&!Re(Ke)&&Ee(Be)&&De(Be)?3:Re($e)||!Ee(Be)?1:2:-1},Te=function($e){var Ke=0,Be=0,Ye=0,an="",rn="",Xe="",en=($e=$e||"").split("\\s+"),We=[];for(Ke=0;Ke<en.length;Ke+=1){for(We.push(""),Be=0;Be<en[Ke].length;Be+=1)an=en[Ke][Be],rn=en[Ke][Be-1],Xe=en[Ke][Be+1],Ee(an)?(Ye=He(an,rn,Xe),We[Ke]+=Ye!==-1?String.fromCharCode(t[an.charCodeAt(0)][Ye]):an):We[Ke]+=an;We[Ke]=Ue(We[Ke])}return We.join(" ")},Ve=St.__arabicParser__.processArabic=St.processArabic=function(){var $e,Ke=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Be=[];if(Array.isArray(Ke)){var Ye=0;for(Be=[],Ye=0;Ye<Ke.length;Ye+=1)Array.isArray(Ke[Ye])?Be.push([Te(Ke[Ye][0]),Ke[Ye][1],Ke[Ye][2]]):Be.push([Te(Ke[Ye])]);$e=Be}else $e=Te(Ke);return typeof arguments[0]=="string"?$e:(arguments[0].text=$e,arguments[0])};St.events.push(["preProcessText",Ve])}(E.API),E.API.autoPrint=function(St){var t;switch((St=St||{}).variant=St.variant||"non-conform",St.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(St){var t=function(){var xe=void 0;Object.defineProperty(this,"pdf",{get:function(){return xe},set:function(Re){xe=Re}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(Re){e=isNaN(Re)||Number.isInteger(Re)===!1||Re<0?150:Re,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var _e=300;Object.defineProperty(this,"height",{get:function(){return _e},set:function(Re){_e=isNaN(Re)||Number.isInteger(Re)===!1||Re<0?300:Re,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=_e+1)}});var Se=[];Object.defineProperty(this,"childNodes",{get:function(){return Se},set:function(Re){Se=Re}});var Ee={};Object.defineProperty(this,"style",{get:function(){return Ee},set:function(Re){Ee=Re}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(xe,e){var _e;if((xe=xe||"2d")!=="2d")return null;for(_e in e)this.pdf.context2d.hasOwnProperty(_e)&&(this.pdf.context2d[_e]=e[_e]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},St.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(E.API),function(St){var t={left:0,top:0,bottom:0,right:0},xe=!1,e=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),_e.call(this))},_e=function(){this.internal.__cell__.lastCell=new Se,this.internal.__cell__.pages=1},Se=function(){var Ce=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function($e){Ce=$e}});var De=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return De},set:function($e){De=$e}});var Me=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Me},set:function($e){Me=$e}});var Ue=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Ue},set:function($e){Ue=$e}});var He=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return He},set:function($e){He=$e}});var Te=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Te},set:function($e){Te=$e}});var Ve=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Ve},set:function($e){Ve=$e}}),this};Se.prototype.clone=function(){return new Se(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Se.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},St.setHeaderFunction=function(Ce){return e.call(this),this.internal.__cell__.headerFunction=typeof Ce=="function"?Ce:void 0,this},St.getTextDimensions=function(Ce,De){e.call(this);var Me=(De=De||{}).fontSize||this.getFontSize(),Ue=De.font||this.getFont(),He=De.scaleFactor||this.internal.scaleFactor,Te=0,Ve=0,$e=0,Ke=this;if(!Array.isArray(Ce)&&typeof Ce!="string"){if(typeof Ce!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ce=String(Ce)}var Be=De.maxWidth;Be>0?typeof Ce=="string"?Ce=this.splitTextToSize(Ce,Be):Object.prototype.toString.call(Ce)==="[object Array]"&&(Ce=Ce.reduce(function(an,rn){return an.concat(Ke.splitTextToSize(rn,Be))},[])):Ce=Array.isArray(Ce)?Ce:[Ce];for(var Ye=0;Ye<Ce.length;Ye++)Te<($e=this.getStringUnitWidth(Ce[Ye],{font:Ue})*Me)&&(Te=$e);return Te!==0&&(Ve=Ce.length),{w:Te/=He,h:Math.max((Ve*Me*this.getLineHeightFactor()-Me*(this.getLineHeightFactor()-1))/He,0)}},St.cellAddPage=function(){e.call(this),this.addPage();var Ce=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new Se(Ce.left,Ce.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Ee=St.cell=function(){var Ce;Ce=arguments[0]instanceof Se?arguments[0]:new Se(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),e.call(this);var De=this.internal.__cell__.lastCell,Me=this.internal.__cell__.padding,Ue=this.internal.__cell__.margins||t,He=this.internal.__cell__.tableHeaderRow,Te=this.internal.__cell__.printHeaders;return De.lineNumber!==void 0&&(De.lineNumber===Ce.lineNumber?(Ce.x=(De.x||0)+(De.width||0),Ce.y=De.y||0):De.y+De.height+Ce.height+Ue.bottom>this.getPageHeight()?(this.cellAddPage(),Ce.y=Ue.top,Te&&He&&(this.printHeaderRow(Ce.lineNumber,!0),Ce.y+=He[0].height)):Ce.y=De.y+De.height||Ce.y),Ce.text[0]!==void 0&&(this.rect(Ce.x,Ce.y,Ce.width,Ce.height,xe===!0?"FD":void 0),Ce.align==="right"?this.text(Ce.text,Ce.x+Ce.width-Me,Ce.y+Me,{align:"right",baseline:"top"}):Ce.align==="center"?this.text(Ce.text,Ce.x+Ce.width/2,Ce.y+Me,{align:"center",baseline:"top",maxWidth:Ce.width-Me-Me}):this.text(Ce.text,Ce.x+Me,Ce.y+Me,{align:"left",baseline:"top",maxWidth:Ce.width-Me-Me})),this.internal.__cell__.lastCell=Ce,this};St.table=function(Ce,De,Me,Ue,He){if(e.call(this),!Me)throw new Error("No data for PDF table.");var Te,Ve,$e,Ke,Be=[],Ye=[],an=[],rn={},Xe={},en=[],We=[],ze=(He=He||{}).autoSize||!1,Qe=He.printHeaders!==!1,gn=He.css&&He.css["font-size"]!==void 0?16*He.css["font-size"]:He.fontSize||12,ke=He.margins||Object.assign({width:this.getPageWidth()},t),Ge=typeof He.padding=="number"?He.padding:3,nn=He.headerBackgroundColor||"#c8c8c8",dn=He.headerTextColor||"#000";if(_e.call(this),this.internal.__cell__.printHeaders=Qe,this.internal.__cell__.margins=ke,this.internal.__cell__.table_font_size=gn,this.internal.__cell__.padding=Ge,this.internal.__cell__.headerBackgroundColor=nn,this.internal.__cell__.headerTextColor=dn,this.setFontSize(gn),Ue==null)Ye=Be=Object.keys(Me[0]),an=Be.map(function(){return"left"});else if(Array.isArray(Ue)&&_typeof(Ue[0])==="object")for(Be=Ue.map(function(_n){return _n.name}),Ye=Ue.map(function(_n){return _n.prompt||_n.name||""}),an=Ue.map(function(_n){return _n.align||"left"}),Te=0;Te<Ue.length;Te+=1)Xe[Ue[Te].name]=Ue[Te].width*(19.049976/25.4);else Array.isArray(Ue)&&typeof Ue[0]=="string"&&(Ye=Be=Ue,an=Be.map(function(){return"left"}));if(ze||Array.isArray(Ue)&&typeof Ue[0]=="string")for(Te=0;Te<Be.length;Te+=1){for(rn[Ke=Be[Te]]=Me.map(function(_n){return _n[Ke]}),this.setFont(void 0,"bold"),en.push(this.getTextDimensions(Ye[Te],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Ve=rn[Ke],this.setFont(void 0,"normal"),$e=0;$e<Ve.length;$e+=1)en.push(this.getTextDimensions(Ve[$e],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Xe[Ke]=Math.max.apply(null,en)+Ge+Ge,en=[]}if(Qe){var wn={};for(Te=0;Te<Be.length;Te+=1)wn[Be[Te]]={},wn[Be[Te]].text=Ye[Te],wn[Be[Te]].align=an[Te];var Sn=Re.call(this,wn,Xe);We=Be.map(function(_n){return new Se(Ce,De,Xe[_n],Sn,wn[_n].text,void 0,wn[_n].align)}),this.setTableHeaderRow(We),this.printHeaderRow(1,!1)}var yn=Ue.reduce(function(_n,Nn){return _n[Nn.name]=Nn.align,_n},{});for(Te=0;Te<Me.length;Te+=1){"rowStart"in He&&He.rowStart instanceof Function&&He.rowStart({row:Te,data:Me[Te]},this);var Pn=Re.call(this,Me[Te],Xe);for($e=0;$e<Be.length;$e+=1){var un=Me[Te][Be[$e]];"cellStart"in He&&He.cellStart instanceof Function&&He.cellStart({row:Te,col:$e,data:un},this),Ee.call(this,new Se(Ce,De,Xe[Be[$e]],Pn,un,Te+2,yn[Be[$e]]))}}return this.internal.__cell__.table_x=Ce,this.internal.__cell__.table_y=De,this};var Re=function(Ce,De){var Me=this.internal.__cell__.padding,Ue=this.internal.__cell__.table_font_size,He=this.internal.scaleFactor;return Object.keys(Ce).map(function(Te){var Ve=Ce[Te];return this.splitTextToSize(Ve.hasOwnProperty("text")?Ve.text:Ve,De[Te]-Me-Me)},this).map(function(Te){return this.getLineHeightFactor()*Te.length*Ue/He+Me+Me},this).reduce(function(Te,Ve){return Math.max(Te,Ve)},0)};St.setTableHeaderRow=function(Ce){e.call(this),this.internal.__cell__.tableHeaderRow=Ce},St.printHeaderRow=function(Ce,De){if(e.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Me;if(xe=!0,typeof this.internal.__cell__.headerFunction=="function"){var Ue=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Se(Ue[0],Ue[1],Ue[2],Ue[3],void 0,-1)}this.setFont(void 0,"bold");for(var He=[],Te=0;Te<this.internal.__cell__.tableHeaderRow.length;Te+=1){Me=this.internal.__cell__.tableHeaderRow[Te].clone(),De&&(Me.y=this.internal.__cell__.margins.top||0,He.push(Me)),Me.lineNumber=Ce;var Ve=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Ee.call(this,Me),this.setTextColor(Ve)}He.length>0&&this.setTableHeaderRow(He),this.setFont(void 0,"normal"),xe=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(St){var t=St.family.replace(/"|'/g,"").toLowerCase(),xe=function(Se){return Pt[Se=Se||"normal"]?Se:"normal"}(St.style),e=function(Se){if(!Se)return 400;if(typeof Se=="number")return Se>=100&&Se<=900&&Se%100==0?Se:400;if(/^\d00$/.test(Se))return parseInt(Se);switch(Se){case"bold":return 700;case"normal":default:return 400}}(St.weight),_e=function(Se){return typeof It[Se=Se||"normal"]=="number"?Se:"normal"}(St.stretch);return{family:t,style:xe,weight:e,stretch:_e,src:St.src||[],ref:St.ref||{name:t,style:[_e,xe,e].join(" ")}}}function Ot(St,t,xe,e){var _e;for(_e=xe;_e>=0&&_e<t.length;_e+=e)if(St[t[_e]])return St[t[_e]];for(_e=xe;_e>=0&&_e<t.length;_e-=e)if(St[t[_e]])return St[t[_e]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(St){return[St.stretch,St.style,St.weight,St.family].join(" ")}function qt(St,t,xe){for(var e=(xe=xe||{}).defaultFontFamily||"times",_e=Object.assign({},Bt,xe.genericFontFamilies||{}),Se=null,Ee=null,Re=0;Re<t.length;++Re)if(_e[(Se=jt(t[Re])).family]&&(Se.family=_e[Se.family]),St.hasOwnProperty(Se.family)){Ee=St[Se.family];break}if(!(Ee=Ee||St[e]))throw new Error("Could not find a font-family for the rule '"+Et(Se)+"' and default family '"+e+"'.");if(Ee=function(Ce,De){if(De[Ce])return De[Ce];var Me=It[Ce],Ue=Me<=It.normal?-1:1,He=Ot(De,kt,Me,Ue);if(!He)throw new Error("Could not find a matching font-stretch value for "+Ce);return He}(Se.stretch,Ee),Ee=function(Ce,De){if(De[Ce])return De[Ce];for(var Me=Pt[Ce],Ue=0;Ue<Me.length;++Ue)if(De[Me[Ue]])return De[Me[Ue]];throw new Error("Could not find a matching font-style for "+Ce)}(Se.style,Ee),!(Ee=function(Ce,De){if(De[Ce])return De[Ce];if(Ce===400&&De[500])return De[500];if(Ce===500&&De[400])return De[400];var Me=Ct[Ce],Ue=Ot(De,Ft,Me,Ce<400?-1:1);if(!Ue)throw new Error("Could not find a matching font-weight for value "+Ce);return Ue}(Se.weight,Ee)))throw new Error("Failed to resolve a font for the rule '"+Et(Se)+"'.");return Ee}function Dt(St){return St.trimLeft()}function Rt(St,t){for(var xe=0;xe<St.length;){if(St.charAt(xe)===t)return[St.substring(0,xe),St.substring(xe+1)];xe+=1}return null}function Tt(St){var t=St.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],St.substring(t[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(St){var t,xe,e,_e,Se,Ee,Re,Ce,De,Me=function(je){return je=je||{},this.isStrokeTransparent=je.isStrokeTransparent||!1,this.strokeOpacity=je.strokeOpacity||1,this.strokeStyle=je.strokeStyle||"#000000",this.fillStyle=je.fillStyle||"#000000",this.isFillTransparent=je.isFillTransparent||!1,this.fillOpacity=je.fillOpacity||1,this.font=je.font||"10px sans-serif",this.textBaseline=je.textBaseline||"alphabetic",this.textAlign=je.textAlign||"left",this.lineWidth=je.lineWidth||1,this.lineJoin=je.lineJoin||"miter",this.lineCap=je.lineCap||"butt",this.path=je.path||[],this.transform=je.transform!==void 0?je.transform.clone():new Ce,this.globalCompositeOperation=je.globalCompositeOperation||"normal",this.globalAlpha=je.globalAlpha||1,this.clip_path=je.clip_path||[],this.currentPoint=je.currentPoint||new Ee,this.miterLimit=je.miterLimit||10,this.lastPoint=je.lastPoint||new Ee,this.lineDashOffset=je.lineDashOffset||0,this.lineDash=je.lineDash||[],this.margin=je.margin||[0,0,0,0],this.prevPageLastElemOffset=je.prevPageLastElemOffset||0,this.ignoreClearRect=typeof je.ignoreClearRect!="boolean"||je.ignoreClearRect,this};St.events.push(["initialized",function(){this.context2d=new Ue(this),t=this.internal.f2,xe=this.internal.getCoordinateString,e=this.internal.getVerticalCoordinateString,_e=this.internal.getHorizontalCoordinate,Se=this.internal.getVerticalCoordinate,Ee=this.internal.Point,Re=this.internal.Rectangle,Ce=this.internal.Matrix,De=new Me}]);var Ue=function(je){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ie=je;Object.defineProperty(this,"pdf",{get:function(){return Ie}});var Oe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Oe},set:function(Dn){Oe=!!Dn}});var Ze=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ze},set:function(Dn){Ze=!!Dn}});var sn=0;Object.defineProperty(this,"posX",{get:function(){return sn},set:function(Dn){isNaN(Dn)||(sn=Dn)}});var on=0;Object.defineProperty(this,"posY",{get:function(){return on},set:function(Dn){isNaN(Dn)||(on=Dn)}}),Object.defineProperty(this,"margin",{get:function(){return De.margin},set:function(Dn){var cn;typeof Dn=="number"?cn=[Dn,Dn,Dn,Dn]:((cn=new Array(4))[0]=Dn[0],cn[1]=Dn.length>=2?Dn[1]:cn[0],cn[2]=Dn.length>=3?Dn[2]:cn[0],cn[3]=Dn.length>=4?Dn[3]:cn[1]),De.margin=cn}});var hn=!1;Object.defineProperty(this,"autoPaging",{get:function(){return hn},set:function(Dn){hn=Dn}});var An=0;Object.defineProperty(this,"lastBreak",{get:function(){return An},set:function(Dn){An=Dn}});var Mn=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Mn},set:function(Dn){Mn=Dn}}),Object.defineProperty(this,"ctx",{get:function(){return De},set:function(Dn){Dn instanceof Me&&(De=Dn)}}),Object.defineProperty(this,"path",{get:function(){return De.path},set:function(Dn){De.path=Dn}});var In=[];Object.defineProperty(this,"ctxStack",{get:function(){return In},set:function(Dn){In=Dn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Dn){var cn;cn=He(Dn),this.ctx.fillStyle=cn.style,this.ctx.isFillTransparent=cn.a===0,this.ctx.fillOpacity=cn.a,this.pdf.setFillColor(cn.r,cn.g,cn.b,{a:cn.a}),this.pdf.setTextColor(cn.r,cn.g,cn.b,{a:cn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Dn){var cn=He(Dn);this.ctx.strokeStyle=cn.style,this.ctx.isStrokeTransparent=cn.a===0,this.ctx.strokeOpacity=cn.a,cn.a===0?this.pdf.setDrawColor(255,255,255):(cn.a,this.pdf.setDrawColor(cn.r,cn.g,cn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Dn){["butt","round","square"].indexOf(Dn)!==-1&&(this.ctx.lineCap=Dn,this.pdf.setLineCap(Dn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Dn){isNaN(Dn)||(this.ctx.lineWidth=Dn,this.pdf.setLineWidth(Dn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Dn){["bevel","round","miter"].indexOf(Dn)!==-1&&(this.ctx.lineJoin=Dn,this.pdf.setLineJoin(Dn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Dn){isNaN(Dn)||(this.ctx.miterLimit=Dn,this.pdf.setMiterLimit(Dn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Dn){this.ctx.textBaseline=Dn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Dn){["right","end","center","left","start"].indexOf(Dn)!==-1&&(this.ctx.textAlign=Dn)}});var zn=null;function Wn(Dn,cn){if(zn===null){var Bn=function(mn){var bn=[];return Object.keys(mn).forEach(function(Rn){mn[Rn].forEach(function(On){var Hn=null;switch(On){case"bold":Hn={family:Rn,weight:"bold"};break;case"italic":Hn={family:Rn,style:"italic"};break;case"bolditalic":Hn={family:Rn,weight:"bold",style:"italic"};break;case"":case"normal":Hn={family:Rn}}Hn!==null&&(Hn.ref={name:Rn,style:On},bn.push(Hn))})}),bn}(Dn.getFontList());zn=function(mn){for(var bn={},Rn=0;Rn<mn.length;++Rn){var On=jt(mn[Rn]),Hn=On.family,tr=On.stretch,ir=On.style,qn=On.weight;bn[Hn]=bn[Hn]||{},bn[Hn][tr]=bn[Hn][tr]||{},bn[Hn][tr][ir]=bn[Hn][tr][ir]||{},bn[Hn][tr][ir][qn]=On}return bn}(Bn.concat(cn))}return zn}var Jn=null;Object.defineProperty(this,"fontFaces",{get:function(){return Jn},set:function(Dn){zn=null,Jn=Dn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Dn){var cn;if(this.ctx.font=Dn,(cn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Dn))!==null){var Bn=cn[1],mn=(cn[2],cn[3]),bn=cn[4],Rn=(cn[5],cn[6]),On=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(bn)[2];bn=Math.floor(On==="px"?parseFloat(bn)*this.pdf.internal.scaleFactor:On==="em"?parseFloat(bn)*this.pdf.getFontSize():parseFloat(bn)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(bn);var Hn=function(_r){var Ir,hr,Rr=[],jr=_r.trim();if(jr==="")return Wt;if(jr in Mt)return[Mt[jr]];for(;jr!=="";){switch(hr=null,Ir=(jr=Dt(jr)).charAt(0)){case'"':case"'":hr=Rt(jr.substring(1),Ir);break;default:hr=Tt(jr)}if(hr===null||(Rr.push(hr[0]),(jr=Dt(hr[1]))!==""&&jr.charAt(0)!==","))return Wt;jr=jr.replace(/^,/,"")}return Rr}(Rn);if(this.fontFaces){var tr=qt(Wn(this.pdf,this.fontFaces),Hn.map(function(_r){return{family:_r,stretch:"normal",weight:mn,style:Bn}}));this.pdf.setFont(tr.ref.name,tr.ref.style)}else{var ir="";(mn==="bold"||parseInt(mn,10)>=700||Bn==="bold")&&(ir="bold"),Bn==="italic"&&(ir+="italic"),ir.length===0&&(ir="normal");for(var qn="",pr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},fr=0;fr<Hn.length;fr++){if(this.pdf.internal.getFont(Hn[fr],ir,{noFallback:!0,disableWarning:!0})!==void 0){qn=Hn[fr];break}if(ir==="bolditalic"&&this.pdf.internal.getFont(Hn[fr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qn=Hn[fr],ir="bold";else if(this.pdf.internal.getFont(Hn[fr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qn=Hn[fr],ir="normal";break}}if(qn===""){for(var Mr=0;Mr<Hn.length;Mr++)if(pr[Hn[Mr]]){qn=pr[Hn[Mr]];break}}qn=qn===""?"Times":qn,this.pdf.setFont(qn,ir)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Dn){this.ctx.globalCompositeOperation=Dn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Dn){this.ctx.globalAlpha=Dn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Dn){this.ctx.lineDashOffset=Dn,Nn.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Dn){this.ctx.lineDash=Dn,Nn.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Dn){this.ctx.ignoreClearRect=!!Dn}})};Ue.prototype.setLineDash=function(je){this.lineDash=je},Ue.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Ue.prototype.fill=function(){rn.call(this,"fill",!1)},Ue.prototype.stroke=function(){rn.call(this,"stroke",!1)},Ue.prototype.beginPath=function(){this.path=[{type:"begin"}]},Ue.prototype.moveTo=function(je,Ie){if(isNaN(je)||isNaN(Ie))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Oe=this.ctx.transform.applyToPoint(new Ee(je,Ie));this.path.push({type:"mt",x:Oe.x,y:Oe.y}),this.ctx.lastPoint=new Ee(je,Ie)},Ue.prototype.closePath=function(){var je=new Ee(0,0),Ie=0;for(Ie=this.path.length-1;Ie!==-1;Ie--)if(this.path[Ie].type==="begin"&&_typeof(this.path[Ie+1])==="object"&&typeof this.path[Ie+1].x=="number"){je=new Ee(this.path[Ie+1].x,this.path[Ie+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Ee(je.x,je.y)},Ue.prototype.lineTo=function(je,Ie){if(isNaN(je)||isNaN(Ie))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Oe=this.ctx.transform.applyToPoint(new Ee(je,Ie));this.path.push({type:"lt",x:Oe.x,y:Oe.y}),this.ctx.lastPoint=new Ee(Oe.x,Oe.y)},Ue.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),rn.call(this,null,!0)},Ue.prototype.quadraticCurveTo=function(je,Ie,Oe,Ze){if(isNaN(Oe)||isNaN(Ze)||isNaN(je)||isNaN(Ie))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var sn=this.ctx.transform.applyToPoint(new Ee(Oe,Ze)),on=this.ctx.transform.applyToPoint(new Ee(je,Ie));this.path.push({type:"qct",x1:on.x,y1:on.y,x:sn.x,y:sn.y}),this.ctx.lastPoint=new Ee(sn.x,sn.y)},Ue.prototype.bezierCurveTo=function(je,Ie,Oe,Ze,sn,on){if(isNaN(sn)||isNaN(on)||isNaN(je)||isNaN(Ie)||isNaN(Oe)||isNaN(Ze))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var hn=this.ctx.transform.applyToPoint(new Ee(sn,on)),An=this.ctx.transform.applyToPoint(new Ee(je,Ie)),Mn=this.ctx.transform.applyToPoint(new Ee(Oe,Ze));this.path.push({type:"bct",x1:An.x,y1:An.y,x2:Mn.x,y2:Mn.y,x:hn.x,y:hn.y}),this.ctx.lastPoint=new Ee(hn.x,hn.y)},Ue.prototype.arc=function(je,Ie,Oe,Ze,sn,on){if(isNaN(je)||isNaN(Ie)||isNaN(Oe)||isNaN(Ze)||isNaN(sn))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(on=!!on,!this.ctx.transform.isIdentity){var hn=this.ctx.transform.applyToPoint(new Ee(je,Ie));je=hn.x,Ie=hn.y;var An=this.ctx.transform.applyToPoint(new Ee(0,Oe)),Mn=this.ctx.transform.applyToPoint(new Ee(0,0));Oe=Math.sqrt(Math.pow(An.x-Mn.x,2)+Math.pow(An.y-Mn.y,2))}Math.abs(sn-Ze)>=2*Math.PI&&(Ze=0,sn=2*Math.PI),this.path.push({type:"arc",x:je,y:Ie,radius:Oe,startAngle:Ze,endAngle:sn,counterclockwise:on})},Ue.prototype.arcTo=function(je,Ie,Oe,Ze,sn){throw new Error("arcTo not implemented.")},Ue.prototype.rect=function(je,Ie,Oe,Ze){if(isNaN(je)||isNaN(Ie)||isNaN(Oe)||isNaN(Ze))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(je,Ie),this.lineTo(je+Oe,Ie),this.lineTo(je+Oe,Ie+Ze),this.lineTo(je,Ie+Ze),this.lineTo(je,Ie),this.lineTo(je+Oe,Ie),this.lineTo(je,Ie)},Ue.prototype.fillRect=function(je,Ie,Oe,Ze){if(isNaN(je)||isNaN(Ie)||isNaN(Oe)||isNaN(Ze))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Te.call(this)){var sn={};this.lineCap!=="butt"&&(sn.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(sn.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(je,Ie,Oe,Ze),this.fill(),sn.hasOwnProperty("lineCap")&&(this.lineCap=sn.lineCap),sn.hasOwnProperty("lineJoin")&&(this.lineJoin=sn.lineJoin)}},Ue.prototype.strokeRect=function(je,Ie,Oe,Ze){if(isNaN(je)||isNaN(Ie)||isNaN(Oe)||isNaN(Ze))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Ve.call(this)||(this.beginPath(),this.rect(je,Ie,Oe,Ze),this.stroke())},Ue.prototype.clearRect=function(je,Ie,Oe,Ze){if(isNaN(je)||isNaN(Ie)||isNaN(Oe)||isNaN(Ze))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(je,Ie,Oe,Ze))},Ue.prototype.save=function(je){je=typeof je!="boolean"||je;for(var Ie=this.pdf.internal.getCurrentPageInfo().pageNumber,Oe=0;Oe<this.pdf.internal.getNumberOfPages();Oe++)this.pdf.setPage(Oe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ie),je){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ze=new Me(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ze}},Ue.prototype.restore=function(je){je=typeof je!="boolean"||je;for(var Ie=this.pdf.internal.getCurrentPageInfo().pageNumber,Oe=0;Oe<this.pdf.internal.getNumberOfPages();Oe++)this.pdf.setPage(Oe+1),this.pdf.internal.out("Q");this.pdf.setPage(Ie),je&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Ue.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var He=function(je){var Ie,Oe,Ze,sn;if(je.isCanvasGradient===!0&&(je=je.getColor()),!je)return{r:0,g:0,b:0,a:0,style:je};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(je))Ie=0,Oe=0,Ze=0,sn=0;else{var on=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(je);if(on!==null)Ie=parseInt(on[1]),Oe=parseInt(on[2]),Ze=parseInt(on[3]),sn=1;else if((on=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(je))!==null)Ie=parseInt(on[1]),Oe=parseInt(on[2]),Ze=parseInt(on[3]),sn=parseFloat(on[4]);else{if(sn=1,typeof je=="string"&&je.charAt(0)!=="#"){var hn=new f(je);je=hn.ok?hn.toHex():"#000000"}je.length===4?(Ie=je.substring(1,2),Ie+=Ie,Oe=je.substring(2,3),Oe+=Oe,Ze=je.substring(3,4),Ze+=Ze):(Ie=je.substring(1,3),Oe=je.substring(3,5),Ze=je.substring(5,7)),Ie=parseInt(Ie,16),Oe=parseInt(Oe,16),Ze=parseInt(Ze,16)}}return{r:Ie,g:Oe,b:Ze,a:sn,style:je}},Te=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Ve=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Ue.prototype.fillText=function(je,Ie,Oe,Ze){if(isNaN(Ie)||isNaN(Oe)||typeof je!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ze=isNaN(Ze)?void 0:Ze,!Te.call(this)){var sn=Pn(this.ctx.transform.rotation),on=this.ctx.transform.scaleX;Ge.call(this,{text:je,x:Ie,y:Oe,scale:on,angle:sn,align:this.textAlign,maxWidth:Ze})}},Ue.prototype.strokeText=function(je,Ie,Oe,Ze){if(isNaN(Ie)||isNaN(Oe)||typeof je!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Ve.call(this)){Ze=isNaN(Ze)?void 0:Ze;var sn=Pn(this.ctx.transform.rotation),on=this.ctx.transform.scaleX;Ge.call(this,{text:je,x:Ie,y:Oe,scale:on,renderingMode:"stroke",angle:sn,align:this.textAlign,maxWidth:Ze})}},Ue.prototype.measureText=function(je){if(typeof je!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ie=this.pdf,Oe=this.pdf.internal.scaleFactor,Ze=Ie.internal.getFontSize(),sn=Ie.getStringUnitWidth(je)*Ze/Ie.internal.scaleFactor,on=function(hn){var An=(hn=hn||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return An}}),this};return new on({width:sn*=Math.round(96*Oe/72*1e4)/1e4})},Ue.prototype.scale=function(je,Ie){if(isNaN(je)||isNaN(Ie))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Oe=new Ce(je,0,0,Ie,0,0);this.ctx.transform=this.ctx.transform.multiply(Oe)},Ue.prototype.rotate=function(je){if(isNaN(je))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ie=new Ce(Math.cos(je),Math.sin(je),-Math.sin(je),Math.cos(je),0,0);this.ctx.transform=this.ctx.transform.multiply(Ie)},Ue.prototype.translate=function(je,Ie){if(isNaN(je)||isNaN(Ie))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Oe=new Ce(1,0,0,1,je,Ie);this.ctx.transform=this.ctx.transform.multiply(Oe)},Ue.prototype.transform=function(je,Ie,Oe,Ze,sn,on){if(isNaN(je)||isNaN(Ie)||isNaN(Oe)||isNaN(Ze)||isNaN(sn)||isNaN(on))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var hn=new Ce(je,Ie,Oe,Ze,sn,on);this.ctx.transform=this.ctx.transform.multiply(hn)},Ue.prototype.setTransform=function(je,Ie,Oe,Ze,sn,on){je=isNaN(je)?1:je,Ie=isNaN(Ie)?0:Ie,Oe=isNaN(Oe)?0:Oe,Ze=isNaN(Ze)?1:Ze,sn=isNaN(sn)?0:sn,on=isNaN(on)?0:on,this.ctx.transform=new Ce(je,Ie,Oe,Ze,sn,on)};var $e=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Ue.prototype.drawImage=function(je,Ie,Oe,Ze,sn,on,hn,An,Mn){var In=this.pdf.getImageProperties(je),zn=1,Wn=1,Jn=1,Dn=1;Ze!==void 0&&An!==void 0&&(Jn=An/Ze,Dn=Mn/sn,zn=In.width/Ze*An/Ze,Wn=In.height/sn*Mn/sn),on===void 0&&(on=Ie,hn=Oe,Ie=0,Oe=0),Ze!==void 0&&An===void 0&&(An=Ze,Mn=sn),Ze===void 0&&An===void 0&&(An=In.width,Mn=In.height);for(var cn,Bn=this.ctx.transform.decompose(),mn=Pn(Bn.rotate.shx),bn=new Ce,Rn=(bn=(bn=(bn=bn.multiply(Bn.translate)).multiply(Bn.skew)).multiply(Bn.scale)).applyToRectangle(new Re(on-Ie*Jn,hn-Oe*Dn,Ze*zn,sn*Wn)),On=Ke.call(this,Rn),Hn=[],tr=0;tr<On.length;tr+=1)Hn.indexOf(On[tr])===-1&&Hn.push(On[tr]);if(an(Hn),this.autoPaging)for(var ir=Hn[0],qn=Hn[Hn.length-1],pr=ir;pr<qn+1;pr++){this.pdf.setPage(pr);var fr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mr=pr===1?this.posY+this.margin[0]:this.margin[0],_r=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ir=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],hr=pr===1?0:_r+(pr-2)*Ir;if(this.ctx.clip_path.length!==0){var Rr=this.path;cn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(cn,this.posX+this.margin[3],-hr+Mr+this.ctx.prevPageLastElemOffset),Xe.call(this,"fill",!0),this.path=Rr}var jr=JSON.parse(JSON.stringify(Rn));jr=Ye([jr],this.posX+this.margin[3],-hr+Mr+this.ctx.prevPageLastElemOffset)[0];var Vr=(pr>ir||pr<qn)&&$e.call(this);Vr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fr,Ir,null).clip().discardPath()),this.pdf.addImage(je,"JPEG",jr.x,jr.y,jr.w,jr.h,null,null,mn),Vr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(je,"JPEG",Rn.x,Rn.y,Rn.w,Rn.h,null,null,mn)};var Ke=function(je,Ie,Oe){var Ze=[];Ie=Ie||this.pdf.internal.pageSize.width,Oe=Oe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var sn=this.posY+this.ctx.prevPageLastElemOffset;switch(je.type){default:case"mt":case"lt":Ze.push(Math.floor((je.y+sn)/Oe)+1);break;case"arc":Ze.push(Math.floor((je.y+sn-je.radius)/Oe)+1),Ze.push(Math.floor((je.y+sn+je.radius)/Oe)+1);break;case"qct":var on=un(this.ctx.lastPoint.x,this.ctx.lastPoint.y,je.x1,je.y1,je.x,je.y);Ze.push(Math.floor((on.y+sn)/Oe)+1),Ze.push(Math.floor((on.y+on.h+sn)/Oe)+1);break;case"bct":var hn=_n(this.ctx.lastPoint.x,this.ctx.lastPoint.y,je.x1,je.y1,je.x2,je.y2,je.x,je.y);Ze.push(Math.floor((hn.y+sn)/Oe)+1),Ze.push(Math.floor((hn.y+hn.h+sn)/Oe)+1);break;case"rect":Ze.push(Math.floor((je.y+sn)/Oe)+1),Ze.push(Math.floor((je.y+je.h+sn)/Oe)+1)}for(var An=0;An<Ze.length;An+=1)for(;this.pdf.internal.getNumberOfPages()<Ze[An];)Be.call(this);return Ze},Be=function(){var je=this.fillStyle,Ie=this.strokeStyle,Oe=this.font,Ze=this.lineCap,sn=this.lineWidth,on=this.lineJoin;this.pdf.addPage(),this.fillStyle=je,this.strokeStyle=Ie,this.font=Oe,this.lineCap=Ze,this.lineWidth=sn,this.lineJoin=on},Ye=function(je,Ie,Oe){for(var Ze=0;Ze<je.length;Ze++)switch(je[Ze].type){case"bct":je[Ze].x2+=Ie,je[Ze].y2+=Oe;case"qct":je[Ze].x1+=Ie,je[Ze].y1+=Oe;case"mt":case"lt":case"arc":default:je[Ze].x+=Ie,je[Ze].y+=Oe}return je},an=function(je){return je.sort(function(Ie,Oe){return Ie-Oe})},rn=function(je,Ie){for(var Oe,Ze,sn=this.fillStyle,on=this.strokeStyle,hn=this.lineCap,An=this.lineWidth,Mn=Math.abs(An*this.ctx.transform.scaleX),In=this.lineJoin,zn=JSON.parse(JSON.stringify(this.path)),Wn=JSON.parse(JSON.stringify(this.path)),Jn=[],Dn=0;Dn<Wn.length;Dn++)if(Wn[Dn].x!==void 0)for(var cn=Ke.call(this,Wn[Dn]),Bn=0;Bn<cn.length;Bn+=1)Jn.indexOf(cn[Bn])===-1&&Jn.push(cn[Bn]);for(var mn=0;mn<Jn.length;mn++)for(;this.pdf.internal.getNumberOfPages()<Jn[mn];)Be.call(this);if(an(Jn),this.autoPaging)for(var bn=Jn[0],Rn=Jn[Jn.length-1],On=bn;On<Rn+1;On++){this.pdf.setPage(On),this.fillStyle=sn,this.strokeStyle=on,this.lineCap=hn,this.lineWidth=Mn,this.lineJoin=In;var Hn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tr=On===1?this.posY+this.margin[0]:this.margin[0],ir=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pr=On===1?0:ir+(On-2)*qn;if(this.ctx.clip_path.length!==0){var fr=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Oe,this.posX+this.margin[3],-pr+tr+this.ctx.prevPageLastElemOffset),Xe.call(this,je,!0),this.path=fr}if(Ze=JSON.parse(JSON.stringify(zn)),this.path=Ye(Ze,this.posX+this.margin[3],-pr+tr+this.ctx.prevPageLastElemOffset),Ie===!1||On===0){var Mr=(On>bn||On<Rn)&&$e.call(this);Mr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Hn,qn,null).clip().discardPath()),Xe.call(this,je,Ie),Mr&&this.pdf.restoreGraphicsState()}this.lineWidth=An}else this.lineWidth=Mn,Xe.call(this,je,Ie),this.lineWidth=An;this.path=zn},Xe=function(je,Ie){if((je!=="stroke"||Ie||!Ve.call(this))&&(je==="stroke"||Ie||!Te.call(this))){for(var Oe,Ze,sn=[],on=this.path,hn=0;hn<on.length;hn++){var An=on[hn];switch(An.type){case"begin":sn.push({begin:!0});break;case"close":sn.push({close:!0});break;case"mt":sn.push({start:An,deltas:[],abs:[]});break;case"lt":var Mn=sn.length;if(on[hn-1]&&!isNaN(on[hn-1].x)&&(Oe=[An.x-on[hn-1].x,An.y-on[hn-1].y],Mn>0)){for(;Mn>=0;Mn--)if(sn[Mn-1].close!==!0&&sn[Mn-1].begin!==!0){sn[Mn-1].deltas.push(Oe),sn[Mn-1].abs.push(An);break}}break;case"bct":Oe=[An.x1-on[hn-1].x,An.y1-on[hn-1].y,An.x2-on[hn-1].x,An.y2-on[hn-1].y,An.x-on[hn-1].x,An.y-on[hn-1].y],sn[sn.length-1].deltas.push(Oe);break;case"qct":var In=on[hn-1].x+2/3*(An.x1-on[hn-1].x),zn=on[hn-1].y+2/3*(An.y1-on[hn-1].y),Wn=An.x+2/3*(An.x1-An.x),Jn=An.y+2/3*(An.y1-An.y),Dn=An.x,cn=An.y;Oe=[In-on[hn-1].x,zn-on[hn-1].y,Wn-on[hn-1].x,Jn-on[hn-1].y,Dn-on[hn-1].x,cn-on[hn-1].y],sn[sn.length-1].deltas.push(Oe);break;case"arc":sn.push({deltas:[],abs:[],arc:!0}),Array.isArray(sn[sn.length-1].abs)&&sn[sn.length-1].abs.push(An)}}Ze=Ie?null:je==="stroke"?"stroke":"fill";for(var Bn=!1,mn=0;mn<sn.length;mn++)if(sn[mn].arc)for(var bn=sn[mn].abs,Rn=0;Rn<bn.length;Rn++){var On=bn[Rn];On.type==="arc"?ze.call(this,On.x,On.y,On.radius,On.startAngle,On.endAngle,On.counterclockwise,void 0,Ie,!Bn):nn.call(this,On.x,On.y),Bn=!0}else if(sn[mn].close===!0)this.pdf.internal.out("h"),Bn=!1;else if(sn[mn].begin!==!0){var Hn=sn[mn].start.x,tr=sn[mn].start.y;dn.call(this,sn[mn].deltas,Hn,tr),Bn=!0}Ze&&Qe.call(this,Ze),Ie&&gn.call(this)}},en=function(je){var Ie=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Oe=Ie*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return je-Oe;case"top":return je+Ie-Oe;case"hanging":return je+Ie-2*Oe;case"middle":return je+Ie/2-Oe;case"ideographic":return je;case"alphabetic":default:return je}},We=function(je){return je+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Ue.prototype.createLinearGradient=function(){var je=function(){};return je.colorStops=[],je.addColorStop=function(Ie,Oe){this.colorStops.push([Ie,Oe])},je.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},je.isCanvasGradient=!0,je},Ue.prototype.createPattern=function(){return this.createLinearGradient()},Ue.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ze=function(je,Ie,Oe,Ze,sn,on,hn,An,Mn){for(var In=Sn.call(this,Oe,Ze,sn,on),zn=0;zn<In.length;zn++){var Wn=In[zn];zn===0&&(Mn?ke.call(this,Wn.x1+je,Wn.y1+Ie):nn.call(this,Wn.x1+je,Wn.y1+Ie)),wn.call(this,je,Ie,Wn.x2,Wn.y2,Wn.x3,Wn.y3,Wn.x4,Wn.y4)}An?gn.call(this):Qe.call(this,hn)},Qe=function(je){switch(je){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},gn=function(){this.pdf.clip(),this.pdf.discardPath()},ke=function(je,Ie){this.pdf.internal.out(xe(je)+" "+e(Ie)+" m")},Ge=function(je){var Ie;switch(je.align){case"right":case"end":Ie="right";break;case"center":Ie="center";break;case"left":case"start":default:Ie="left"}var Oe=this.pdf.getTextDimensions(je.text),Ze=en.call(this,je.y),sn=We.call(this,Ze)-Oe.h,on=this.ctx.transform.applyToPoint(new Ee(je.x,Ze)),hn=this.ctx.transform.decompose(),An=new Ce;An=(An=(An=An.multiply(hn.translate)).multiply(hn.skew)).multiply(hn.scale);for(var Mn,In,zn,Wn=this.ctx.transform.applyToRectangle(new Re(je.x,Ze,Oe.w,Oe.h)),Jn=An.applyToRectangle(new Re(je.x,sn,Oe.w,Oe.h)),Dn=Ke.call(this,Jn),cn=[],Bn=0;Bn<Dn.length;Bn+=1)cn.indexOf(Dn[Bn])===-1&&cn.push(Dn[Bn]);if(an(cn),this.autoPaging)for(var mn=cn[0],bn=cn[cn.length-1],Rn=mn;Rn<bn+1;Rn++){this.pdf.setPage(Rn);var On=Rn===1?this.posY+this.margin[0]:this.margin[0],Hn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tr=this.pdf.internal.pageSize.height-this.margin[2],ir=tr-this.margin[0],qn=this.pdf.internal.pageSize.width-this.margin[1],pr=qn-this.margin[3],fr=Rn===1?0:Hn+(Rn-2)*ir;if(this.ctx.clip_path.length!==0){var Mr=this.path;Mn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Mn,this.posX+this.margin[3],-1*fr+On),Xe.call(this,"fill",!0),this.path=Mr}var _r=Ye([JSON.parse(JSON.stringify(Jn))],this.posX+this.margin[3],-fr+On+this.ctx.prevPageLastElemOffset)[0];je.scale>=.01&&(In=this.pdf.internal.getFontSize(),this.pdf.setFontSize(In*je.scale),zn=this.lineWidth,this.lineWidth=zn*je.scale);var Ir=this.autoPaging!=="text";if(Ir||_r.y+_r.h<=tr){if(Ir||_r.y>=On&&_r.x<=qn){var hr=Ir?je.text:this.pdf.splitTextToSize(je.text,je.maxWidth||qn-_r.x)[0],Rr=Ye([JSON.parse(JSON.stringify(Wn))],this.posX+this.margin[3],-fr+On+this.ctx.prevPageLastElemOffset)[0],jr=Ir&&(Rn>mn||Rn<bn)&&$e.call(this);jr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pr,ir,null).clip().discardPath()),this.pdf.text(hr,Rr.x,Rr.y,{angle:je.angle,align:Ie,renderingMode:je.renderingMode}),jr&&this.pdf.restoreGraphicsState()}}else _r.y<tr&&(this.ctx.prevPageLastElemOffset+=tr-_r.y);je.scale>=.01&&(this.pdf.setFontSize(In),this.lineWidth=zn)}else je.scale>=.01&&(In=this.pdf.internal.getFontSize(),this.pdf.setFontSize(In*je.scale),zn=this.lineWidth,this.lineWidth=zn*je.scale),this.pdf.text(je.text,on.x+this.posX,on.y+this.posY,{angle:je.angle,align:Ie,renderingMode:je.renderingMode,maxWidth:je.maxWidth}),je.scale>=.01&&(this.pdf.setFontSize(In),this.lineWidth=zn)},nn=function(je,Ie,Oe,Ze){Oe=Oe||0,Ze=Ze||0,this.pdf.internal.out(xe(je+Oe)+" "+e(Ie+Ze)+" l")},dn=function(je,Ie,Oe){return this.pdf.lines(je,Ie,Oe,null,null)},wn=function(je,Ie,Oe,Ze,sn,on,hn,An){this.pdf.internal.out([t(_e(Oe+je)),t(Se(Ze+Ie)),t(_e(sn+je)),t(Se(on+Ie)),t(_e(hn+je)),t(Se(An+Ie)),"c"].join(" "))},Sn=function(je,Ie,Oe,Ze){for(var sn=2*Math.PI,on=Math.PI/2;Ie>Oe;)Ie-=sn;var hn=Math.abs(Oe-Ie);hn<sn&&Ze&&(hn=sn-hn);for(var An=[],Mn=Ze?-1:1,In=Ie;hn>1e-5;){var zn=In+Mn*Math.min(hn,on);An.push(yn.call(this,je,In,zn)),hn-=Math.abs(zn-In),In=zn}return An},yn=function(je,Ie,Oe){var Ze=(Oe-Ie)/2,sn=je*Math.cos(Ze),on=je*Math.sin(Ze),hn=sn,An=-on,Mn=hn*hn+An*An,In=Mn+hn*sn+An*on,zn=4/3*(Math.sqrt(2*Mn*In)-In)/(hn*on-An*sn),Wn=hn-zn*An,Jn=An+zn*hn,Dn=Wn,cn=-Jn,Bn=Ze+Ie,mn=Math.cos(Bn),bn=Math.sin(Bn);return{x1:je*Math.cos(Ie),y1:je*Math.sin(Ie),x2:Wn*mn-Jn*bn,y2:Wn*bn+Jn*mn,x3:Dn*mn-cn*bn,y3:Dn*bn+cn*mn,x4:je*Math.cos(Oe),y4:je*Math.sin(Oe)}},Pn=function(je){return 180*je/Math.PI},un=function(je,Ie,Oe,Ze,sn,on){var hn=je+.5*(Oe-je),An=Ie+.5*(Ze-Ie),Mn=sn+.5*(Oe-sn),In=on+.5*(Ze-on),zn=Math.min(je,sn,hn,Mn),Wn=Math.max(je,sn,hn,Mn),Jn=Math.min(Ie,on,An,In),Dn=Math.max(Ie,on,An,In);return new Re(zn,Jn,Wn-zn,Dn-Jn)},_n=function(je,Ie,Oe,Ze,sn,on,hn,An){var Mn,In,zn,Wn,Jn,Dn,cn,Bn,mn,bn,Rn,On,Hn,tr,ir=Oe-je,qn=Ze-Ie,pr=sn-Oe,fr=on-Ze,Mr=hn-sn,_r=An-on;for(In=0;In<41;In++)mn=(cn=(zn=je+(Mn=In/40)*ir)+Mn*((Jn=Oe+Mn*pr)-zn))+Mn*(Jn+Mn*(sn+Mn*Mr-Jn)-cn),bn=(Bn=(Wn=Ie+Mn*qn)+Mn*((Dn=Ze+Mn*fr)-Wn))+Mn*(Dn+Mn*(on+Mn*_r-Dn)-Bn),In==0?(Rn=mn,On=bn,Hn=mn,tr=bn):(Rn=Math.min(Rn,mn),On=Math.min(On,bn),Hn=Math.max(Hn,mn),tr=Math.max(tr,bn));return new Re(Math.round(Rn),Math.round(On),Math.round(Hn-Rn),Math.round(tr-On))},Nn=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var je,Ie,Oe=(je=this.ctx.lineDash,Ie=this.ctx.lineDashOffset,JSON.stringify({lineDash:je,lineDashOffset:Ie}));this.prevLineDash!==Oe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Oe)}}})(E.API),function(St){var t=function(Se){var Ee,Re,Ce,De,Me,Ue,He,Te,Ve,$e;for(Re=[],Ce=0,De=(Se+=Ee="\0\0\0\0".slice(Se.length%4||4)).length;De>Ce;Ce+=4)(Me=(Se.charCodeAt(Ce)<<24)+(Se.charCodeAt(Ce+1)<<16)+(Se.charCodeAt(Ce+2)<<8)+Se.charCodeAt(Ce+3))!==0?(Ue=(Me=((Me=((Me=((Me=(Me-($e=Me%85))/85)-(Ve=Me%85))/85)-(Te=Me%85))/85)-(He=Me%85))/85)%85,Re.push(Ue+33,He+33,Te+33,Ve+33,$e+33)):Re.push(122);return function(Ke,Be){for(var Ye=Be;Ye>0;Ye--)Ke.pop()}(Re,Ee.length),String.fromCharCode.apply(String,Re)+"~>"},xe=function(Se){var Ee,Re,Ce,De,Me,Ue=String,He="length",Te=255,Ve="charCodeAt",$e="slice",Ke="replace";for(Se[$e](-2),Se=Se[$e](0,-2)[Ke](/\s/g,"")[Ke]("z","!!!!!"),Ce=[],De=0,Me=(Se+=Ee="uuuuu"[$e](Se[He]%5||5))[He];Me>De;De+=5)Re=52200625*(Se[Ve](De)-33)+614125*(Se[Ve](De+1)-33)+7225*(Se[Ve](De+2)-33)+85*(Se[Ve](De+3)-33)+(Se[Ve](De+4)-33),Ce.push(Te&Re>>24,Te&Re>>16,Te&Re>>8,Te&Re);return function(Be,Ye){for(var an=Ye;an>0;an--)Be.pop()}(Ce,Ee[He]),Ue.fromCharCode.apply(Ue,Ce)},e=function(Se){var Ee=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Se=Se.replace(/\s/g,"")).indexOf(">")!==-1&&(Se=Se.substr(0,Se.indexOf(">"))),Se.length%2&&(Se+="0"),Ee.test(Se)===!1)return"";for(var Re="",Ce=0;Ce<Se.length;Ce+=2)Re+=String.fromCharCode("0x"+(Se[Ce]+Se[Ce+1]));return Re},_e=function(Se){for(var Ee=new Uint8Array(Se.length),Re=Se.length;Re--;)Ee[Re]=Se.charCodeAt(Re);return Se=(Ee=zlibSync(Ee)).reduce(function(Ce,De){return Ce+String.fromCharCode(De)},"")};St.processDataByFilters=function(Se,Ee){var Re=0,Ce=Se||"",De=[];for(typeof(Ee=Ee||[])=="string"&&(Ee=[Ee]),Re=0;Re<Ee.length;Re+=1)switch(Ee[Re]){case"ASCII85Decode":case"/ASCII85Decode":Ce=xe(Ce),De.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ce=t(Ce),De.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ce=e(Ce),De.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ce=Ce.split("").map(function(Me){return("0"+Me.charCodeAt().toString(16)).slice(-2)}).join("")+">",De.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ce=_e(Ce),De.push("/FlateDecode");break;default:throw new Error('The filter: "'+Ee[Re]+'" is not implemented')}return{data:Ce,reverseChain:De.reverse().join(" ")}}}(E.API),function(St){St.loadFile=function(t,xe,e){return function(_e,Se,Ee){Se=Se!==!1,Ee=typeof Ee=="function"?Ee:function(){};var Re=void 0;try{Re=function(Ce,De,Me){var Ue=new XMLHttpRequest,He=0,Te=function(Ve){var $e=Ve.length,Ke=[],Be=String.fromCharCode;for(He=0;He<$e;He+=1)Ke.push(Be(255&Ve.charCodeAt(He)));return Ke.join("")};if(Ue.open("GET",Ce,!De),Ue.overrideMimeType("text/plain; charset=x-user-defined"),De===!1&&(Ue.onload=function(){Ue.status===200?Me(Te(this.responseText)):Me(void 0)}),Ue.send(null),De&&Ue.status===200)return Te(Ue.responseText)}(_e,Se,Ee)}catch{}return Re}(t,xe,e)},St.loadImageFile=St.loadFile}(E.API),function(St){function t(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(Ee){return Promise.reject(new Error("Could not load html2canvas: "+Ee))}).then(function(Ee){return Ee.default?Ee.default:Ee})}function xe(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(Ee){return Promise.reject(new Error("Could not load dompurify: "+Ee))}).then(function(Ee){return Ee.default?Ee.default:Ee})}var e=function(Ee){var Re=_typeof(Ee);return Re==="undefined"?"undefined":Re==="string"||Ee instanceof String?"string":Re==="number"||Ee instanceof Number?"number":Re==="function"||Ee instanceof Function?"function":Ee&&Ee.constructor===Array?"array":Ee&&Ee.nodeType===1?"element":Re==="object"?"object":"unknown"},_e=function(Ee,Re){var Ce=document.createElement(Ee);for(var De in Re.className&&(Ce.className=Re.className),Re.innerHTML&&Re.dompurify&&(Ce.innerHTML=Re.dompurify.sanitize(Re.innerHTML)),Re.style)Ce.style[De]=Re.style[De];return Ce},Se=function Ee(Re){var Ce=Object.assign(Ee.convert(Promise.resolve()),JSON.parse(JSON.stringify(Ee.template))),De=Ee.convert(Promise.resolve(),Ce);return De=(De=De.setProgress(1,Ee,1,[Ee])).set(Re)};(Se.prototype=Object.create(Promise.prototype)).constructor=Se,Se.convert=function(Ee,Re){return Ee.__proto__=Re||Se.prototype,Ee},Se.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Se.prototype.from=function(Ee,Re){return this.then(function(){switch(Re=Re||function(Ce){switch(e(Ce)){case"string":return"string";case"element":return Ce.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Ee)){case"string":return this.then(xe).then(function(Ce){return this.set({src:_e("div",{innerHTML:Ee,dompurify:Ce})})});case"element":return this.set({src:Ee});case"canvas":return this.set({canvas:Ee});case"img":return this.set({img:Ee});default:return this.error("Unknown source type.")}})},Se.prototype.to=function(Ee){switch(Ee){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Se.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Ee={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Re=function Ce(De,Me){for(var Ue=De.nodeType===3?document.createTextNode(De.nodeValue):De.cloneNode(!1),He=De.firstChild;He;He=He.nextSibling)Me!==!0&&He.nodeType===1&&He.nodeName==="SCRIPT"||Ue.appendChild(Ce(He,Me));return De.nodeType===1&&(De.nodeName==="CANVAS"?(Ue.width=De.width,Ue.height=De.height,Ue.getContext("2d").drawImage(De,0,0)):De.nodeName!=="TEXTAREA"&&De.nodeName!=="SELECT"||(Ue.value=De.value),Ue.addEventListener("load",function(){Ue.scrollTop=De.scrollTop,Ue.scrollLeft=De.scrollLeft},!0)),Ue}(this.prop.src,this.opt.html2canvas.javascriptEnabled);Re.tagName==="BODY"&&(Ee.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=_e("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=_e("div",{className:"html2pdf__container",style:Ee}),this.prop.container.appendChild(Re),this.prop.container.firstChild.appendChild(_e("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Se.prototype.toCanvas=function(){var Ee=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Ee).then(t).then(function(Re){var Ce=Object.assign({},this.opt.html2canvas);return delete Ce.onrendered,Re(this.prop.container,Ce)}).then(function(Re){(this.opt.html2canvas.onrendered||function(){})(Re),this.prop.canvas=Re,document.body.removeChild(this.prop.overlay)})},Se.prototype.toContext2d=function(){var Ee=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Ee).then(t).then(function(Re){var Ce=this.opt.jsPDF,De=this.opt.fontFaces,Me=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Ue=Object.assign({async:!0,allowTaint:!0,scale:Me,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Ue.onrendered,Ce.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Ce.context2d.posX=this.opt.x,Ce.context2d.posY=this.opt.y,Ce.context2d.margin=this.opt.margin,Ce.context2d.fontFaces=De,De)for(var He=0;He<De.length;++He){var Te=De[He],Ve=Te.src.find(function($e){return $e.format==="truetype"});Ve&&Ce.addFont(Ve.url,Te.ref.name,Te.ref.style)}return Ue.windowHeight=Ue.windowHeight||0,Ue.windowHeight=Ue.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Ue.windowHeight,Ce.context2d.save(!0),Re(this.prop.container,Ue)}).then(function(Re){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Re),this.prop.canvas=Re,document.body.removeChild(this.prop.overlay)})},Se.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Ee=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Ee})},Se.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Se.prototype.output=function(Ee,Re,Ce){return(Ce=Ce||"pdf").toLowerCase()==="img"||Ce.toLowerCase()==="image"?this.outputImg(Ee,Re):this.outputPdf(Ee,Re)},Se.prototype.outputPdf=function(Ee,Re){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Ee,Re)})},Se.prototype.outputImg=function(Ee){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Ee){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Ee+'" is not supported.'}})},Se.prototype.save=function(Ee){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Ee?{filename:Ee}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Se.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Se.prototype.set=function(Ee){if(e(Ee)!=="object")return this;var Re=Object.keys(Ee||{}).map(function(Ce){if(Ce in Se.template.prop)return function(){this.prop[Ce]=Ee[Ce]};switch(Ce){case"margin":return this.setMargin.bind(this,Ee.margin);case"jsPDF":return function(){return this.opt.jsPDF=Ee.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Ee.pageSize);default:return function(){this.opt[Ce]=Ee[Ce]}}},this);return this.then(function(){return this.thenList(Re)})},Se.prototype.get=function(Ee,Re){return this.then(function(){var Ce=Ee in Se.template.prop?this.prop[Ee]:this.opt[Ee];return Re?Re(Ce):Ce})},Se.prototype.setMargin=function(Ee){return this.then(function(){switch(e(Ee)){case"number":Ee=[Ee,Ee,Ee,Ee];case"array":if(Ee.length===2&&(Ee=[Ee[0],Ee[1],Ee[0],Ee[1]]),Ee.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Ee}).then(this.setPageSize)},Se.prototype.setPageSize=function(Ee){function Re(Ce,De){return Math.floor(Ce*De/72*96)}return this.then(function(){(Ee=Ee||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Ee.inner={width:Ee.width-this.opt.margin[1]-this.opt.margin[3],height:Ee.height-this.opt.margin[0]-this.opt.margin[2]},Ee.inner.px={width:Re(Ee.inner.width,Ee.k),height:Re(Ee.inner.height,Ee.k)},Ee.inner.ratio=Ee.inner.height/Ee.inner.width),this.prop.pageSize=Ee})},Se.prototype.setProgress=function(Ee,Re,Ce,De){return Ee!=null&&(this.progress.val=Ee),Re!=null&&(this.progress.state=Re),Ce!=null&&(this.progress.n=Ce),De!=null&&(this.progress.stack=De),this.progress.ratio=this.progress.val/this.progress.state,this},Se.prototype.updateProgress=function(Ee,Re,Ce,De){return this.setProgress(Ee?this.progress.val+Ee:null,Re||null,Ce?this.progress.n+Ce:null,De?this.progress.stack.concat(De):null)},Se.prototype.then=function(Ee,Re){var Ce=this;return this.thenCore(Ee,Re,function(De,Me){return Ce.updateProgress(null,null,1,[De]),Promise.prototype.then.call(this,function(Ue){return Ce.updateProgress(null,De),Ue}).then(De,Me).then(function(Ue){return Ce.updateProgress(1),Ue})})},Se.prototype.thenCore=function(Ee,Re,Ce){Ce=Ce||Promise.prototype.then,Ee&&(Ee=Ee.bind(this)),Re&&(Re=Re.bind(this));var De=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Se.convert(Object.assign({},this),Promise.prototype),Me=Ce.call(De,Ee,Re);return Se.convert(Me,this.__proto__)},Se.prototype.thenExternal=function(Ee,Re){return Promise.prototype.then.call(this,Ee,Re)},Se.prototype.thenList=function(Ee){var Re=this;return Ee.forEach(function(Ce){Re=Re.thenCore(Ce)}),Re},Se.prototype.catch=function(Ee){Ee&&(Ee=Ee.bind(this));var Re=Promise.prototype.catch.call(this,Ee);return Se.convert(Re,this)},Se.prototype.catchExternal=function(Ee){return Promise.prototype.catch.call(this,Ee)},Se.prototype.error=function(Ee){return this.then(function(){throw new Error(Ee)})},Se.prototype.using=Se.prototype.set,Se.prototype.saveAs=Se.prototype.save,Se.prototype.export=Se.prototype.output,Se.prototype.run=Se.prototype.then,E.getPageSize=function(Ee,Re,Ce){if(_typeof(Ee)==="object"){var De=Ee;Ee=De.orientation,Re=De.unit||Re,Ce=De.format||Ce}Re=Re||"mm",Ce=Ce||"a4",Ee=(""+(Ee||"P")).toLowerCase();var Me,Ue=(""+Ce).toLowerCase(),He={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Re){case"pt":Me=1;break;case"mm":Me=72/25.4;break;case"cm":Me=72/2.54;break;case"in":Me=72;break;case"px":Me=.75;break;case"pc":case"em":Me=12;break;case"ex":Me=6;break;default:throw"Invalid unit: "+Re}var Te,Ve=0,$e=0;if(He.hasOwnProperty(Ue))Ve=He[Ue][1]/Me,$e=He[Ue][0]/Me;else try{Ve=Ce[1],$e=Ce[0]}catch{throw new Error("Invalid format: "+Ce)}if(Ee==="p"||Ee==="portrait")Ee="p",$e>Ve&&(Te=$e,$e=Ve,Ve=Te);else{if(Ee!=="l"&&Ee!=="landscape")throw"Invalid orientation: "+Ee;Ee="l",Ve>$e&&(Te=$e,$e=Ve,Ve=Te)}return{width:$e,height:Ve,unit:Re,k:Me,orientation:Ee}},St.html=function(Ee,Re){(Re=Re||{}).callback=Re.callback||function(){},Re.html2canvas=Re.html2canvas||{},Re.html2canvas.canvas=Re.html2canvas.canvas||this.canvas,Re.jsPDF=Re.jsPDF||this,Re.fontFaces=Re.fontFaces?Re.fontFaces.map(jt):null;var Ce=new Se(Re);return Re.worker?Ce:Ce.from(Ee).doCallback()}}(E.API),E.API.addJS=function(St){return Ht=St,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(St){var t;St.events.push(["postPutResources",function(){var xe=this,e=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var _e=xe.outline.render().split(/\r\n/),Se=0;Se<_e.length;Se++){var Ee=_e[Se],Re=e.exec(Ee);if(Re!=null){var Ce=Re[1];xe.internal.newObjectDeferredBegin(Ce,!1)}xe.internal.write(Ee)}if(this.outline.createNamedDestinations){var De=this.internal.pages.length,Me=[];for(Se=0;Se<De;Se++){var Ue=xe.internal.newObject();Me.push(Ue);var He=xe.internal.getPageInfo(Se+1);xe.internal.write("<< /D["+He.objId+" 0 R /XYZ null null null]>> endobj")}var Te=xe.internal.newObject();for(xe.internal.write("<< /Names [ "),Se=0;Se<Me.length;Se++)xe.internal.write("(page_"+(Se+1)+")"+Me[Se]+" 0 R");xe.internal.write(" ] >>","endobj"),t=xe.internal.newObject(),xe.internal.write("<< /Dests "+Te+" 0 R"),xe.internal.write(">>","endobj")}}]),St.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),St.events.push(["initialized",function(){var xe=this;xe.outline={createNamedDestinations:!1,root:{children:[]}},xe.outline.add=function(e,_e,Se){var Ee={title:_e,options:Se,children:[]};return e==null&&(e=this.root),e.children.push(Ee),Ee},xe.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=xe,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},xe.outline.genIds_r=function(e){e.id=xe.internal.newObjectDeferred();for(var _e=0;_e<e.children.length;_e++)this.genIds_r(e.children[_e])},xe.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},xe.outline.renderItems=function(e){for(var _e=this.ctx.pdf.internal.getVerticalCoordinateString,Se=0;Se<e.children.length;Se++){var Ee=e.children[Se];this.objStart(Ee),this.line("/Title "+this.makeString(Ee.title)),this.line("/Parent "+this.makeRef(e)),Se>0&&this.line("/Prev "+this.makeRef(e.children[Se-1])),Se<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[Se+1])),Ee.children.length>0&&(this.line("/First "+this.makeRef(Ee.children[0])),this.line("/Last "+this.makeRef(Ee.children[Ee.children.length-1])));var Re=this.count=this.count_r({count:0},Ee);if(Re>0&&this.line("/Count "+Re),Ee.options&&Ee.options.pageNumber){var Ce=xe.internal.getPageInfo(Ee.options.pageNumber);this.line("/Dest ["+Ce.objId+" 0 R /XYZ 0 "+_e(0)+" 0]")}this.objEnd()}for(var De=0;De<e.children.length;De++)this.renderItems(e.children[De])},xe.outline.line=function(e){this.ctx.val+=e+`\r
`},xe.outline.makeRef=function(e){return e.id+" 0 R"},xe.outline.makeString=function(e){return"("+xe.internal.pdfEscape(e)+")"},xe.outline.objStart=function(e){this.ctx.val+=`\r
`+e.id+` 0 obj\r
<<\r
`},xe.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},xe.outline.count_r=function(e,_e){for(var Se=0;Se<_e.children.length;Se++)e.count++,this.count_r(e,_e.children[Se]);return e.count}}])}(E.API),function(St){var t=[192,193,194,195,196,197,198,199];St.processJPEG=function(xe,e,_e,Se,Ee,Re){var Ce,De=this.decode.DCT_DECODE,Me=null;if(typeof xe=="string"||this.__addimage__.isArrayBuffer(xe)||this.__addimage__.isArrayBufferView(xe)){switch(xe=Ee||xe,xe=this.__addimage__.isArrayBuffer(xe)?new Uint8Array(xe):xe,(Ce=function(Ue){for(var He,Te=256*Ue.charCodeAt(4)+Ue.charCodeAt(5),Ve=Ue.length,$e={width:0,height:0,numcomponents:1},Ke=4;Ke<Ve;Ke+=2){if(Ke+=Te,t.indexOf(Ue.charCodeAt(Ke+1))!==-1){He=256*Ue.charCodeAt(Ke+5)+Ue.charCodeAt(Ke+6),$e={width:256*Ue.charCodeAt(Ke+7)+Ue.charCodeAt(Ke+8),height:He,numcomponents:Ue.charCodeAt(Ke+9)};break}Te=256*Ue.charCodeAt(Ke+2)+Ue.charCodeAt(Ke+3)}return $e}(xe=this.__addimage__.isArrayBufferView(xe)?this.__addimage__.arrayBufferToBinaryString(xe):xe)).numcomponents){case 1:Re=this.color_spaces.DEVICE_GRAY;break;case 4:Re=this.color_spaces.DEVICE_CMYK;break;case 3:Re=this.color_spaces.DEVICE_RGB}Me={data:xe,width:Ce.width,height:Ce.height,colorSpace:Re,bitsPerComponent:8,filter:De,index:e,alias:_e}}return Me}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var St,t,xe;function e(Se){var Ee,Re,Ce,De,Me,Ue,He,Te,Ve,$e,Ke,Be,Ye,an;for(this.data=Se,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Ue=null;;){switch(Ee=this.readUInt32(),Ve=(function(){var rn,Xe;for(Xe=[],rn=0;rn<4;++rn)Xe.push(String.fromCharCode(this.data[this.pos++]));return Xe}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Ee);break;case"fcTL":Ue&&this.animation.frames.push(Ue),this.pos+=4,Ue={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Me=this.readUInt16(),De=this.readUInt16()||100,Ue.delay=1e3*Me/De,Ue.disposeOp=this.data[this.pos++],Ue.blendOp=this.data[this.pos++],Ue.data=[];break;case"IDAT":case"fdAT":for(Ve==="fdAT"&&(this.pos+=4,Ee-=4),Se=(Ue!=null?Ue.data:void 0)||this.imgData,Be=0;0<=Ee?Be<Ee:Be>Ee;0<=Ee?++Be:--Be)Se.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Ce=this.palette.length/3,this.transparency.indexed=this.read(Ee),this.transparency.indexed.length>Ce)throw new Error("More transparent colors than palette size");if(($e=Ce-this.transparency.indexed.length)>0)for(Ye=0;0<=$e?Ye<$e:Ye>$e;0<=$e?++Ye:--Ye)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Ee)[0];break;case 2:this.transparency.rgb=this.read(Ee)}break;case"tEXt":He=(Ke=this.read(Ee)).indexOf(0),Te=String.fromCharCode.apply(String,Ke.slice(0,He)),this.text[Te]=String.fromCharCode.apply(String,Ke.slice(He+1));break;case"IEND":return Ue&&this.animation.frames.push(Ue),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(an=this.colorType)===4||an===6,Re=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*Re,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Ee}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}e.prototype.read=function(Se){var Ee,Re;for(Re=[],Ee=0;0<=Se?Ee<Se:Ee>Se;0<=Se?++Ee:--Ee)Re.push(this.data[this.pos++]);return Re},e.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.decodePixels=function(Se){var Ee=this.pixelBitlength/8,Re=new Uint8Array(this.width*this.height*Ee),Ce=0,De=this;if(Se==null&&(Se=this.imgData),Se.length===0)return new Uint8Array(0);function Me(Ue,He,Te,Ve){var $e,Ke,Be,Ye,an,rn,Xe,en,We,ze,Qe,gn,ke,Ge,nn,dn,wn,Sn,yn,Pn,un,_n=Math.ceil((De.width-Ue)/Te),Nn=Math.ceil((De.height-He)/Ve),je=De.width==_n&&De.height==Nn;for(Ge=Ee*_n,gn=je?Re:new Uint8Array(Ge*Nn),rn=Se.length,ke=0,Ke=0;ke<Nn&&Ce<rn;){switch(Se[Ce++]){case 0:for(Ye=wn=0;wn<Ge;Ye=wn+=1)gn[Ke++]=Se[Ce++];break;case 1:for(Ye=Sn=0;Sn<Ge;Ye=Sn+=1)$e=Se[Ce++],an=Ye<Ee?0:gn[Ke-Ee],gn[Ke++]=($e+an)%256;break;case 2:for(Ye=yn=0;yn<Ge;Ye=yn+=1)$e=Se[Ce++],Be=(Ye-Ye%Ee)/Ee,nn=ke&&gn[(ke-1)*Ge+Be*Ee+Ye%Ee],gn[Ke++]=(nn+$e)%256;break;case 3:for(Ye=Pn=0;Pn<Ge;Ye=Pn+=1)$e=Se[Ce++],Be=(Ye-Ye%Ee)/Ee,an=Ye<Ee?0:gn[Ke-Ee],nn=ke&&gn[(ke-1)*Ge+Be*Ee+Ye%Ee],gn[Ke++]=($e+Math.floor((an+nn)/2))%256;break;case 4:for(Ye=un=0;un<Ge;Ye=un+=1)$e=Se[Ce++],Be=(Ye-Ye%Ee)/Ee,an=Ye<Ee?0:gn[Ke-Ee],ke===0?nn=dn=0:(nn=gn[(ke-1)*Ge+Be*Ee+Ye%Ee],dn=Be&&gn[(ke-1)*Ge+(Be-1)*Ee+Ye%Ee]),Xe=an+nn-dn,en=Math.abs(Xe-an),ze=Math.abs(Xe-nn),Qe=Math.abs(Xe-dn),We=en<=ze&&en<=Qe?an:ze<=Qe?nn:dn,gn[Ke++]=($e+We)%256;break;default:throw new Error("Invalid filter algorithm: "+Se[Ce-1])}if(!je){var Ie=((He+ke*Ve)*De.width+Ue)*Ee,Oe=ke*Ge;for(Ye=0;Ye<_n;Ye+=1){for(var Ze=0;Ze<Ee;Ze+=1)Re[Ie++]=gn[Oe++];Ie+=(Te-1)*Ee}}ke++}}return Se=unzlibSync(Se),De.interlaceMethod==1?(Me(0,0,8,8),Me(4,0,8,8),Me(0,4,4,8),Me(2,0,4,4),Me(0,2,2,4),Me(1,0,2,2),Me(0,1,1,2)):Me(0,0,1,1),Re},e.prototype.decodePalette=function(){var Se,Ee,Re,Ce,De,Me,Ue,He,Te;for(Re=this.palette,Me=this.transparency.indexed||[],De=new Uint8Array((Me.length||0)+Re.length),Ce=0,Se=0,Ee=Ue=0,He=Re.length;Ue<He;Ee=Ue+=3)De[Ce++]=Re[Ee],De[Ce++]=Re[Ee+1],De[Ce++]=Re[Ee+2],De[Ce++]=(Te=Me[Se++])!=null?Te:255;return De},e.prototype.copyToImageData=function(Se,Ee){var Re,Ce,De,Me,Ue,He,Te,Ve,$e,Ke,Be;if(Ce=this.colors,$e=null,Re=this.hasAlphaChannel,this.palette.length&&($e=(Be=this._decodedPalette)!=null?Be:this._decodedPalette=this.decodePalette(),Ce=4,Re=!0),Ve=(De=Se.data||Se).length,Ue=$e||Ee,Me=He=0,Ce===1)for(;Me<Ve;)Te=$e?4*Ee[Me/4]:He,Ke=Ue[Te++],De[Me++]=Ke,De[Me++]=Ke,De[Me++]=Ke,De[Me++]=Re?Ue[Te++]:255,He=Te;else for(;Me<Ve;)Te=$e?4*Ee[Me/4]:He,De[Me++]=Ue[Te++],De[Me++]=Ue[Te++],De[Me++]=Ue[Te++],De[Me++]=Re?Ue[Te++]:255,He=Te},e.prototype.decode=function(){var Se;return Se=new Uint8Array(this.width*this.height*4),this.copyToImageData(Se,this.decodePixels()),Se};var _e=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{t=n.document.createElement("canvas"),xe=t.getContext("2d")}catch{return!1}return!0}return!1};return _e(),St=function(Se){var Ee;if(_e()===!0)return xe.width=Se.width,xe.height=Se.height,xe.clearRect(0,0,Se.width,Se.height),xe.putImageData(Se,0,0),(Ee=new Image).src=t.toDataURL(),Ee;throw new Error("This method requires a Browser with Canvas-capability.")},e.prototype.decodeFrames=function(Se){var Ee,Re,Ce,De,Me,Ue,He,Te;if(this.animation){for(Te=[],Re=Me=0,Ue=(He=this.animation.frames).length;Me<Ue;Re=++Me)Ee=He[Re],Ce=Se.createImageData(Ee.width,Ee.height),De=this.decodePixels(new Uint8Array(Ee.data)),this.copyToImageData(Ce,De),Ee.imageData=Ce,Te.push(Ee.image=St(Ce));return Te}},e.prototype.renderFrame=function(Se,Ee){var Re,Ce,De;return Re=(Ce=this.animation.frames)[Ee],De=Ce[Ee-1],Ee===0&&Se.clearRect(0,0,this.width,this.height),(De!=null?De.disposeOp:void 0)===1?Se.clearRect(De.xOffset,De.yOffset,De.width,De.height):(De!=null?De.disposeOp:void 0)===2&&Se.putImageData(De.imageData,De.xOffset,De.yOffset),Re.blendOp===0&&Se.clearRect(Re.xOffset,Re.yOffset,Re.width,Re.height),Se.drawImage(Re.image,Re.xOffset,Re.yOffset)},e.prototype.animate=function(Se){var Ee,Re,Ce,De,Me,Ue,He=this;return Re=0,Ue=this.animation,De=Ue.numFrames,Ce=Ue.frames,Me=Ue.numPlays,(Ee=function(){var Te,Ve;if(Te=Re++%De,Ve=Ce[Te],He.renderFrame(Se,Te),De>1&&Re/De<Me)return He.animation._timeout=setTimeout(Ee,Ve.delay)})()},e.prototype.stopAnimation=function(){var Se;return clearTimeout((Se=this.animation)!=null?Se._timeout:void 0)},e.prototype.render=function(Se){var Ee,Re;return Se._png&&Se._png.stopAnimation(),Se._png=this,Se.width=this.width,Se.height=this.height,Ee=Se.getContext("2d"),this.animation?(this.decodeFrames(Ee),this.animate(Ee)):(Re=Ee.createImageData(this.width,this.height),this.copyToImageData(Re,this.decodePixels()),Ee.putImageData(Re,0,0))},e}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(St){var t=0;if(St[t++]!==71||St[t++]!==73||St[t++]!==70||St[t++]!==56||(St[t++]+1&253)!=56||St[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var xe=St[t++]|St[t++]<<8,e=St[t++]|St[t++]<<8,_e=St[t++],Se=_e>>7,Ee=1<<(7&_e)+1;St[t++],St[t++];var Re=null,Ce=null;Se&&(Re=t,Ce=Ee,t+=3*Ee);var De=!0,Me=[],Ue=0,He=null,Te=0,Ve=null;for(this.width=xe,this.height=e;De&&t<St.length;)switch(St[t++]){case 33:switch(St[t++]){case 255:if(St[t]!==11||St[t+1]==78&&St[t+2]==69&&St[t+3]==84&&St[t+4]==83&&St[t+5]==67&&St[t+6]==65&&St[t+7]==80&&St[t+8]==69&&St[t+9]==50&&St[t+10]==46&&St[t+11]==48&&St[t+12]==3&&St[t+13]==1&&St[t+16]==0)t+=14,Ve=St[t++]|St[t++]<<8,t++;else for(t+=12;;){if(!((ke=St[t++])>=0))throw Error("Invalid block size");if(ke===0)break;t+=ke}break;case 249:if(St[t++]!==4||St[t+4]!==0)throw new Error("Invalid graphics extension block.");var $e=St[t++];Ue=St[t++]|St[t++]<<8,He=St[t++],!(1&$e)&&(He=null),Te=$e>>2&7,t++;break;case 254:for(;;){if(!((ke=St[t++])>=0))throw Error("Invalid block size");if(ke===0)break;t+=ke}break;default:throw new Error("Unknown graphic control label: 0x"+St[t-1].toString(16))}break;case 44:var Ke=St[t++]|St[t++]<<8,Be=St[t++]|St[t++]<<8,Ye=St[t++]|St[t++]<<8,an=St[t++]|St[t++]<<8,rn=St[t++],Xe=rn>>6&1,en=1<<(7&rn)+1,We=Re,ze=Ce,Qe=!1;rn>>7&&(Qe=!0,We=t,ze=en,t+=3*en);var gn=t;for(t++;;){var ke;if(!((ke=St[t++])>=0))throw Error("Invalid block size");if(ke===0)break;t+=ke}Me.push({x:Ke,y:Be,width:Ye,height:an,has_local_palette:Qe,palette_offset:We,palette_size:ze,data_offset:gn,data_length:t-gn,transparent_index:He,interlaced:!!Xe,delay:Ue,disposal:Te});break;case 59:De=!1;break;default:throw new Error("Unknown gif block: 0x"+St[t-1].toString(16))}this.numFrames=function(){return Me.length},this.loopCount=function(){return Ve},this.frameInfo=function(Ge){if(Ge<0||Ge>=Me.length)throw new Error("Frame index out of range.");return Me[Ge]},this.decodeAndBlitFrameBGRA=function(Ge,nn){var dn=this.frameInfo(Ge),wn=dn.width*dn.height,Sn=new Uint8Array(wn);$t(St,dn.data_offset,Sn,wn);var yn=dn.palette_offset,Pn=dn.transparent_index;Pn===null&&(Pn=256);var un=dn.width,_n=xe-un,Nn=un,je=4*(dn.y*xe+dn.x),Ie=4*((dn.y+dn.height)*xe+dn.x),Oe=je,Ze=4*_n;dn.interlaced===!0&&(Ze+=4*xe*7);for(var sn=8,on=0,hn=Sn.length;on<hn;++on){var An=Sn[on];if(Nn===0&&(Nn=un,(Oe+=Ze)>=Ie&&(Ze=4*_n+4*xe*(sn-1),Oe=je+(un+_n)*(sn<<1),sn>>=1)),An===Pn)Oe+=4;else{var Mn=St[yn+3*An],In=St[yn+3*An+1],zn=St[yn+3*An+2];nn[Oe++]=zn,nn[Oe++]=In,nn[Oe++]=Mn,nn[Oe++]=255}--Nn}},this.decodeAndBlitFrameRGBA=function(Ge,nn){var dn=this.frameInfo(Ge),wn=dn.width*dn.height,Sn=new Uint8Array(wn);$t(St,dn.data_offset,Sn,wn);var yn=dn.palette_offset,Pn=dn.transparent_index;Pn===null&&(Pn=256);var un=dn.width,_n=xe-un,Nn=un,je=4*(dn.y*xe+dn.x),Ie=4*((dn.y+dn.height)*xe+dn.x),Oe=je,Ze=4*_n;dn.interlaced===!0&&(Ze+=4*xe*7);for(var sn=8,on=0,hn=Sn.length;on<hn;++on){var An=Sn[on];if(Nn===0&&(Nn=un,(Oe+=Ze)>=Ie&&(Ze=4*_n+4*xe*(sn-1),Oe=je+(un+_n)*(sn<<1),sn>>=1)),An===Pn)Oe+=4;else{var Mn=St[yn+3*An],In=St[yn+3*An+1],zn=St[yn+3*An+2];nn[Oe++]=Mn,nn[Oe++]=In,nn[Oe++]=zn,nn[Oe++]=255}--Nn}}}function $t(St,t,xe,e){for(var _e=St[t++],Se=1<<_e,Ee=Se+1,Re=Ee+1,Ce=_e+1,De=(1<<Ce)-1,Me=0,Ue=0,He=0,Te=St[t++],Ve=new Int32Array(4096),$e=null;;){for(;Me<16&&Te!==0;)Ue|=St[t++]<<Me,Me+=8,Te===1?Te=St[t++]:--Te;if(Me<Ce)break;var Ke=Ue&De;if(Ue>>=Ce,Me-=Ce,Ke!==Se){if(Ke===Ee)break;for(var Be=Ke<Re?Ke:$e,Ye=0,an=Be;an>Se;)an=Ve[an]>>8,++Ye;var rn=an;if(He+Ye+(Be!==Ke?1:0)>e)return void a.log("Warning, gif stream longer than expected.");xe[He++]=rn;var Xe=He+=Ye;for(Be!==Ke&&(xe[He++]=rn),an=Be;Ye--;)an=Ve[an],xe[--Xe]=255&an,an>>=8;$e!==null&&Re<4096&&(Ve[Re++]=$e<<8|rn,Re>=De+1&&Ce<12&&(++Ce,De=De<<1|1)),$e=Ke}else Re=Ee+1,De=(1<<(Ce=_e+1))-1,$e=null}return He!==e&&a.log("Warning, gif stream shorter than expected."),xe}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(St){var t,xe,e,_e,Se,Ee=Math.floor,Re=new Array(64),Ce=new Array(64),De=new Array(64),Me=new Array(64),Ue=new Array(65535),He=new Array(65535),Te=new Array(64),Ve=new Array(64),$e=[],Ke=0,Be=7,Ye=new Array(64),an=new Array(64),rn=new Array(64),Xe=new Array(256),en=new Array(2048),We=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ze=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Qe=[0,1,2,3,4,5,6,7,8,9,10,11],gn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ke=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Ge=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],nn=[0,1,2,3,4,5,6,7,8,9,10,11],dn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],wn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Sn(je,Ie){for(var Oe=0,Ze=0,sn=new Array,on=1;on<=16;on++){for(var hn=1;hn<=je[on];hn++)sn[Ie[Ze]]=[],sn[Ie[Ze]][0]=Oe,sn[Ie[Ze]][1]=on,Ze++,Oe++;Oe*=2}return sn}function yn(je){for(var Ie=je[0],Oe=je[1]-1;Oe>=0;)Ie&1<<Oe&&(Ke|=1<<Be),Oe--,--Be<0&&(Ke==255?(Pn(255),Pn(0)):Pn(Ke),Be=7,Ke=0)}function Pn(je){$e.push(je)}function un(je){Pn(je>>8&255),Pn(255&je)}function _n(je,Ie,Oe,Ze,sn){for(var on,hn=sn[0],An=sn[240],Mn=function(bn,Rn){var On,Hn,tr,ir,qn,pr,fr,Mr,_r,Ir,hr=0;for(_r=0;_r<8;++_r){On=bn[hr],Hn=bn[hr+1],tr=bn[hr+2],ir=bn[hr+3],qn=bn[hr+4],pr=bn[hr+5],fr=bn[hr+6];var Rr=On+(Mr=bn[hr+7]),jr=On-Mr,Vr=Hn+fr,or=Hn-fr,Xn=tr+pr,Qn=tr-pr,Sr=ir+qn,Xr=ir-qn,qr=Rr+Sr,Fn=Rr-Sr,ur=Vr+Xn,vr=Vr-Xn;bn[hr]=qr+ur,bn[hr+4]=qr-ur;var yr=.707106781*(vr+Fn);bn[hr+2]=Fn+yr,bn[hr+6]=Fn-yr;var Lr=.382683433*((qr=Xr+Qn)-(vr=or+jr)),kr=.5411961*qr+Lr,Tn=1.306562965*vr+Lr,Ln=.707106781*(ur=Qn+or),Un=jr+Ln,Gn=jr-Ln;bn[hr+5]=Gn+kr,bn[hr+3]=Gn-kr,bn[hr+1]=Un+Tn,bn[hr+7]=Un-Tn,hr+=8}for(hr=0,_r=0;_r<8;++_r){On=bn[hr],Hn=bn[hr+8],tr=bn[hr+16],ir=bn[hr+24],qn=bn[hr+32],pr=bn[hr+40],fr=bn[hr+48];var sr=On+(Mr=bn[hr+56]),dr=On-Mr,gr=Hn+fr,Nr=Hn-fr,Tr=tr+pr,Er=tr-pr,Wr=ir+qn,Fr=ir-qn,Dr=sr+Wr,Ur=sr-Wr,Gr=gr+Tr,Kr=gr-Tr;bn[hr]=Dr+Gr,bn[hr+32]=Dr-Gr;var Zr=.707106781*(Kr+Ur);bn[hr+16]=Ur+Zr,bn[hr+48]=Ur-Zr;var li=.382683433*((Dr=Fr+Er)-(Kr=Nr+dr)),si=.5411961*Dr+li,Ni=1.306562965*Kr+li,Fi=.707106781*(Gr=Er+Nr),Mi=dr+Fi,us=dr-Fi;bn[hr+40]=us+si,bn[hr+24]=us-si,bn[hr+8]=Mi+Ni,bn[hr+56]=Mi-Ni,hr++}for(_r=0;_r<64;++_r)Ir=bn[_r]*Rn[_r],Te[_r]=Ir>0?Ir+.5|0:Ir-.5|0;return Te}(je,Ie),In=0;In<64;++In)Ve[We[In]]=Mn[In];var zn=Ve[0]-Oe;Oe=Ve[0],zn==0?yn(Ze[0]):(yn(Ze[He[on=32767+zn]]),yn(Ue[on]));for(var Wn=63;Wn>0&&Ve[Wn]==0;)Wn--;if(Wn==0)return yn(hn),Oe;for(var Jn,Dn=1;Dn<=Wn;){for(var cn=Dn;Ve[Dn]==0&&Dn<=Wn;)++Dn;var Bn=Dn-cn;if(Bn>=16){Jn=Bn>>4;for(var mn=1;mn<=Jn;++mn)yn(An);Bn&=15}on=32767+Ve[Dn],yn(sn[(Bn<<4)+He[on]]),yn(Ue[on]),Dn++}return Wn!=63&&yn(hn),Oe}function Nn(je){je=Math.min(Math.max(je,1),100),Se!=je&&(function(Ie){for(var Oe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ze=0;Ze<64;Ze++){var sn=Ee((Oe[Ze]*Ie+50)/100);sn=Math.min(Math.max(sn,1),255),Re[We[Ze]]=sn}for(var on=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],hn=0;hn<64;hn++){var An=Ee((on[hn]*Ie+50)/100);An=Math.min(Math.max(An,1),255),Ce[We[hn]]=An}for(var Mn=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],In=0,zn=0;zn<8;zn++)for(var Wn=0;Wn<8;Wn++)De[In]=1/(Re[We[In]]*Mn[zn]*Mn[Wn]*8),Me[In]=1/(Ce[We[In]]*Mn[zn]*Mn[Wn]*8),In++}(je<50?Math.floor(5e3/je):Math.floor(200-2*je)),Se=je)}this.encode=function(je,Ie){Ie&&Nn(Ie),$e=new Array,Ke=0,Be=7,un(65496),un(65504),un(16),Pn(74),Pn(70),Pn(73),Pn(70),Pn(0),Pn(1),Pn(1),Pn(0),un(1),un(1),Pn(0),Pn(0),function(){un(65499),un(132),Pn(0);for(var Hn=0;Hn<64;Hn++)Pn(Re[Hn]);Pn(1);for(var tr=0;tr<64;tr++)Pn(Ce[tr])}(),function(Hn,tr){un(65472),un(17),Pn(8),un(tr),un(Hn),Pn(3),Pn(1),Pn(17),Pn(0),Pn(2),Pn(17),Pn(1),Pn(3),Pn(17),Pn(1)}(je.width,je.height),function(){un(65476),un(418),Pn(0);for(var Hn=0;Hn<16;Hn++)Pn(ze[Hn+1]);for(var tr=0;tr<=11;tr++)Pn(Qe[tr]);Pn(16);for(var ir=0;ir<16;ir++)Pn(gn[ir+1]);for(var qn=0;qn<=161;qn++)Pn(ke[qn]);Pn(1);for(var pr=0;pr<16;pr++)Pn(Ge[pr+1]);for(var fr=0;fr<=11;fr++)Pn(nn[fr]);Pn(17);for(var Mr=0;Mr<16;Mr++)Pn(dn[Mr+1]);for(var _r=0;_r<=161;_r++)Pn(wn[_r])}(),un(65498),un(12),Pn(3),Pn(1),Pn(0),Pn(2),Pn(17),Pn(3),Pn(17),Pn(0),Pn(63),Pn(0);var Oe=0,Ze=0,sn=0;Ke=0,Be=7,this.encode.displayName="_encode_";for(var on,hn,An,Mn,In,zn,Wn,Jn,Dn,cn=je.data,Bn=je.width,mn=je.height,bn=4*Bn,Rn=0;Rn<mn;){for(on=0;on<bn;){for(In=bn*Rn+on,Wn=-1,Jn=0,Dn=0;Dn<64;Dn++)zn=In+(Jn=Dn>>3)*bn+(Wn=4*(7&Dn)),Rn+Jn>=mn&&(zn-=bn*(Rn+1+Jn-mn)),on+Wn>=bn&&(zn-=on+Wn-bn+4),hn=cn[zn++],An=cn[zn++],Mn=cn[zn++],Ye[Dn]=(en[hn]+en[An+256>>0]+en[Mn+512>>0]>>16)-128,an[Dn]=(en[hn+768>>0]+en[An+1024>>0]+en[Mn+1280>>0]>>16)-128,rn[Dn]=(en[hn+1280>>0]+en[An+1536>>0]+en[Mn+1792>>0]>>16)-128;Oe=_n(Ye,De,Oe,t,e),Ze=_n(an,Me,Ze,xe,_e),sn=_n(rn,Me,sn,xe,_e),on+=32}Rn+=8}if(Be>=0){var On=[];On[1]=Be+1,On[0]=(1<<Be+1)-1,yn(On)}return un(65497),new Uint8Array($e)},St=St||50,function(){for(var je=String.fromCharCode,Ie=0;Ie<256;Ie++)Xe[Ie]=je(Ie)}(),t=Sn(ze,Qe),xe=Sn(Ge,nn),e=Sn(gn,ke),_e=Sn(dn,wn),function(){for(var je=1,Ie=2,Oe=1;Oe<=15;Oe++){for(var Ze=je;Ze<Ie;Ze++)He[32767+Ze]=Oe,Ue[32767+Ze]=[],Ue[32767+Ze][1]=Oe,Ue[32767+Ze][0]=Ze;for(var sn=-(Ie-1);sn<=-je;sn++)He[32767+sn]=Oe,Ue[32767+sn]=[],Ue[32767+sn][1]=Oe,Ue[32767+sn][0]=Ie-1+sn;je<<=1,Ie<<=1}}(),function(){for(var je=0;je<256;je++)en[je]=19595*je,en[je+256>>0]=38470*je,en[je+512>>0]=7471*je+32768,en[je+768>>0]=-11059*je,en[je+1024>>0]=-21709*je,en[je+1280>>0]=32768*je+8421375,en[je+1536>>0]=-27439*je,en[je+1792>>0]=-5329*je}(),Nn(St)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(St,t){if(this.pos=0,this.buffer=St,this.datav=new DataView(St.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(St){function t(ze){if(!ze)throw Error("assert :P")}function xe(ze,Qe,gn){for(var ke=0;4>ke;ke++)if(ze[Qe+ke]!=gn.charCodeAt(ke))return!0;return!1}function e(ze,Qe,gn,ke,Ge){for(var nn=0;nn<Ge;nn++)ze[Qe+nn]=gn[ke+nn]}function _e(ze,Qe,gn,ke){for(var Ge=0;Ge<ke;Ge++)ze[Qe+Ge]=gn}function Se(ze){return new Int32Array(ze)}function Ee(ze,Qe){for(var gn=[],ke=0;ke<ze;ke++)gn.push(new Qe);return gn}function Re(ze,Qe){var gn=[];return function ke(Ge,nn,dn){for(var wn=dn[nn],Sn=0;Sn<wn&&(Ge.push(dn.length>nn+1?[]:new Qe),!(dn.length<nn+1));Sn++)ke(Ge[Sn],nn+1,dn)}(gn,0,ze),gn}var Ce=function(){var ze=this;function Qe(Ae,Pe){for(var qe=1<<Pe-1>>>0;Ae&qe;)qe>>>=1;return qe?(Ae&qe-1)+qe:Ae}function gn(Ae,Pe,qe,tn,fn){t(!(tn%qe));do Ae[Pe+(tn-=qe)]=fn;while(0<tn)}function ke(Ae,Pe,qe,tn,fn){if(t(2328>=fn),512>=fn)var vn=Se(512);else if((vn=Se(fn))==null)return 0;return function(xn,En,Cn,kn,Yn,lr){var cr,nr,Ar=En,mr=1<<Cn,Kn=Se(16),Zn=Se(16);for(t(Yn!=0),t(kn!=null),t(xn!=null),t(0<Cn),nr=0;nr<Yn;++nr){if(15<kn[nr])return 0;++Kn[kn[nr]]}if(Kn[0]==Yn)return 0;for(Zn[1]=0,cr=1;15>cr;++cr){if(Kn[cr]>1<<cr)return 0;Zn[cr+1]=Zn[cr]+Kn[cr]}for(nr=0;nr<Yn;++nr)cr=kn[nr],0<kn[nr]&&(lr[Zn[cr]++]=nr);if(Zn[15]==1)return(kn=new Ge).g=0,kn.value=lr[0],gn(xn,Ar,1,mr,kn),mr;var xr,Pr=-1,wr=mr-1,Hr=0,Or=1,Yr=1,Br=1<<Cn;for(nr=0,cr=1,Yn=2;cr<=Cn;++cr,Yn<<=1){if(Or+=Yr<<=1,0>(Yr-=Kn[cr]))return 0;for(;0<Kn[cr];--Kn[cr])(kn=new Ge).g=cr,kn.value=lr[nr++],gn(xn,Ar+Hr,Yn,Br,kn),Hr=Qe(Hr,cr)}for(cr=Cn+1,Yn=2;15>=cr;++cr,Yn<<=1){if(Or+=Yr<<=1,0>(Yr-=Kn[cr]))return 0;for(;0<Kn[cr];--Kn[cr]){if(kn=new Ge,(Hr&wr)!=Pr){for(Ar+=Br,xr=1<<(Pr=cr)-Cn;15>Pr&&!(0>=(xr-=Kn[Pr]));)++Pr,xr<<=1;mr+=Br=1<<(xr=Pr-Cn),xn[En+(Pr=Hr&wr)].g=xr+Cn,xn[En+Pr].value=Ar-En-Pr}kn.g=cr-Cn,kn.value=lr[nr++],gn(xn,Ar+(Hr>>Cn),Yn,Br,kn),Hr=Qe(Hr,cr)}}return Or!=2*Zn[15]-1?0:mr}(Ae,Pe,qe,tn,fn,vn)}function Ge(){this.value=this.g=0}function nn(){this.value=this.g=0}function dn(){this.G=Ee(5,Ge),this.H=Se(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Ee(Ci,nn)}function wn(Ae,Pe,qe,tn){t(Ae!=null),t(Pe!=null),t(2147483648>tn),Ae.Ca=254,Ae.I=0,Ae.b=-8,Ae.Ka=0,Ae.oa=Pe,Ae.pa=qe,Ae.Jd=Pe,Ae.Yc=qe+tn,Ae.Zc=4<=tn?qe+tn-4+1:qe,on(Ae)}function Sn(Ae,Pe){for(var qe=0;0<Pe--;)qe|=An(Ae,128)<<Pe;return qe}function yn(Ae,Pe){var qe=Sn(Ae,Pe);return hn(Ae)?-qe:qe}function Pn(Ae,Pe,qe,tn){var fn,vn=0;for(t(Ae!=null),t(Pe!=null),t(4294967288>tn),Ae.Sb=tn,Ae.Ra=0,Ae.u=0,Ae.h=0,4<tn&&(tn=4),fn=0;fn<tn;++fn)vn+=Pe[qe+fn]<<8*fn;Ae.Ra=vn,Ae.bb=tn,Ae.oa=Pe,Ae.pa=qe}function un(Ae){for(;8<=Ae.u&&Ae.bb<Ae.Sb;)Ae.Ra>>>=8,Ae.Ra+=Ae.oa[Ae.pa+Ae.bb]<<aa-8>>>0,++Ae.bb,Ae.u-=8;Oe(Ae)&&(Ae.h=1,Ae.u=0)}function _n(Ae,Pe){if(t(0<=Pe),!Ae.h&&Pe<=sa){var qe=Ie(Ae)&ia[Pe];return Ae.u+=Pe,un(Ae),qe}return Ae.h=1,Ae.u=0}function Nn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function je(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ie(Ae){return Ae.Ra>>>(Ae.u&aa-1)>>>0}function Oe(Ae){return t(Ae.bb<=Ae.Sb),Ae.h||Ae.bb==Ae.Sb&&Ae.u>aa}function Ze(Ae,Pe){Ae.u=Pe,Ae.h=Oe(Ae)}function sn(Ae){Ae.u>=qa&&(t(Ae.u>=qa),un(Ae))}function on(Ae){t(Ae!=null&&Ae.oa!=null),Ae.pa<Ae.Zc?(Ae.I=(Ae.oa[Ae.pa++]|Ae.I<<8)>>>0,Ae.b+=8):(t(Ae!=null&&Ae.oa!=null),Ae.pa<Ae.Yc?(Ae.b+=8,Ae.I=Ae.oa[Ae.pa++]|Ae.I<<8):Ae.Ka?Ae.b=0:(Ae.I<<=8,Ae.b+=8,Ae.Ka=1))}function hn(Ae){return Sn(Ae,1)}function An(Ae,Pe){var qe=Ae.Ca;0>Ae.b&&on(Ae);var tn=Ae.b,fn=qe*Pe>>>8,vn=(Ae.I>>>tn>fn)+0;for(vn?(qe-=fn,Ae.I-=fn+1<<tn>>>0):qe=fn+1,tn=qe,fn=0;256<=tn;)fn+=8,tn>>=8;return tn=7^fn+Bi[tn],Ae.b-=tn,Ae.Ca=(qe<<tn)-1,vn}function Mn(Ae,Pe,qe){Ae[Pe+0]=qe>>24&255,Ae[Pe+1]=qe>>16&255,Ae[Pe+2]=qe>>8&255,Ae[Pe+3]=qe>>0&255}function In(Ae,Pe){return Ae[Pe+0]<<0|Ae[Pe+1]<<8}function zn(Ae,Pe){return In(Ae,Pe)|Ae[Pe+2]<<16}function Wn(Ae,Pe){return In(Ae,Pe)|In(Ae,Pe+2)<<16}function Jn(Ae,Pe){var qe=1<<Pe;return t(Ae!=null),t(0<Pe),Ae.X=Se(qe),Ae.X==null?0:(Ae.Mb=32-Pe,Ae.Xa=Pe,1)}function Dn(Ae,Pe){t(Ae!=null),t(Pe!=null),t(Ae.Xa==Pe.Xa),e(Pe.X,0,Ae.X,0,1<<Pe.Xa)}function cn(){this.X=[],this.Xa=this.Mb=0}function Bn(Ae,Pe,qe,tn){t(qe!=null),t(tn!=null);var fn=qe[0],vn=tn[0];return fn==0&&(fn=(Ae*vn+Pe/2)/Pe),vn==0&&(vn=(Pe*fn+Ae/2)/Ae),0>=fn||0>=vn?0:(qe[0]=fn,tn[0]=vn,1)}function mn(Ae,Pe){return Ae+(1<<Pe)-1>>>Pe}function bn(Ae,Pe){return((4278255360&Ae)+(4278255360&Pe)>>>0&4278255360)+((16711935&Ae)+(16711935&Pe)>>>0&16711935)>>>0}function Rn(Ae,Pe){ze[Pe]=function(qe,tn,fn,vn,xn,En,Cn){var kn;for(kn=0;kn<xn;++kn){var Yn=ze[Ae](En[Cn+kn-1],fn,vn+kn);En[Cn+kn]=bn(qe[tn+kn],Yn)}}}function On(){this.ud=this.hd=this.jd=0}function Hn(Ae,Pe){return((4278124286&(Ae^Pe))>>>1)+(Ae&Pe)>>>0}function tr(Ae){return 0<=Ae&&256>Ae?Ae:0>Ae?0:255<Ae?255:void 0}function ir(Ae,Pe){return tr(Ae+(Ae-Pe+.5>>1))}function qn(Ae,Pe,qe){return Math.abs(Pe-qe)-Math.abs(Ae-qe)}function pr(Ae,Pe,qe,tn,fn,vn,xn){for(tn=vn[xn-1],qe=0;qe<fn;++qe)vn[xn+qe]=tn=bn(Ae[Pe+qe],tn)}function fr(Ae,Pe,qe,tn,fn){var vn;for(vn=0;vn<qe;++vn){var xn=Ae[Pe+vn],En=xn>>8&255,Cn=16711935&(Cn=(Cn=16711935&xn)+((En<<16)+En));tn[fn+vn]=(4278255360&xn)+Cn>>>0}}function Mr(Ae,Pe){Pe.jd=Ae>>0&255,Pe.hd=Ae>>8&255,Pe.ud=Ae>>16&255}function _r(Ae,Pe,qe,tn,fn,vn){var xn;for(xn=0;xn<tn;++xn){var En=Pe[qe+xn],Cn=En>>>8,kn=En,Yn=255&(Yn=(Yn=En>>>16)+((Ae.jd<<24>>24)*(Cn<<24>>24)>>>5));kn=255&(kn=(kn=kn+((Ae.hd<<24>>24)*(Cn<<24>>24)>>>5))+((Ae.ud<<24>>24)*(Yn<<24>>24)>>>5)),fn[vn+xn]=(4278255360&En)+(Yn<<16)+kn}}function Ir(Ae,Pe,qe,tn,fn){ze[Pe]=function(vn,xn,En,Cn,kn,Yn,lr,cr,nr){for(Cn=lr;Cn<cr;++Cn)for(lr=0;lr<nr;++lr)kn[Yn++]=fn(En[tn(vn[xn++])])},ze[Ae]=function(vn,xn,En,Cn,kn,Yn,lr){var cr=8>>vn.b,nr=vn.Ea,Ar=vn.K[0],mr=vn.w;if(8>cr)for(vn=(1<<vn.b)-1,mr=(1<<cr)-1;xn<En;++xn){var Kn,Zn=0;for(Kn=0;Kn<nr;++Kn)Kn&vn||(Zn=tn(Cn[kn++])),Yn[lr++]=fn(Ar[Zn&mr]),Zn>>=cr}else ze["VP8LMapColor"+qe](Cn,kn,Ar,mr,Yn,lr,xn,En,nr)}}function hr(Ae,Pe,qe,tn,fn){for(qe=Pe+qe;Pe<qe;){var vn=Ae[Pe++];tn[fn++]=vn>>16&255,tn[fn++]=vn>>8&255,tn[fn++]=vn>>0&255}}function Rr(Ae,Pe,qe,tn,fn){for(qe=Pe+qe;Pe<qe;){var vn=Ae[Pe++];tn[fn++]=vn>>16&255,tn[fn++]=vn>>8&255,tn[fn++]=vn>>0&255,tn[fn++]=vn>>24&255}}function jr(Ae,Pe,qe,tn,fn){for(qe=Pe+qe;Pe<qe;){var vn=(xn=Ae[Pe++])>>16&240|xn>>12&15,xn=xn>>0&240|xn>>28&15;tn[fn++]=vn,tn[fn++]=xn}}function Vr(Ae,Pe,qe,tn,fn){for(qe=Pe+qe;Pe<qe;){var vn=(xn=Ae[Pe++])>>16&248|xn>>13&7,xn=xn>>5&224|xn>>3&31;tn[fn++]=vn,tn[fn++]=xn}}function or(Ae,Pe,qe,tn,fn){for(qe=Pe+qe;Pe<qe;){var vn=Ae[Pe++];tn[fn++]=vn>>0&255,tn[fn++]=vn>>8&255,tn[fn++]=vn>>16&255}}function Xn(Ae,Pe,qe,tn,fn,vn){if(vn==0)for(qe=Pe+qe;Pe<qe;)Mn(tn,((vn=Ae[Pe++])[0]>>24|vn[1]>>8&65280|vn[2]<<8&16711680|vn[3]<<24)>>>0),fn+=32;else e(tn,fn,Ae,Pe,qe)}function Qn(Ae,Pe){ze[Pe][0]=ze[Ae+"0"],ze[Pe][1]=ze[Ae+"1"],ze[Pe][2]=ze[Ae+"2"],ze[Pe][3]=ze[Ae+"3"],ze[Pe][4]=ze[Ae+"4"],ze[Pe][5]=ze[Ae+"5"],ze[Pe][6]=ze[Ae+"6"],ze[Pe][7]=ze[Ae+"7"],ze[Pe][8]=ze[Ae+"8"],ze[Pe][9]=ze[Ae+"9"],ze[Pe][10]=ze[Ae+"10"],ze[Pe][11]=ze[Ae+"11"],ze[Pe][12]=ze[Ae+"12"],ze[Pe][13]=ze[Ae+"13"],ze[Pe][14]=ze[Ae+"0"],ze[Pe][15]=ze[Ae+"0"]}function Sr(Ae){return Ae==Bl||Ae==ql||Ae==jo||Ae==Ul}function Xr(){this.eb=[],this.size=this.A=this.fb=0}function qr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Fn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Xr,this.f.kb=new qr,this.sd=null}function ur(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function yr(Ae){return alert("todo:WebPSamplerProcessPlane"),Ae.T}function Lr(Ae,Pe){var qe=Ae.T,tn=Pe.ba.f.RGBA,fn=tn.eb,vn=tn.fb+Ae.ka*tn.A,xn=Zi[Pe.ba.S],En=Ae.y,Cn=Ae.O,kn=Ae.f,Yn=Ae.N,lr=Ae.ea,cr=Ae.W,nr=Pe.cc,Ar=Pe.dc,mr=Pe.Mc,Kn=Pe.Nc,Zn=Ae.ka,xr=Ae.ka+Ae.T,Pr=Ae.U,wr=Pr+1>>1;for(Zn==0?xn(En,Cn,null,null,kn,Yn,lr,cr,kn,Yn,lr,cr,fn,vn,null,null,Pr):(xn(Pe.ec,Pe.fc,En,Cn,nr,Ar,mr,Kn,kn,Yn,lr,cr,fn,vn-tn.A,fn,vn,Pr),++qe);Zn+2<xr;Zn+=2)nr=kn,Ar=Yn,mr=lr,Kn=cr,Yn+=Ae.Rc,cr+=Ae.Rc,vn+=2*tn.A,xn(En,(Cn+=2*Ae.fa)-Ae.fa,En,Cn,nr,Ar,mr,Kn,kn,Yn,lr,cr,fn,vn-tn.A,fn,vn,Pr);return Cn+=Ae.fa,Ae.j+xr<Ae.o?(e(Pe.ec,Pe.fc,En,Cn,Pr),e(Pe.cc,Pe.dc,kn,Yn,wr),e(Pe.Mc,Pe.Nc,lr,cr,wr),qe--):1&xr||xn(En,Cn,null,null,kn,Yn,lr,cr,kn,Yn,lr,cr,fn,vn+tn.A,null,null,Pr),qe}function kr(Ae,Pe,qe){var tn=Ae.F,fn=[Ae.J];if(tn!=null){var vn=Ae.U,xn=Pe.ba.S,En=xn==Do||xn==jo;Pe=Pe.ba.f.RGBA;var Cn=[0],kn=Ae.ka;Cn[0]=Ae.T,Ae.Kb&&(kn==0?--Cn[0]:(--kn,fn[0]-=Ae.width),Ae.j+Ae.ka+Ae.T==Ae.o&&(Cn[0]=Ae.o-Ae.j-kn));var Yn=Pe.eb;kn=Pe.fb+kn*Pe.A,Ae=pi(tn,fn[0],Ae.width,vn,Cn,Yn,kn+(En?0:3),Pe.A),t(qe==Cn),Ae&&Sr(xn)&&Ki(Yn,kn,En,vn,Cn,Pe.A)}return 0}function Tn(Ae){var Pe=Ae.ma,qe=Pe.ba.S,tn=11>qe,fn=qe==Mo||qe==Io||qe==Do||qe==Ol||qe==12||Sr(qe);if(Pe.memory=null,Pe.Ib=null,Pe.Jb=null,Pe.Nd=null,!Oa(Pe.Oa,Ae,fn?11:12))return 0;if(fn&&Sr(qe)&&Cr(),Ae.da)alert("todo:use_scaling");else{if(tn){if(Pe.Ib=yr,Ae.Kb){if(qe=Ae.U+1>>1,Pe.memory=Se(Ae.U+2*qe),Pe.memory==null)return 0;Pe.ec=Pe.memory,Pe.fc=0,Pe.cc=Pe.ec,Pe.dc=Pe.fc+Ae.U,Pe.Mc=Pe.cc,Pe.Nc=Pe.dc+qe,Pe.Ib=Lr,Cr()}}else alert("todo:EmitYUV");fn&&(Pe.Jb=kr,tn&&ar())}if(tn&&!Vc){for(Ae=0;256>Ae;++Ae)ch[Ae]=89858*(Ae-128)+Bo>>Oo,dh[Ae]=-22014*(Ae-128)+Bo,hh[Ae]=-45773*(Ae-128),uh[Ae]=113618*(Ae-128)+Bo>>Oo;for(Ae=$a;Ae<Wl;++Ae)Pe=76283*(Ae-16)+Bo>>Oo,fh[Ae-$a]=Hi(Pe,255),ph[Ae-$a]=Hi(Pe+8>>4,15);Vc=1}return 1}function Ln(Ae){var Pe=Ae.ma,qe=Ae.U,tn=Ae.T;return t(!(1&Ae.ka)),0>=qe||0>=tn?0:(qe=Pe.Ib(Ae,Pe),Pe.Jb!=null&&Pe.Jb(Ae,Pe,qe),Pe.Dc+=qe,1)}function Un(Ae){Ae.ma.memory=null}function Gn(Ae,Pe,qe,tn){return _n(Ae,8)!=47?0:(Pe[0]=_n(Ae,14)+1,qe[0]=_n(Ae,14)+1,tn[0]=_n(Ae,1),_n(Ae,3)!=0?0:!Ae.h)}function sr(Ae,Pe){if(4>Ae)return Ae+1;var qe=Ae-2>>1;return(2+(1&Ae)<<qe)+_n(Pe,qe)+1}function dr(Ae,Pe){return 120<Pe?Pe-120:1<=(qe=((qe=Yu[Pe-1])>>4)*Ae+(8-(15&qe)))?qe:1;var qe}function gr(Ae,Pe,qe){var tn=Ie(qe),fn=Ae[Pe+=255&tn].g-8;return 0<fn&&(Ze(qe,qe.u+8),tn=Ie(qe),Pe+=Ae[Pe].value,Pe+=tn&(1<<fn)-1),Ze(qe,qe.u+Ae[Pe].g),Ae[Pe].value}function Nr(Ae,Pe,qe){return qe.g+=Ae.g,qe.value+=Ae.value<<Pe>>>0,t(8>=qe.g),Ae.g}function Tr(Ae,Pe,qe){var tn=Ae.xc;return t((Pe=tn==0?0:Ae.vc[Ae.md*(qe>>tn)+(Pe>>tn)])<Ae.Wb),Ae.Ya[Pe]}function Er(Ae,Pe,qe,tn){var fn=Ae.ab,vn=Ae.c*Pe,xn=Ae.C;Pe=xn+Pe;var En=qe,Cn=tn;for(tn=Ae.Ta,qe=Ae.Ua;0<fn--;){var kn=Ae.gc[fn],Yn=xn,lr=Pe,cr=En,nr=Cn,Ar=(Cn=tn,En=qe,kn.Ea);switch(t(Yn<lr),t(lr<=kn.nc),kn.hc){case 2:Lo(cr,nr,(lr-Yn)*Ar,Cn,En);break;case 0:var mr=Yn,Kn=lr,Zn=Cn,xr=En,Pr=(Br=kn).Ea;mr==0&&(Dl(cr,nr,null,null,1,Zn,xr),pr(cr,nr+1,0,0,Pr-1,Zn,xr+1),nr+=Pr,xr+=Pr,++mr);for(var wr=1<<Br.b,Hr=wr-1,Or=mn(Pr,Br.b),Yr=Br.K,Br=Br.w+(mr>>Br.b)*Or;mr<Kn;){var ai=Yr,ci=Br,ii=1;for(Ua(cr,nr,Zn,xr-Pr,1,Zn,xr);ii<Pr;){var ni=(ii&~Hr)+wr;ni>Pr&&(ni=Pr),(0,Ss[ai[ci++]>>8&15])(cr,nr+ +ii,Zn,xr+ii-Pr,ni-ii,Zn,xr+ii),ii=ni}nr+=Pr,xr+=Pr,++mr&Hr||(Br+=Or)}lr!=kn.nc&&e(Cn,En-Ar,Cn,En+(lr-Yn-1)*Ar,Ar);break;case 1:for(Ar=cr,Kn=nr,Pr=(cr=kn.Ea)-(xr=cr&~(Zn=(nr=1<<kn.b)-1)),mr=mn(cr,kn.b),wr=kn.K,kn=kn.w+(Yn>>kn.b)*mr;Yn<lr;){for(Hr=wr,Or=kn,Yr=new On,Br=Kn+xr,ai=Kn+cr;Kn<Br;)Mr(Hr[Or++],Yr),Bs(Yr,Ar,Kn,nr,Cn,En),Kn+=nr,En+=nr;Kn<ai&&(Mr(Hr[Or++],Yr),Bs(Yr,Ar,Kn,Pr,Cn,En),Kn+=Pr,En+=Pr),++Yn&Zn||(kn+=mr)}break;case 3:if(cr==Cn&&nr==En&&0<kn.b){for(Kn=Cn,cr=Ar=En+(lr-Yn)*Ar-(xr=(lr-Yn)*mn(kn.Ea,kn.b)),nr=Cn,Zn=En,mr=[],xr=(Pr=xr)-1;0<=xr;--xr)mr[xr]=nr[Zn+xr];for(xr=Pr-1;0<=xr;--xr)Kn[cr+xr]=mr[xr];$i(kn,Yn,lr,Cn,Ar,Cn,En)}else $i(kn,Yn,lr,cr,nr,Cn,En)}En=tn,Cn=qe}Cn!=qe&&e(tn,qe,En,Cn,vn)}function Wr(Ae,Pe){var qe=Ae.V,tn=Ae.Ba+Ae.c*Ae.C,fn=Pe-Ae.C;if(t(Pe<=Ae.l.o),t(16>=fn),0<fn){var vn=Ae.l,xn=Ae.Ta,En=Ae.Ua,Cn=vn.width;if(Er(Ae,fn,qe,tn),fn=En=[En],t((qe=Ae.C)<(tn=Pe)),t(vn.v<vn.va),tn>vn.o&&(tn=vn.o),qe<vn.j){var kn=vn.j-qe;qe=vn.j,fn[0]+=kn*Cn}if(qe>=tn?qe=0:(fn[0]+=4*vn.v,vn.ka=qe-vn.j,vn.U=vn.va-vn.v,vn.T=tn-qe,qe=1),qe){if(En=En[0],11>(qe=Ae.ca).S){var Yn=qe.f.RGBA,lr=(tn=qe.S,fn=vn.U,vn=vn.T,kn=Yn.eb,Yn.A),cr=vn;for(Yn=Yn.fb+Ae.Ma*Yn.A;0<cr--;){var nr=xn,Ar=En,mr=fn,Kn=kn,Zn=Yn;switch(tn){case Fo:qi(nr,Ar,mr,Kn,Zn);break;case Mo:Ii(nr,Ar,mr,Kn,Zn);break;case Bl:Ii(nr,Ar,mr,Kn,Zn),Ki(Kn,Zn,0,mr,1,0);break;case jc:ps(nr,Ar,mr,Kn,Zn);break;case Io:Xn(nr,Ar,mr,Kn,Zn,1);break;case ql:Xn(nr,Ar,mr,Kn,Zn,1),Ki(Kn,Zn,0,mr,1,0);break;case Do:Xn(nr,Ar,mr,Kn,Zn,0);break;case jo:Xn(nr,Ar,mr,Kn,Zn,0),Ki(Kn,Zn,1,mr,1,0);break;case Ol:Es(nr,Ar,mr,Kn,Zn);break;case Ul:Es(nr,Ar,mr,Kn,Zn),fi(Kn,Zn,mr,1,0);break;case Oc:fs(nr,Ar,mr,Kn,Zn);break;default:t(0)}En+=Cn,Yn+=lr}Ae.Ma+=vn}else alert("todo:EmitRescaledRowsYUVA");t(Ae.Ma<=qe.height)}}Ae.C=Pe,t(Ae.C<=Ae.i)}function Fr(Ae){var Pe;if(0<Ae.ua)return 0;for(Pe=0;Pe<Ae.Wb;++Pe){var qe=Ae.Ya[Pe].G,tn=Ae.Ya[Pe].H;if(0<qe[1][tn[1]+0].g||0<qe[2][tn[2]+0].g||0<qe[3][tn[3]+0].g)return 0}return 1}function Dr(Ae,Pe,qe,tn,fn,vn){if(Ae.Z!=0){var xn=Ae.qd,En=Ae.rd;for(t(Ts[Ae.Z]!=null);Pe<qe;++Pe)Ts[Ae.Z](xn,En,tn,fn,tn,fn,vn),xn=tn,En=fn,fn+=vn;Ae.qd=xn,Ae.rd=En}}function Ur(Ae,Pe){var qe=Ae.l.ma,tn=qe.Z==0||qe.Z==1?Ae.l.j:Ae.C;if(tn=Ae.C<tn?tn:Ae.C,t(Pe<=Ae.l.o),Pe>tn){var fn=Ae.l.width,vn=qe.ca,xn=qe.tb+fn*tn,En=Ae.V,Cn=Ae.Ba+Ae.c*tn,kn=Ae.gc;t(Ae.ab==1),t(kn[0].hc==3),Co(kn[0],tn,Pe,En,Cn,vn,xn),Dr(qe,tn,Pe,vn,xn,fn)}Ae.C=Ae.Ma=Pe}function Gr(Ae,Pe,qe,tn,fn,vn,xn){var En=Ae.$/tn,Cn=Ae.$%tn,kn=Ae.m,Yn=Ae.s,lr=qe+Ae.$,cr=lr;fn=qe+tn*fn;var nr=qe+tn*vn,Ar=280+Yn.ua,mr=Ae.Pb?En:16777216,Kn=0<Yn.ua?Yn.Wa:null,Zn=Yn.wc,xr=lr<nr?Tr(Yn,Cn,En):null;t(Ae.C<vn),t(nr<=fn);var Pr=!1;t:for(;;){for(;Pr||lr<nr;){var wr=0;if(En>=mr){var Hr=lr-qe;t((mr=Ae).Pb),mr.wd=mr.m,mr.xd=Hr,0<mr.s.ua&&Dn(mr.s.Wa,mr.s.vb),mr=En+Ju}if(Cn&Zn||(xr=Tr(Yn,Cn,En)),t(xr!=null),xr.Qb&&(Pe[lr]=xr.qb,Pr=!0),!Pr)if(sn(kn),xr.jc){wr=kn,Hr=Pe;var Or=lr,Yr=xr.pd[Ie(wr)&Ci-1];t(xr.jc),256>Yr.g?(Ze(wr,wr.u+Yr.g),Hr[Or]=Yr.value,wr=0):(Ze(wr,wr.u+Yr.g-256),t(256<=Yr.value),wr=Yr.value),wr==0&&(Pr=!0)}else wr=gr(xr.G[0],xr.H[0],kn);if(kn.h)break;if(Pr||256>wr){if(!Pr)if(xr.nd)Pe[lr]=(xr.qb|wr<<8)>>>0;else{if(sn(kn),Pr=gr(xr.G[1],xr.H[1],kn),sn(kn),Hr=gr(xr.G[2],xr.H[2],kn),Or=gr(xr.G[3],xr.H[3],kn),kn.h)break;Pe[lr]=(Or<<24|Pr<<16|wr<<8|Hr)>>>0}if(Pr=!1,++lr,++Cn>=tn&&(Cn=0,++En,xn!=null&&En<=vn&&!(En%16)&&xn(Ae,En),Kn!=null))for(;cr<lr;)wr=Pe[cr++],Kn.X[(506832829*wr&4294967295)>>>Kn.Mb]=wr}else if(280>wr){if(wr=sr(wr-256,kn),Hr=gr(xr.G[4],xr.H[4],kn),sn(kn),Hr=dr(tn,Hr=sr(Hr,kn)),kn.h)break;if(lr-qe<Hr||fn-lr<wr)break t;for(Or=0;Or<wr;++Or)Pe[lr+Or]=Pe[lr+Or-Hr];for(lr+=wr,Cn+=wr;Cn>=tn;)Cn-=tn,++En,xn!=null&&En<=vn&&!(En%16)&&xn(Ae,En);if(t(lr<=fn),Cn&Zn&&(xr=Tr(Yn,Cn,En)),Kn!=null)for(;cr<lr;)wr=Pe[cr++],Kn.X[(506832829*wr&4294967295)>>>Kn.Mb]=wr}else{if(!(wr<Ar))break t;for(Pr=wr-280,t(Kn!=null);cr<lr;)wr=Pe[cr++],Kn.X[(506832829*wr&4294967295)>>>Kn.Mb]=wr;wr=lr,t(!(Pr>>>(Hr=Kn).Xa)),Pe[wr]=Hr.X[Pr],Pr=!0}Pr||t(kn.h==Oe(kn))}if(Ae.Pb&&kn.h&&lr<fn)t(Ae.m.h),Ae.a=5,Ae.m=Ae.wd,Ae.$=Ae.xd,0<Ae.s.ua&&Dn(Ae.s.vb,Ae.s.Wa);else{if(kn.h)break t;xn!=null&&xn(Ae,En>vn?vn:En),Ae.a=0,Ae.$=lr-qe}return 1}return Ae.a=3,0}function Kr(Ae){t(Ae!=null),Ae.vc=null,Ae.yc=null,Ae.Ya=null;var Pe=Ae.Wa;Pe!=null&&(Pe.X=null),Ae.vb=null,t(Ae!=null)}function Zr(){var Ae=new Il;return Ae==null?null:(Ae.a=0,Ae.xb=Uc,Qn("Predictor","VP8LPredictors"),Qn("Predictor","VP8LPredictors_C"),Qn("PredictorAdd","VP8LPredictorsAdd"),Qn("PredictorAdd","VP8LPredictorsAdd_C"),Lo=fr,Bs=_r,qi=hr,Ii=Rr,Es=jr,fs=Vr,ps=or,ze.VP8LMapColor32b=oa,ze.VP8LMapColor8b=To,Ae)}function li(Ae,Pe,qe,tn,fn){var vn=1,xn=[Ae],En=[Pe],Cn=tn.m,kn=tn.s,Yn=null,lr=0;t:for(;;){if(qe)for(;vn&&_n(Cn,1);){var cr=xn,nr=En,Ar=tn,mr=1,Kn=Ar.m,Zn=Ar.gc[Ar.ab],xr=_n(Kn,2);if(Ar.Oc&1<<xr)vn=0;else{switch(Ar.Oc|=1<<xr,Zn.hc=xr,Zn.Ea=cr[0],Zn.nc=nr[0],Zn.K=[null],++Ar.ab,t(4>=Ar.ab),xr){case 0:case 1:Zn.b=_n(Kn,3)+2,mr=li(mn(Zn.Ea,Zn.b),mn(Zn.nc,Zn.b),0,Ar,Zn.K),Zn.K=Zn.K[0];break;case 3:var Pr,wr=_n(Kn,8)+1,Hr=16<wr?0:4<wr?1:2<wr?2:3;if(cr[0]=mn(Zn.Ea,Hr),Zn.b=Hr,Pr=mr=li(wr,1,0,Ar,Zn.K)){var Or,Yr=wr,Br=Zn,ai=1<<(8>>Br.b),ci=Se(ai);if(ci==null)Pr=0;else{var ii=Br.K[0],ni=Br.w;for(ci[0]=Br.K[0][0],Or=1;Or<1*Yr;++Or)ci[Or]=bn(ii[ni+Or],ci[Or-1]);for(;Or<4*ai;++Or)ci[Or]=0;Br.K[0]=null,Br.K[0]=ci,Pr=1}}mr=Pr;break;case 2:break;default:t(0)}vn=mr}}if(xn=xn[0],En=En[0],vn&&_n(Cn,1)&&!(vn=1<=(lr=_n(Cn,4))&&11>=lr)){tn.a=3;break t}var di;if(di=vn)e:{var hi,ei,Ai,Ui=tn,_i=xn,zi=En,ui=lr,Gi=qe,Vi=Ui.m,Pi=Ui.s,Ti=[null],ji=1,Qi=0,cs=Ku[ui];n:for(;;){if(Gi&&_n(Vi,1)){var Li=_n(Vi,3)+2,vs=mn(_i,Li),Ws=mn(zi,Li),da=vs*Ws;if(!li(vs,Ws,0,Ui,Ti))break n;for(Ti=Ti[0],Pi.xc=Li,hi=0;hi<da;++hi){var Ns=Ti[hi]>>8&65535;Ti[hi]=Ns,Ns>=ji&&(ji=Ns+1)}}if(Vi.h)break n;for(ei=0;5>ei;++ei){var bi=Bc[ei];!ei&&0<ui&&(bi+=1<<ui),Qi<bi&&(Qi=bi)}var Gl=Ee(ji*cs,Ge),Yc=ji,Kc=Ee(Yc,dn);if(Kc==null)var Uo=null;else t(65536>=Yc),Uo=Kc;var Xa=Se(Qi);if(Uo==null||Xa==null||Gl==null){Ui.a=1;break n}var zo=Gl;for(hi=Ai=0;hi<ji;++hi){var ss=Uo[hi],fa=ss.G,pa=ss.H,Jc=0,Ho=1,Zc=0;for(ei=0;5>ei;++ei){bi=Bc[ei],fa[ei]=zo,pa[ei]=Ai,!ei&&0<ui&&(bi+=1<<ui);i:{var Wo,Vl=bi,Go=Ui,Ya=Xa,bh=zo,vh=Ai,$l=0,Rs=Go.m,yh=_n(Rs,1);if(_e(Ya,0,0,Vl),yh){var xh=_n(Rs,1)+1,wh=_n(Rs,1),Qc=_n(Rs,wh==0?1:8);Ya[Qc]=1,xh==2&&(Ya[Qc=_n(Rs,8)]=1);var Vo=1}else{var tu=Se(19),eu=_n(Rs,4)+4;if(19<eu){Go.a=3;var $o=0;break i}for(Wo=0;Wo<eu;++Wo)tu[Xu[Wo]]=_n(Rs,3);var Xl=void 0,Ka=void 0,nu=Go,Ah=tu,Xo=Vl,ru=Ya,Yl=0,ks=nu.m,iu=8,su=Ee(128,Ge);r:for(;ke(su,0,7,Ah,19);){if(_n(ks,1)){var _h=2+2*_n(ks,3);if((Xl=2+_n(ks,_h))>Xo)break r}else Xl=Xo;for(Ka=0;Ka<Xo&&Xl--;){sn(ks);var au=su[0+(127&Ie(ks))];Ze(ks,ks.u+au.g);var ga=au.value;if(16>ga)ru[Ka++]=ga,ga!=0&&(iu=ga);else{var Sh=ga==16,ou=ga-16,Eh=Vu[ou],lu=_n(ks,Gu[ou])+Eh;if(Ka+lu>Xo)break r;for(var Ph=Sh?iu:0;0<lu--;)ru[Ka++]=Ph}}Yl=1;break r}Yl||(nu.a=3),Vo=Yl}(Vo=Vo&&!Rs.h)&&($l=ke(bh,vh,8,Ya,Vl)),Vo&&$l!=0?$o=$l:(Go.a=3,$o=0)}if($o==0)break n;if(Ho&&$u[ei]==1&&(Ho=zo[Ai].g==0),Jc+=zo[Ai].g,Ai+=$o,3>=ei){var Ja,Kl=Xa[0];for(Ja=1;Ja<bi;++Ja)Xa[Ja]>Kl&&(Kl=Xa[Ja]);Zc+=Kl}}if(ss.nd=Ho,ss.Qb=0,Ho&&(ss.qb=(fa[3][pa[3]+0].value<<24|fa[1][pa[1]+0].value<<16|fa[2][pa[2]+0].value)>>>0,Jc==0&&256>fa[0][pa[0]+0].value&&(ss.Qb=1,ss.qb+=fa[0][pa[0]+0].value<<8)),ss.jc=!ss.Qb&&6>Zc,ss.jc){var Yo,ys=ss;for(Yo=0;Yo<Ci;++Yo){var Fs=Yo,Ms=ys.pd[Fs],Ko=ys.G[0][ys.H[0]+Fs];256<=Ko.value?(Ms.g=Ko.g+256,Ms.value=Ko.value):(Ms.g=0,Ms.value=0,Fs>>=Nr(Ko,8,Ms),Fs>>=Nr(ys.G[1][ys.H[1]+Fs],16,Ms),Fs>>=Nr(ys.G[2][ys.H[2]+Fs],0,Ms),Nr(ys.G[3][ys.H[3]+Fs],24,Ms))}}}Pi.vc=Ti,Pi.Wb=ji,Pi.Ya=Uo,Pi.yc=Gl,di=1;break e}di=0}if(!(vn=di)){tn.a=3;break t}if(0<lr){if(kn.ua=1<<lr,!Jn(kn.Wa,lr)){tn.a=1,vn=0;break t}}else kn.ua=0;var Jl=tn,cu=xn,Lh=En,Zl=Jl.s,Ql=Zl.xc;if(Jl.c=cu,Jl.i=Lh,Zl.md=mn(cu,Ql),Zl.wc=Ql==0?-1:(1<<Ql)-1,qe){tn.xb=ih;break t}if((Yn=Se(xn*En))==null){tn.a=1,vn=0;break t}vn=(vn=Gr(tn,Yn,0,xn,En,En,null))&&!Cn.h;break t}return vn?(fn!=null?fn[0]=Yn:(t(Yn==null),t(qe)),tn.$=0,qe||Kr(kn)):Kr(kn),vn}function si(Ae,Pe){var qe=Ae.c*Ae.i,tn=qe+Pe+16*Pe;return t(Ae.c<=Pe),Ae.V=Se(tn),Ae.V==null?(Ae.Ta=null,Ae.Ua=0,Ae.a=1,0):(Ae.Ta=Ae.V,Ae.Ua=Ae.Ba+qe+Pe,1)}function Ni(Ae,Pe){var qe=Ae.C,tn=Pe-qe,fn=Ae.V,vn=Ae.Ba+Ae.c*qe;for(t(Pe<=Ae.l.o);0<tn;){var xn=16<tn?16:tn,En=Ae.l.ma,Cn=Ae.l.width,kn=Cn*xn,Yn=En.ca,lr=En.tb+Cn*qe,cr=Ae.Ta,nr=Ae.Ua;Er(Ae,xn,fn,vn),xi(cr,nr,Yn,lr,kn),Dr(En,qe,qe+xn,Yn,lr,Cn),tn-=xn,fn+=xn*Ae.c,qe+=xn}t(qe==Pe),Ae.C=Ae.Ma=Pe}function Fi(){this.ub=this.yd=this.td=this.Rb=0}function Mi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function us(){this.Fb=this.Bb=this.Cb=0,this.Zb=Se(4),this.Lb=Se(4)}function ao(){this.Yb=function(){var Ae=[];return function Pe(qe,tn,fn){for(var vn=fn[tn],xn=0;xn<vn&&(qe.push(fn.length>tn+1?[]:0),!(fn.length<tn+1));xn++)Pe(qe[xn],tn+1,fn)}(Ae,0,[3,11]),Ae}()}function hl(){this.jb=Se(3),this.Wc=Re([4,8],ao),this.Xc=Re([4,17],ao)}function dl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Se(4),this.od=new Se(4)}function Vs(){this.ld=this.La=this.dd=this.tc=0}function oo(){this.Na=this.la=0}function pl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function wa(){this.ad=Se(384),this.Za=0,this.Ob=Se(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function gl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vs),this.Y=0,this.ya=Array(new wa),this.aa=0,this.l=new $s}function lo(){this.y=Se(16),this.f=Se(8),this.ea=Se(8)}function ml(){this.cb=this.a=0,this.sc="",this.m=new Nn,this.Od=new Fi,this.Kc=new Mi,this.ed=new dl,this.Qa=new us,this.Ic=this.$c=this.Aa=0,this.D=new gl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Ee(8,Nn),this.ia=0,this.pb=Ee(4,pl),this.Pa=new hl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new lo),this.Hd=0,this.rb=Array(new oo),this.sb=0,this.wa=Array(new Vs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new wa),this.L=this.aa=0,this.gd=Re([4,2],Vs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function $s(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function bl(){var Ae=new ml;return Ae!=null&&(Ae.a=0,Ae.sc="OK",Ae.cb=0,Ae.Xb=0,Va||(Va=ho)),Ae}function vi(Ae,Pe,qe){return Ae.a==0&&(Ae.a=Pe,Ae.sc=qe,Ae.cb=0),0}function co(Ae,Pe,qe){return 3<=qe&&Ae[Pe+0]==157&&Ae[Pe+1]==1&&Ae[Pe+2]==42}function uo(Ae,Pe){if(Ae==null)return 0;if(Ae.a=0,Ae.sc="OK",Pe==null)return vi(Ae,2,"null VP8Io passed to VP8GetHeaders()");var qe=Pe.data,tn=Pe.w,fn=Pe.ha;if(4>fn)return vi(Ae,7,"Truncated header.");var vn=qe[tn+0]|qe[tn+1]<<8|qe[tn+2]<<16,xn=Ae.Od;if(xn.Rb=!(1&vn),xn.td=vn>>1&7,xn.yd=vn>>4&1,xn.ub=vn>>5,3<xn.td)return vi(Ae,3,"Incorrect keyframe parameters.");if(!xn.yd)return vi(Ae,4,"Frame not displayable.");tn+=3,fn-=3;var En=Ae.Kc;if(xn.Rb){if(7>fn)return vi(Ae,7,"cannot parse picture header");if(!co(qe,tn,fn))return vi(Ae,3,"Bad code word");En.c=16383&(qe[tn+4]<<8|qe[tn+3]),En.Td=qe[tn+4]>>6,En.i=16383&(qe[tn+6]<<8|qe[tn+5]),En.Ud=qe[tn+6]>>6,tn+=7,fn-=7,Ae.za=En.c+15>>4,Ae.Ub=En.i+15>>4,Pe.width=En.c,Pe.height=En.i,Pe.Da=0,Pe.j=0,Pe.v=0,Pe.va=Pe.width,Pe.o=Pe.height,Pe.da=0,Pe.ib=Pe.width,Pe.hb=Pe.height,Pe.U=Pe.width,Pe.T=Pe.height,_e((vn=Ae.Pa).jb,0,255,vn.jb.length),t((vn=Ae.Qa)!=null),vn.Cb=0,vn.Bb=0,vn.Fb=1,_e(vn.Zb,0,0,vn.Zb.length),_e(vn.Lb,0,0,vn.Lb)}if(xn.ub>fn)return vi(Ae,7,"bad partition length");wn(vn=Ae.m,qe,tn,xn.ub),tn+=xn.ub,fn-=xn.ub,xn.Rb&&(En.Ld=hn(vn),En.Kd=hn(vn)),En=Ae.Qa;var Cn,kn=Ae.Pa;if(t(vn!=null),t(En!=null),En.Cb=hn(vn),En.Cb){if(En.Bb=hn(vn),hn(vn)){for(En.Fb=hn(vn),Cn=0;4>Cn;++Cn)En.Zb[Cn]=hn(vn)?yn(vn,7):0;for(Cn=0;4>Cn;++Cn)En.Lb[Cn]=hn(vn)?yn(vn,6):0}if(En.Bb)for(Cn=0;3>Cn;++Cn)kn.jb[Cn]=hn(vn)?Sn(vn,8):255}else En.Bb=0;if(vn.Ka)return vi(Ae,3,"cannot parse segment header");if((En=Ae.ed).zd=hn(vn),En.Tb=Sn(vn,6),En.wb=Sn(vn,3),En.Pc=hn(vn),En.Pc&&hn(vn)){for(kn=0;4>kn;++kn)hn(vn)&&(En.vd[kn]=yn(vn,6));for(kn=0;4>kn;++kn)hn(vn)&&(En.od[kn]=yn(vn,6))}if(Ae.L=En.Tb==0?0:En.zd?1:2,vn.Ka)return vi(Ae,3,"cannot parse filter header");var Yn=fn;if(fn=Cn=tn,tn=Cn+Yn,En=Yn,Ae.Xb=(1<<Sn(Ae.m,2))-1,Yn<3*(kn=Ae.Xb))qe=7;else{for(Cn+=3*kn,En-=3*kn,Yn=0;Yn<kn;++Yn){var lr=qe[fn+0]|qe[fn+1]<<8|qe[fn+2]<<16;lr>En&&(lr=En),wn(Ae.Jc[+Yn],qe,Cn,lr),Cn+=lr,En-=lr,fn+=3}wn(Ae.Jc[+kn],qe,Cn,En),qe=Cn<tn?0:5}if(qe!=0)return vi(Ae,qe,"cannot parse partitions");for(qe=Sn(Cn=Ae.m,7),fn=hn(Cn)?yn(Cn,4):0,tn=hn(Cn)?yn(Cn,4):0,En=hn(Cn)?yn(Cn,4):0,kn=hn(Cn)?yn(Cn,4):0,Cn=hn(Cn)?yn(Cn,4):0,Yn=Ae.Qa,lr=0;4>lr;++lr){if(Yn.Cb){var cr=Yn.Zb[lr];Yn.Fb||(cr+=qe)}else{if(0<lr){Ae.pb[lr]=Ae.pb[0];continue}cr=qe}var nr=Ae.pb[lr];nr.Sc[0]=zl[Hi(cr+fn,127)],nr.Sc[1]=Hl[Hi(cr+0,127)],nr.Eb[0]=2*zl[Hi(cr+tn,127)],nr.Eb[1]=101581*Hl[Hi(cr+En,127)]>>16,8>nr.Eb[1]&&(nr.Eb[1]=8),nr.Qc[0]=zl[Hi(cr+kn,117)],nr.Qc[1]=Hl[Hi(cr+Cn,127)],nr.lc=cr+Cn}if(!xn.Rb)return vi(Ae,4,"Not a key frame.");for(hn(vn),xn=Ae.Pa,qe=0;4>qe;++qe){for(fn=0;8>fn;++fn)for(tn=0;3>tn;++tn)for(En=0;11>En;++En)kn=An(vn,nh[qe][fn][tn][En])?Sn(vn,8):th[qe][fn][tn][En],xn.Wc[qe][fn].Yb[tn][En]=kn;for(fn=0;17>fn;++fn)xn.Xc[qe][fn]=xn.Wc[qe][rh[fn]]}return Ae.kc=hn(vn),Ae.kc&&(Ae.Bd=Sn(vn,8)),Ae.cb=1}function ho(Ae,Pe,qe,tn,fn,vn,xn){var En=Pe[fn].Yb[qe];for(qe=0;16>fn;++fn){if(!An(Ae,En[qe+0]))return fn;for(;!An(Ae,En[qe+1]);)if(En=Pe[++fn].Yb[0],qe=0,fn==16)return 16;var Cn=Pe[fn+1].Yb;if(An(Ae,En[qe+2])){var kn=Ae,Yn=0;if(An(kn,(cr=En)[(lr=qe)+3]))if(An(kn,cr[lr+6])){for(En=0,lr=2*(Yn=An(kn,cr[lr+8]))+(cr=An(kn,cr[lr+9+Yn])),Yn=0,cr=Zu[lr];cr[En];++En)Yn+=Yn+An(kn,cr[En]);Yn+=3+(8<<lr)}else An(kn,cr[lr+7])?(Yn=7+2*An(kn,165),Yn+=An(kn,145)):Yn=5+An(kn,159);else Yn=An(kn,cr[lr+4])?3+An(kn,cr[lr+5]):2;En=Cn[2]}else Yn=1,En=Cn[1];Cn=xn+Qu[fn],0>(kn=Ae).b&&on(kn);var lr,cr=kn.b,nr=(lr=kn.Ca>>1)-(kn.I>>cr)>>31;--kn.b,kn.Ca+=nr,kn.Ca|=1,kn.I-=(lr+1&nr)<<cr,vn[Cn]=((Yn^nr)-nr)*tn[(0<fn)+0]}return 16}function Aa(Ae){var Pe=Ae.rb[Ae.sb-1];Pe.la=0,Pe.Na=0,_e(Ae.zc,0,0,Ae.zc.length),Ae.ja=0}function vl(Ae,Pe){if(Ae==null)return 0;if(Pe==null)return vi(Ae,2,"NULL VP8Io parameter in VP8Decode().");if(!Ae.cb&&!uo(Ae,Pe))return 0;if(t(Ae.cb),Pe.ac==null||Pe.ac(Pe)){Pe.ob&&(Ae.L=0);var qe=qo[Ae.L];if(Ae.L==2?(Ae.yb=0,Ae.zb=0):(Ae.yb=Pe.v-qe>>4,Ae.zb=Pe.j-qe>>4,0>Ae.yb&&(Ae.yb=0),0>Ae.zb&&(Ae.zb=0)),Ae.Va=Pe.o+15+qe>>4,Ae.Hb=Pe.va+15+qe>>4,Ae.Hb>Ae.za&&(Ae.Hb=Ae.za),Ae.Va>Ae.Ub&&(Ae.Va=Ae.Ub),0<Ae.L){var tn=Ae.ed;for(qe=0;4>qe;++qe){var fn;if(Ae.Qa.Cb){var vn=Ae.Qa.Lb[qe];Ae.Qa.Fb||(vn+=tn.Tb)}else vn=tn.Tb;for(fn=0;1>=fn;++fn){var xn=Ae.gd[qe][fn],En=vn;if(tn.Pc&&(En+=tn.vd[0],fn&&(En+=tn.od[0])),0<(En=0>En?0:63<En?63:En)){var Cn=En;0<tn.wb&&(Cn=4<tn.wb?Cn>>2:Cn>>1)>9-tn.wb&&(Cn=9-tn.wb),1>Cn&&(Cn=1),xn.dd=Cn,xn.tc=2*En+Cn,xn.ld=40<=En?2:15<=En?1:0}else xn.tc=0;xn.La=fn}}}qe=0}else vi(Ae,6,"Frame setup failed"),qe=Ae.a;if(qe=qe==0){if(qe){Ae.$c=0,0<Ae.Aa||(Ae.Ic=mh);t:{qe=Ae.Ic,tn=4*(Cn=Ae.za);var kn=32*Cn,Yn=Cn+1,lr=0<Ae.L?Cn*(0<Ae.Aa?2:1):0,cr=(Ae.Aa==2?2:1)*Cn;if((xn=tn+832+(fn=3*(16*qe+qo[Ae.L])/2*kn)+(vn=Ae.Fa!=null&&0<Ae.Fa.length?Ae.Kc.c*Ae.Kc.i:0))!=xn)qe=0;else{if(xn>Ae.Vb){if(Ae.Vb=0,Ae.Ec=Se(xn),Ae.Fc=0,Ae.Ec==null){qe=vi(Ae,1,"no memory during frame initialization.");break t}Ae.Vb=xn}xn=Ae.Ec,En=Ae.Fc,Ae.Ac=xn,Ae.Bc=En,En+=tn,Ae.Gd=Ee(kn,lo),Ae.Hd=0,Ae.rb=Ee(Yn+1,oo),Ae.sb=1,Ae.wa=lr?Ee(lr,Vs):null,Ae.Y=0,Ae.D.Nb=0,Ae.D.wa=Ae.wa,Ae.D.Y=Ae.Y,0<Ae.Aa&&(Ae.D.Y+=Cn),t(!0),Ae.oc=xn,Ae.pc=En,En+=832,Ae.ya=Ee(cr,wa),Ae.aa=0,Ae.D.ya=Ae.ya,Ae.D.aa=Ae.aa,Ae.Aa==2&&(Ae.D.aa+=Cn),Ae.R=16*Cn,Ae.B=8*Cn,Cn=(kn=qo[Ae.L])*Ae.R,kn=kn/2*Ae.B,Ae.sa=xn,Ae.ta=En+Cn,Ae.qa=Ae.sa,Ae.ra=Ae.ta+16*qe*Ae.R+kn,Ae.Ha=Ae.qa,Ae.Ia=Ae.ra+8*qe*Ae.B+kn,Ae.$c=0,En+=fn,Ae.mb=vn?xn:null,Ae.nb=vn?En:null,t(En+vn<=Ae.Fc+Ae.Vb),Aa(Ae),_e(Ae.Ac,Ae.Bc,0,tn),qe=1}}if(qe){if(Pe.ka=0,Pe.y=Ae.sa,Pe.O=Ae.ta,Pe.f=Ae.qa,Pe.N=Ae.ra,Pe.ea=Ae.Ha,Pe.Vd=Ae.Ia,Pe.fa=Ae.R,Pe.Rc=Ae.B,Pe.F=null,Pe.J=0,!Ro){for(qe=-255;255>=qe;++qe)Si[255+qe]=0>qe?-qe:qe;for(qe=-1020;1020>=qe;++qe)ms[1020+qe]=-128>qe?-128:127<qe?127:qe;for(qe=-112;112>=qe;++qe)Ga[112+qe]=-16>qe?-16:15<qe?15:qe;for(qe=-255;510>=qe;++qe)ha[255+qe]=0>qe?0:255<qe?255:qe;Ro=1}la=wl,gs=yl,za=po,Di=xl,Xi=go,yi=fo,ca=Ta,No=js,Ha=Ml,qs=Na,Us=Fl,Ps=Qs,zs=Ra,ua=So,Hs=_o,Ls=os,Wa=ds,Yi=kl,is[0]=as,is[1]=Al,is[2]=Pl,is[3]=Ll,is[4]=vo,is[5]=Js,is[6]=yo,is[7]=Pa,is[8]=Tl,is[9]=Cl,Cs[0]=mo,Cs[1]=Sl,Cs[2]=hs,Cs[3]=Ys,Cs[4]=Ri,Cs[5]=El,Cs[6]=bo,bs[0]=ws,bs[1]=_l,bs[2]=Nl,bs[3]=La,bs[4]=Ds,bs[5]=Rl,bs[6]=Ca,qe=1}else qe=0}qe&&(qe=function(nr,Ar){for(nr.M=0;nr.M<nr.Va;++nr.M){var mr,Kn=nr.Jc[nr.M&nr.Xb],Zn=nr.m,xr=nr;for(mr=0;mr<xr.za;++mr){var Pr=Zn,wr=xr,Hr=wr.Ac,Or=wr.Bc+4*mr,Yr=wr.zc,Br=wr.ya[wr.aa+mr];if(wr.Qa.Bb?Br.$b=An(Pr,wr.Pa.jb[0])?2+An(Pr,wr.Pa.jb[2]):An(Pr,wr.Pa.jb[1]):Br.$b=0,wr.kc&&(Br.Ad=An(Pr,wr.Bd)),Br.Za=!An(Pr,145)+0,Br.Za){var ai=Br.Ob,ci=0;for(wr=0;4>wr;++wr){var ii,ni=Yr[0+wr];for(ii=0;4>ii;++ii){ni=eh[Hr[Or+ii]][ni];for(var di=qc[An(Pr,ni[0])];0<di;)di=qc[2*di+An(Pr,ni[di])];ni=-di,Hr[Or+ii]=ni}e(ai,ci,Hr,Or,4),ci+=4,Yr[0+wr]=ni}}else ni=An(Pr,156)?An(Pr,128)?1:3:An(Pr,163)?2:0,Br.Ob[0]=ni,_e(Hr,Or,ni,4),_e(Yr,0,ni,4);Br.Dd=An(Pr,142)?An(Pr,114)?An(Pr,183)?1:3:2:0}if(xr.m.Ka)return vi(nr,7,"Premature end-of-partition0 encountered.");for(;nr.ja<nr.za;++nr.ja){if(xr=Kn,Pr=(Zn=nr).rb[Zn.sb-1],Hr=Zn.rb[Zn.sb+Zn.ja],mr=Zn.ya[Zn.aa+Zn.ja],Or=Zn.kc?mr.Ad:0)Pr.la=Hr.la=0,mr.Za||(Pr.Na=Hr.Na=0),mr.Hc=0,mr.Gc=0,mr.ia=0;else{var hi,ei;if(Pr=Hr,Hr=xr,Or=Zn.Pa.Xc,Yr=Zn.ya[Zn.aa+Zn.ja],Br=Zn.pb[Yr.$b],wr=Yr.ad,ai=0,ci=Zn.rb[Zn.sb-1],ni=ii=0,_e(wr,ai,0,384),Yr.Za)var Ai=0,Ui=Or[3];else{di=Se(16);var _i=Pr.Na+ci.Na;if(_i=Va(Hr,Or[1],_i,Br.Eb,0,di,0),Pr.Na=ci.Na=(0<_i)+0,1<_i)la(di,0,wr,ai);else{var zi=di[0]+3>>3;for(di=0;256>di;di+=16)wr[ai+di]=zi}Ai=1,Ui=Or[0]}var ui=15&Pr.la,Gi=15&ci.la;for(di=0;4>di;++di){var Vi=1&Gi;for(zi=ei=0;4>zi;++zi)ui=ui>>1|(Vi=(_i=Va(Hr,Ui,_i=Vi+(1&ui),Br.Sc,Ai,wr,ai))>Ai)<<7,ei=ei<<2|(3<_i?3:1<_i?2:wr[ai+0]!=0),ai+=16;ui>>=4,Gi=Gi>>1|Vi<<7,ii=(ii<<8|ei)>>>0}for(Ui=ui,Ai=Gi>>4,hi=0;4>hi;hi+=2){for(ei=0,ui=Pr.la>>4+hi,Gi=ci.la>>4+hi,di=0;2>di;++di){for(Vi=1&Gi,zi=0;2>zi;++zi)_i=Vi+(1&ui),ui=ui>>1|(Vi=0<(_i=Va(Hr,Or[2],_i,Br.Qc,0,wr,ai)))<<3,ei=ei<<2|(3<_i?3:1<_i?2:wr[ai+0]!=0),ai+=16;ui>>=2,Gi=Gi>>1|Vi<<5}ni|=ei<<4*hi,Ui|=ui<<4<<hi,Ai|=(240&Gi)<<hi}Pr.la=Ui,ci.la=Ai,Yr.Hc=ii,Yr.Gc=ni,Yr.ia=43690&ni?0:Br.ia,Or=!(ii|ni)}if(0<Zn.L&&(Zn.wa[Zn.Y+Zn.ja]=Zn.gd[mr.$b][mr.Za],Zn.wa[Zn.Y+Zn.ja].La|=!Or),xr.Ka)return vi(nr,7,"Premature end-of-file encountered.")}if(Aa(nr),Zn=Ar,xr=1,mr=(Kn=nr).D,Pr=0<Kn.L&&Kn.M>=Kn.zb&&Kn.M<=Kn.Va,Kn.Aa==0)t:{if(mr.M=Kn.M,mr.uc=Pr,ja(Kn,mr),xr=1,mr=(ei=Kn.D).Nb,Pr=(ni=qo[Kn.L])*Kn.R,Hr=ni/2*Kn.B,di=16*mr*Kn.R,zi=8*mr*Kn.B,Or=Kn.sa,Yr=Kn.ta-Pr+di,Br=Kn.qa,wr=Kn.ra-Hr+zi,ai=Kn.Ha,ci=Kn.Ia-Hr+zi,Gi=(ui=ei.M)==0,ii=ui>=Kn.Va-1,Kn.Aa==2&&ja(Kn,ei),ei.uc)for(Vi=(_i=Kn).D.M,t(_i.D.uc),ei=_i.yb;ei<_i.Hb;++ei){Ai=ei,Ui=Vi;var Pi=(Ti=(bi=_i).D).Nb;hi=bi.R;var Ti=Ti.wa[Ti.Y+Ai],ji=bi.sa,Qi=bi.ta+16*Pi*hi+16*Ai,cs=Ti.dd,Li=Ti.tc;if(Li!=0)if(t(3<=Li),bi.L==1)0<Ai&&Ls(ji,Qi,hi,Li+4),Ti.La&&Yi(ji,Qi,hi,Li),0<Ui&&Hs(ji,Qi,hi,Li+4),Ti.La&&Wa(ji,Qi,hi,Li);else{var vs=bi.B,Ws=bi.qa,da=bi.ra+8*Pi*vs+8*Ai,Ns=bi.Ha,bi=bi.Ia+8*Pi*vs+8*Ai;Pi=Ti.ld,0<Ai&&(No(ji,Qi,hi,Li+4,cs,Pi),qs(Ws,da,Ns,bi,vs,Li+4,cs,Pi)),Ti.La&&(Ps(ji,Qi,hi,Li,cs,Pi),ua(Ws,da,Ns,bi,vs,Li,cs,Pi)),0<Ui&&(ca(ji,Qi,hi,Li+4,cs,Pi),Ha(Ws,da,Ns,bi,vs,Li+4,cs,Pi)),Ti.La&&(Us(ji,Qi,hi,Li,cs,Pi),zs(Ws,da,Ns,bi,vs,Li,cs,Pi))}}if(Kn.ia&&alert("todo:DitherRow"),Zn.put!=null){if(ei=16*ui,ui=16*(ui+1),Gi?(Zn.y=Kn.sa,Zn.O=Kn.ta+di,Zn.f=Kn.qa,Zn.N=Kn.ra+zi,Zn.ea=Kn.Ha,Zn.W=Kn.Ia+zi):(ei-=ni,Zn.y=Or,Zn.O=Yr,Zn.f=Br,Zn.N=wr,Zn.ea=ai,Zn.W=ci),ii||(ui-=ni),ui>Zn.o&&(ui=Zn.o),Zn.F=null,Zn.J=null,Kn.Fa!=null&&0<Kn.Fa.length&&ei<ui&&(Zn.J=Ia(Kn,Zn,ei,ui-ei),Zn.F=Kn.mb,Zn.F==null&&Zn.F.length==0)){xr=vi(Kn,3,"Could not decode alpha data.");break t}ei<Zn.j&&(ni=Zn.j-ei,ei=Zn.j,t(!(1&ni)),Zn.O+=Kn.R*ni,Zn.N+=Kn.B*(ni>>1),Zn.W+=Kn.B*(ni>>1),Zn.F!=null&&(Zn.J+=Zn.width*ni)),ei<ui&&(Zn.O+=Zn.v,Zn.N+=Zn.v>>1,Zn.W+=Zn.v>>1,Zn.F!=null&&(Zn.J+=Zn.v),Zn.ka=ei-Zn.j,Zn.U=Zn.va-Zn.v,Zn.T=ui-ei,xr=Zn.put(Zn))}mr+1!=Kn.Ic||ii||(e(Kn.sa,Kn.ta-Pr,Or,Yr+16*Kn.R,Pr),e(Kn.qa,Kn.ra-Hr,Br,wr+8*Kn.B,Hr),e(Kn.Ha,Kn.Ia-Hr,ai,ci+8*Kn.B,Hr))}if(!xr)return vi(nr,6,"Output aborted.")}return 1}(Ae,Pe)),Pe.bc!=null&&Pe.bc(Pe),qe&=1}return qe?(Ae.cb=0,qe):0}function es(Ae,Pe,qe,tn,fn){fn=Ae[Pe+qe+32*tn]+(fn>>3),Ae[Pe+qe+32*tn]=-256&fn?0>fn?0:255:fn}function Xs(Ae,Pe,qe,tn,fn,vn){es(Ae,Pe,0,qe,tn+fn),es(Ae,Pe,1,qe,tn+vn),es(Ae,Pe,2,qe,tn-vn),es(Ae,Pe,3,qe,tn-fn)}function Oi(Ae){return(20091*Ae>>16)+Ae}function Sa(Ae,Pe,qe,tn){var fn,vn=0,xn=Se(16);for(fn=0;4>fn;++fn){var En=Ae[Pe+0]+Ae[Pe+8],Cn=Ae[Pe+0]-Ae[Pe+8],kn=(35468*Ae[Pe+4]>>16)-Oi(Ae[Pe+12]),Yn=Oi(Ae[Pe+4])+(35468*Ae[Pe+12]>>16);xn[vn+0]=En+Yn,xn[vn+1]=Cn+kn,xn[vn+2]=Cn-kn,xn[vn+3]=En-Yn,vn+=4,Pe++}for(fn=vn=0;4>fn;++fn)En=(Ae=xn[vn+0]+4)+xn[vn+8],Cn=Ae-xn[vn+8],kn=(35468*xn[vn+4]>>16)-Oi(xn[vn+12]),es(qe,tn,0,0,En+(Yn=Oi(xn[vn+4])+(35468*xn[vn+12]>>16))),es(qe,tn,1,0,Cn+kn),es(qe,tn,2,0,Cn-kn),es(qe,tn,3,0,En-Yn),vn++,tn+=32}function fo(Ae,Pe,qe,tn){var fn=Ae[Pe+0]+4,vn=35468*Ae[Pe+4]>>16,xn=Oi(Ae[Pe+4]),En=35468*Ae[Pe+1]>>16;Xs(qe,tn,0,fn+xn,Ae=Oi(Ae[Pe+1]),En),Xs(qe,tn,1,fn+vn,Ae,En),Xs(qe,tn,2,fn-vn,Ae,En),Xs(qe,tn,3,fn-xn,Ae,En)}function yl(Ae,Pe,qe,tn,fn){Sa(Ae,Pe,qe,tn),fn&&Sa(Ae,Pe+16,qe,tn+4)}function po(Ae,Pe,qe,tn){gs(Ae,Pe+0,qe,tn,1),gs(Ae,Pe+32,qe,tn+128,1)}function xl(Ae,Pe,qe,tn){var fn;for(Ae=Ae[Pe+0]+4,fn=0;4>fn;++fn)for(Pe=0;4>Pe;++Pe)es(qe,tn,Pe,fn,Ae)}function go(Ae,Pe,qe,tn){Ae[Pe+0]&&Di(Ae,Pe+0,qe,tn),Ae[Pe+16]&&Di(Ae,Pe+16,qe,tn+4),Ae[Pe+32]&&Di(Ae,Pe+32,qe,tn+128),Ae[Pe+48]&&Di(Ae,Pe+48,qe,tn+128+4)}function wl(Ae,Pe,qe,tn){var fn,vn=Se(16);for(fn=0;4>fn;++fn){var xn=Ae[Pe+0+fn]+Ae[Pe+12+fn],En=Ae[Pe+4+fn]+Ae[Pe+8+fn],Cn=Ae[Pe+4+fn]-Ae[Pe+8+fn],kn=Ae[Pe+0+fn]-Ae[Pe+12+fn];vn[0+fn]=xn+En,vn[8+fn]=xn-En,vn[4+fn]=kn+Cn,vn[12+fn]=kn-Cn}for(fn=0;4>fn;++fn)xn=(Ae=vn[0+4*fn]+3)+vn[3+4*fn],En=vn[1+4*fn]+vn[2+4*fn],Cn=vn[1+4*fn]-vn[2+4*fn],kn=Ae-vn[3+4*fn],qe[tn+0]=xn+En>>3,qe[tn+16]=kn+Cn>>3,qe[tn+32]=xn-En>>3,qe[tn+48]=kn-Cn>>3,tn+=64}function Ea(Ae,Pe,qe){var tn,fn=Pe-32,vn=Wi,xn=255-Ae[fn-1];for(tn=0;tn<qe;++tn){var En,Cn=vn,kn=xn+Ae[Pe-1];for(En=0;En<qe;++En)Ae[Pe+En]=Cn[kn+Ae[fn+En]];Pe+=32}}function Al(Ae,Pe){Ea(Ae,Pe,4)}function _l(Ae,Pe){Ea(Ae,Pe,8)}function Sl(Ae,Pe){Ea(Ae,Pe,16)}function hs(Ae,Pe){var qe;for(qe=0;16>qe;++qe)e(Ae,Pe+32*qe,Ae,Pe-32,16)}function Ys(Ae,Pe){var qe;for(qe=16;0<qe;--qe)_e(Ae,Pe,Ae[Pe-1],16),Pe+=32}function Ks(Ae,Pe,qe){var tn;for(tn=0;16>tn;++tn)_e(Pe,qe+32*tn,Ae,16)}function mo(Ae,Pe){var qe,tn=16;for(qe=0;16>qe;++qe)tn+=Ae[Pe-1+32*qe]+Ae[Pe+qe-32];Ks(tn>>5,Ae,Pe)}function Ri(Ae,Pe){var qe,tn=8;for(qe=0;16>qe;++qe)tn+=Ae[Pe-1+32*qe];Ks(tn>>4,Ae,Pe)}function El(Ae,Pe){var qe,tn=8;for(qe=0;16>qe;++qe)tn+=Ae[Pe+qe-32];Ks(tn>>4,Ae,Pe)}function bo(Ae,Pe){Ks(128,Ae,Pe)}function Jr(Ae,Pe,qe){return Ae+2*Pe+qe+2>>2}function Pl(Ae,Pe){var qe,tn=Pe-32;for(tn=new Uint8Array([Jr(Ae[tn-1],Ae[tn+0],Ae[tn+1]),Jr(Ae[tn+0],Ae[tn+1],Ae[tn+2]),Jr(Ae[tn+1],Ae[tn+2],Ae[tn+3]),Jr(Ae[tn+2],Ae[tn+3],Ae[tn+4])]),qe=0;4>qe;++qe)e(Ae,Pe+32*qe,tn,0,tn.length)}function Ll(Ae,Pe){var qe=Ae[Pe-1],tn=Ae[Pe-1+32],fn=Ae[Pe-1+64],vn=Ae[Pe-1+96];Mn(Ae,Pe+0,16843009*Jr(Ae[Pe-1-32],qe,tn)),Mn(Ae,Pe+32,16843009*Jr(qe,tn,fn)),Mn(Ae,Pe+64,16843009*Jr(tn,fn,vn)),Mn(Ae,Pe+96,16843009*Jr(fn,vn,vn))}function as(Ae,Pe){var qe,tn=4;for(qe=0;4>qe;++qe)tn+=Ae[Pe+qe-32]+Ae[Pe-1+32*qe];for(tn>>=3,qe=0;4>qe;++qe)_e(Ae,Pe+32*qe,tn,4)}function vo(Ae,Pe){var qe=Ae[Pe-1+0],tn=Ae[Pe-1+32],fn=Ae[Pe-1+64],vn=Ae[Pe-1-32],xn=Ae[Pe+0-32],En=Ae[Pe+1-32],Cn=Ae[Pe+2-32],kn=Ae[Pe+3-32];Ae[Pe+0+96]=Jr(tn,fn,Ae[Pe-1+96]),Ae[Pe+1+96]=Ae[Pe+0+64]=Jr(qe,tn,fn),Ae[Pe+2+96]=Ae[Pe+1+64]=Ae[Pe+0+32]=Jr(vn,qe,tn),Ae[Pe+3+96]=Ae[Pe+2+64]=Ae[Pe+1+32]=Ae[Pe+0+0]=Jr(xn,vn,qe),Ae[Pe+3+64]=Ae[Pe+2+32]=Ae[Pe+1+0]=Jr(En,xn,vn),Ae[Pe+3+32]=Ae[Pe+2+0]=Jr(Cn,En,xn),Ae[Pe+3+0]=Jr(kn,Cn,En)}function yo(Ae,Pe){var qe=Ae[Pe+1-32],tn=Ae[Pe+2-32],fn=Ae[Pe+3-32],vn=Ae[Pe+4-32],xn=Ae[Pe+5-32],En=Ae[Pe+6-32],Cn=Ae[Pe+7-32];Ae[Pe+0+0]=Jr(Ae[Pe+0-32],qe,tn),Ae[Pe+1+0]=Ae[Pe+0+32]=Jr(qe,tn,fn),Ae[Pe+2+0]=Ae[Pe+1+32]=Ae[Pe+0+64]=Jr(tn,fn,vn),Ae[Pe+3+0]=Ae[Pe+2+32]=Ae[Pe+1+64]=Ae[Pe+0+96]=Jr(fn,vn,xn),Ae[Pe+3+32]=Ae[Pe+2+64]=Ae[Pe+1+96]=Jr(vn,xn,En),Ae[Pe+3+64]=Ae[Pe+2+96]=Jr(xn,En,Cn),Ae[Pe+3+96]=Jr(En,Cn,Cn)}function Js(Ae,Pe){var qe=Ae[Pe-1+0],tn=Ae[Pe-1+32],fn=Ae[Pe-1+64],vn=Ae[Pe-1-32],xn=Ae[Pe+0-32],En=Ae[Pe+1-32],Cn=Ae[Pe+2-32],kn=Ae[Pe+3-32];Ae[Pe+0+0]=Ae[Pe+1+64]=vn+xn+1>>1,Ae[Pe+1+0]=Ae[Pe+2+64]=xn+En+1>>1,Ae[Pe+2+0]=Ae[Pe+3+64]=En+Cn+1>>1,Ae[Pe+3+0]=Cn+kn+1>>1,Ae[Pe+0+96]=Jr(fn,tn,qe),Ae[Pe+0+64]=Jr(tn,qe,vn),Ae[Pe+0+32]=Ae[Pe+1+96]=Jr(qe,vn,xn),Ae[Pe+1+32]=Ae[Pe+2+96]=Jr(vn,xn,En),Ae[Pe+2+32]=Ae[Pe+3+96]=Jr(xn,En,Cn),Ae[Pe+3+32]=Jr(En,Cn,kn)}function Pa(Ae,Pe){var qe=Ae[Pe+0-32],tn=Ae[Pe+1-32],fn=Ae[Pe+2-32],vn=Ae[Pe+3-32],xn=Ae[Pe+4-32],En=Ae[Pe+5-32],Cn=Ae[Pe+6-32],kn=Ae[Pe+7-32];Ae[Pe+0+0]=qe+tn+1>>1,Ae[Pe+1+0]=Ae[Pe+0+64]=tn+fn+1>>1,Ae[Pe+2+0]=Ae[Pe+1+64]=fn+vn+1>>1,Ae[Pe+3+0]=Ae[Pe+2+64]=vn+xn+1>>1,Ae[Pe+0+32]=Jr(qe,tn,fn),Ae[Pe+1+32]=Ae[Pe+0+96]=Jr(tn,fn,vn),Ae[Pe+2+32]=Ae[Pe+1+96]=Jr(fn,vn,xn),Ae[Pe+3+32]=Ae[Pe+2+96]=Jr(vn,xn,En),Ae[Pe+3+64]=Jr(xn,En,Cn),Ae[Pe+3+96]=Jr(En,Cn,kn)}function Cl(Ae,Pe){var qe=Ae[Pe-1+0],tn=Ae[Pe-1+32],fn=Ae[Pe-1+64],vn=Ae[Pe-1+96];Ae[Pe+0+0]=qe+tn+1>>1,Ae[Pe+2+0]=Ae[Pe+0+32]=tn+fn+1>>1,Ae[Pe+2+32]=Ae[Pe+0+64]=fn+vn+1>>1,Ae[Pe+1+0]=Jr(qe,tn,fn),Ae[Pe+3+0]=Ae[Pe+1+32]=Jr(tn,fn,vn),Ae[Pe+3+32]=Ae[Pe+1+64]=Jr(fn,vn,vn),Ae[Pe+3+64]=Ae[Pe+2+64]=Ae[Pe+0+96]=Ae[Pe+1+96]=Ae[Pe+2+96]=Ae[Pe+3+96]=vn}function Tl(Ae,Pe){var qe=Ae[Pe-1+0],tn=Ae[Pe-1+32],fn=Ae[Pe-1+64],vn=Ae[Pe-1+96],xn=Ae[Pe-1-32],En=Ae[Pe+0-32],Cn=Ae[Pe+1-32],kn=Ae[Pe+2-32];Ae[Pe+0+0]=Ae[Pe+2+32]=qe+xn+1>>1,Ae[Pe+0+32]=Ae[Pe+2+64]=tn+qe+1>>1,Ae[Pe+0+64]=Ae[Pe+2+96]=fn+tn+1>>1,Ae[Pe+0+96]=vn+fn+1>>1,Ae[Pe+3+0]=Jr(En,Cn,kn),Ae[Pe+2+0]=Jr(xn,En,Cn),Ae[Pe+1+0]=Ae[Pe+3+32]=Jr(qe,xn,En),Ae[Pe+1+32]=Ae[Pe+3+64]=Jr(tn,qe,xn),Ae[Pe+1+64]=Ae[Pe+3+96]=Jr(fn,tn,qe),Ae[Pe+1+96]=Jr(vn,fn,tn)}function Nl(Ae,Pe){var qe;for(qe=0;8>qe;++qe)e(Ae,Pe+32*qe,Ae,Pe-32,8)}function La(Ae,Pe){var qe;for(qe=0;8>qe;++qe)_e(Ae,Pe,Ae[Pe-1],8),Pe+=32}function Is(Ae,Pe,qe){var tn;for(tn=0;8>tn;++tn)_e(Pe,qe+32*tn,Ae,8)}function ws(Ae,Pe){var qe,tn=8;for(qe=0;8>qe;++qe)tn+=Ae[Pe+qe-32]+Ae[Pe-1+32*qe];Is(tn>>4,Ae,Pe)}function Rl(Ae,Pe){var qe,tn=4;for(qe=0;8>qe;++qe)tn+=Ae[Pe+qe-32];Is(tn>>3,Ae,Pe)}function Ds(Ae,Pe){var qe,tn=4;for(qe=0;8>qe;++qe)tn+=Ae[Pe-1+32*qe];Is(tn>>3,Ae,Pe)}function Ca(Ae,Pe){Is(128,Ae,Pe)}function Zs(Ae,Pe,qe){var tn=Ae[Pe-qe],fn=Ae[Pe+0],vn=3*(fn-tn)+jl[1020+Ae[Pe-2*qe]-Ae[Pe+qe]],xn=ko[112+(vn+4>>3)];Ae[Pe-qe]=Wi[255+tn+ko[112+(vn+3>>3)]],Ae[Pe+0]=Wi[255+fn-xn]}function xo(Ae,Pe,qe,tn){var fn=Ae[Pe+0],vn=Ae[Pe+qe];return Ji[255+Ae[Pe-2*qe]-Ae[Pe-qe]]>tn||Ji[255+vn-fn]>tn}function wo(Ae,Pe,qe,tn){return 4*Ji[255+Ae[Pe-qe]-Ae[Pe+0]]+Ji[255+Ae[Pe-2*qe]-Ae[Pe+qe]]<=tn}function Ao(Ae,Pe,qe,tn,fn){var vn=Ae[Pe-3*qe],xn=Ae[Pe-2*qe],En=Ae[Pe-qe],Cn=Ae[Pe+0],kn=Ae[Pe+qe],Yn=Ae[Pe+2*qe],lr=Ae[Pe+3*qe];return 4*Ji[255+En-Cn]+Ji[255+xn-kn]>tn?0:Ji[255+Ae[Pe-4*qe]-vn]<=fn&&Ji[255+vn-xn]<=fn&&Ji[255+xn-En]<=fn&&Ji[255+lr-Yn]<=fn&&Ji[255+Yn-kn]<=fn&&Ji[255+kn-Cn]<=fn}function _o(Ae,Pe,qe,tn){var fn=2*tn+1;for(tn=0;16>tn;++tn)wo(Ae,Pe+tn,qe,fn)&&Zs(Ae,Pe+tn,qe)}function os(Ae,Pe,qe,tn){var fn=2*tn+1;for(tn=0;16>tn;++tn)wo(Ae,Pe+tn*qe,1,fn)&&Zs(Ae,Pe+tn*qe,1)}function ds(Ae,Pe,qe,tn){var fn;for(fn=3;0<fn;--fn)_o(Ae,Pe+=4*qe,qe,tn)}function kl(Ae,Pe,qe,tn){var fn;for(fn=3;0<fn;--fn)os(Ae,Pe+=4,qe,tn)}function As(Ae,Pe,qe,tn,fn,vn,xn,En){for(vn=2*vn+1;0<fn--;){if(Ao(Ae,Pe,qe,vn,xn))if(xo(Ae,Pe,qe,En))Zs(Ae,Pe,qe);else{var Cn=Ae,kn=Pe,Yn=qe,lr=Cn[kn-2*Yn],cr=Cn[kn-Yn],nr=Cn[kn+0],Ar=Cn[kn+Yn],mr=Cn[kn+2*Yn],Kn=27*(xr=jl[1020+3*(nr-cr)+jl[1020+lr-Ar]])+63>>7,Zn=18*xr+63>>7,xr=9*xr+63>>7;Cn[kn-3*Yn]=Wi[255+Cn[kn-3*Yn]+xr],Cn[kn-2*Yn]=Wi[255+lr+Zn],Cn[kn-Yn]=Wi[255+cr+Kn],Cn[kn+0]=Wi[255+nr-Kn],Cn[kn+Yn]=Wi[255+Ar-Zn],Cn[kn+2*Yn]=Wi[255+mr-xr]}Pe+=tn}}function ns(Ae,Pe,qe,tn,fn,vn,xn,En){for(vn=2*vn+1;0<fn--;){if(Ao(Ae,Pe,qe,vn,xn))if(xo(Ae,Pe,qe,En))Zs(Ae,Pe,qe);else{var Cn=Ae,kn=Pe,Yn=qe,lr=Cn[kn-Yn],cr=Cn[kn+0],nr=Cn[kn+Yn],Ar=ko[112+((mr=3*(cr-lr))+4>>3)],mr=ko[112+(mr+3>>3)],Kn=Ar+1>>1;Cn[kn-2*Yn]=Wi[255+Cn[kn-2*Yn]+Kn],Cn[kn-Yn]=Wi[255+lr+mr],Cn[kn+0]=Wi[255+cr-Ar],Cn[kn+Yn]=Wi[255+nr-Kn]}Pe+=tn}}function Ta(Ae,Pe,qe,tn,fn,vn){As(Ae,Pe,qe,1,16,tn,fn,vn)}function js(Ae,Pe,qe,tn,fn,vn){As(Ae,Pe,1,qe,16,tn,fn,vn)}function Fl(Ae,Pe,qe,tn,fn,vn){var xn;for(xn=3;0<xn;--xn)ns(Ae,Pe+=4*qe,qe,1,16,tn,fn,vn)}function Qs(Ae,Pe,qe,tn,fn,vn){var xn;for(xn=3;0<xn;--xn)ns(Ae,Pe+=4,1,qe,16,tn,fn,vn)}function Ml(Ae,Pe,qe,tn,fn,vn,xn,En){As(Ae,Pe,fn,1,8,vn,xn,En),As(qe,tn,fn,1,8,vn,xn,En)}function Na(Ae,Pe,qe,tn,fn,vn,xn,En){As(Ae,Pe,1,fn,8,vn,xn,En),As(qe,tn,1,fn,8,vn,xn,En)}function Ra(Ae,Pe,qe,tn,fn,vn,xn,En){ns(Ae,Pe+4*fn,fn,1,8,vn,xn,En),ns(qe,tn+4*fn,fn,1,8,vn,xn,En)}function So(Ae,Pe,qe,tn,fn,vn,xn,En){ns(Ae,Pe+4,1,fn,8,vn,xn,En),ns(qe,tn+4,1,fn,8,vn,xn,En)}function ta(){this.ba=new Fn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ka(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Fa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Eo(){this.ua=0,this.Wa=new cn,this.vb=new cn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new dn,this.yc=new Ge}function Il(){this.xb=this.a=0,this.l=new $s,this.ca=new Fn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new je,this.Pb=0,this.wd=new je,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Eo,this.ab=0,this.gc=Ee(4,Fa),this.Oc=0}function ea(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new $s,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Os(Ae,Pe,qe,tn,fn,vn,xn){for(Ae=Ae==null?0:Ae[Pe+0],Pe=0;Pe<xn;++Pe)fn[vn+Pe]=Ae+qe[tn+Pe]&255,Ae=fn[vn+Pe]}function Ma(Ae,Pe,qe,tn,fn,vn,xn){var En;if(Ae==null)Os(null,null,qe,tn,fn,vn,xn);else for(En=0;En<xn;++En)fn[vn+En]=Ae[Pe+En]+qe[tn+En]&255}function _s(Ae,Pe,qe,tn,fn,vn,xn){if(Ae==null)Os(null,null,qe,tn,fn,vn,xn);else{var En,Cn=Ae[Pe+0],kn=Cn,Yn=Cn;for(En=0;En<xn;++En)kn=Yn+(Cn=Ae[Pe+En])-kn,Yn=qe[tn+En]+(-256&kn?0>kn?0:255:kn)&255,kn=Cn,fn[vn+En]=Yn}}function Ia(Ae,Pe,qe,tn){var fn=Pe.width,vn=Pe.o;if(t(Ae!=null&&Pe!=null),0>qe||0>=tn||qe+tn>vn)return null;if(!Ae.Cc){if(Ae.ga==null){var xn;if(Ae.ga=new ea,(xn=Ae.ga==null)||(xn=Pe.width*Pe.o,t(Ae.Gb.length==0),Ae.Gb=Se(xn),Ae.Uc=0,Ae.Gb==null?xn=0:(Ae.mb=Ae.Gb,Ae.nb=Ae.Uc,Ae.rc=null,xn=1),xn=!xn),!xn){xn=Ae.ga;var En=Ae.Fa,Cn=Ae.P,kn=Ae.qc,Yn=Ae.mb,lr=Ae.nb,cr=Cn+1,nr=kn-1,Ar=xn.l;if(t(En!=null&&Yn!=null&&Pe!=null),Ts[0]=null,Ts[1]=Os,Ts[2]=Ma,Ts[3]=_s,xn.ca=Yn,xn.tb=lr,xn.c=Pe.width,xn.i=Pe.height,t(0<xn.c&&0<xn.i),1>=kn)Pe=0;else if(xn.$a=En[Cn+0]>>0&3,xn.Z=En[Cn+0]>>2&3,xn.Lc=En[Cn+0]>>4&3,Cn=En[Cn+0]>>6&3,0>xn.$a||1<xn.$a||4<=xn.Z||1<xn.Lc||Cn)Pe=0;else if(Ar.put=Ln,Ar.ac=Tn,Ar.bc=Un,Ar.ma=xn,Ar.width=Pe.width,Ar.height=Pe.height,Ar.Da=Pe.Da,Ar.v=Pe.v,Ar.va=Pe.va,Ar.j=Pe.j,Ar.o=Pe.o,xn.$a)t:{t(xn.$a==1),Pe=Zr();e:for(;;){if(Pe==null){Pe=0;break t}if(t(xn!=null),xn.mc=Pe,Pe.c=xn.c,Pe.i=xn.i,Pe.l=xn.l,Pe.l.ma=xn,Pe.l.width=xn.c,Pe.l.height=xn.i,Pe.a=0,Pn(Pe.m,En,cr,nr),!li(xn.c,xn.i,1,Pe,null)||(Pe.ab==1&&Pe.gc[0].hc==3&&Fr(Pe.s)?(xn.ic=1,En=Pe.c*Pe.i,Pe.Ta=null,Pe.Ua=0,Pe.V=Se(En),Pe.Ba=0,Pe.V==null?(Pe.a=1,Pe=0):Pe=1):(xn.ic=0,Pe=si(Pe,xn.c)),!Pe))break e;Pe=1;break t}xn.mc=null,Pe=0}else Pe=nr>=xn.c*xn.i;xn=!Pe}if(xn)return null;Ae.ga.Lc!=1?Ae.Ga=0:tn=vn-qe}t(Ae.ga!=null),t(qe+tn<=vn);t:{if(Pe=(En=Ae.ga).c,vn=En.l.o,En.$a==0){if(cr=Ae.rc,nr=Ae.Vc,Ar=Ae.Fa,Cn=Ae.P+1+qe*Pe,kn=Ae.mb,Yn=Ae.nb+qe*Pe,t(Cn<=Ae.P+Ae.qc),En.Z!=0)for(t(Ts[En.Z]!=null),xn=0;xn<tn;++xn)Ts[En.Z](cr,nr,Ar,Cn,kn,Yn,Pe),cr=kn,nr=Yn,Yn+=Pe,Cn+=Pe;else for(xn=0;xn<tn;++xn)e(kn,Yn,Ar,Cn,Pe),cr=kn,nr=Yn,Yn+=Pe,Cn+=Pe;Ae.rc=cr,Ae.Vc=nr}else{if(t(En.mc!=null),Pe=qe+tn,t((xn=En.mc)!=null),t(Pe<=xn.i),xn.C>=Pe)Pe=1;else if(En.ic||ar(),En.ic){En=xn.V,cr=xn.Ba,nr=xn.c;var mr=xn.i,Kn=(Ar=1,Cn=xn.$/nr,kn=xn.$%nr,Yn=xn.m,lr=xn.s,xn.$),Zn=nr*mr,xr=nr*Pe,Pr=lr.wc,wr=Kn<xr?Tr(lr,kn,Cn):null;t(Kn<=Zn),t(Pe<=mr),t(Fr(lr));e:for(;;){for(;!Yn.h&&Kn<xr;){if(kn&Pr||(wr=Tr(lr,kn,Cn)),t(wr!=null),sn(Yn),256>(mr=gr(wr.G[0],wr.H[0],Yn)))En[cr+Kn]=mr,++Kn,++kn>=nr&&(kn=0,++Cn<=Pe&&!(Cn%16)&&Ur(xn,Cn));else{if(!(280>mr)){Ar=0;break e}mr=sr(mr-256,Yn);var Hr,Or=gr(wr.G[4],wr.H[4],Yn);if(sn(Yn),!(Kn>=(Or=dr(nr,Or=sr(Or,Yn)))&&Zn-Kn>=mr)){Ar=0;break e}for(Hr=0;Hr<mr;++Hr)En[cr+Kn+Hr]=En[cr+Kn+Hr-Or];for(Kn+=mr,kn+=mr;kn>=nr;)kn-=nr,++Cn<=Pe&&!(Cn%16)&&Ur(xn,Cn);Kn<xr&&kn&Pr&&(wr=Tr(lr,kn,Cn))}t(Yn.h==Oe(Yn))}Ur(xn,Cn>Pe?Pe:Cn);break e}!Ar||Yn.h&&Kn<Zn?(Ar=0,xn.a=Yn.h?5:3):xn.$=Kn,Pe=Ar}else Pe=Gr(xn,xn.V,xn.Ba,xn.c,xn.i,Pe,Ni);if(!Pe){tn=0;break t}}qe+tn>=vn&&(Ae.Cc=1),tn=1}if(!tn)return null;if(Ae.Cc&&((tn=Ae.ga)!=null&&(tn.mc=null),Ae.ga=null,0<Ae.Ga))return alert("todo:WebPDequantizeLevels"),null}return Ae.nb+qe*fn}function Fe(Ae,Pe,qe,tn,fn,vn){for(;0<fn--;){var xn,En=Ae,Cn=Pe+(qe?1:0),kn=Ae,Yn=Pe+(qe?0:3);for(xn=0;xn<tn;++xn){var lr=kn[Yn+4*xn];lr!=255&&(lr*=32897,En[Cn+4*xn+0]=En[Cn+4*xn+0]*lr>>23,En[Cn+4*xn+1]=En[Cn+4*xn+1]*lr>>23,En[Cn+4*xn+2]=En[Cn+4*xn+2]*lr>>23)}Pe+=vn}}function pn(Ae,Pe,qe,tn,fn){for(;0<tn--;){var vn;for(vn=0;vn<qe;++vn){var xn=Ae[Pe+2*vn+0],En=15&(kn=Ae[Pe+2*vn+1]),Cn=4369*En,kn=(240&kn|kn>>4)*Cn>>16;Ae[Pe+2*vn+0]=(240&xn|xn>>4)*Cn>>16&240|(15&xn|xn<<4)*Cn>>16>>4&15,Ae[Pe+2*vn+1]=240&kn|En}Pe+=fn}}function jn(Ae,Pe,qe,tn,fn,vn,xn,En){var Cn,kn,Yn=255;for(kn=0;kn<fn;++kn){for(Cn=0;Cn<tn;++Cn){var lr=Ae[Pe+Cn];vn[xn+4*Cn]=lr,Yn&=lr}Pe+=qe,xn+=En}return Yn!=255}function $n(Ae,Pe,qe,tn,fn){var vn;for(vn=0;vn<fn;++vn)qe[tn+vn]=Ae[Pe+vn]>>8}function ar(){Ki=Fe,fi=pn,pi=jn,xi=$n}function br(Ae,Pe,qe){ze[Ae]=function(tn,fn,vn,xn,En,Cn,kn,Yn,lr,cr,nr,Ar,mr,Kn,Zn,xr,Pr){var wr,Hr=Pr-1>>1,Or=En[Cn+0]|kn[Yn+0]<<16,Yr=lr[cr+0]|nr[Ar+0]<<16;t(tn!=null);var Br=3*Or+Yr+131074>>2;for(Pe(tn[fn+0],255&Br,Br>>16,mr,Kn),vn!=null&&(Br=3*Yr+Or+131074>>2,Pe(vn[xn+0],255&Br,Br>>16,Zn,xr)),wr=1;wr<=Hr;++wr){var ai=En[Cn+wr]|kn[Yn+wr]<<16,ci=lr[cr+wr]|nr[Ar+wr]<<16,ii=Or+ai+Yr+ci+524296,ni=ii+2*(ai+Yr)>>3;Br=ni+Or>>1,Or=(ii=ii+2*(Or+ci)>>3)+ai>>1,Pe(tn[fn+2*wr-1],255&Br,Br>>16,mr,Kn+(2*wr-1)*qe),Pe(tn[fn+2*wr-0],255&Or,Or>>16,mr,Kn+(2*wr-0)*qe),vn!=null&&(Br=ii+Yr>>1,Or=ni+ci>>1,Pe(vn[xn+2*wr-1],255&Br,Br>>16,Zn,xr+(2*wr-1)*qe),Pe(vn[xn+2*wr+0],255&Or,Or>>16,Zn,xr+(2*wr+0)*qe)),Or=ai,Yr=ci}1&Pr||(Br=3*Or+Yr+131074>>2,Pe(tn[fn+Pr-1],255&Br,Br>>16,mr,Kn+(Pr-1)*qe),vn!=null&&(Br=3*Yr+Or+131074>>2,Pe(vn[xn+Pr-1],255&Br,Br>>16,Zn,xr+(Pr-1)*qe)))}}function Cr(){Zi[Fo]=sh,Zi[Mo]=zc,Zi[jc]=ah,Zi[Io]=Hc,Zi[Do]=Wc,Zi[Ol]=Gc,Zi[Oc]=oh,Zi[Bl]=zc,Zi[ql]=Hc,Zi[jo]=Wc,Zi[Ul]=Gc}function zr(Ae){return Ae&-16384?0>Ae?0:255:Ae>>lh}function $r(Ae,Pe){return zr((19077*Ae>>8)+(26149*Pe>>8)-14234)}function ti(Ae,Pe,qe){return zr((19077*Ae>>8)-(6419*Pe>>8)-(13320*qe>>8)+8708)}function Qr(Ae,Pe){return zr((19077*Ae>>8)+(33050*Pe>>8)-17685)}function ri(Ae,Pe,qe,tn,fn){tn[fn+0]=$r(Ae,qe),tn[fn+1]=ti(Ae,Pe,qe),tn[fn+2]=Qr(Ae,Pe)}function gi(Ae,Pe,qe,tn,fn){tn[fn+0]=Qr(Ae,Pe),tn[fn+1]=ti(Ae,Pe,qe),tn[fn+2]=$r(Ae,qe)}function mi(Ae,Pe,qe,tn,fn){var vn=ti(Ae,Pe,qe);Pe=vn<<3&224|Qr(Ae,Pe)>>3,tn[fn+0]=248&$r(Ae,qe)|vn>>5,tn[fn+1]=Pe}function wi(Ae,Pe,qe,tn,fn){var vn=240&Qr(Ae,Pe)|15;tn[fn+0]=240&$r(Ae,qe)|ti(Ae,Pe,qe)>>4,tn[fn+1]=vn}function ki(Ae,Pe,qe,tn,fn){tn[fn+0]=255,ri(Ae,Pe,qe,tn,fn+1)}function Ei(Ae,Pe,qe,tn,fn){gi(Ae,Pe,qe,tn,fn),tn[fn+3]=255}function rs(Ae,Pe,qe,tn,fn){ri(Ae,Pe,qe,tn,fn),tn[fn+3]=255}function Hi(Ae,Pe){return 0>Ae?0:Ae>Pe?Pe:Ae}function ls(Ae,Pe,qe){ze[Ae]=function(tn,fn,vn,xn,En,Cn,kn,Yn,lr){for(var cr=Yn+(-2&lr)*qe;Yn!=cr;)Pe(tn[fn+0],vn[xn+0],En[Cn+0],kn,Yn),Pe(tn[fn+1],vn[xn+0],En[Cn+0],kn,Yn+qe),fn+=2,++xn,++Cn,Yn+=2*qe;1&lr&&Pe(tn[fn+0],vn[xn+0],En[Cn+0],kn,Yn)}}function Po(Ae,Pe,qe){return qe==0?Ae==0?Pe==0?6:5:Pe==0?4:0:qe}function Da(Ae,Pe,qe,tn,fn){switch(Ae>>>30){case 3:gs(Pe,qe,tn,fn,0);break;case 2:yi(Pe,qe,tn,fn);break;case 1:Di(Pe,qe,tn,fn)}}function ja(Ae,Pe){var qe,tn,fn=Pe.M,vn=Pe.Nb,xn=Ae.oc,En=Ae.pc+40,Cn=Ae.oc,kn=Ae.pc+584,Yn=Ae.oc,lr=Ae.pc+600;for(qe=0;16>qe;++qe)xn[En+32*qe-1]=129;for(qe=0;8>qe;++qe)Cn[kn+32*qe-1]=129,Yn[lr+32*qe-1]=129;for(0<fn?xn[En-1-32]=Cn[kn-1-32]=Yn[lr-1-32]=129:(_e(xn,En-32-1,127,21),_e(Cn,kn-32-1,127,9),_e(Yn,lr-32-1,127,9)),tn=0;tn<Ae.za;++tn){var cr=Pe.ya[Pe.aa+tn];if(0<tn){for(qe=-1;16>qe;++qe)e(xn,En+32*qe-4,xn,En+32*qe+12,4);for(qe=-1;8>qe;++qe)e(Cn,kn+32*qe-4,Cn,kn+32*qe+4,4),e(Yn,lr+32*qe-4,Yn,lr+32*qe+4,4)}var nr=Ae.Gd,Ar=Ae.Hd+tn,mr=cr.ad,Kn=cr.Hc;if(0<fn&&(e(xn,En-32,nr[Ar].y,0,16),e(Cn,kn-32,nr[Ar].f,0,8),e(Yn,lr-32,nr[Ar].ea,0,8)),cr.Za){var Zn=xn,xr=En-32+16;for(0<fn&&(tn>=Ae.za-1?_e(Zn,xr,nr[Ar].y[15],4):e(Zn,xr,nr[Ar+1].y,0,4)),qe=0;4>qe;qe++)Zn[xr+128+qe]=Zn[xr+256+qe]=Zn[xr+384+qe]=Zn[xr+0+qe];for(qe=0;16>qe;++qe,Kn<<=2)Zn=xn,xr=En+$c[qe],is[cr.Ob[qe]](Zn,xr),Da(Kn,mr,16*+qe,Zn,xr)}else if(Zn=Po(tn,fn,cr.Ob[0]),Cs[Zn](xn,En),Kn!=0)for(qe=0;16>qe;++qe,Kn<<=2)Da(Kn,mr,16*+qe,xn,En+$c[qe]);for(qe=cr.Gc,Zn=Po(tn,fn,cr.Dd),bs[Zn](Cn,kn),bs[Zn](Yn,lr),Kn=mr,Zn=Cn,xr=kn,255&(cr=qe>>0)&&(170&cr?za(Kn,256,Zn,xr):Xi(Kn,256,Zn,xr)),cr=Yn,Kn=lr,255&(qe>>=8)&&(170&qe?za(mr,320,cr,Kn):Xi(mr,320,cr,Kn)),fn<Ae.Ub-1&&(e(nr[Ar].y,0,xn,En+480,16),e(nr[Ar].f,0,Cn,kn+224,8),e(nr[Ar].ea,0,Yn,lr+224,8)),qe=8*vn*Ae.B,nr=Ae.sa,Ar=Ae.ta+16*tn+16*vn*Ae.R,mr=Ae.qa,cr=Ae.ra+8*tn+qe,Kn=Ae.Ha,Zn=Ae.Ia+8*tn+qe,qe=0;16>qe;++qe)e(nr,Ar+qe*Ae.R,xn,En+32*qe,16);for(qe=0;8>qe;++qe)e(mr,cr+qe*Ae.B,Cn,kn+32*qe,8),e(Kn,Zn+qe*Ae.B,Yn,lr+32*qe,8)}}function na(Ae,Pe,qe,tn,fn,vn,xn,En,Cn){var kn=[0],Yn=[0],lr=0,cr=Cn!=null?Cn.kd:0,nr=Cn??new ka;if(Ae==null||12>qe)return 7;nr.data=Ae,nr.w=Pe,nr.ha=qe,Pe=[Pe],qe=[qe],nr.gb=[nr.gb];t:{var Ar=Pe,mr=qe,Kn=nr.gb;if(t(Ae!=null),t(mr!=null),t(Kn!=null),Kn[0]=0,12<=mr[0]&&!xe(Ae,Ar[0],"RIFF")){if(xe(Ae,Ar[0]+8,"WEBP")){Kn=3;break t}var Zn=Wn(Ae,Ar[0]+4);if(12>Zn||4294967286<Zn){Kn=3;break t}if(cr&&Zn>mr[0]-8){Kn=7;break t}Kn[0]=Zn,Ar[0]+=12,mr[0]-=12}Kn=0}if(Kn!=0)return Kn;for(Zn=0<nr.gb[0],qe=qe[0];;){t:{var xr=Ae;mr=Pe,Kn=qe;var Pr=kn,wr=Yn,Hr=Ar=[0];if((Br=lr=[lr])[0]=0,8>Kn[0])Kn=7;else{if(!xe(xr,mr[0],"VP8X")){if(Wn(xr,mr[0]+4)!=10){Kn=3;break t}if(18>Kn[0]){Kn=7;break t}var Or=Wn(xr,mr[0]+8),Yr=1+zn(xr,mr[0]+12);if(2147483648<=Yr*(xr=1+zn(xr,mr[0]+15))){Kn=3;break t}Hr!=null&&(Hr[0]=Or),Pr!=null&&(Pr[0]=Yr),wr!=null&&(wr[0]=xr),mr[0]+=18,Kn[0]-=18,Br[0]=1}Kn=0}}if(lr=lr[0],Ar=Ar[0],Kn!=0)return Kn;if(mr=!!(2&Ar),!Zn&&lr)return 3;if(vn!=null&&(vn[0]=!!(16&Ar)),xn!=null&&(xn[0]=mr),En!=null&&(En[0]=0),xn=kn[0],Ar=Yn[0],lr&&mr&&Cn==null){Kn=0;break}if(4>qe){Kn=7;break}if(Zn&&lr||!Zn&&!lr&&!xe(Ae,Pe[0],"ALPH")){qe=[qe],nr.na=[nr.na],nr.P=[nr.P],nr.Sa=[nr.Sa];t:{Or=Ae,Kn=Pe,Zn=qe;var Br=nr.gb;Pr=nr.na,wr=nr.P,Hr=nr.Sa,Yr=22,t(Or!=null),t(Zn!=null),xr=Kn[0];var ai=Zn[0];for(t(Pr!=null),t(Hr!=null),Pr[0]=null,wr[0]=null,Hr[0]=0;;){if(Kn[0]=xr,Zn[0]=ai,8>ai){Kn=7;break t}var ci=Wn(Or,xr+4);if(4294967286<ci){Kn=3;break t}var ii=8+ci+1&-2;if(Yr+=ii,0<Br&&Yr>Br){Kn=3;break t}if(!xe(Or,xr,"VP8 ")||!xe(Or,xr,"VP8L")){Kn=0;break t}if(ai[0]<ii){Kn=7;break t}xe(Or,xr,"ALPH")||(Pr[0]=Or,wr[0]=xr+8,Hr[0]=ci),xr+=ii,ai-=ii}}if(qe=qe[0],nr.na=nr.na[0],nr.P=nr.P[0],nr.Sa=nr.Sa[0],Kn!=0)break}qe=[qe],nr.Ja=[nr.Ja],nr.xa=[nr.xa];t:if(Br=Ae,Kn=Pe,Zn=qe,Pr=nr.gb[0],wr=nr.Ja,Hr=nr.xa,Or=Kn[0],xr=!xe(Br,Or,"VP8 "),Yr=!xe(Br,Or,"VP8L"),t(Br!=null),t(Zn!=null),t(wr!=null),t(Hr!=null),8>Zn[0])Kn=7;else{if(xr||Yr){if(Br=Wn(Br,Or+4),12<=Pr&&Br>Pr-12){Kn=3;break t}if(cr&&Br>Zn[0]-8){Kn=7;break t}wr[0]=Br,Kn[0]+=8,Zn[0]-=8,Hr[0]=Yr}else Hr[0]=5<=Zn[0]&&Br[Or+0]==47&&!(Br[Or+4]>>5),wr[0]=Zn[0];Kn=0}if(qe=qe[0],nr.Ja=nr.Ja[0],nr.xa=nr.xa[0],Pe=Pe[0],Kn!=0)break;if(4294967286<nr.Ja)return 3;if(En==null||mr||(En[0]=nr.xa?2:1),xn=[xn],Ar=[Ar],nr.xa){if(5>qe){Kn=7;break}En=xn,cr=Ar,mr=vn,Ae==null||5>qe?Ae=0:5<=qe&&Ae[Pe+0]==47&&!(Ae[Pe+4]>>5)?(Zn=[0],Br=[0],Pr=[0],Pn(wr=new je,Ae,Pe,qe),Gn(wr,Zn,Br,Pr)?(En!=null&&(En[0]=Zn[0]),cr!=null&&(cr[0]=Br[0]),mr!=null&&(mr[0]=Pr[0]),Ae=1):Ae=0):Ae=0}else{if(10>qe){Kn=7;break}En=Ar,Ae==null||10>qe||!co(Ae,Pe+3,qe-3)?Ae=0:(cr=Ae[Pe+0]|Ae[Pe+1]<<8|Ae[Pe+2]<<16,mr=16383&(Ae[Pe+7]<<8|Ae[Pe+6]),Ae=16383&(Ae[Pe+9]<<8|Ae[Pe+8]),1&cr||3<(cr>>1&7)||!(cr>>4&1)||cr>>5>=nr.Ja||!mr||!Ae?Ae=0:(xn&&(xn[0]=mr),En&&(En[0]=Ae),Ae=1))}if(!Ae||(xn=xn[0],Ar=Ar[0],lr&&(kn[0]!=xn||Yn[0]!=Ar)))return 3;Cn!=null&&(Cn[0]=nr,Cn.offset=Pe-Cn.w,t(4294967286>Pe-Cn.w),t(Cn.offset==Cn.ha-qe));break}return Kn==0||Kn==7&&lr&&Cn==null?(vn!=null&&(vn[0]|=nr.na!=null&&0<nr.na.length),tn!=null&&(tn[0]=xn),fn!=null&&(fn[0]=Ar),0):Kn}function Oa(Ae,Pe,qe){var tn=Pe.width,fn=Pe.height,vn=0,xn=0,En=tn,Cn=fn;if(Pe.Da=Ae!=null&&0<Ae.Da,Pe.Da&&(En=Ae.cd,Cn=Ae.bd,vn=Ae.v,xn=Ae.j,11>qe||(vn&=-2,xn&=-2),0>vn||0>xn||0>=En||0>=Cn||vn+En>tn||xn+Cn>fn))return 0;if(Pe.v=vn,Pe.j=xn,Pe.va=vn+En,Pe.o=xn+Cn,Pe.U=En,Pe.T=Cn,Pe.da=Ae!=null&&0<Ae.da,Pe.da){if(!Bn(En,Cn,qe=[Ae.ib],vn=[Ae.hb]))return 0;Pe.ib=qe[0],Pe.hb=vn[0]}return Pe.ob=Ae!=null&&Ae.ob,Pe.Kb=Ae==null||!Ae.Sd,Pe.da&&(Pe.ob=Pe.ib<3*tn/4&&Pe.hb<3*fn/4,Pe.Kb=0),1}function Ba(Ae){if(Ae==null)return 2;if(11>Ae.S){var Pe=Ae.f.RGBA;Pe.fb+=(Ae.height-1)*Pe.A,Pe.A=-Pe.A}else Pe=Ae.f.kb,Ae=Ae.height,Pe.O+=(Ae-1)*Pe.fa,Pe.fa=-Pe.fa,Pe.N+=(Ae-1>>1)*Pe.Ab,Pe.Ab=-Pe.Ab,Pe.W+=(Ae-1>>1)*Pe.Db,Pe.Db=-Pe.Db,Pe.F!=null&&(Pe.J+=(Ae-1)*Pe.lb,Pe.lb=-Pe.lb);return 0}function ra(Ae,Pe,qe,tn){if(tn==null||0>=Ae||0>=Pe)return 2;if(qe!=null){if(qe.Da){var fn=qe.cd,vn=qe.bd,xn=-2&qe.v,En=-2&qe.j;if(0>xn||0>En||0>=fn||0>=vn||xn+fn>Ae||En+vn>Pe)return 2;Ae=fn,Pe=vn}if(qe.da){if(!Bn(Ae,Pe,fn=[qe.ib],vn=[qe.hb]))return 2;Ae=fn[0],Pe=vn[0]}}tn.width=Ae,tn.height=Pe;t:{var Cn=tn.width,kn=tn.height;if(Ae=tn.S,0>=Cn||0>=kn||!(Ae>=Fo&&13>Ae))Ae=2;else{if(0>=tn.Rd&&tn.sd==null){xn=vn=fn=Pe=0;var Yn=(En=Cn*Xc[Ae])*kn;if(11>Ae||(vn=(kn+1)/2*(Pe=(Cn+1)/2),Ae==12&&(xn=(fn=Cn)*kn)),(kn=Se(Yn+2*vn+xn))==null){Ae=1;break t}tn.sd=kn,11>Ae?((Cn=tn.f.RGBA).eb=kn,Cn.fb=0,Cn.A=En,Cn.size=Yn):((Cn=tn.f.kb).y=kn,Cn.O=0,Cn.fa=En,Cn.Fd=Yn,Cn.f=kn,Cn.N=0+Yn,Cn.Ab=Pe,Cn.Cd=vn,Cn.ea=kn,Cn.W=0+Yn+vn,Cn.Db=Pe,Cn.Ed=vn,Ae==12&&(Cn.F=kn,Cn.J=0+Yn+2*vn),Cn.Tc=xn,Cn.lb=fn)}if(Pe=1,fn=tn.S,vn=tn.width,xn=tn.height,fn>=Fo&&13>fn)if(11>fn)Ae=tn.f.RGBA,Pe&=(En=Math.abs(Ae.A))*(xn-1)+vn<=Ae.size,Pe&=En>=vn*Xc[fn],Pe&=Ae.eb!=null;else{Ae=tn.f.kb,En=(vn+1)/2,Yn=(xn+1)/2,Cn=Math.abs(Ae.fa),kn=Math.abs(Ae.Ab);var lr=Math.abs(Ae.Db),cr=Math.abs(Ae.lb),nr=cr*(xn-1)+vn;Pe&=Cn*(xn-1)+vn<=Ae.Fd,Pe&=kn*(Yn-1)+En<=Ae.Cd,Pe=(Pe&=lr*(Yn-1)+En<=Ae.Ed)&Cn>=vn&kn>=En&lr>=En,Pe&=Ae.y!=null,Pe&=Ae.f!=null,Pe&=Ae.ea!=null,fn==12&&(Pe&=cr>=vn,Pe&=nr<=Ae.Tc,Pe&=Ae.F!=null)}else Pe=0;Ae=Pe?0:2}}return Ae!=0||qe!=null&&qe.fd&&(Ae=Ba(tn)),Ae}var Ci=64,ia=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],sa=24,aa=32,qa=8,Bi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Rn("Predictor0","PredictorAdd0"),ze.Predictor0=function(){return 4278190080},ze.Predictor1=function(Ae){return Ae},ze.Predictor2=function(Ae,Pe,qe){return Pe[qe+0]},ze.Predictor3=function(Ae,Pe,qe){return Pe[qe+1]},ze.Predictor4=function(Ae,Pe,qe){return Pe[qe-1]},ze.Predictor5=function(Ae,Pe,qe){return Hn(Hn(Ae,Pe[qe+1]),Pe[qe+0])},ze.Predictor6=function(Ae,Pe,qe){return Hn(Ae,Pe[qe-1])},ze.Predictor7=function(Ae,Pe,qe){return Hn(Ae,Pe[qe+0])},ze.Predictor8=function(Ae,Pe,qe){return Hn(Pe[qe-1],Pe[qe+0])},ze.Predictor9=function(Ae,Pe,qe){return Hn(Pe[qe+0],Pe[qe+1])},ze.Predictor10=function(Ae,Pe,qe){return Hn(Hn(Ae,Pe[qe-1]),Hn(Pe[qe+0],Pe[qe+1]))},ze.Predictor11=function(Ae,Pe,qe){var tn=Pe[qe+0];return 0>=qn(tn>>24&255,Ae>>24&255,(Pe=Pe[qe-1])>>24&255)+qn(tn>>16&255,Ae>>16&255,Pe>>16&255)+qn(tn>>8&255,Ae>>8&255,Pe>>8&255)+qn(255&tn,255&Ae,255&Pe)?tn:Ae},ze.Predictor12=function(Ae,Pe,qe){var tn=Pe[qe+0];return(tr((Ae>>24&255)+(tn>>24&255)-((Pe=Pe[qe-1])>>24&255))<<24|tr((Ae>>16&255)+(tn>>16&255)-(Pe>>16&255))<<16|tr((Ae>>8&255)+(tn>>8&255)-(Pe>>8&255))<<8|tr((255&Ae)+(255&tn)-(255&Pe)))>>>0},ze.Predictor13=function(Ae,Pe,qe){var tn=Pe[qe-1];return(ir((Ae=Hn(Ae,Pe[qe+0]))>>24&255,tn>>24&255)<<24|ir(Ae>>16&255,tn>>16&255)<<16|ir(Ae>>8&255,tn>>8&255)<<8|ir(Ae>>0&255,tn>>0&255))>>>0};var Dl=ze.PredictorAdd0;ze.PredictorAdd1=pr,Rn("Predictor2","PredictorAdd2"),Rn("Predictor3","PredictorAdd3"),Rn("Predictor4","PredictorAdd4"),Rn("Predictor5","PredictorAdd5"),Rn("Predictor6","PredictorAdd6"),Rn("Predictor7","PredictorAdd7"),Rn("Predictor8","PredictorAdd8"),Rn("Predictor9","PredictorAdd9"),Rn("Predictor10","PredictorAdd10"),Rn("Predictor11","PredictorAdd11"),Rn("Predictor12","PredictorAdd12"),Rn("Predictor13","PredictorAdd13");var Ua=ze.PredictorAdd2;Ir("ColorIndexInverseTransform","MapARGB","32b",function(Ae){return Ae>>8&255},function(Ae){return Ae}),Ir("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(Ae){return Ae},function(Ae){return Ae>>8&255});var Lo,$i=ze.ColorIndexInverseTransform,oa=ze.MapARGB,Co=ze.VP8LColorIndexInverseTransformAlpha,To=ze.MapAlpha,Ss=ze.VP8LPredictorsAdd=[];Ss.length=16,(ze.VP8LPredictors=[]).length=16,(ze.VP8LPredictorsAdd_C=[]).length=16,(ze.VP8LPredictors_C=[]).length=16;var Bs,qi,Ii,Es,fs,ps,la,gs,yi,za,Di,Xi,ca,No,Ha,qs,Us,Ps,zs,ua,Hs,Ls,Wa,Yi,Ki,fi,pi,xi,Si=Se(511),ms=Se(2041),Ga=Se(225),ha=Se(767),Ro=0,jl=ms,ko=Ga,Wi=ha,Ji=Si,Fo=0,Mo=1,jc=2,Io=3,Do=4,Ol=5,Oc=6,Bl=7,ql=8,jo=9,Ul=10,Gu=[2,3,7],Vu=[3,3,11],Bc=[280,256,256,256,40],$u=[0,1,1,1,0],Xu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Yu=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ku=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ju=8,zl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Hl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Va=null,Zu=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],qc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],th=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],eh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],rh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Cs=[],is=[],bs=[],ih=1,Uc=2,Ts=[],Zi=[];br("UpsampleRgbLinePair",ri,3),br("UpsampleBgrLinePair",gi,3),br("UpsampleRgbaLinePair",rs,4),br("UpsampleBgraLinePair",Ei,4),br("UpsampleArgbLinePair",ki,4),br("UpsampleRgba4444LinePair",wi,2),br("UpsampleRgb565LinePair",mi,2);var sh=ze.UpsampleRgbLinePair,ah=ze.UpsampleBgrLinePair,zc=ze.UpsampleRgbaLinePair,Hc=ze.UpsampleBgraLinePair,Wc=ze.UpsampleArgbLinePair,Gc=ze.UpsampleRgba4444LinePair,oh=ze.UpsampleRgb565LinePair,Oo=16,Bo=1<<Oo-1,$a=-227,Wl=482,lh=6,Vc=0,ch=Se(256),uh=Se(256),hh=Se(256),dh=Se(256),fh=Se(Wl-$a),ph=Se(Wl-$a);ls("YuvToRgbRow",ri,3),ls("YuvToBgrRow",gi,3),ls("YuvToRgbaRow",rs,4),ls("YuvToBgraRow",Ei,4),ls("YuvToArgbRow",ki,4),ls("YuvToRgba4444Row",wi,2),ls("YuvToRgb565Row",mi,2);var $c=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],qo=[0,2,8],gh=[8,7,6,4,4,2,2,2,1,1,1,1],mh=1;this.WebPDecodeRGBA=function(Ae,Pe,qe,tn,fn){var vn=Mo,xn=new ta,En=new Fn;xn.ba=En,En.S=vn,En.width=[En.width],En.height=[En.height];var Cn=En.width,kn=En.height,Yn=new ur;if(Yn==null||Ae==null)var lr=2;else t(Yn!=null),lr=na(Ae,Pe,qe,Yn.width,Yn.height,Yn.Pd,Yn.Qd,Yn.format,null);if(lr!=0?Cn=0:(Cn!=null&&(Cn[0]=Yn.width[0]),kn!=null&&(kn[0]=Yn.height[0]),Cn=1),Cn){En.width=En.width[0],En.height=En.height[0],tn!=null&&(tn[0]=En.width),fn!=null&&(fn[0]=En.height);t:{if(tn=new $s,(fn=new ka).data=Ae,fn.w=Pe,fn.ha=qe,fn.kd=1,Pe=[0],t(fn!=null),((Ae=na(fn.data,fn.w,fn.ha,null,null,null,Pe,null,fn))==0||Ae==7)&&Pe[0]&&(Ae=4),(Pe=Ae)==0){if(t(xn!=null),tn.data=fn.data,tn.w=fn.w+fn.offset,tn.ha=fn.ha-fn.offset,tn.put=Ln,tn.ac=Tn,tn.bc=Un,tn.ma=xn,fn.xa){if((Ae=Zr())==null){xn=1;break t}if(function(cr,nr){var Ar=[0],mr=[0],Kn=[0];e:for(;;){if(cr==null)return 0;if(nr==null)return cr.a=2,0;if(cr.l=nr,cr.a=0,Pn(cr.m,nr.data,nr.w,nr.ha),!Gn(cr.m,Ar,mr,Kn)){cr.a=3;break e}if(cr.xb=Uc,nr.width=Ar[0],nr.height=mr[0],!li(Ar[0],mr[0],1,cr,null))break e;return 1}return t(cr.a!=0),0}(Ae,tn)){if(tn=(Pe=ra(tn.width,tn.height,xn.Oa,xn.ba))==0){e:{tn=Ae;n:for(;;){if(tn==null){tn=0;break e}if(t(tn.s.yc!=null),t(tn.s.Ya!=null),t(0<tn.s.Wb),t((qe=tn.l)!=null),t((fn=qe.ma)!=null),tn.xb!=0){if(tn.ca=fn.ba,tn.tb=fn.tb,t(tn.ca!=null),!Oa(fn.Oa,qe,Io)){tn.a=2;break n}if(!si(tn,qe.width)||qe.da)break n;if((qe.da||Sr(tn.ca.S))&&ar(),11>tn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),tn.ca.f.kb.F!=null&&ar()),tn.Pb&&0<tn.s.ua&&tn.s.vb.X==null&&!Jn(tn.s.vb,tn.s.Wa.Xa)){tn.a=1;break n}tn.xb=0}if(!Gr(tn,tn.V,tn.Ba,tn.c,tn.i,qe.o,Wr))break n;fn.Dc=tn.Ma,tn=1;break e}t(tn.a!=0),tn=0}tn=!tn}tn&&(Pe=Ae.a)}else Pe=Ae.a}else{if((Ae=new bl)==null){xn=1;break t}if(Ae.Fa=fn.na,Ae.P=fn.P,Ae.qc=fn.Sa,uo(Ae,tn)){if((Pe=ra(tn.width,tn.height,xn.Oa,xn.ba))==0){if(Ae.Aa=0,qe=xn.Oa,t((fn=Ae)!=null),qe!=null){if(0<(Cn=0>(Cn=qe.Md)?0:100<Cn?255:255*Cn/100)){for(kn=Yn=0;4>kn;++kn)12>(lr=fn.pb[kn]).lc&&(lr.ia=Cn*gh[0>lr.lc?0:lr.lc]>>3),Yn|=lr.ia;Yn&&(alert("todo:VP8InitRandom"),fn.ia=1)}fn.Ga=qe.Id,100<fn.Ga?fn.Ga=100:0>fn.Ga&&(fn.Ga=0)}vl(Ae,tn)||(Pe=Ae.a)}}else Pe=Ae.a}Pe==0&&xn.Oa!=null&&xn.Oa.fd&&(Pe=Ba(xn.ba))}xn=Pe}vn=xn!=0?null:11>vn?En.f.RGBA.eb:En.f.kb.y}else vn=null;return vn};var Xc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function De(ze,Qe){for(var gn="",ke=0;ke<4;ke++)gn+=String.fromCharCode(ze[Qe++]);return gn}function Me(ze,Qe){return(ze[Qe+0]<<0|ze[Qe+1]<<8|ze[Qe+2]<<16)>>>0}function Ue(ze,Qe){return(ze[Qe+0]<<0|ze[Qe+1]<<8|ze[Qe+2]<<16|ze[Qe+3]<<24)>>>0}new Ce;var He=[0],Te=[0],Ve=[],$e=new Ce,Ke=St,Be=function(ze,Qe){var gn={},ke=0,Ge=!1,nn=0,dn=0;if(gn.frames=[],!function(Ie,Oe,Ze,sn){for(var on=0;on<sn;on++)if(Ie[Oe+on]!=Ze.charCodeAt(on))return!0;return!1}(ze,Qe,"RIFF",4)){var wn,Sn;for(Ue(ze,Qe+=4),Qe+=8;Qe<ze.length;){var yn=De(ze,Qe),Pn=Ue(ze,Qe+=4);Qe+=4;var un=Pn+(1&Pn);switch(yn){case"VP8 ":case"VP8L":gn.frames[ke]===void 0&&(gn.frames[ke]={}),(je=gn.frames[ke]).src_off=Ge?dn:Qe-8,je.src_size=nn+Pn+8,ke++,Ge&&(Ge=!1,nn=0,dn=0);break;case"VP8X":(je=gn.header={}).feature_flags=ze[Qe];var _n=Qe+4;je.canvas_width=1+Me(ze,_n),_n+=3,je.canvas_height=1+Me(ze,_n),_n+=3;break;case"ALPH":Ge=!0,nn=un+8,dn=Qe-8;break;case"ANIM":(je=gn.header).bgcolor=Ue(ze,Qe),_n=Qe+4,je.loop_count=(wn=ze)[(Sn=_n)+0]<<0|wn[Sn+1]<<8,_n+=2;break;case"ANMF":var Nn,je;(je=gn.frames[ke]={}).offset_x=2*Me(ze,Qe),Qe+=3,je.offset_y=2*Me(ze,Qe),Qe+=3,je.width=1+Me(ze,Qe),Qe+=3,je.height=1+Me(ze,Qe),Qe+=3,je.duration=Me(ze,Qe),Qe+=3,Nn=ze[Qe++],je.dispose=1&Nn,je.blend=Nn>>1&1}yn!="ANMF"&&(Qe+=un)}return gn}}(Ke,0);Be.response=Ke,Be.rgbaoutput=!0,Be.dataurl=!1;var Ye=Be.header?Be.header:null,an=Be.frames?Be.frames:null;if(Ye){Ye.loop_counter=Ye.loop_count,He=[Ye.canvas_height],Te=[Ye.canvas_width];for(var rn=0;rn<an.length&&an[rn].blend!=0;rn++);}var Xe=an[0],en=$e.WebPDecodeRGBA(Ke,Xe.src_off,Xe.src_size,Te,He);Xe.rgba=en,Xe.imgwidth=Te[0],Xe.imgheight=He[0];for(var We=0;We<Te[0]*He[0]*4;We++)Ve[We]=en[We];return this.width=Te,this.height=He,this.data=Ve,this}(function(St){var t=function(){return typeof zlibSync=="function"},xe=function(He,Te,Ve,$e){var Ke=4,Be=Ee;switch($e){case St.image_compression.FAST:Ke=1,Be=Se;break;case St.image_compression.MEDIUM:Ke=6,Be=Re;break;case St.image_compression.SLOW:Ke=9,Be=Ce}He=e(He,Te,Ve,Be);var Ye=zlibSync(He,{level:Ke});return St.__addimage__.arrayBufferToBinaryString(Ye)},e=function(He,Te,Ve,$e){for(var Ke,Be,Ye,an=He.length/Te,rn=new Uint8Array(He.length+an),Xe=Me(),en=0;en<an;en+=1){if(Ye=en*Te,Ke=He.subarray(Ye,Ye+Te),$e)rn.set($e(Ke,Ve,Be),Ye+en);else{for(var We,ze=Xe.length,Qe=[];We<ze;We+=1)Qe[We]=Xe[We](Ke,Ve,Be);var gn=Ue(Qe.concat());rn.set(Qe[gn],Ye+en)}Be=Ke}return rn},_e=function(He){var Te=Array.apply([],He);return Te.unshift(0),Te},Se=function(He,Te){var Ve,$e=[],Ke=He.length;$e[0]=1;for(var Be=0;Be<Ke;Be+=1)Ve=He[Be-Te]||0,$e[Be+1]=He[Be]-Ve+256&255;return $e},Ee=function(He,Te,Ve){var $e,Ke=[],Be=He.length;Ke[0]=2;for(var Ye=0;Ye<Be;Ye+=1)$e=Ve&&Ve[Ye]||0,Ke[Ye+1]=He[Ye]-$e+256&255;return Ke},Re=function(He,Te,Ve){var $e,Ke,Be=[],Ye=He.length;Be[0]=3;for(var an=0;an<Ye;an+=1)$e=He[an-Te]||0,Ke=Ve&&Ve[an]||0,Be[an+1]=He[an]+256-($e+Ke>>>1)&255;return Be},Ce=function(He,Te,Ve){var $e,Ke,Be,Ye,an=[],rn=He.length;an[0]=4;for(var Xe=0;Xe<rn;Xe+=1)$e=He[Xe-Te]||0,Ke=Ve&&Ve[Xe]||0,Be=Ve&&Ve[Xe-Te]||0,Ye=De($e,Ke,Be),an[Xe+1]=He[Xe]-Ye+256&255;return an},De=function(He,Te,Ve){if(He===Te&&Te===Ve)return He;var $e=Math.abs(Te-Ve),Ke=Math.abs(He-Ve),Be=Math.abs(He+Te-Ve-Ve);return $e<=Ke&&$e<=Be?He:Ke<=Be?Te:Ve},Me=function(){return[_e,Se,Ee,Re,Ce]},Ue=function(He){var Te=He.map(function(Ve){return Ve.reduce(function($e,Ke){return $e+Math.abs(Ke)},0)});return Te.indexOf(Math.min.apply(null,Te))};St.processPNG=function(He,Te,Ve,$e){var Ke,Be,Ye,an,rn,Xe,en,We,ze,Qe,gn,ke,Ge,nn,dn,wn=this.decode.FLATE_DECODE,Sn="";if(this.__addimage__.isArrayBuffer(He)&&(He=new Uint8Array(He)),this.__addimage__.isArrayBufferView(He)){if(He=(Ye=new Kt(He)).imgData,Be=Ye.bits,Ke=Ye.colorSpace,rn=Ye.colors,[4,6].indexOf(Ye.colorType)!==-1){if(Ye.bits===8){ze=(We=Ye.pixelBitlength==32?new Uint32Array(Ye.decodePixels().buffer):Ye.pixelBitlength==16?new Uint16Array(Ye.decodePixels().buffer):new Uint8Array(Ye.decodePixels().buffer)).length,gn=new Uint8Array(ze*Ye.colors),Qe=new Uint8Array(ze);var yn,Pn=Ye.pixelBitlength-Ye.bits;for(nn=0,dn=0;nn<ze;nn++){for(Ge=We[nn],yn=0;yn<Pn;)gn[dn++]=Ge>>>yn&255,yn+=Ye.bits;Qe[nn]=Ge>>>yn&255}}if(Ye.bits===16){ze=(We=new Uint32Array(Ye.decodePixels().buffer)).length,gn=new Uint8Array(ze*(32/Ye.pixelBitlength)*Ye.colors),Qe=new Uint8Array(ze*(32/Ye.pixelBitlength)),ke=Ye.colors>1,nn=0,dn=0;for(var un=0;nn<ze;)Ge=We[nn++],gn[dn++]=Ge>>>0&255,ke&&(gn[dn++]=Ge>>>16&255,Ge=We[nn++],gn[dn++]=Ge>>>0&255),Qe[un++]=Ge>>>16&255;Be=8}$e!==St.image_compression.NONE&&t()?(He=xe(gn,Ye.width*Ye.colors,Ye.colors,$e),en=xe(Qe,Ye.width,1,$e)):(He=gn,en=Qe,wn=void 0)}if(Ye.colorType===3&&(Ke=this.color_spaces.INDEXED,Xe=Ye.palette,Ye.transparency.indexed)){var _n=Ye.transparency.indexed,Nn=0;for(nn=0,ze=_n.length;nn<ze;++nn)Nn+=_n[nn];if((Nn/=255)===ze-1&&_n.indexOf(0)!==-1)an=[_n.indexOf(0)];else if(Nn!==ze){for(We=Ye.decodePixels(),Qe=new Uint8Array(We.length),nn=0,ze=We.length;nn<ze;nn++)Qe[nn]=_n[We[nn]];en=xe(Qe,Ye.width,1)}}var je=function(Ie){var Oe;switch(Ie){case St.image_compression.FAST:Oe=11;break;case St.image_compression.MEDIUM:Oe=13;break;case St.image_compression.SLOW:Oe=14;break;default:Oe=12}return Oe}($e);return wn===this.decode.FLATE_DECODE&&(Sn="/Predictor "+je+" "),Sn+="/Colors "+rn+" /BitsPerComponent "+Be+" /Columns "+Ye.width,(this.__addimage__.isArrayBuffer(He)||this.__addimage__.isArrayBufferView(He))&&(He=this.__addimage__.arrayBufferToBinaryString(He)),(en&&this.__addimage__.isArrayBuffer(en)||this.__addimage__.isArrayBufferView(en))&&(en=this.__addimage__.arrayBufferToBinaryString(en)),{alias:Ve,data:He,index:Te,filter:wn,decodeParameters:Sn,transparency:an,palette:Xe,sMask:en,predictor:je,width:Ye.width,height:Ye.height,bitsPerComponent:Be,colorSpace:Ke}}}})(E.API),function(St){St.processGIF89A=function(t,xe,e,_e){var Se=new Zt(t),Ee=Se.width,Re=Se.height,Ce=[];Se.decodeAndBlitFrameRGBA(0,Ce);var De={data:Ce,width:Ee,height:Re},Me=new Qt(100).encode(De,100);return St.processJPEG.call(this,Me,xe,e,_e)},St.processGIF87A=St.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var St=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(St);for(var t=0;t<St;t++){var xe=this.datav.getUint8(this.pos++,!0),e=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:_e,green:e,blue:xe,quad:Se}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var St="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[St]()}catch(xe){a.log("bit decode error:"+xe)}},te.prototype.bit1=function(){var St,t=Math.ceil(this.width/8),xe=t%4;for(St=this.height-1;St>=0;St--){for(var e=this.bottom_up?St:this.height-1-St,_e=0;_e<t;_e++)for(var Se=this.datav.getUint8(this.pos++,!0),Ee=e*this.width*4+8*_e*4,Re=0;Re<8&&8*_e+Re<this.width;Re++){var Ce=this.palette[Se>>7-Re&1];this.data[Ee+4*Re]=Ce.blue,this.data[Ee+4*Re+1]=Ce.green,this.data[Ee+4*Re+2]=Ce.red,this.data[Ee+4*Re+3]=255}xe!==0&&(this.pos+=4-xe)}},te.prototype.bit4=function(){for(var St=Math.ceil(this.width/2),t=St%4,xe=this.height-1;xe>=0;xe--){for(var e=this.bottom_up?xe:this.height-1-xe,_e=0;_e<St;_e++){var Se=this.datav.getUint8(this.pos++,!0),Ee=e*this.width*4+2*_e*4,Re=Se>>4,Ce=15&Se,De=this.palette[Re];if(this.data[Ee]=De.blue,this.data[Ee+1]=De.green,this.data[Ee+2]=De.red,this.data[Ee+3]=255,2*_e+1>=this.width)break;De=this.palette[Ce],this.data[Ee+4]=De.blue,this.data[Ee+4+1]=De.green,this.data[Ee+4+2]=De.red,this.data[Ee+4+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit8=function(){for(var St=this.width%4,t=this.height-1;t>=0;t--){for(var xe=this.bottom_up?t:this.height-1-t,e=0;e<this.width;e++){var _e=this.datav.getUint8(this.pos++,!0),Se=xe*this.width*4+4*e;if(_e<this.palette.length){var Ee=this.palette[_e];this.data[Se]=Ee.red,this.data[Se+1]=Ee.green,this.data[Se+2]=Ee.blue,this.data[Se+3]=255}else this.data[Se]=255,this.data[Se+1]=255,this.data[Se+2]=255,this.data[Se+3]=255}St!==0&&(this.pos+=4-St)}},te.prototype.bit15=function(){for(var St=this.width%3,t=parseInt("11111",2),xe=this.height-1;xe>=0;xe--){for(var e=this.bottom_up?xe:this.height-1-xe,_e=0;_e<this.width;_e++){var Se=this.datav.getUint16(this.pos,!0);this.pos+=2;var Ee=(Se&t)/t*255|0,Re=(Se>>5&t)/t*255|0,Ce=(Se>>10&t)/t*255|0,De=Se>>15?255:0,Me=e*this.width*4+4*_e;this.data[Me]=Ce,this.data[Me+1]=Re,this.data[Me+2]=Ee,this.data[Me+3]=De}this.pos+=St}},te.prototype.bit16=function(){for(var St=this.width%3,t=parseInt("11111",2),xe=parseInt("111111",2),e=this.height-1;e>=0;e--){for(var _e=this.bottom_up?e:this.height-1-e,Se=0;Se<this.width;Se++){var Ee=this.datav.getUint16(this.pos,!0);this.pos+=2;var Re=(Ee&t)/t*255|0,Ce=(Ee>>5&xe)/xe*255|0,De=(Ee>>11)/t*255|0,Me=_e*this.width*4+4*Se;this.data[Me]=De,this.data[Me+1]=Ce,this.data[Me+2]=Re,this.data[Me+3]=255}this.pos+=St}},te.prototype.bit24=function(){for(var St=this.height-1;St>=0;St--){for(var t=this.bottom_up?St:this.height-1-St,xe=0;xe<this.width;xe++){var e=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0),Ee=t*this.width*4+4*xe;this.data[Ee]=Se,this.data[Ee+1]=_e,this.data[Ee+2]=e,this.data[Ee+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var St=this.height-1;St>=0;St--)for(var t=this.bottom_up?St:this.height-1-St,xe=0;xe<this.width;xe++){var e=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Se=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Re=t*this.width*4+4*xe;this.data[Re]=Se,this.data[Re+1]=_e,this.data[Re+2]=e,this.data[Re+3]=Ee}},te.prototype.getData=function(){return this.data},function(St){St.processBMP=function(t,xe,e,_e){var Se=new te(t,!1),Ee=Se.width,Re=Se.height,Ce={data:Se.getData(),width:Ee,height:Re},De=new Qt(100).encode(Ce,100);return St.processJPEG.call(this,De,xe,e,_e)}}(E.API),ee.prototype.getData=function(){return this.data},function(St){St.processWEBP=function(t,xe,e,_e){var Se=new ee(t),Ee=Se.width,Re=Se.height,Ce={data:Se.getData(),width:Ee,height:Re},De=new Qt(100).encode(Ce,100);return St.processJPEG.call(this,De,xe,e,_e)}}(E.API),E.API.processRGBA=function(St,t,xe){for(var e=St.data,_e=e.length,Se=new Uint8Array(_e/4*3),Ee=new Uint8Array(_e/4),Re=0,Ce=0,De=0;De<_e;De+=4){var Me=e[De],Ue=e[De+1],He=e[De+2],Te=e[De+3];Se[Re++]=Me,Se[Re++]=Ue,Se[Re++]=He,Ee[Ce++]=Te}var Ve=this.__addimage__.arrayBufferToBinaryString(Se);return{alpha:this.__addimage__.arrayBufferToBinaryString(Ee),data:Ve,index:t,alias:xe,colorSpace:"DeviceRGB",bitsPerComponent:8,width:St.width,height:St.height}},E.API.setLanguage=function(St){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[St]!==void 0&&(this.internal.languageSettings.languageCode=St,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(St,t){var xe,e,_e=(t=t||{}).font||this.internal.getFont(),Se=t.fontSize||this.internal.getFontSize(),Ee=t.charSpace||this.internal.getCharSpace(),Re=t.widths?t.widths:_e.metadata.Unicode.widths,Ce=Re.fof?Re.fof:1,De=t.kerning?t.kerning:_e.metadata.Unicode.kerning,Me=De.fof?De.fof:1,Ue=t.doKerning!==!1,He=0,Te=St.length,Ve=0,$e=Re[0]||Ce,Ke=[];for(xe=0;xe<Te;xe++)e=St.charCodeAt(xe),typeof _e.metadata.widthOfString=="function"?Ke.push((_e.metadata.widthOfGlyph(_e.metadata.characterToGlyph(e))+Ee*(1e3/Se)||0)/1e3):(He=Ue&&_typeof(De[e])==="object"&&!isNaN(parseInt(De[e][Ve],10))?De[e][Ve]/Me:0,Ke.push((Re[e]||$e)/Ce+He)),Ve=e;return Ke},Yt=Vt.getStringUnitWidth=function(St,t){var xe=(t=t||{}).fontSize||this.internal.getFontSize(),e=t.font||this.internal.getFont(),_e=t.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(St=Vt.processArabic(St)),typeof e.metadata.widthOfString=="function"?e.metadata.widthOfString(St,xe,_e)/xe:Gt.apply(this,arguments).reduce(function(Se,Ee){return Se+Ee},0)},Jt=function(St,t,xe,e){for(var _e=[],Se=0,Ee=St.length,Re=0;Se!==Ee&&Re+t[Se]<xe;)Re+=t[Se],Se++;_e.push(St.slice(0,Se));var Ce=Se;for(Re=0;Se!==Ee;)Re+t[Se]>e&&(_e.push(St.slice(Ce,Se)),Re=0,Ce=Se),Re+=t[Se],Se++;return Ce!==Se&&_e.push(St.slice(Ce,Se)),_e},Xt=function(St,t,xe){xe||(xe={});var e,_e,Se,Ee,Re,Ce,De,Me=[],Ue=[Me],He=xe.textIndent||0,Te=0,Ve=0,$e=St.split(" "),Ke=Gt.apply(this,[" ",xe])[0];if(Ce=xe.lineIndent===-1?$e[0].length+2:xe.lineIndent||0){var Be=Array(Ce).join(" "),Ye=[];$e.map(function(rn){(rn=rn.split(/\s*\n/)).length>1?Ye=Ye.concat(rn.map(function(Xe,en){return(en&&Xe.length?`
`:"")+Xe})):Ye.push(rn[0])}),$e=Ye,Ce=Yt.apply(this,[Be,xe])}for(Se=0,Ee=$e.length;Se<Ee;Se++){var an=0;if(e=$e[Se],Ce&&e[0]==`
`&&(e=e.substr(1),an=1),He+Te+(Ve=(_e=Gt.apply(this,[e,xe])).reduce(function(rn,Xe){return rn+Xe},0))>t||an){if(Ve>t){for(Re=Jt.apply(this,[e,_e,t-(He+Te),t]),Me.push(Re.shift()),Me=[Re.pop()];Re.length;)Ue.push([Re.shift()]);Ve=_e.slice(e.length-(Me[0]?Me[0].length:0)).reduce(function(rn,Xe){return rn+Xe},0)}else Me=[e];Ue.push(Me),He=Ve+Ce,Te=Ke}else Me.push(e),He+=Te+Ve,Te=Ke}return De=Ce?function(rn,Xe){return(Xe?Be:"")+rn.join(" ")}:function(rn){return rn.join(" ")},Ue.map(De)},Vt.splitTextToSize=function(St,t,xe){var e,_e=(xe=xe||{}).fontSize||this.internal.getFontSize(),Se=(function(Me){if(Me.widths&&Me.kerning)return{widths:Me.widths,kerning:Me.kerning};var Ue=this.internal.getFont(Me.fontName,Me.fontStyle);return Ue.metadata.Unicode?{widths:Ue.metadata.Unicode.widths||{0:1},kerning:Ue.metadata.Unicode.kerning||{}}:{font:Ue.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,xe);e=Array.isArray(St)?St:String(St).split(/\r?\n/);var Ee=1*this.internal.scaleFactor*t/_e;Se.textIndent=xe.textIndent?1*xe.textIndent*this.internal.scaleFactor/_e:0,Se.lineIndent=xe.lineIndent;var Re,Ce,De=[];for(Re=0,Ce=e.length;Re<Ce;Re++)De=De.concat(Xt.apply(this,[e[Re],Ee,Se]));return De},function(St){St.__fontmetrics__=St.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",xe={},e={},_e=0;_e<t.length;_e++)xe[t[_e]]="0123456789abcdef"[_e],e["0123456789abcdef"[_e]]=t[_e];var Se=function(Ue){return"0x"+parseInt(Ue,10).toString(16)},Ee=St.__fontmetrics__.compress=function(Ue){var He,Te,Ve,$e,Ke=["{"];for(var Be in Ue){if(He=Ue[Be],isNaN(parseInt(Be,10))?Te="'"+Be+"'":(Be=parseInt(Be,10),Te=(Te=Se(Be).slice(2)).slice(0,-1)+e[Te.slice(-1)]),typeof He=="number")He<0?(Ve=Se(He).slice(3),$e="-"):(Ve=Se(He).slice(2),$e=""),Ve=$e+Ve.slice(0,-1)+e[Ve.slice(-1)];else{if(_typeof(He)!=="object")throw new Error("Don't know what to do with value type "+_typeof(He)+".");Ve=Ee(He)}Ke.push(Te+Ve)}return Ke.push("}"),Ke.join("")},Re=St.__fontmetrics__.uncompress=function(Ue){if(typeof Ue!="string")throw new Error("Invalid argument passed to uncompress.");for(var He,Te,Ve,$e,Ke={},Be=1,Ye=Ke,an=[],rn="",Xe="",en=Ue.length-1,We=1;We<en;We+=1)($e=Ue[We])=="'"?He?(Ve=He.join(""),He=void 0):He=[]:He?He.push($e):$e=="{"?(an.push([Ye,Ve]),Ye={},Ve=void 0):$e=="}"?((Te=an.pop())[0][Te[1]]=Ye,Ve=void 0,Ye=Te[0]):$e=="-"?Be=-1:Ve===void 0?xe.hasOwnProperty($e)?(rn+=xe[$e],Ve=parseInt(rn,16)*Be,Be=1,rn=""):rn+=$e:xe.hasOwnProperty($e)?(Xe+=xe[$e],Ye[Ve]=parseInt(Xe,16)*Be,Be=1,Ve=void 0,Xe=""):Xe+=$e;return Ke},Ce={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Re("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},De={Unicode:{Courier:Ce,"Courier-Bold":Ce,"Courier-BoldOblique":Ce,"Courier-Oblique":Ce,Helvetica:Ce,"Helvetica-Bold":Ce,"Helvetica-BoldOblique":Ce,"Helvetica-Oblique":Ce,"Times-Roman":Ce,"Times-Bold":Ce,"Times-BoldItalic":Ce,"Times-Italic":Ce}},Me={Unicode:{"Courier-Oblique":Re("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Re("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Re("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Re("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Re("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Re("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Re("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Re("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Re("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Re("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Re("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Re("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Re("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Re("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};St.events.push(["addFont",function(Ue){var He=Ue.font,Te=Me.Unicode[He.postScriptName];Te&&(He.metadata.Unicode={},He.metadata.Unicode.widths=Te.widths,He.metadata.Unicode.kerning=Te.kerning);var Ve=De.Unicode[He.postScriptName];Ve&&(He.metadata.Unicode.encoding=Ve,He.encoding=Ve.codePages[0])}])}(E.API),function(St){var t=function(xe){for(var e=xe.length,_e=new Uint8Array(e),Se=0;Se<e;Se++)_e[Se]=xe.charCodeAt(Se);return _e};St.API.events.push(["addFont",function(xe){var e=void 0,_e=xe.font,Se=xe.instance;if(!_e.isStandardFont){if(Se===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+_e.postScriptName+"').");if(typeof(e=Se.existsFileInVFS(_e.postScriptName)===!1?Se.loadFile(_e.postScriptName):Se.getFileFromVFS(_e.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+_e.postScriptName+"').");(function(Ee,Re){Re=/^\x00\x01\x00\x00/.test(Re)?t(Re):t(u(Re)),Ee.metadata=St.API.TTFFont.open(Re),Ee.metadata.Unicode=Ee.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Ee.metadata.glyIdsUsed=[0]})(_e,e)}}])}(E),function(St){function t(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-DEBoOHuL.js"),__vite__mapDeps([0,1,2]))).catch(function(xe){return Promise.reject(new Error("Could not load canvg: "+xe))}).then(function(xe){return xe.default?xe.default:xe})}E.API.addSvgAsImage=function(xe,e,_e,Se,Ee,Re,Ce,De){if(isNaN(e)||isNaN(_e))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Se)||isNaN(Ee))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Me=document.createElement("canvas");Me.width=Se,Me.height=Ee;var Ue=Me.getContext("2d");Ue.fillStyle="#fff",Ue.fillRect(0,0,Me.width,Me.height);var He={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Te=this;return t().then(function(Ve){return Ve.fromString(Ue,xe,He)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Ve){return Ve.render(He)}).then(function(){Te.addImage(Me.toDataURL("image/jpeg",1),e,_e,Se,Ee,Ce,De)})}}(),E.API.putTotalPages=function(St){var t,xe=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(St,"g"),xe=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(St,this.internal.getFont()),"g"),xe=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var e=1;e<=this.internal.getNumberOfPages();e++)for(var _e=0;_e<this.internal.pages[e].length;_e++)this.internal.pages[e][_e]=this.internal.pages[e][_e].replace(t,xe);return this},E.API.viewerPreferences=function(St,t){var xe;St=St||{},t=t||!1;var e,_e,Se,Ee={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Re=Object.keys(Ee),Ce=[],De=0,Me=0,Ue=0;function He(Ve,$e){var Ke,Be=!1;for(Ke=0;Ke<Ve.length;Ke+=1)Ve[Ke]===$e&&(Be=!0);return Be}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Ee)),this.internal.viewerpreferences.isSubscribed=!1),xe=this.internal.viewerpreferences.configuration,St==="reset"||t===!0){var Te=Re.length;for(Ue=0;Ue<Te;Ue+=1)xe[Re[Ue]].value=xe[Re[Ue]].defaultValue,xe[Re[Ue]].explicitSet=!1}if(_typeof(St)==="object"){for(_e in St)if(Se=St[_e],He(Re,_e)&&Se!==void 0){if(xe[_e].type==="boolean"&&typeof Se=="boolean")xe[_e].value=Se;else if(xe[_e].type==="name"&&He(xe[_e].valueSet,Se))xe[_e].value=Se;else if(xe[_e].type==="integer"&&Number.isInteger(Se))xe[_e].value=Se;else if(xe[_e].type==="array"){for(De=0;De<Se.length;De+=1)if(e=!0,Se[De].length===1&&typeof Se[De][0]=="number")Ce.push(String(Se[De]-1));else if(Se[De].length>1){for(Me=0;Me<Se[De].length;Me+=1)typeof Se[De][Me]!="number"&&(e=!1);e===!0&&Ce.push([Se[De][0]-1,Se[De][1]-1].join(" "))}xe[_e].value="["+Ce.join(" ")+"]"}else xe[_e].value=xe[_e].defaultValue;xe[_e].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Ve,$e=[];for(Ve in xe)xe[Ve].explicitSet===!0&&(xe[Ve].type==="name"?$e.push("/"+Ve+" /"+xe[Ve].value):$e.push("/"+Ve+" "+xe[Ve].value));$e.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+$e.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=xe,this},function(St){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',_e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Se=unescape(encodeURIComponent(e)),Ee=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Re=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ce=unescape(encodeURIComponent("</x:xmpmeta>")),De=Se.length+Ee.length+Re.length+_e.length+Ce.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+De+" >>"),this.internal.write("stream"),this.internal.write(_e+Se+Ee+Re+Ce),this.internal.write("endstream"),this.internal.write("endobj")},xe=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};St.addMetadata=function(e,_e){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:e,namespaceuri:_e||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",xe),this.internal.events.subscribe("postPutResources",t)),this}}(E.API),function(St){var t=St.API,xe=t.pdfEscape16=function(Se,Ee){for(var Re,Ce=Ee.metadata.Unicode.widths,De=["","0","00","000","0000"],Me=[""],Ue=0,He=Se.length;Ue<He;++Ue){if(Re=Ee.metadata.characterToGlyph(Se.charCodeAt(Ue)),Ee.metadata.glyIdsUsed.push(Re),Ee.metadata.toUnicode[Re]=Se.charCodeAt(Ue),Ce.indexOf(Re)==-1&&(Ce.push(Re),Ce.push([parseInt(Ee.metadata.widthOfGlyph(Re),10)])),Re=="0")return Me.join("");Re=Re.toString(16),Me.push(De[4-Re.length],Re)}return Me.join("")},e=function(Se){var Ee,Re,Ce,De,Me,Ue,He;for(Me=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Ce=[],Ue=0,He=(Re=Object.keys(Se).sort(function(Te,Ve){return Te-Ve})).length;Ue<He;Ue++)Ee=Re[Ue],Ce.length>=100&&(Me+=`
`+Ce.length+` beginbfchar
`+Ce.join(`
`)+`
endbfchar`,Ce=[]),Se[Ee]!==void 0&&Se[Ee]!==null&&typeof Se[Ee].toString=="function"&&(De=("0000"+Se[Ee].toString(16)).slice(-4),Ee=("0000"+(+Ee).toString(16)).slice(-4),Ce.push("<"+Ee+"><"+De+">"));return Ce.length&&(Me+=`
`+Ce.length+` beginbfchar
`+Ce.join(`
`)+`
endbfchar
`),Me+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(Se){(function(Ee){var Re=Ee.font,Ce=Ee.out,De=Ee.newObject,Me=Ee.putStream;if(Re.metadata instanceof St.API.TTFFont&&Re.encoding==="Identity-H"){for(var Ue=Re.metadata.Unicode.widths,He=Re.metadata.subset.encode(Re.metadata.glyIdsUsed,1),Te="",Ve=0;Ve<He.length;Ve++)Te+=String.fromCharCode(He[Ve]);var $e=De();Me({data:Te,addLength1:!0,objectId:$e}),Ce("endobj");var Ke=De();Me({data:e(Re.metadata.toUnicode),addLength1:!0,objectId:Ke}),Ce("endobj");var Be=De();Ce("<<"),Ce("/Type /FontDescriptor"),Ce("/FontName /"+F(Re.fontName)),Ce("/FontFile2 "+$e+" 0 R"),Ce("/FontBBox "+St.API.PDFObject.convert(Re.metadata.bbox)),Ce("/Flags "+Re.metadata.flags),Ce("/StemV "+Re.metadata.stemV),Ce("/ItalicAngle "+Re.metadata.italicAngle),Ce("/Ascent "+Re.metadata.ascender),Ce("/Descent "+Re.metadata.decender),Ce("/CapHeight "+Re.metadata.capHeight),Ce(">>"),Ce("endobj");var Ye=De();Ce("<<"),Ce("/Type /Font"),Ce("/BaseFont /"+F(Re.fontName)),Ce("/FontDescriptor "+Be+" 0 R"),Ce("/W "+St.API.PDFObject.convert(Ue)),Ce("/CIDToGIDMap /Identity"),Ce("/DW 1000"),Ce("/Subtype /CIDFontType2"),Ce("/CIDSystemInfo"),Ce("<<"),Ce("/Supplement 0"),Ce("/Registry (Adobe)"),Ce("/Ordering ("+Re.encoding+")"),Ce(">>"),Ce(">>"),Ce("endobj"),Re.objectNumber=De(),Ce("<<"),Ce("/Type /Font"),Ce("/Subtype /Type0"),Ce("/ToUnicode "+Ke+" 0 R"),Ce("/BaseFont /"+F(Re.fontName)),Ce("/Encoding /"+Re.encoding),Ce("/DescendantFonts ["+Ye+" 0 R]"),Ce(">>"),Ce("endobj"),Re.isAlreadyPutted=!0}})(Se)}]),t.events.push(["putFont",function(Se){(function(Ee){var Re=Ee.font,Ce=Ee.out,De=Ee.newObject,Me=Ee.putStream;if(Re.metadata instanceof St.API.TTFFont&&Re.encoding==="WinAnsiEncoding"){for(var Ue=Re.metadata.rawData,He="",Te=0;Te<Ue.length;Te++)He+=String.fromCharCode(Ue[Te]);var Ve=De();Me({data:He,addLength1:!0,objectId:Ve}),Ce("endobj");var $e=De();Me({data:e(Re.metadata.toUnicode),addLength1:!0,objectId:$e}),Ce("endobj");var Ke=De();Ce("<<"),Ce("/Descent "+Re.metadata.decender),Ce("/CapHeight "+Re.metadata.capHeight),Ce("/StemV "+Re.metadata.stemV),Ce("/Type /FontDescriptor"),Ce("/FontFile2 "+Ve+" 0 R"),Ce("/Flags 96"),Ce("/FontBBox "+St.API.PDFObject.convert(Re.metadata.bbox)),Ce("/FontName /"+F(Re.fontName)),Ce("/ItalicAngle "+Re.metadata.italicAngle),Ce("/Ascent "+Re.metadata.ascender),Ce(">>"),Ce("endobj"),Re.objectNumber=De();for(var Be=0;Be<Re.metadata.hmtx.widths.length;Be++)Re.metadata.hmtx.widths[Be]=parseInt(Re.metadata.hmtx.widths[Be]*(1e3/Re.metadata.head.unitsPerEm));Ce("<</Subtype/TrueType/Type/Font/ToUnicode "+$e+" 0 R/BaseFont/"+F(Re.fontName)+"/FontDescriptor "+Ke+" 0 R/Encoding/"+Re.encoding+" /FirstChar 29 /LastChar 255 /Widths "+St.API.PDFObject.convert(Re.metadata.hmtx.widths)+">>"),Ce("endobj"),Re.isAlreadyPutted=!0}})(Se)}]);var _e=function(Se){var Ee,Re=Se.text||"",Ce=Se.x,De=Se.y,Me=Se.options||{},Ue=Se.mutex||{},He=Ue.pdfEscape,Te=Ue.activeFontKey,Ve=Ue.fonts,$e=Te,Ke="",Be=0,Ye="",an=Ve[$e].encoding;if(Ve[$e].encoding!=="Identity-H")return{text:Re,x:Ce,y:De,options:Me,mutex:Ue};for(Ye=Re,$e=Te,Array.isArray(Re)&&(Ye=Re[0]),Be=0;Be<Ye.length;Be+=1)Ve[$e].metadata.hasOwnProperty("cmap")&&(Ee=Ve[$e].metadata.cmap.unicode.codeMap[Ye[Be].charCodeAt(0)]),Ee||Ye[Be].charCodeAt(0)<256&&Ve[$e].metadata.hasOwnProperty("Unicode")?Ke+=Ye[Be]:Ke+="";var rn="";return parseInt($e.slice(1))<14||an==="WinAnsiEncoding"?rn=He(Ke,$e).split("").map(function(Xe){return Xe.charCodeAt(0).toString(16)}).join(""):an==="Identity-H"&&(rn=xe(Ke,Ve[$e])),Ue.isHex=!0,{text:rn,x:Ce,y:De,options:Me,mutex:Ue}};t.events.push(["postProcessText",function(Se){var Ee=Se.text||"",Re=[],Ce={text:Ee,x:Se.x,y:Se.y,options:Se.options,mutex:Se.mutex};if(Array.isArray(Ee)){var De=0;for(De=0;De<Ee.length;De+=1)Array.isArray(Ee[De])&&Ee[De].length===3?Re.push([_e(Object.assign({},Ce,{text:Ee[De][0]})).text,Ee[De][1],Ee[De][2]]):Re.push(_e(Object.assign({},Ce,{text:Ee[De]})).text);Se.text=Re}else Se.text=_e(Object.assign({},Ce,{text:Ee})).text}])}(E),function(St){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};St.existsFileInVFS=function(xe){return t.call(this),this.internal.vFS[xe]!==void 0},St.addFileToVFS=function(xe,e){return t.call(this),this.internal.vFS[xe]=e,this},St.getFileFromVFS=function(xe){return t.call(this),this.internal.vFS[xe]!==void 0?this.internal.vFS[xe]:null}}(E.API),function(St){St.__bidiEngine__=St.prototype.__bidiEngine__=function(e){var _e,Se,Ee,Re,Ce,De,Me,Ue=t,He=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Te=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Ve={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},$e={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Ke=["(",")","(","<",">","<","[","]","[","{","}","{","Â«","Â»","Â«","â¹","âº","â¹","â","â","â","â½","â¾","â½","â","â","â","â¤","â¥","â¤","â©","âª","â©","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹","ï¹¤","ï¹¥","ï¹¤"],Be=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Ye=!1,an=0;this.__bidiEngine__={};var rn=function(ke){var Ge=ke.charCodeAt(),nn=Ge>>8,dn=$e[nn];return dn!==void 0?Ue[256*dn+(255&Ge)]:nn===252||nn===253?"AL":Be.test(nn)?"L":nn===8?"R":"N"},Xe=function(ke){for(var Ge,nn=0;nn<ke.length;nn++){if((Ge=rn(ke.charAt(nn)))==="L")return!1;if(Ge==="R")return!0}return!1},en=function(ke,Ge,nn,dn){var wn,Sn,yn,Pn,un=Ge[dn];switch(un){case"L":case"R":Ye=!1;break;case"N":case"AN":break;case"EN":Ye&&(un="AN");break;case"AL":Ye=!0,un="R";break;case"WS":un="N";break;case"CS":dn<1||dn+1>=Ge.length||(wn=nn[dn-1])!=="EN"&&wn!=="AN"||(Sn=Ge[dn+1])!=="EN"&&Sn!=="AN"?un="N":Ye&&(Sn="AN"),un=Sn===wn?Sn:"N";break;case"ES":un=(wn=dn>0?nn[dn-1]:"B")==="EN"&&dn+1<Ge.length&&Ge[dn+1]==="EN"?"EN":"N";break;case"ET":if(dn>0&&nn[dn-1]==="EN"){un="EN";break}if(Ye){un="N";break}for(yn=dn+1,Pn=Ge.length;yn<Pn&&Ge[yn]==="ET";)yn++;un=yn<Pn&&Ge[yn]==="EN"?"EN":"N";break;case"NSM":if(Ee&&!Re){for(Pn=Ge.length,yn=dn+1;yn<Pn&&Ge[yn]==="NSM";)yn++;if(yn<Pn){var _n=ke[dn],Nn=_n>=1425&&_n<=2303||_n===64286;if(wn=Ge[yn],Nn&&(wn==="R"||wn==="AL")){un="R";break}}}un=dn<1||(wn=Ge[dn-1])==="B"?"N":nn[dn-1];break;case"B":Ye=!1,_e=!0,un=an;break;case"S":Se=!0,un="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Ye=!1;break;case"BN":un="N"}return un},We=function(ke,Ge,nn){var dn=ke.split("");return nn&&ze(dn,nn,{hiLevel:an}),dn.reverse(),Ge&&Ge.reverse(),dn.join("")},ze=function(ke,Ge,nn){var dn,wn,Sn,yn,Pn,un=-1,_n=ke.length,Nn=0,je=[],Ie=an?Te:He,Oe=[];for(Ye=!1,_e=!1,Se=!1,wn=0;wn<_n;wn++)Oe[wn]=rn(ke[wn]);for(Sn=0;Sn<_n;Sn++){if(Pn=Nn,je[Sn]=en(ke,Oe,je,Sn),dn=240&(Nn=Ie[Pn][Ve[je[Sn]]]),Nn&=15,Ge[Sn]=yn=Ie[Nn][5],dn>0)if(dn===16){for(wn=un;wn<Sn;wn++)Ge[wn]=1;un=-1}else un=-1;if(Ie[Nn][6])un===-1&&(un=Sn);else if(un>-1){for(wn=un;wn<Sn;wn++)Ge[wn]=yn;un=-1}Oe[Sn]==="B"&&(Ge[Sn]=0),nn.hiLevel|=yn}Se&&function(Ze,sn,on){for(var hn=0;hn<on;hn++)if(Ze[hn]==="S"){sn[hn]=an;for(var An=hn-1;An>=0&&Ze[An]==="WS";An--)sn[An]=an}}(Oe,Ge,_n)},Qe=function(ke,Ge,nn,dn,wn){if(!(wn.hiLevel<ke)){if(ke===1&&an===1&&!_e)return Ge.reverse(),void(nn&&nn.reverse());for(var Sn,yn,Pn,un,_n=Ge.length,Nn=0;Nn<_n;){if(dn[Nn]>=ke){for(Pn=Nn+1;Pn<_n&&dn[Pn]>=ke;)Pn++;for(un=Nn,yn=Pn-1;un<yn;un++,yn--)Sn=Ge[un],Ge[un]=Ge[yn],Ge[yn]=Sn,nn&&(Sn=nn[un],nn[un]=nn[yn],nn[yn]=Sn);Nn=Pn}Nn++}}},gn=function(ke,Ge,nn){var dn=ke.split(""),wn={hiLevel:an};return nn||(nn=[]),ze(dn,nn,wn),function(Sn,yn,Pn){if(Pn.hiLevel!==0&&Me)for(var un,_n=0;_n<Sn.length;_n++)yn[_n]===1&&(un=Ke.indexOf(Sn[_n]))>=0&&(Sn[_n]=Ke[un+1])}(dn,nn,wn),Qe(2,dn,Ge,nn,wn),Qe(1,dn,Ge,nn,wn),dn.join("")};return this.__bidiEngine__.doBidiReorder=function(ke,Ge,nn){if(function(wn,Sn){if(Sn)for(var yn=0;yn<wn.length;yn++)Sn[yn]=yn;Re===void 0&&(Re=Xe(wn)),De===void 0&&(De=Xe(wn))}(ke,Ge),Ee||!Ce||De)if(Ee&&Ce&&Re^De)an=Re?1:0,ke=We(ke,Ge,nn);else if(!Ee&&Ce&&De)an=Re?1:0,ke=gn(ke,Ge,nn),ke=We(ke,Ge);else if(!Ee||Re||Ce||De){if(Ee&&!Ce&&Re^De)ke=We(ke,Ge),Re?(an=0,ke=gn(ke,Ge,nn)):(an=1,ke=gn(ke,Ge,nn),ke=We(ke,Ge));else if(Ee&&Re&&!Ce&&De)an=1,ke=gn(ke,Ge,nn),ke=We(ke,Ge);else if(!Ee&&!Ce&&Re^De){var dn=Me;Re?(an=1,ke=gn(ke,Ge,nn),an=0,Me=!1,ke=gn(ke,Ge,nn),Me=dn):(an=0,ke=gn(ke,Ge,nn),ke=We(ke,Ge),an=1,Me=!1,ke=gn(ke,Ge,nn),Me=dn,ke=We(ke,Ge))}}else an=0,ke=gn(ke,Ge,nn);else an=Re?1:0,ke=gn(ke,Ge,nn);return ke},this.__bidiEngine__.setOptions=function(ke){ke&&(Ee=ke.isInputVisual,Ce=ke.isOutputVisual,Re=ke.isInputRtl,De=ke.isOutputRtl,Me=ke.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],xe=new St.__bidiEngine__({isInputVisual:!0});St.API.events.push(["postProcessText",function(e){var _e=e.text,Se=(e.x,e.y,e.options||{}),Ee=(e.mutex,Se.lang,[]);if(Se.isInputVisual=typeof Se.isInputVisual!="boolean"||Se.isInputVisual,xe.setOptions(Se),Object.prototype.toString.call(_e)==="[object Array]"){var Re=0;for(Ee=[],Re=0;Re<_e.length;Re+=1)Object.prototype.toString.call(_e[Re])==="[object Array]"?Ee.push([xe.doBidiReorder(_e[Re][0]),_e[Re][1],_e[Re][2]]):Ee.push([xe.doBidiReorder(_e[Re])]);e.text=Ee}else e.text=xe.doBidiReorder(_e);xe.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function St(t){var xe;if(this.rawData=t,xe=this.contents=new ne(t),this.contents.pos=4,xe.readString(4)==="ttcf")throw new Error("TTCF not supported.");xe.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return St.open=function(t){return new St(t)},St.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},St.prototype.registerTTF=function(){var t,xe,e,_e,Se;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Ee,Re,Ce,De;for(De=[],Ee=0,Re=(Ce=this.bbox).length;Ee<Re;Ee++)t=Ce[Ee],De.push(Math.round(t*this.scaleFactor));return De}).call(this),this.stemV=0,this.post.exists?(e=255&(_e=this.post.italic_angle),32768&(xe=_e>>16)&&(xe=-(1+(65535^xe))),this.italicAngle=+(xe+"."+e)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Se=this.familyClass)===1||Se===2||Se===3||Se===4||Se===5||Se===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},St.prototype.characterToGlyph=function(t){var xe;return((xe=this.cmap.unicode)!=null?xe.codeMap[t]:void 0)||0},St.prototype.widthOfGlyph=function(t){var xe;return xe=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*xe},St.prototype.widthOfString=function(t,xe,e){var _e,Se,Ee,Re;for(Ee=0,Se=0,Re=(t=""+t).length;0<=Re?Se<Re:Se>Re;Se=0<=Re?++Se:--Se)_e=t.charCodeAt(Se),Ee+=this.widthOfGlyph(this.characterToGlyph(_e))+e*(1e3/xe)||0;return Ee*(xe/1e3)},St.prototype.lineHeight=function(t,xe){var e;return xe==null&&(xe=!1),e=xe?this.lineGap:0,(this.ascender+e-this.decender)/1e3*t},St}();var re,ne=function(){function St(t){this.data=t??[],this.pos=0,this.length=this.data.length}return St.prototype.readByte=function(){return this.data[this.pos++]},St.prototype.writeByte=function(t){return this.data[this.pos++]=t},St.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},St.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},St.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},St.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},St.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},St.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},St.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},St.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},St.prototype.readString=function(t){var xe,e;for(e=[],xe=0;0<=t?xe<t:xe>t;xe=0<=t?++xe:--xe)e[xe]=String.fromCharCode(this.readByte());return e.join("")},St.prototype.writeString=function(t){var xe,e,_e;for(_e=[],xe=0,e=t.length;0<=e?xe<e:xe>e;xe=0<=e?++xe:--xe)_e.push(this.writeByte(t.charCodeAt(xe)));return _e},St.prototype.readShort=function(){return this.readInt16()},St.prototype.writeShort=function(t){return this.writeInt16(t)},St.prototype.readLongLong=function(){var t,xe,e,_e,Se,Ee,Re,Ce;return t=this.readByte(),xe=this.readByte(),e=this.readByte(),_e=this.readByte(),Se=this.readByte(),Ee=this.readByte(),Re=this.readByte(),Ce=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^xe)+1099511627776*(255^e)+4294967296*(255^_e)+16777216*(255^Se)+65536*(255^Ee)+256*(255^Re)+(255^Ce)+1):72057594037927940*t+281474976710656*xe+1099511627776*e+4294967296*_e+16777216*Se+65536*Ee+256*Re+Ce},St.prototype.writeLongLong=function(t){var xe,e;return xe=Math.floor(t/4294967296),e=4294967295&t,this.writeByte(xe>>24&255),this.writeByte(xe>>16&255),this.writeByte(xe>>8&255),this.writeByte(255&xe),this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},St.prototype.readInt=function(){return this.readInt32()},St.prototype.writeInt=function(t){return this.writeInt32(t)},St.prototype.read=function(t){var xe,e;for(xe=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)xe.push(this.readByte());return xe},St.prototype.write=function(t){var xe,e,_e,Se;for(Se=[],e=0,_e=t.length;e<_e;e++)xe=t[e],Se.push(this.writeByte(xe));return Se},St}(),ie=function(){var St;function t(xe){var e,_e,Se;for(this.scalarType=xe.readInt(),this.tableCount=xe.readShort(),this.searchRange=xe.readShort(),this.entrySelector=xe.readShort(),this.rangeShift=xe.readShort(),this.tables={},_e=0,Se=this.tableCount;0<=Se?_e<Se:_e>Se;_e=0<=Se?++_e:--_e)e={tag:xe.readString(4),checksum:xe.readInt(),offset:xe.readInt(),length:xe.readInt()},this.tables[e.tag]=e}return t.prototype.encode=function(xe){var e,_e,Se,Ee,Re,Ce,De,Me,Ue,He,Te,Ve,$e;for($e in Te=Object.keys(xe).length,Ce=Math.log(2),Ue=16*Math.floor(Math.log(Te)/Ce),Ee=Math.floor(Ue/Ce),Me=16*Te-Ue,(_e=new ne).writeInt(this.scalarType),_e.writeShort(Te),_e.writeShort(Ue),_e.writeShort(Ee),_e.writeShort(Me),Se=16*Te,De=_e.pos+Se,Re=null,Ve=[],xe)for(He=xe[$e],_e.writeString($e),_e.writeInt(St(He)),_e.writeInt(De),_e.writeInt(He.length),Ve=Ve.concat(He),$e==="head"&&(Re=De),De+=He.length;De%4;)Ve.push(0),De++;return _e.write(Ve),e=2981146554-St(_e.data),_e.pos=Re+8,_e.writeUInt32(e),_e.data},St=function(xe){var e,_e,Se,Ee;for(xe=ve.call(xe);xe.length%4;)xe.push(0);for(Se=new ne(xe),_e=0,e=0,Ee=xe.length;e<Ee;e=e+=4)_e+=Se.readUInt32();return 4294967295&_e},t}(),ae={}.hasOwnProperty,oe=function(St,t){for(var xe in t)ae.call(t,xe)&&(St[xe]=t[xe]);function e(){this.constructor=St}return e.prototype=t.prototype,St.prototype=new e,St.__super__=t.prototype,St};re=function(){function St(t){var xe;this.file=t,xe=this.file.directory.tables[this.tag],this.exists=!!xe,xe&&(this.offset=xe.offset,this.length=xe.length,this.parse(this.file.contents))}return St.prototype.parse=function(){},St.prototype.encode=function(){},St.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},St}();var se=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="head",t.prototype.parse=function(xe){return xe.pos=this.offset,this.version=xe.readInt(),this.revision=xe.readInt(),this.checkSumAdjustment=xe.readInt(),this.magicNumber=xe.readInt(),this.flags=xe.readShort(),this.unitsPerEm=xe.readShort(),this.created=xe.readLongLong(),this.modified=xe.readLongLong(),this.xMin=xe.readShort(),this.yMin=xe.readShort(),this.xMax=xe.readShort(),this.yMax=xe.readShort(),this.macStyle=xe.readShort(),this.lowestRecPPEM=xe.readShort(),this.fontDirectionHint=xe.readShort(),this.indexToLocFormat=xe.readShort(),this.glyphDataFormat=xe.readShort()},t.prototype.encode=function(xe){var e;return(e=new ne).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(xe),e.writeShort(this.glyphDataFormat),e.data},t}(),ce=function(){function St(t,xe){var e,_e,Se,Ee,Re,Ce,De,Me,Ue,He,Te,Ve,$e,Ke,Be,Ye,an;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=xe+t.readInt(),Ue=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Ce=0;Ce<256;++Ce)this.codeMap[Ce]=t.readByte();break;case 4:for(Te=t.readUInt16(),He=Te/2,t.pos+=6,Se=function(){var rn,Xe;for(Xe=[],Ce=rn=0;0<=He?rn<He:rn>He;Ce=0<=He?++rn:--rn)Xe.push(t.readUInt16());return Xe}(),t.pos+=2,$e=function(){var rn,Xe;for(Xe=[],Ce=rn=0;0<=He?rn<He:rn>He;Ce=0<=He?++rn:--rn)Xe.push(t.readUInt16());return Xe}(),De=function(){var rn,Xe;for(Xe=[],Ce=rn=0;0<=He?rn<He:rn>He;Ce=0<=He?++rn:--rn)Xe.push(t.readUInt16());return Xe}(),Me=function(){var rn,Xe;for(Xe=[],Ce=rn=0;0<=He?rn<He:rn>He;Ce=0<=He?++rn:--rn)Xe.push(t.readUInt16());return Xe}(),_e=(this.length-t.pos+this.offset)/2,Re=function(){var rn,Xe;for(Xe=[],Ce=rn=0;0<=_e?rn<_e:rn>_e;Ce=0<=_e?++rn:--rn)Xe.push(t.readUInt16());return Xe}(),Ce=Be=0,an=Se.length;Be<an;Ce=++Be)for(Ke=Se[Ce],e=Ye=Ve=$e[Ce];Ve<=Ke?Ye<=Ke:Ye>=Ke;e=Ve<=Ke?++Ye:--Ye)Me[Ce]===0?Ee=e+De[Ce]:(Ee=Re[Me[Ce]/2+(e-Ve)-(He-Ce)]||0)!==0&&(Ee+=De[Ce]),this.codeMap[e]=65535&Ee}t.pos=Ue}return St.encode=function(t,xe){var e,_e,Se,Ee,Re,Ce,De,Me,Ue,He,Te,Ve,$e,Ke,Be,Ye,an,rn,Xe,en,We,ze,Qe,gn,ke,Ge,nn,dn,wn,Sn,yn,Pn,un,_n,Nn,je,Ie,Oe,Ze,sn,on,hn,An,Mn,In,zn;switch(dn=new ne,Ee=Object.keys(t).sort(function(Wn,Jn){return Wn-Jn}),xe){case"macroman":for($e=0,Ke=function(){var Wn=[];for(Ve=0;Ve<256;++Ve)Wn.push(0);return Wn}(),Ye={0:0},Se={},wn=0,un=Ee.length;wn<un;wn++)Ye[An=t[_e=Ee[wn]]]==null&&(Ye[An]=++$e),Se[_e]={old:t[_e],new:Ye[t[_e]]},Ke[_e]=Ye[t[_e]];return dn.writeUInt16(1),dn.writeUInt16(0),dn.writeUInt32(12),dn.writeUInt16(0),dn.writeUInt16(262),dn.writeUInt16(0),dn.write(Ke),{charMap:Se,subtable:dn.data,maxGlyphID:$e+1};case"unicode":for(Ge=[],Ue=[],an=0,Ye={},e={},Be=De=null,Sn=0,_n=Ee.length;Sn<_n;Sn++)Ye[Xe=t[_e=Ee[Sn]]]==null&&(Ye[Xe]=++an),e[_e]={old:Xe,new:Ye[Xe]},Re=Ye[Xe]-_e,Be!=null&&Re===De||(Be&&Ue.push(Be),Ge.push(_e),De=Re),Be=_e;for(Be&&Ue.push(Be),Ue.push(65535),Ge.push(65535),gn=2*(Qe=Ge.length),ze=2*Math.pow(Math.log(Qe)/Math.LN2,2),He=Math.log(ze/2)/Math.LN2,We=2*Qe-ze,Ce=[],en=[],Te=[],Ve=yn=0,Nn=Ge.length;yn<Nn;Ve=++yn){if(ke=Ge[Ve],Me=Ue[Ve],ke===65535){Ce.push(0),en.push(0);break}if(ke-(nn=e[ke].new)>=32768)for(Ce.push(0),en.push(2*(Te.length+Qe-Ve)),_e=Pn=ke;ke<=Me?Pn<=Me:Pn>=Me;_e=ke<=Me?++Pn:--Pn)Te.push(e[_e].new);else Ce.push(nn-ke),en.push(0)}for(dn.writeUInt16(3),dn.writeUInt16(1),dn.writeUInt32(12),dn.writeUInt16(4),dn.writeUInt16(16+8*Qe+2*Te.length),dn.writeUInt16(0),dn.writeUInt16(gn),dn.writeUInt16(ze),dn.writeUInt16(He),dn.writeUInt16(We),on=0,je=Ue.length;on<je;on++)_e=Ue[on],dn.writeUInt16(_e);for(dn.writeUInt16(0),hn=0,Ie=Ge.length;hn<Ie;hn++)_e=Ge[hn],dn.writeUInt16(_e);for(Mn=0,Oe=Ce.length;Mn<Oe;Mn++)Re=Ce[Mn],dn.writeUInt16(Re);for(In=0,Ze=en.length;In<Ze;In++)rn=en[In],dn.writeUInt16(rn);for(zn=0,sn=Te.length;zn<sn;zn++)$e=Te[zn],dn.writeUInt16($e);return{charMap:e,subtable:dn.data,maxGlyphID:an+1}}},St}(),ue=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="cmap",t.prototype.parse=function(xe){var e,_e,Se;for(xe.pos=this.offset,this.version=xe.readUInt16(),Se=xe.readUInt16(),this.tables=[],this.unicode=null,_e=0;0<=Se?_e<Se:_e>Se;_e=0<=Se?++_e:--_e)e=new ce(xe,this.offset),this.tables.push(e),e.isUnicode&&this.unicode==null&&(this.unicode=e);return!0},t.encode=function(xe,e){var _e,Se;return e==null&&(e="macroman"),_e=ce.encode(xe,e),(Se=new ne).writeUInt16(0),Se.writeUInt16(1),_e.table=Se.data.concat(_e.subtable),_e},t}(),he=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="hhea",t.prototype.parse=function(xe){return xe.pos=this.offset,this.version=xe.readInt(),this.ascender=xe.readShort(),this.decender=xe.readShort(),this.lineGap=xe.readShort(),this.advanceWidthMax=xe.readShort(),this.minLeftSideBearing=xe.readShort(),this.minRightSideBearing=xe.readShort(),this.xMaxExtent=xe.readShort(),this.caretSlopeRise=xe.readShort(),this.caretSlopeRun=xe.readShort(),this.caretOffset=xe.readShort(),xe.pos+=8,this.metricDataFormat=xe.readShort(),this.numberOfMetrics=xe.readUInt16()},t}(),le=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="OS/2",t.prototype.parse=function(xe){if(xe.pos=this.offset,this.version=xe.readUInt16(),this.averageCharWidth=xe.readShort(),this.weightClass=xe.readUInt16(),this.widthClass=xe.readUInt16(),this.type=xe.readShort(),this.ySubscriptXSize=xe.readShort(),this.ySubscriptYSize=xe.readShort(),this.ySubscriptXOffset=xe.readShort(),this.ySubscriptYOffset=xe.readShort(),this.ySuperscriptXSize=xe.readShort(),this.ySuperscriptYSize=xe.readShort(),this.ySuperscriptXOffset=xe.readShort(),this.ySuperscriptYOffset=xe.readShort(),this.yStrikeoutSize=xe.readShort(),this.yStrikeoutPosition=xe.readShort(),this.familyClass=xe.readShort(),this.panose=function(){var e,_e;for(_e=[],e=0;e<10;++e)_e.push(xe.readByte());return _e}(),this.charRange=function(){var e,_e;for(_e=[],e=0;e<4;++e)_e.push(xe.readInt());return _e}(),this.vendorID=xe.readString(4),this.selection=xe.readShort(),this.firstCharIndex=xe.readShort(),this.lastCharIndex=xe.readShort(),this.version>0&&(this.ascent=xe.readShort(),this.descent=xe.readShort(),this.lineGap=xe.readShort(),this.winAscent=xe.readShort(),this.winDescent=xe.readShort(),this.codePageRange=function(){var e,_e;for(_e=[],e=0;e<2;e=++e)_e.push(xe.readInt());return _e}(),this.version>1))return this.xHeight=xe.readShort(),this.capHeight=xe.readShort(),this.defaultChar=xe.readShort(),this.breakChar=xe.readShort(),this.maxContext=xe.readShort()},t}(),fe=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="post",t.prototype.parse=function(xe){var e,_e,Se;switch(xe.pos=this.offset,this.format=xe.readInt(),this.italicAngle=xe.readInt(),this.underlinePosition=xe.readShort(),this.underlineThickness=xe.readShort(),this.isFixedPitch=xe.readInt(),this.minMemType42=xe.readInt(),this.maxMemType42=xe.readInt(),this.minMemType1=xe.readInt(),this.maxMemType1=xe.readInt(),this.format){case 65536:break;case 131072:var Ee;for(_e=xe.readUInt16(),this.glyphNameIndex=[],Ee=0;0<=_e?Ee<_e:Ee>_e;Ee=0<=_e?++Ee:--Ee)this.glyphNameIndex.push(xe.readUInt16());for(this.names=[],Se=[];xe.pos<this.offset+this.length;)e=xe.readByte(),Se.push(this.names.push(xe.readString(e)));return Se;case 151552:return _e=xe.readUInt16(),this.offsets=xe.read(_e);case 196608:break;case 262144:return this.map=(function(){var Re,Ce,De;for(De=[],Ee=Re=0,Ce=this.file.maxp.numGlyphs;0<=Ce?Re<Ce:Re>Ce;Ee=0<=Ce?++Re:--Re)De.push(xe.readUInt32());return De}).call(this)}},t}(),de=function(St,t){this.raw=St,this.length=St.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},pe=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="name",t.prototype.parse=function(xe){var e,_e,Se,Ee,Re,Ce,De,Me,Ue,He,Te;for(xe.pos=this.offset,xe.readShort(),e=xe.readShort(),Ce=xe.readShort(),_e=[],Ee=0;0<=e?Ee<e:Ee>e;Ee=0<=e?++Ee:--Ee)_e.push({platformID:xe.readShort(),encodingID:xe.readShort(),languageID:xe.readShort(),nameID:xe.readShort(),length:xe.readShort(),offset:this.offset+Ce+xe.readShort()});for(De={},Ee=Ue=0,He=_e.length;Ue<He;Ee=++Ue)Se=_e[Ee],xe.pos=Se.offset,Me=xe.readString(Se.length),Re=new de(Me,Se),De[Te=Se.nameID]==null&&(De[Te]=[]),De[Se.nameID].push(Re);this.strings=De,this.copyright=De[0],this.fontFamily=De[1],this.fontSubfamily=De[2],this.uniqueSubfamily=De[3],this.fontName=De[4],this.version=De[5];try{this.postscriptName=De[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=De[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=De[7],this.manufacturer=De[8],this.designer=De[9],this.description=De[10],this.vendorUrl=De[11],this.designerUrl=De[12],this.license=De[13],this.licenseUrl=De[14],this.preferredFamily=De[15],this.preferredSubfamily=De[17],this.compatibleFull=De[18],this.sampleText=De[19]},t}(),ge=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="maxp",t.prototype.parse=function(xe){return xe.pos=this.offset,this.version=xe.readInt(),this.numGlyphs=xe.readUInt16(),this.maxPoints=xe.readUInt16(),this.maxContours=xe.readUInt16(),this.maxCompositePoints=xe.readUInt16(),this.maxComponentContours=xe.readUInt16(),this.maxZones=xe.readUInt16(),this.maxTwilightPoints=xe.readUInt16(),this.maxStorage=xe.readUInt16(),this.maxFunctionDefs=xe.readUInt16(),this.maxInstructionDefs=xe.readUInt16(),this.maxStackElements=xe.readUInt16(),this.maxSizeOfInstructions=xe.readUInt16(),this.maxComponentElements=xe.readUInt16(),this.maxComponentDepth=xe.readUInt16()},t}(),me=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="hmtx",t.prototype.parse=function(xe){var e,_e,Se,Ee,Re,Ce,De;for(xe.pos=this.offset,this.metrics=[],e=0,Ce=this.file.hhea.numberOfMetrics;0<=Ce?e<Ce:e>Ce;e=0<=Ce?++e:--e)this.metrics.push({advance:xe.readUInt16(),lsb:xe.readInt16()});for(Se=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Me,Ue;for(Ue=[],e=Me=0;0<=Se?Me<Se:Me>Se;e=0<=Se?++Me:--Me)Ue.push(xe.readInt16());return Ue}(),this.widths=(function(){var Me,Ue,He,Te;for(Te=[],Me=0,Ue=(He=this.metrics).length;Me<Ue;Me++)Ee=He[Me],Te.push(Ee.advance);return Te}).call(this),_e=this.widths[this.widths.length-1],De=[],e=Re=0;0<=Se?Re<Se:Re>Se;e=0<=Se?++Re:--Re)De.push(this.widths.push(_e));return De},t.prototype.forGlyph=function(xe){return xe in this.metrics?this.metrics[xe]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[xe-this.metrics.length]}},t}(),ve=[].slice,be=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(xe){var e,_e,Se,Ee,Re,Ce,De,Me,Ue,He;return xe in this.cache?this.cache[xe]:(Ee=this.file.loca,e=this.file.contents,_e=Ee.indexOf(xe),(Se=Ee.lengthOf(xe))===0?this.cache[xe]=null:(e.pos=this.offset+_e,Re=(Ce=new ne(e.read(Se))).readShort(),Me=Ce.readShort(),He=Ce.readShort(),De=Ce.readShort(),Ue=Ce.readShort(),this.cache[xe]=Re===-1?new we(Ce,Me,He,De,Ue):new ye(Ce,Re,Me,He,De,Ue),this.cache[xe]))},t.prototype.encode=function(xe,e,_e){var Se,Ee,Re,Ce,De;for(Re=[],Ee=[],Ce=0,De=e.length;Ce<De;Ce++)Se=xe[e[Ce]],Ee.push(Re.length),Se&&(Re=Re.concat(Se.encode(_e)));return Ee.push(Re.length),{table:Re,offsets:Ee}},t}(),ye=function(){function St(t,xe,e,_e,Se,Ee){this.raw=t,this.numberOfContours=xe,this.xMin=e,this.yMin=_e,this.xMax=Se,this.yMax=Ee,this.compound=!1}return St.prototype.encode=function(){return this.raw.data},St}(),we=function(){function St(t,xe,e,_e,Se){var Ee,Re;for(this.raw=t,this.xMin=xe,this.yMin=e,this.xMax=_e,this.yMax=Se,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Ee=this.raw;Re=Ee.readShort(),this.glyphOffsets.push(Ee.pos),this.glyphIDs.push(Ee.readUInt16()),32&Re;)Ee.pos+=1&Re?4:2,128&Re?Ee.pos+=8:64&Re?Ee.pos+=4:8&Re&&(Ee.pos+=2)}return St.prototype.encode=function(){var t,xe,e;for(xe=new ne(ve.call(this.raw.data)),t=0,e=this.glyphIDs.length;t<e;++t)xe.pos=this.glyphOffsets[t];return xe.data},St}(),Ne=function(St){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="loca",t.prototype.parse=function(xe){var e,_e;return xe.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=e===0?(function(){var Se,Ee;for(Ee=[],_e=0,Se=this.length;_e<Se;_e+=2)Ee.push(2*xe.readUInt16());return Ee}).call(this):(function(){var Se,Ee;for(Ee=[],_e=0,Se=this.length;_e<Se;_e+=4)Ee.push(xe.readUInt32());return Ee}).call(this)},t.prototype.indexOf=function(xe){return this.offsets[xe]},t.prototype.lengthOf=function(xe){return this.offsets[xe+1]-this.offsets[xe]},t.prototype.encode=function(xe,e){for(var _e=new Uint32Array(this.offsets.length),Se=0,Ee=0,Re=0;Re<_e.length;++Re)if(_e[Re]=Se,Ee<e.length&&e[Ee]==Re){++Ee,_e[Re]=Se;var Ce=this.offsets[Re],De=this.offsets[Re+1]-Ce;De>0&&(Se+=De)}for(var Me=new Array(4*_e.length),Ue=0;Ue<_e.length;++Ue)Me[4*Ue+3]=255&_e[Ue],Me[4*Ue+2]=(65280&_e[Ue])>>8,Me[4*Ue+1]=(16711680&_e[Ue])>>16,Me[4*Ue]=(4278190080&_e[Ue])>>24;return Me},t}(),Le=function(){function St(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return St.prototype.generateCmap=function(){var t,xe,e,_e,Se;for(xe in _e=this.font.cmap.tables[0].codeMap,t={},Se=this.subset)e=Se[xe],t[xe]=_e[e];return t},St.prototype.glyphsFor=function(t){var xe,e,_e,Se,Ee,Re,Ce;for(_e={},Ee=0,Re=t.length;Ee<Re;Ee++)_e[Se=t[Ee]]=this.font.glyf.glyphFor(Se);for(Se in xe=[],_e)(e=_e[Se])!=null&&e.compound&&xe.push.apply(xe,e.glyphIDs);if(xe.length>0)for(Se in Ce=this.glyphsFor(xe))e=Ce[Se],_e[Se]=e;return _e},St.prototype.encode=function(t,xe){var e,_e,Se,Ee,Re,Ce,De,Me,Ue,He,Te,Ve,$e,Ke,Be;for(_e in e=ue.encode(this.generateCmap(),"unicode"),Ee=this.glyphsFor(t),Te={0:0},Be=e.charMap)Te[(Ce=Be[_e]).old]=Ce.new;for(Ve in He=e.maxGlyphID,Ee)Ve in Te||(Te[Ve]=He++);return Me=function(Ye){var an,rn;for(an in rn={},Ye)rn[Ye[an]]=an;return rn}(Te),Ue=Object.keys(Me).sort(function(Ye,an){return Ye-an}),$e=function(){var Ye,an,rn;for(rn=[],Ye=0,an=Ue.length;Ye<an;Ye++)Re=Ue[Ye],rn.push(Me[Re]);return rn}(),Se=this.font.glyf.encode(Ee,$e,Te),De=this.font.loca.encode(Se.offsets,$e),Ke={cmap:this.font.cmap.raw(),glyf:Se.table,loca:De,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(xe)},this.font.os2.exists&&(Ke["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Ke)},St}();E.API.PDFObject=function(){var St;function t(){}return St=function(xe,e){return(Array(e+1).join("0")+xe).slice(-e)},t.convert=function(xe){var e,_e,Se,Ee;if(Array.isArray(xe))return"["+function(){var Re,Ce,De;for(De=[],Re=0,Ce=xe.length;Re<Ce;Re++)e=xe[Re],De.push(t.convert(e));return De}().join(" ")+"]";if(typeof xe=="string")return"/"+xe;if(xe!=null&&xe.isString)return"("+xe+")";if(xe instanceof Date)return"(D:"+St(xe.getUTCFullYear(),4)+St(xe.getUTCMonth(),2)+St(xe.getUTCDate(),2)+St(xe.getUTCHours(),2)+St(xe.getUTCMinutes(),2)+St(xe.getUTCSeconds(),2)+"Z)";if({}.toString.call(xe)==="[object Object]"){for(_e in Se=["<<"],xe)Ee=xe[_e],Se.push("/"+_e+" "+t.convert(Ee));return Se.push(">>"),Se.join(`
`)}return""+xe},t}();const generatePDF=(St,t,xe=!1)=>{if(!St||!t.length)return;const e=new E;let _e=20;const Se=210,Ee=297,Re=25,Ce=Se-2*Re,De=Ee-Re,Me=(He,Te,Ve=!1)=>{e.setFontSize(Te);const $e=e.splitTextToSize(He,Ce),Ke=Te*.35,Be=$e.length*Ke;if(_e+Be>De&&(e.addPage(),_e=Re),Ve){const Ye=e.getTextWidth($e[0]),an=(Se-Ye)/2;e.text($e[0],an,_e)}else e.text($e,Re,_e);_e+=Be+(Ve?15:10)};e.setFont("Helvetica","bold"),e.setFontSize(24);const Ue=e.getTextWidth(St.title);if(e.text(St.title,(210-Ue)/2,_e),_e+=20,e.setFont("Helvetica","bold"),e.setFontSize(16),e.text("Abstract",Re,_e),_e+=10,e.setFont("Helvetica","normal"),e.setFontSize(11),Me(St.abstract,11),_e+=5,t.sort((He,Te)=>He.order-Te.order).forEach(He=>{if(e.setFont("Helvetica","bold"),e.setFontSize(14),_e+20>De&&(e.addPage(),_e=Re),e.text(He.title,Re,_e),_e+=10,He.content){e.setFont("Helvetica","normal"),e.setFontSize(11);const Te=e.splitTextToSize(He.content,Ce),Ve=Te.length*(11*.35);_e+Ve>De&&(e.addPage(),_e=Re),e.text(Te,Re,_e),_e+=Ve+15}}),xe){e.save(`${St.title.toLowerCase().replace(/\s+/g,"-")}.pdf`);return}return e.output("datauristring")},ProgressBar=({progress:St,className:t=""})=>jsxRuntimeExports.jsxs("div",{className:`w-full ${t}`,children:[jsxRuntimeExports.jsx("div",{className:"bg-gray-200 rounded-full h-1.5 overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"bg-green-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${St}%`}})}),jsxRuntimeExports.jsxs("p",{className:"mt-1 text-xs text-gray-600 text-right",children:[St,"%"]})]}),SectionEditor=({section:St,isRegenerating:t,progress:xe,prompt:e,onPromptChange:_e,onRegenerate:Se,onContentChange:Ee})=>jsxRuntimeExports.jsxs("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:St.title}),t&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(ProgressBar,{progress:xe})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("textarea",{value:St.content,onChange:Re=>Ee(Re.target.value),disabled:t,rows:10,className:`w-full p-4 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 font-mono text-sm ${t?"bg-gray-50":""}`}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("input",{type:"text",value:e,onChange:Re=>_e(Re.target.value),placeholder:"Enter requirements to regenerate this section...",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500 text-sm"})}),jsxRuntimeExports.jsx("button",{onClick:Se,disabled:t||!e.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ForwardRef$4,{className:"h-4 w-4 mr-2"}),"Generate"]})})]})})]})]}),PDFPreview=({pdfUrl:St,currentPage:t,numPages:xe,onPageChange:e,onDownload:_e})=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200 bg-gray-50 p-4",children:jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"PDF Preview"})}),jsxRuntimeExports.jsx("div",{className:"p-6 overflow-auto max-h-[calc(100vh-350px)]",children:St?jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"bg-gray-50 rounded-lg p-4 flex-1 flex justify-center",children:jsxRuntimeExports.jsx(Document,{file:St,onLoadSuccess:({numPages:Se})=>e(1,Se),className:"mx-auto",children:jsxRuntimeExports.jsx(Page,{pageNumber:t,width:550,renderTextLayer:!1,renderAnnotationLayer:!1,className:"shadow-lg bg-white"})})}),jsxRuntimeExports.jsxs("div",{className:"mt-6 space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:()=>e(Math.max(1,t-1),xe),disabled:t<=1,className:"px-4 py-2 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",t," of ",xe]}),jsxRuntimeExports.jsx("button",{onClick:()=>e(Math.min(xe,t+1),xe),disabled:t>=xe,className:"px-4 py-2 text-sm border rounded-md hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),jsxRuntimeExports.jsx("button",{onClick:_e,className:"w-full flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Download PDF"})]})]}):jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-64",children:jsxRuntimeExports.jsx("p",{className:"text-gray-500",children:"Loading PDF preview..."})})})]}),TitleEditor=({title:St,onTitleChange:t})=>jsxRuntimeExports.jsxs("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden mb-6",children:[jsxRuntimeExports.jsx("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Paper Title"})}),jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsx("textarea",{value:St,onChange:xe=>t(xe.target.value),placeholder:"Enter your paper title...",className:"w-full p-4 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 font-serif text-lg",rows:2})})]}),AbstractEditor=({abstract:St,isRegenerating:t,progress:xe,onAbstractChange:e,onRegenerate:_e})=>{const[Se,Ee]=reactExports.useState("");return jsxRuntimeExports.jsxs("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"border-b border-gray-200 bg-gray-50 px-6 py-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Abstract"}),t&&jsxRuntimeExports.jsx("div",{className:"mt-2",children:jsxRuntimeExports.jsx(ProgressBar,{progress:xe})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("textarea",{value:St,onChange:Re=>e(Re.target.value),placeholder:"Enter your paper's abstract...",disabled:t,rows:6,className:`w-full p-4 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 font-serif text-base ${t?"bg-gray-50":""}`}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx("input",{type:"text",value:Se,onChange:Re=>Ee(Re.target.value),placeholder:"Enter requirements to regenerate abstract...",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500 text-sm"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{_e(Se),Ee("")},disabled:t||!Se.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ForwardRef$4,{className:"h-4 w-4 mr-2"}),"Generate"]})})]})})]})]})};pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;const Editor=()=>{const St=useNavigate(),[t,xe]=reactExports.useState(null),[e,_e]=reactExports.useState([]),[Se,Ee]=reactExports.useState(!0),[Re,Ce]=reactExports.useState(null),[De,Me]=reactExports.useState(null),[Ue,He]=reactExports.useState(1),[Te,Ve]=reactExports.useState(1),[$e,Ke]=reactExports.useState(null),[Be,Ye]=reactExports.useState(null),[an,rn]=reactExports.useState(!1),[Xe,en]=reactExports.useState(""),[We,ze]=reactExports.useState(0),[Qe,gn]=reactExports.useState(0),{paperId:ke}=useParams(),{user:Ge}=useAuth();reactExports.useEffect(()=>{(async()=>{var je,Ie,Oe,Ze;if(!Ge||!ke){Ee(!1);return}try{const sn=doc(db,"users",Ge.uid,"papers",ke),on=await getDoc(sn);if(on.exists()){const hn=on.data(),An={...hn,id:on.id,lastModified:((Ie=(je=hn.lastModified)==null?void 0:je.toDate)==null?void 0:Ie.call(je))??new Date,createdAt:((Ze=(Oe=hn.createdAt)==null?void 0:Oe.toDate)==null?void 0:Ze.call(Oe))??new Date};xe(An);const Mn=[{id:"abstract",title:"Abstract",order:0,content:""},{id:"intro",title:"Introduction",order:1,content:""},{id:"lit-review",title:"Literature Review",order:2,content:""},{id:"methodology",title:"Methodology",order:3,content:""},{id:"results",title:"Results",order:4,content:""},{id:"discussion",title:"Discussion",order:5,content:""},{id:"conclusion",title:"Conclusion",order:6,content:""}],In=Array.isArray(An.sections)?An.sections:[],zn=In.length>0?In:Mn;_e(zn.sort((Wn,Jn)=>Wn.order-Jn.order))}else Ce("Paper not found")}catch(sn){console.error("Error loading paper:",sn),Ce(sn instanceof Error?sn.message:"Failed to load paper")}finally{Ee(!1)}})()},[Ge,ke]);const nn=async Nn=>{if(!(!Ge||!ke||!t))try{const je={...t,abstract:Nn};xe(je),yn(je,e),await updateDoc(doc(db,"users",Ge.uid,"papers",ke),{abstract:Nn,lastModified:new Date})}catch(je){console.error("Error updating abstract:",je),Ce(je instanceof Error?je.message:"Failed to update abstract"),xe(t)}},dn=async Nn=>{if(!(!Ge||!ke||!t)){rn(!0),gn(10);try{const je=await apiService.improveWriting(Nn.trim(),"academic",{sectionTitle:"Abstract",paperTitle:t.title,abstract:t.abstract});gn(60);const Ie=typeof je=="object"&&"improved"in je?je.improved:String(je||"").trim();gn(80),await nn(Ie),gn(100)}catch(je){console.error("Error regenerating abstract:",je),Ce(je instanceof Error?je.message:"Failed to regenerate abstract")}finally{setTimeout(()=>{gn(0),rn(!1)},1e3)}}},wn=async Nn=>{if(!(!Ge||!ke||!t))try{const je={...t,title:Nn};xe(je),yn(je,e),await updateDoc(doc(db,"users",Ge.uid,"papers",ke),{title:Nn,lastModified:new Date})}catch(je){console.error("Error updating title:",je),Ce(je instanceof Error?je.message:"Failed to update title"),xe(t)}},Sn=async(Nn,je)=>{if(!(!Ge||!ke||!t))try{const Ie=e.map(Oe=>Oe.id===Nn?{...Oe,content:je}:Oe);_e(Ie),yn(t,Ie),await updateDoc(doc(db,"users",Ge.uid,"papers",ke),{sections:Ie,lastModified:new Date})}catch(Ie){console.error("Error updating section:",Ie),Ce(Ie instanceof Error?Ie.message:"Failed to update section"),_e(e)}},yn=(Nn,je)=>{try{Ke(null);const Ie=generatePDF(Nn,je,!1);Ie&&Me(Ie)}catch(Ie){console.error("Error generating PDF:",Ie),Ke("Failed to update PDF preview")}},Pn=async Nn=>{if(!(!Ge||!ke||!t||!Xe.trim())){Ye(Nn),ze(10);try{const je=e.find(sn=>sn.id===Nn);if(!je)throw new Error("Section not found");ze(30);const Ie=await apiService.improveWriting(Xe.trim(),"academic",{sectionTitle:je.title,paperTitle:t.title,abstract:t.abstract});ze(60);const Oe=typeof Ie=="object"&&"improved"in Ie?Ie.improved:String(Ie||"").trim();ze(80);const Ze=je.content?`${je.content}

${Oe}`:Oe;await Sn(Nn,Ze),ze(100)}catch(je){console.error("Error regenerating section:",je),Ce(je instanceof Error?je.message:"Failed to regenerate section")}finally{setTimeout(()=>{ze(0),Ye(null),en("")},1e3)}}},un=async()=>{if(!(!Ge||!ke||!t)&&window.confirm("Are you sure you want to delete this paper? This action cannot be undone."))try{await deleteDoc(doc(db,"users",Ge.uid,"papers",ke)),St("/")}catch(Nn){console.error("Error deleting paper:",Nn),Ce(Nn instanceof Error?Nn.message:"Failed to delete paper")}},_n=()=>{if(t&&e.length>0)try{generatePDF(t,e,!0)}catch(Nn){console.error("Error downloading PDF:",Nn),Ce("Failed to download PDF")}};return reactExports.useEffect(()=>{t&&e.length>0&&yn(t,e)},[t,e]),Se||!t?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4",children:Se?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-600",children:"Loading your paper..."})]}):Re?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"bg-red-50 p-4 rounded-lg mb-4",children:jsxRuntimeExports.jsx("p",{className:"text-red-800",children:Re})}),jsxRuntimeExports.jsx("button",{onClick:()=>window.history.back(),className:"text-blue-600 hover:text-blue-700",children:"Go Back"})]}):jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Paper not found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"The requested paper could not be loaded."}),jsxRuntimeExports.jsx("button",{onClick:()=>window.history.back(),className:"text-blue-600 hover:text-blue-700",children:"Go Back"})]})}):jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"max-w-full mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center bg-white shadow-sm rounded-lg p-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:["Last modified: ",t.lastModified.toLocaleString()]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsxs("button",{onClick:un,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-red-700 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[jsxRuntimeExports.jsx(ForwardRef$1,{className:"h-5 w-5 mr-2"}),"Delete Paper"]}),jsxRuntimeExports.jsx("button",{onClick:_n,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Download PDF"})]})]}),(Re||$e)&&jsxRuntimeExports.jsx("div",{className:"mb-4 bg-red-50 p-4 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-800",children:Re||$e})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6 overflow-auto max-h-[calc(100vh-250px)] pr-4",children:[jsxRuntimeExports.jsx(TitleEditor,{title:t.title,onTitleChange:wn}),jsxRuntimeExports.jsx(AbstractEditor,{abstract:t.abstract,isRegenerating:an,progress:Qe,onAbstractChange:nn,onRegenerate:dn}),e.map(Nn=>jsxRuntimeExports.jsx(SectionEditor,{section:Nn,isRegenerating:Be===Nn.id,progress:We,prompt:Xe,onPromptChange:en,onRegenerate:()=>Pn(Nn.id),onContentChange:je=>Sn(Nn.id,je)},Nn.id))]}),jsxRuntimeExports.jsx(PDFPreview,{pdfUrl:De,currentPage:Ue,numPages:Te,onPageChange:(Nn,je)=>{He(Nn),Ve(je)},onDownload:_n})]})]})})},ProtectedRoute=({children:St})=>{const{user:t,loading:xe}=useAuth();return console.log("Protected Route:",{user:t,loading:xe}),xe?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:St}):(console.log("Redirecting to login..."),jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0}))},AppRoutes=()=>(console.log("AppRoutes rendering..."),jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(SignIn,{})}),jsxRuntimeExports.jsx(Route,{path:"/signup",element:jsxRuntimeExports.jsx(SignUp,{})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Home,{})})}),jsxRuntimeExports.jsx(Route,{path:"/editor/:paperId",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Editor,{})})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/",replace:!0})})]})),App=()=>{const[St,t]=reactExports.useState(!0),[xe,e]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{await initializeFirebaseServices(),console.log("Firebase services initialized in App")}catch(Re){console.error("Failed to initialize Firebase:",Re),e(Re.message)}finally{t(!1)}})()},[]),console.log("App rendering...",{isInitializing:St,initError:xe});const _e=()=>jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Initializing application..."})]})}),Se=({error:Ee})=>jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-red-600 mb-4",children:"â ï¸"}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"Initialization Error"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:Ee})]})});return St?jsxRuntimeExports.jsx(_e,{}):xe?jsxRuntimeExports.jsx(Se,{error:xe}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(AgentProvider,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-grow",children:jsxRuntimeExports.jsx(AppRoutes,{})}),jsxRuntimeExports.jsx(Footer,{})]})})})})};client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{_typeof as _};
//# sourceMappingURL=index-DKBMFsXS.js.map
